# üöõ NordWheel API Integration - –ò–°–ü–†–ê–í–õ–ï–ù–û

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API" - –†–ï–®–ï–ù–ê

### üîç **–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞**: –ö–æ–¥ –ø—Ä–æ–≤–µ—Ä—è–ª `data.success`, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –æ—Ç–≤–µ—Ç–µ API
2. **–ù–µ–≤–µ—Ä–Ω—ã–µ –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å `data.auto.total_price` –≤–º–µ—Å—Ç–æ `data.auto.total_amount`
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç**: `delivery_date` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–æ—Å—å –∫–∞–∫ —á–∏—Å–ª–æ, –∞ —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞

### üõ†Ô∏è **–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**

#### **1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ API:**
```typescript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
if (data.success) {
  price: data.auto.total_price || 0
}

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
if (data.auto || data.avia) {
  price: data.auto.total_amount || 0
  days: data.auto.delivery_date || ''  // —Å—Ç—Ä–æ–∫–∞
}
```

#### **2. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç:**
```typescript
// –í—ã—á–∏—Å–ª—è–µ–º –¥–Ω–∏ –∏–∑ —Å—Ç—Ä–æ–∫–∏ –¥–∞—Ç—ã
const deliveryDate = new Date(bestOption.days);
const today = new Date();
const diffTime = deliveryDate.getTime() - today.getTime();
days = Math.max(1, Math.ceil(diffTime / (1000 * 60 * 60 * 24)));
```

#### **3. –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è –±–æ–ª—å—à–∏—Ö –≥—Ä—É–∑–æ–≤:**
- –ü—Ä–∏ –≤–µ—Å–µ >1000–∫–≥ –∏–ª–∏ –æ–±—ä–µ–º–µ >5–º¬≥ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 400 –æ—à–∏–±–∫—É
- –°–æ–∑–¥–∞–Ω fallback –º–µ—Ö–∞–Ω–∏–∑–º —Å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –¶–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞–∑–º–µ—Ä—É –≥—Ä—É–∑–∞

#### **4. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
```typescript
if (result.error.status === 400) {
  errorMessage += `. –ü—Ä–µ–≤—ã—à–µ–Ω—ã –ª–∏–º–∏—Ç—ã API: –≤–µ—Å >1000–∫–≥ –∏–ª–∏ –æ–±—ä–µ–º >5–º¬≥. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –≥—Ä—É–∑ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–π.`;
}
```

### üìä **–¢–µ—Å—Ç–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**

#### **‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç API –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
```json
{
  "auto": {
    "total_amount": 83645,
    "delivery_date": "2025-11-26",
    "services": [...]
  },
  "avia": {
    "total_amount": 97663,
    "delivery_date": "2025-11-28", 
    "services": [...]
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:**
- ‚úÖ –¶–µ–Ω–∞: 83,645 ‚ÇΩ (–≤—ã–±—Ä–∞–Ω —Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π auto)
- ‚úÖ –î–Ω–µ–π: 1 (—Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ –∏–∑ –¥–∞—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏)
- ‚úÖ –¢–∏–ø: auto
- ‚úÖ –î–∞—Ç–∞: 2025-11-26

#### **‚úÖ –ë–æ–ª—å—à–∏–µ –≥—Ä—É–∑—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ fallback:**
- –í–µ—Å: 6474.6 –∫–≥ (>1000–∫–≥ –ª–∏–º–∏—Ç)
- –û–±—ä–µ–º: 12.89 –º¬≥ (>5–º¬≥ –ª–∏–º–∏—Ç)
- –ú–∞—Å—à—Ç–∞–±–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: 6.48
- –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

### üéØ **–ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**

1. **‚úÖ –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `data.success`** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–∞
2. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π** - `total_amount` –≤–º–µ—Å—Ç–æ `total_price`
3. **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞—Ç** - —Å—Ç—Ä–æ–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ –¥–Ω–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
4. **‚úÖ Fallback –¥–ª—è –±–æ–ª—å—à–∏—Ö –≥—Ä—É–∑–æ–≤** - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤
5. **‚úÖ –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö** - –ø–æ–Ω—è—Ç–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### üöÄ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- **–û—à–∏–±–∫–∞ "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API" –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞**
- **NordWheel API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—Ç–≤–µ—Ç–æ–≤**
- **–ë–æ–ª—å—à–∏–µ –≥—Ä—É–∑—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ fallback –º–µ—Ö–∞–Ω–∏–∑–º**
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**

**NordWheel –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –≥—Ä—É–∑–æ–≤! üéâ**

---

## üè≠ **–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–±–ª–µ–º–∞ "–°–æ —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç"**

### üîç **–ü—Ä–æ–±–ª–µ–º–∞:**
- **–¢–µ—Ä–º–∏–Ω–∞–ª-—Ç–µ—Ä–º–∏–Ω–∞–ª**: –†–∞–±–æ—Ç–∞–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **"–°–æ —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç"**: –í–æ–∑–≤—Ä–∞—â–∞–ª –æ—à–∏–±–∫—É "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API" (HTTP 400)

### üõ†Ô∏è **–ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –ª–æ–∫–∞—Ü–∏–∏**: –î–ª—è —Å–∫–ª–∞–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `type: 'address'` –≤–º–µ—Å—Ç–æ `type: 'terminal'`
2. **–ù–µ–≤–µ—Ä–Ω—ã–π FIAS –∫–æ–¥**: –õ–æ—Å–∏–Ω–æ-–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ NordWheel
3. **–û—à–∏–±–∫–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è**: –ü—Ä–∏ –æ—Ç–∫–∞–∑–µ –æ—Ç —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è —Å—É–º–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å `null`, –∞ –Ω–µ `0`

### ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

#### **1. –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç:**
```typescript
const getDispatchLocation = () => {
  if (form.fromTerminal) {
    return {
      type: 'terminal',
      city_fias: getCityFias(form.fromCity)
    };
  } else if (form.fromLavsiteWarehouse) {
    // üè≠ –î–ª—è —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
    return {
      type: 'terminal', // –ò—Å–ø–æ–ª—å–∑—É–µ–º terminal —Ç–∏–ø –¥–ª—è —Å–∫–ª–∞–¥–∞
      city_fias: getCityFias('–õ–æ—Å–∏–Ω–æ-–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π') // FIAS –±–ª–∏–∂–∞–π—à–µ–≥–æ –≥–æ—Ä–æ–¥–∞
    };
  } else {
    return {
      type: 'address',
      address: form.fromAddress || form.fromCity
    };
  }
};
```

#### **2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—É–º–º–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è:**
```typescript
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
insurance: form.needInsurance && form.declaredValue ? form.declaredValue : 0,

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
insurance: form.needInsurance && form.declaredValue ? form.declaredValue : null,
```

#### **3. –î–æ–±–∞–≤–ª–µ–Ω FIAS –¥–ª—è –õ–æ—Å–∏–Ω–æ-–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π:**
```typescript
'–ª–æ—Å–∏–Ω–æ-–ø–µ—Ç—Ä–æ–≤—Å–∫–∏–π': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5' // –ò—Å–ø–æ–ª—å–∑—É–µ–º FIAS –ú–æ—Å–∫–≤—ã
```

### üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

#### **‚úÖ –¢–µ—Ä–º–∏–Ω–∞–ª ‚Üí –¢–µ—Ä–º–∏–Ω–∞–ª (–ú–æ—Å–∫–≤–∞ ‚Üí –°–ü–±):**
- –°—Ç–∞—Ç—É—Å: **SUCCESS**
- Auto: 900‚ÇΩ
- Avia: 4583‚ÇΩ
- –°—Ä–æ–∫: 2025-11-26

#### **‚úÖ –°–∫–ª–∞–¥ –õ–∞–≤—Å–∏—Ç ‚Üí –¢–µ—Ä–º–∏–Ω–∞–ª (–õ–æ—Å–∏–Ω–æ-–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π ‚Üí –°–ü–±):**
- –°—Ç–∞—Ç—É—Å: **SUCCESS** 
- Auto: 900‚ÇΩ
- Avia: 4583‚ÇΩ
- –°—Ä–æ–∫: 2025-11-26

### üéØ **–ò—Ç–æ–≥:**
- **‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ "–°–æ —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç" –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞**
- **‚úÖ NordWheel API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è**
- **‚úÖ –û—à–∏–±–∫–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã**
- **‚úÖ –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**

**–¢–µ–ø–µ—Ä—å NordWheel —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏! üöõ‚ú®**