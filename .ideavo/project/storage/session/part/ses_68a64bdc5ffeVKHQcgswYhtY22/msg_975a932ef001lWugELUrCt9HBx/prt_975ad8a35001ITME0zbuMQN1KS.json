{
  "id": "prt_975ad8a35001ITME0zbuMQN1KS",
  "messageID": "msg_975a932ef001lWugELUrCt9HBx",
  "sessionID": "ses_68a64bdc5ffeVKHQcgswYhtY22",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_015XkeamG7eBnBJ3t6iE7kFf",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx"
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import React, { useState, useEffect, useCallback } from 'react';\n00004| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00005| import { Button } from '@/components/ui/button';\n00006| import { Input } from '@/components/ui/input';\n00007| import { Label } from '@/components/ui/label';\n00008| import { Checkbox } from '@/components/ui/checkbox';\n00009| import { Plus, Truck, Building2, Map } from 'lucide-react';\n00010| import { Alert, AlertDescription } from '@/components/ui/alert';\n00011| import { Badge } from '@/components/ui/badge';\n00012| import { Separator } from '@/components/ui/separator';\n00013| import { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\n00014| \n00015| interface Cargo {\n00016|   id: string;\n00017|   length: number;\n00018|   width: number;\n00019|   height: number;\n00020|   weight: number;\n00021| }\n00022| \n00023| interface DeliveryForm {\n00024|   cargos: Cargo[];\n00025|   fromCity: string;\n00026|   toCity: string;\n00027|   fromAddress: string;\n00028|   toAddress: string;\n00029|   declaredValue: number;\n00030|   needPackaging: boolean;\n00031|   needLoading: boolean;\n00032|   needCarry: boolean;\n00033|   floor: number;\n00034|   hasFreightLift: boolean;\n00035|   needInsurance: boolean;\n00036|   fromTerminal: boolean;\n00037|   toTerminal: boolean;\n00038|   fromAddressDelivery: boolean;\n00039|   toAddressDelivery: boolean;\n00040| }\n00041| \n00042| interface CalculationResult {\n00043|   company: string;\n00044|   price: number;\n00045|   days: number;\n00046|   details?: any;\n00047|   error?: string;\n00048|   requestData?: any;\n00049|   responseData?: any;\n00050| }\n00051| \n00052| interface AddressSuggestion {\n00053|   value: string;\n00054|   unrestricted_value: string;\n00055|   data: {\n00056|     city?: string;\n00057|     street?: string;\n00058|     house?: string;\n00059|   };\n00060| }\n00061| \n00062| const COMPANIES = [\n00063|   { name: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏', logo: 'üì¶', connected: true },\n00064|   { name: '–ü–≠–ö', logo: 'üöõ', connected: true },\n00065|   { name: 'Nord Wheel', logo: 'üåê', connected: true },\n00066|   { name: 'Rail Continent', logo: 'üöÇ', connected: true }\n00067| ];\n00068| \n00069| export default function Home() {\n00070|   const [form, setForm] = useState<DeliveryForm>({\n00071|     cargos: [{ id: '1', length: 0, width: 0, height: 0, weight: 0 }],\n00072|     fromCity: '',\n00073|     toCity: '',\n00074|     fromAddress: '',\n00075|     toAddress: '',\n00076|     declaredValue: 0,\n00077|     needPackaging: false,\n00078|     needLoading: false,\n00079|     needCarry: false,\n00080|     floor: 1,\n00081|     hasFreightLift: false,\n00082|     needInsurance: false,\n00083|     fromTerminal: true,\n00084|     toTerminal: true,\n00085|     fromAddressDelivery: false,\n00086|     toAddressDelivery: false\n00087|   });\n00088| \n00089|   const [suggestions, setSuggestions] = useState<AddressSuggestion[]>([]);\n00090|   const [showSuggestions, setShowSuggestions] = useState(false);\n00091|   const [activeField, setActiveField] = useState('');\n00092|   const [calculations, setCalculations] = useState<CalculationResult[]>([]);\n00093|   const [calculating, setCalculating] = useState(false);\n00094|   const [expandedDetails, setExpandedDetails] = useState<{ [key: string]: boolean }>({});\n00095| \n00096|   // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n00097|   useEffect(() => {\n00098|     const saved = localStorage.getItem('deliveryForm');\n00099|     if (saved) {\n00100|       setForm(JSON.parse(saved));\n00101|     }\n00102|   }, []);\n00103| \n00104|   // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏\n00105|   useEffect(() => {\n00106|     localStorage.setItem('deliveryForm', JSON.stringify(form));\n00107|   }, [form]);\n00108| \n00109|   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏\n00110|   useEffect(() => {\n00111|     if (form.declaredValue > 0) {\n00112|       setForm(prev => ({ ...prev, needInsurance: true }));\n00113|     }\n00114|   }, [form.declaredValue]);\n00115| \n00116|   const searchAddresses = useCallback(async (query: string, field: string) => {\n00117|     if (query.length < 3) {\n00118|       setSuggestions([]);\n00119|       setShowSuggestions(false);\n00120|       return;\n00121|     }\n00122| \n00123|     setActiveField(field);\n00124|     \n00125|     try {\n00126|       const response = await fetch('https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address', {\n00127|         method: 'POST',\n00128|         headers: {\n00129|           'Content-Type': 'application/json',\n00130|           'Accept': 'application/json',\n00131|           'Authorization': 'Token eb87bbb3789bb43ed465f796892ea951f9e91008'\n00132|         },\n00133|         body: JSON.stringify({\n00134|           query: query,\n00135|           count: 10\n00136|         })\n00137|       });\n00138| \n00139|       if (response.ok) {\n00140|         const data = await response.json();\n00141|         setSuggestions(data.suggestions || []);\n00142|         setShowSuggestions(true);\n00143|       }\n00144|     } catch (error) {\n00145|       console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫:', error);\n00146|     }\n00147|   }, []);\n00148| \n00149|   const debounceTimer = React.useRef<NodeJS.Timeout>();\n00150|   const handleAddressChange = (field: string, value: string) => {\n00151|     setForm(prev => ({ ...prev, [field]: value }));\n00152|     \n00153|     clearTimeout(debounceTimer.current);\n00154|     debounceTimer.current = setTimeout(() => {\n00155|       searchAddresses(value, field);\n00156|     }, 50);\n00157|   };\n00158| \n00159|   const selectSuggestion = (suggestion: AddressSuggestion) => {\n00160|     setForm(prev => ({ ...prev, [activeField]: suggestion.value }));\n00161|     setShowSuggestions(false);\n00162|     setSuggestions([]);\n00163|   };\n00164| \n00165|   const addCargo = () => {\n00166|     const newId = (form.cargos.length + 1).toString();\n00167|     setForm(prev => ({\n00168|       ...prev,\n00169|       cargos: [...prev.cargos, { id: newId, length: 0, width: 0, height: 0, weight: 0 }]\n00170|     }));\n00171|   };\n00172| \n00173|   const updateCargo = (id: string, field: string, value: number) => {\n00174|     setForm(prev => ({\n00175|       ...prev,\n00176|       cargos: prev.cargos.map(cargo => \n00177|         cargo.id === id ? { ...cargo, [field]: value } : cargo\n00178|       )\n00179|     }));\n00180|   };\n00181| \n00182|   const removeCargo = (id: string) => {\n00183|     if (form.cargos.length > 1) {\n00184|       setForm(prev => ({\n00185|         ...prev,\n00186|         cargos: prev.cargos.filter(cargo => cargo.id !== id)\n00187|       }));\n00188|     }\n00189|   };\n00190| \n00191|   // –ü–æ–ª—É—á–µ–Ω–∏–µ sessionID –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n00192|   const getDellinSessionId = async (): Promise<string | null> => {\n00193|     try {\n00194|       const authResponse = await fetch('https://api.dellin.ru/v3/auth/login.json', {\n00195|         method: 'POST',\n00196|         headers: {\n00197|           'Content-Type': 'application/json'\n00198|         },\n00199|         body: JSON.stringify({\n00200|           appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n00201|           login: 'service@lavsit.ru',\n00202|           password: 'edcwsx123QAZ'\n00203|         })\n00204|       });\n00205| \n00206|       if (authResponse.ok) {\n00207|         const authData = await authResponse.json();\n00208|         return authData.data?.sessionID || null;\n00209|       }\n00210|     } catch (error) {\n00211|       console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏:', error);\n00212|     }\n00213|     return null;\n00214|   };\n00215| \n00216|   // –†–∞—Å—á–µ—Ç –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n00217|   const calculateDellin = async (): Promise<CalculationResult> => {\n00218|     try {\n00219|       const sessionID = await getDellinSessionId();\n00220|       \n00221|       if (!sessionID) {\n00222|         return {\n00223|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00224|           price: 0,\n00225|           days: 0,\n00226|           error: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å sessionID'\n00227|         };\n00228|       }\n00229| \n00230|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n00231|       const totalVolume = form.cargos.reduce((sum, cargo) => \n00232|         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n00233|       );\n00234| \n00235|       const requestData = {\n00236|         appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n00237|         sessionID: sessionID,\n00238|         delivery: {\n00239|           deliveryType: {\n00240|             type: 'auto'\n00241|           },\n00242|           derival: {\n00243|             variant: form.fromTerminal ? 'terminal' : 'address',\n00244|             address: {\n00245|               search: form.fromAddress || form.fromCity\n00246|             },\n00247|             handling: form.needCarry ? {\n00248|               freightLift: form.hasFreightLift,\n00249|               toFloor: form.floor,\n00250|               carry: 50\n00251|             } : undefined\n00252|           },\n00253|           arrival: {\n00254|             variant: form.toTerminal ? 'terminal' : 'address',\n00255|             address: {\n00256|               search: form.toAddress || form.toCity\n00257|             },\n00258|             handling: form.needCarry ? {\n00259|               freightLift: form.hasFreightLift,\n00260|               toFloor: form.floor,\n00261|               carry: 50\n00262|             } : undefined\n00263|           }\n00264|         },\n00265|         cargo: {\n00266|           quantity: form.cargos.length,\n00267|           length: Math.max(...form.cargos.map(c => c.length)) / 100,\n00268|           width: Math.max(...form.cargos.map(c => c.width)) / 100,\n00269|           height: Math.max(...form.cargos.map(c => c.height)) / 100,\n00270|           weight: totalWeight,\n00271|           totalVolume: totalVolume,\n00272|           totalWeight: totalWeight,\n00273|           oversizedWeight: 0,\n00274|           oversizedVolume: 0,\n00275|           insurance: form.needInsurance ? {\n00276|             statedValue: form.declaredValue,\n00277|             term: false\n00278|           } : undefined\n00279|         },\n00280|         payment: {\n00281|           type: 'cash'\n00282|         }\n00283|       };\n00284| \n00285|       const response = await fetch('https://api.dellin.ru/v2/calculator.json', {\n00286|         method: 'POST',\n00287|         headers: {\n00288|           'Content-Type': 'application/json'\n00289|         },\n00290|         body: JSON.stringify(requestData)\n00291|       });\n00292| \n00293|       const data = await response.json();\n00294| \n00295|       if (response.ok && data.data) {\n00296|         let totalPrice = data.data.price || 0;\n00297|         \n00298|         // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏\n00299|         if (form.needInsurance && data.data.insurance) {\n00300|           totalPrice += data.data.insurance;\n00301|         }\n00302|         \n00303|         // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å —É–ø–∞–∫–æ–≤–∫–∏ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)\n00304|         if (form.needPackaging) {\n00305|           totalPrice += Math.round(totalWeight * 50); // –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —É–ø–∞–∫–æ–≤–∫–∏\n00306|         }\n00307| \n00308|         return {\n00309|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00310|           price: totalPrice,\n00311|           days: data.data.deliveryTerm || 0,\n00312|           details: data.data,\n00313|           requestData,\n00314|           responseData: data\n00315|         };\n00316|       } else {\n00317|         return {\n00318|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00319|           price: 0,\n00320|           days: 0,\n00321|           error: data.metadata?.detail || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞',\n00322|           requestData,\n00323|           responseData: data\n00324|         };\n00325|       }\n00326|     } catch (error) {\n00327|       return {\n00328|         company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00329|         price: 0,\n00330|         days: 0,\n00331|         error: '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º',\n00332|         requestData: null,\n00333|         responseData: null\n00334|       };\n00335|     }\n00336|   };\n00337| \n00338|   // –ë–∞–∑–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –¢–ö (–∑–∞–≥–ª—É—à–∫–∏)\n00339|   const calculatePEK = async (): Promise<CalculationResult> => {\n00340|     // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ –ü–≠–ö\n00341|     await new Promise(resolve => setTimeout(resolve, 1000));\n00342|     const basePrice = form.cargos.reduce((sum, cargo) => sum + cargo.weight * 15, 0);\n00343|     let totalPrice = basePrice;\n00344|     \n00345|     if (form.needInsurance) totalPrice += form.declaredValue * 0.02;\n00346|     if (form.needPackaging) totalPrice += basePrice * 0.1;\n00347|     \n00348|     return {\n00349|       company: '–ü–≠–ö',\n00350|       price: totalPrice,\n00351|       days: 3\n00352|     };\n00353|   };\n00354| \n00355|   const calculateNordWheel = async (): Promise<CalculationResult> => {\n00356|     await new Promise(resolve => setTimeout(resolve, 800));\n00357|     const basePrice = form.cargos.reduce((sum, cargo) => sum + cargo.weight * 18, 0);\n00358|     let totalPrice = basePrice;\n00359|     \n00360|     if (form.needInsurance) totalPrice += form.declaredValue * 0.015;\n00361|     if (form.needPackaging) totalPrice += basePrice * 0.12;\n00362|     \n00363|     return {\n00364|       company: 'Nord Wheel',\n00365|       price: totalPrice,\n00366|       days: 4\n00367|     };\n00368|   };\n00369| \n00370|   const calculateRailContinent = async (): Promise<CalculationResult> => {\n00371|     await new Promise(resolve => setTimeout(resolve, 1200));\n00372|     const basePrice = form.cargos.reduce((sum, cargo) => sum + cargo.weight * 12, 0);\n00373|     let totalPrice = basePrice;\n00374|     \n00375|     if (form.needInsurance) totalPrice += form.declaredValue * 0.025;\n00376|     if (form.needPackaging) totalPrice += basePrice * 0.08;\n00377|     \n00378|     return {\n00379|       company: 'Rail Continent',\n00380|       price: totalPrice,\n00381|       days: 5\n00382|     };\n00383|   };\n00384| \n00385|   const handleCalculate = async () => {\n00386|     setCalculating(true);\n00387|     setCalculations([]);\n00388|     \n00389|     try {\n00390|       const results = await Promise.all([\n00391|         calculateDellin(),\n00392|         calculatePEK(),\n00393|         calculateNordWheel(),\n00394|         calculateRailContinent()\n00395|       ]);\n00396|       \n00397|       // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ\n00398|       const sortedResults = results\n00399|         .filter(result => !result.error)\n00400|         .sort((a, b) => a.price - b.price)\n00401|         .concat(results.filter(result => result.error));\n00402|       \n00403|       setCalculations(sortedResults);\n00404|     } catch (error) {\n00405|       console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ:', error);\n00406|     } finally {\n00407|       setCalculating(false);\n00408|     }\n00409|   };\n00410| \n00411|   const exportToPDF = () => {\n00412|     if (typeof window !== 'undefined') {\n00413|       window.print();\n00414|     }\n00415|   };\n00416| \n00417|   const toggleDetails = (company: string) => {\n00418|     setExpandedDetails(prev => ({\n00419|       ...prev,\n00420|       [company]: !prev[company]\n00421|     }));\n00422|   };\n00423| \n00424|   return (\n00425|     <div className=\"min-h-screen bg-gray-900 text-white p-4\">\n00426|       <div className=\"max-w-7xl mx-auto\">\n00427|         <h1 className=\"text-3xl font-bold text-center mb-8 text-blue-400\">\n00428|           –ú–µ–∂–¥—É–≥–æ—Ä–æ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞ –õ–∞–≤—Å–∏—Ç\n00429|         </h1>\n00430|         \n00431|         <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 h-screen overflow-hidden\">\n00432|           {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - —Ñ–æ—Ä–º–∞ */}\n00433|           <div className=\"space-y-4 overflow-y-auto pr-4\">\n00434|             {/* –ì—Ä—É–∑—ã */}\n00435|             <Card className=\"bg-gray-800 border-gray-700\">\n00436|               <CardHeader>\n00437|                 <CardTitle className=\"text-white flex items-center gap-2\">\n00438|                   <Truck className=\"h-5 w-5\" />\n00439|                   –ì—Ä—É–∑—ã\n00440|                 </CardTitle>\n00441|               </CardHeader>\n00442|               <CardContent className=\"space-y-4\">\n00443|                 {form.cargos.map((cargo, index) => (\n00444|                   <div key={cargo.id} className=\"border border-gray-600 rounded p-4\">\n00445|                     <div className=\"flex justify-between items-center mb-3\">\n00446|                       <h4 className=\"text-lg font-medium\">–ì—Ä—É–∑ ‚Ññ{index + 1}</h4>\n00447|                       {form.cargos.length > 1 && (\n00448|                         <Button\n00449|                           variant=\"destructive\"\n00450|                           size=\"sm\"\n00451|                           onClick={() => removeCargo(cargo.id)}\n00452|                         >\n00453|                           –£–¥–∞–ª–∏—Ç—å\n00454|                         </Button>\n00455|                       )}\n00456|                     </div>\n00457|                     <div className=\"grid grid-cols-2 gap-3\">\n00458|                       <div>\n00459|                         <Label>–î–ª–∏–Ω–∞ (—Å–º)</Label>\n00460|                         <Input\n00461|                           type=\"number\"\n00462|                           value={cargo.length || ''}\n00463|                           onChange={(e) => updateCargo(cargo.id, 'length', Number(e.target.value))}\n00464|                           className=\"bg-gray-700 border-gray-600\"\n00465|                         />\n00466|                       </div>\n00467|                       <div>\n00468|                         <Label>–®–∏—Ä–∏–Ω–∞ (—Å–º)</Label>\n00469|                         <Input\n00470|                           type=\"number\"\n00471|                           value={cargo.width || ''}\n00472|                           onChange={(e) => updateCargo(cargo.id, 'width', Number(e.target.value))}\n00473|                           className=\"bg-gray-700 border-gray-600\"\n00474|                         />\n00475|                       </div>\n00476|                       <div>\n00477|                         <Label>–í—ã—Å–æ—Ç–∞ (—Å–º)</Label>\n00478|                         <Input\n00479|                           type=\"number\"\n00480|                           value={cargo.height || ''}\n00481|                           onChange={(e) => updateCargo(cargo.id, 'height', Number(e.target.value))}\n00482|                           className=\"bg-gray-700 border-gray-600\"\n00483|                         />\n00484|                       </div>\n00485|                       <div>\n00486|                         <Label>–í–µ—Å (–∫–≥)</Label>\n00487|                         <Input\n00488|                           type=\"number\"\n00489|                           value={cargo.weight || ''}\n00490|                           onChange={(e) => updateCargo(cargo.id, 'weight', Number(e.target.value))}\n00491|                           className=\"bg-gray-700 border-gray-600\"\n00492|                         />\n00493|                       </div>\n00494|                     </div>\n00495|                   </div>\n00496|                 ))}\n00497|                 <Button onClick={addCargo} className=\"w-full\" variant=\"outline\">\n00498|                   <Plus className=\"h-4 w-4 mr-2\" />\n00499|                   –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–∑\n00500|                 </Button>\n00501|               </CardContent>\n00502|             </Card>\n00503| \n00504|             {/* –ú–∞—Ä—à—Ä—É—Ç */}\n00505|             <Card className=\"bg-gray-800 border-gray-700\">\n00506|               <CardHeader>\n00507|                 <CardTitle className=\"text-white flex items-center gap-2\">\n00508|                   <Map className=\"h-5 w-5\" />\n00509|                   –ú–∞—Ä—à—Ä—É—Ç\n00510|                 </CardTitle>\n00511|               </CardHeader>\n00512|               <CardContent className=\"space-y-4\">\n00513|                 {/* –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */}\n00514|                 <div className=\"space-y-3\">\n00515|                   <Label className=\"text-lg font-medium\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</Label>\n00516|                   <div className=\"flex gap-4\">\n00517|                     <label className=\"flex items-center space-x-2\">\n00518|                       <input\n00519|                         type=\"radio\"\n00520|                         name=\"fromDelivery\"\n00521|                         checked={form.fromTerminal}\n00522|                         onChange={() => setForm(prev => ({ ...prev, fromTerminal: true, fromAddressDelivery: false }))}\n00523|                       />\n00524|                       <span>–û—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞</span>\n00525|                     </label>\n00526|                     <label className=\"flex items-center space-x-2\">\n00527|                       <input\n00528|                         type=\"radio\"\n00529|                         name=\"fromDelivery\"\n00530|                         checked={form.fromAddressDelivery}\n00531|                         onChange={() => setForm(prev => ({ ...prev, fromTerminal: false, fromAddressDelivery: true }))}\n00532|                       />\n00533|                       <span>–û—Ç –∞–¥—Ä–µ—Å–∞</span>\n00534|                     </label>\n00535|                   </div>\n00536|                   \n00537|                   <div>\n00538|                     <Label>–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Label>\n00539|                     <Input\n00540|                       value={form.fromCity}\n00541|                       onChange={(e) => handleAddressChange('fromCity', e.target.value)}\n00542|                       placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥\"\n00543|                       className=\"bg-gray-700 border-gray-600\"\n00544|                     />\n00545|                   </div>\n00546|                   \n00547|                   {form.fromAddressDelivery && (\n00548|                     <div>\n00549|                       <Label>–ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Label>\n00550|                       <div className=\"relative\">\n00551|                         <Input\n00552|                           value={form.fromAddress}\n00553|                           onChange={(e) => handleAddressChange('fromAddress', e.target.value)}\n00554|                           placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å\"\n00555|                           className=\"bg-gray-700 border-gray-600\"\n00556|                         />\n00557|                       </div>\n00558|                     </div>\n00559|                   )}\n00560|                 </div>\n00561| \n00562|                 <Separator className=\"bg-gray-600\" />\n00563| \n00564|                 {/* –î–æ—Å—Ç–∞–≤–∫–∞ */}\n00565|                 <div className=\"space-y-3\">\n00566|                   <Label className=\"text-lg font-medium\">–î–æ—Å—Ç–∞–≤–∫–∞</Label>\n00567|                   <div className=\"flex gap-4\">\n00568|                     <label className=\"flex items-center space-x-2\">\n00569|                       <input\n00570|                         type=\"radio\"\n00571|                         name=\"toDelivery\"\n00572|                         checked={form.toTerminal}\n00573|                         onChange={() => setForm(prev => ({ ...prev, toTerminal: true, toAddressDelivery: false }))}\n00574|                       />\n00575|                       <span>–î–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞</span>\n00576|                     </label>\n00577|                     <label className=\"flex items-center space-x-2\">\n00578|                       <input\n00579|                         type=\"radio\"\n00580|                         name=\"toDelivery\"\n00581|                         checked={form.toAddressDelivery}\n00582|                         onChange={() => setForm(prev => ({ ...prev, toTerminal: false, toAddressDelivery: true }))}\n00583|                       />\n00584|                       <span>–î–æ –∞–¥—Ä–µ—Å–∞</span>\n00585|                     </label>\n00586|                   </div>\n00587|                   \n00588|                   <div>\n00589|                     <Label>–ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏</Label>\n00590|                     <Input\n00591|                       value={form.toCity}\n00592|                       onChange={(e) => handleAddressChange('toCity', e.target.value)}\n00593|                       placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥\"\n00594|                       className=\"bg-gray-700 border-gray-600\"\n00595|                     />\n00596|                   </div>\n00597|                   \n00598|                   {form.toAddressDelivery && (\n00599|                     <div>\n00600|                       <Label>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</Label>\n00601|                       <div className=\"relative\">\n00602|                         <Input\n00603|                           value={form.toAddress}\n00604|                           onChange={(e) => handleAddressChange('toAddress', e.target.value)}\n00605|                           placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å\"\n00606|                           className=\"bg-gray-700 border-gray-600\"\n00607|                         />\n00608|                       </div>\n00609|                     </div>\n00610|                   )}\n00611|                 </div>\n00612|               </CardContent>\n00613|             </Card>\n00614| \n00615|             {/* –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ */}\n00616|             {showSuggestions && suggestions.length > 0 && (\n00617|               <Card className=\"bg-gray-800 border-gray-700 absolute z-10 w-96\">\n00618|                 <CardContent className=\"p-2\">\n00619|                   {suggestions.map((suggestion, index) => (\n00620|                     <div\n00621|                       key={index}\n00622|                       className=\"p-2 hover:bg-gray-700 cursor-pointer text-sm\"\n00623|                       onClick={() => selectSuggestion(suggestion)}\n00624|                     >\n00625|                       {suggestion.value}\n00626|                     </div>\n00627|                   ))}\n00628|                 </CardContent>\n00629|               </Card>\n00630|             )}\n00631| \n00632|             {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã */}\n00633|             <Card className=\"bg-gray-800 border-gray-700\">\n00634|               <CardHeader>\n00635|                 <CardTitle className=\"text-white\">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</CardTitle>\n00636|               </CardHeader>\n00637|               <CardContent className=\"space-y-4\">\n00638|                 <div>\n00639|                   <Label>–û–±—ä—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (—Ä—É–±.)</Label>\n00640|                   <Input\n00641|                     type=\"number\"\n00642|                     value={form.declaredValue || ''}\n00643|                     onChange={(e) => setForm(prev => ({ ...prev, declaredValue: Number(e.target.value) }))}\n00644|                     className=\"bg-gray-700 border-gray-600\"\n00645|                   />\n00646|                 </div>\n00647|                 \n00648|                 <div className=\"space-y-3\">\n00649|                   <div className=\"flex items-center space-x-2\">\n00650|                     <Checkbox\n00651|                       id=\"packaging\"\n00652|                       checked={form.needPackaging}\n00653|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needPackaging: checked as boolean }))}\n00654|                     />\n00655|                     <Label htmlFor=\"packaging\">–¢—Ä–µ–±—É–µ—Ç—Å—è —É–ø–∞–∫–æ–≤–∫–∞</Label>\n00656|                   </div>\n00657|                   \n00658|                   <div className=\"flex items-center space-x-2\">\n00659|                     <Checkbox\n00660|                       id=\"insurance\"\n00661|                       checked={form.needInsurance}\n00662|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needInsurance: checked as boolean }))}\n00663|                     />\n00664|                     <Label htmlFor=\"insurance\">–¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞</Label>\n00665|                   </div>\n00666|                   \n00667|                   <div className=\"flex items-center space-x-2\">\n00668|                     <Checkbox\n00669|                       id=\"loading\"\n00670|                       checked={form.needLoading}\n00671|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needLoading: checked as boolean }))}\n00672|                     />\n00673|                     <Label htmlFor=\"loading\">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≥—Ä—É–∑–∫–∞/—Ä–∞–∑–≥—Ä—É–∑–∫–∞</Label>\n00674|                   </div>\n00675|                   \n00676|                   <div className=\"flex items-center space-x-2\">\n00677|                     <Checkbox\n00678|                       id=\"carry\"\n00679|                       checked={form.needCarry}\n00680|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needCarry: checked as boolean }))}\n00681|                     />\n00682|                     <Label htmlFor=\"carry\">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—ä–µ–º</Label>\n00683|                   </div>\n00684|                   \n00685|                   {form.needCarry && (\n00686|                     <div className=\"ml-6 space-y-3 border-l-2 border-gray-600 pl-4\">\n00687|                       <div>\n00688|                         <Label>–≠—Ç–∞–∂</Label>\n00689|                         <Input\n00690|                           type=\"number\"\n00691|                           value={form.floor}\n00692|                           onChange={(e) => setForm(prev => ({ ...prev, floor: Number(e.target.value) }))}\n00693|                           className=\"bg-gray-700 border-gray-600\"\n00694|                         />\n00695|                       </div>\n00696|                       <div className=\"flex items-center space-x-2\">\n00697|                         <Checkbox\n00698|                           id=\"freightLift\"\n00699|                           checked={form.hasFreightLift}\n00700|                           onCheckedChange={(checked) => setForm(prev => ({ ...prev, hasFreightLift: checked as boolean }))}\n00701|                         />\n00702|                         <Label htmlFor=\"freightLift\">–ù–∞–ª–∏—á–∏–µ –≥—Ä—É–∑–æ–≤–æ–≥–æ –ª–∏—Ñ—Ç–∞</Label>\n00703|                       </div>\n00704|                     </div>\n00705|                   )}\n00706|                 </div>\n00707|                 \n00708|                 <Button \n00709|                   onClick={handleCalculate} \n00710|                   className=\"w-full bg-blue-600 hover:bg-blue-700\" \n00711|                   disabled={calculating}\n00712|                 >\n00713|                   {calculating ? '–†–∞—Å—á–µ—Ç...' : '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å'}\n00714|                 </Button>\n00715|               </CardContent>\n00716|             </Card>\n00717|           </div>\n00718| \n00719|           {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã */}\n00720|           <div className=\"space-y-4 overflow-y-auto\">\n00721|             {calculations.length > 0 && (\n00722|               <div className=\"space-y-4\">\n00723|                 <div className=\"flex justify-between items-center\">\n00724|                   <h2 className=\"text-2xl font-bold text-blue-400\">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>\n00725|                   <Button onClick={exportToPDF} variant=\"outline\" size=\"sm\">\n00726|                     –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF\n00727|                   </Button>\n00728|                 </div>\n00729|                 \n00730|                 {calculations.map((calc, index) => (\n00731|                   <Card key={index} className=\"bg-gray-800 border-gray-700\">\n00732|                     <CardHeader>\n00733|                       <div className=\"flex justify-between items-center\">\n00734|                         <CardTitle className=\"text-white flex items-center gap-2\">\n00735|                           <Building2 className=\"h-5 w-5\" />\n00736|                           {calc.company}\n00737|                         </CardTitle>\n00738|                         {calc.error ? (\n00739|                           <Badge variant=\"destructive\">–û—à–∏–±–∫–∞</Badge>\n00740|                         ) : (\n00741|                           <Badge variant=\"default\" className=\"bg-green-600\">\n00742|                             {calc.price.toLocaleString()} ‚ÇΩ\n00743|                           </Badge>\n00744|                         )}\n00745|                       </div>\n00746|                     </CardHeader>\n00747|                     <CardContent>\n00748|                       {calc.error ? (\n00749|                         <Alert className=\"border-red-600\">\n00750|                           <AlertDescription>{calc.error}</AlertDescription>\n00751|                         </Alert>\n00752|                       ) : (\n00753|                         <div className=\"space-y-2\">\n00754|                           <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {calc.price.toLocaleString()} ‚ÇΩ</p>\n00755|                           <p><strong>–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:</strong> {calc.days} –¥–Ω–µ–π</p>\n00756|                           \n00757|                           <div className=\"flex gap-2 mt-4\">\n00758|                             <Button\n00759|                               variant=\"outline\"\n00760|                               size=\"sm\"\n00761|                               onClick={() => toggleDetails(calc.company)}\n00762|                             >\n00763|                               {expandedDetails[calc.company] ? '–°–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ'}\n00764|                             </Button>\n00765|                           </div>\n00766|                           \n00767|                           <Collapsible open={expandedDetails[calc.company]}>\n00768|                             <CollapsibleContent className=\"mt-4\">\n00769|                               <div className=\"bg-gray-900 p-4 rounded text-xs\">\n00770|                                 <h4 className=\"font-bold mb-2\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞:</h4>\n00771|                                 {calc.details && (\n00772|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-40\">\n00773|                                     {JSON.stringify(calc.details, null, 2)}\n00774|                                   </pre>\n00775|                                 )}\n00776|                                 \n00777|                                 {calc.requestData && (\n00778|                                   <div className=\"mt-4\">\n00779|                                     <h5 className=\"font-bold mb-2\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:</h5>\n00780|                                     <pre className=\"whitespace-pre-wrap overflow-auto max-h-40\">\n00781|                                       {JSON.stringify(calc.requestData, null, 2)}\n00782|                                     </pre>\n00783|                                   </div>\n00784|                                 )}\n00785|                                 \n00786|                                 {calc.responseData && (\n00787|                                   <div className=\"mt-4\">\n00788|                                     <h5 className=\"font-bold mb-2\">–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:</h5>\n00789|                                     <pre className=\"whitespace-pre-wrap overflow-auto max-h-40\">\n00790|                                       {JSON.stringify(calc.responseData, null, 2)}\n00791|                                     </pre>\n00792|                                   </div>\n00793|                                 )}\n00794|                               </div>\n00795|                             </CollapsibleContent>\n00796|                           </Collapsible>\n00797|                         </div>\n00798|                       )}\n00799|                     </CardContent>\n00800|                   </Card>\n00801|                 ))}\n00802|               </div>\n00803|             )}\n00804|             \n00805|             {/* –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¢–ö */}\n00806|             <Card className=\"bg-gray-800 border-gray-700\">\n00807|               <CardHeader>\n00808|                 <CardTitle className=\"text-white\">–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏</CardTitle>\n00809|               </CardHeader>\n00810|               <CardContent>\n00811|                 <div className=\"grid grid-cols-2 gap-4\">\n00812|                   {COMPANIES.map((company, index) => (\n00813|                     <div key={index} className=\"flex items-center gap-3 p-3 bg-gray-700 rounded\">\n00814|                       <span className=\"text-2xl\">{company.logo}</span>\n00815|                       <div>\n00816|                         <p className=\"font-medium\">{company.name}</p>\n00817|                         <Badge variant={company.connected ? \"default\" : \"destructive\"} className=\"text-xs\">\n00818|                           {company.connected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–∞' : '–û—Ç–∫–ª—é—á–µ–Ω–∞'}\n00819|                         </Badge>\n00820|                       </div>\n00821|                     </div>\n00822|                   ))}\n00823|                 </div>\n00824|               </CardContent>\n00825|             </Card>\n00826|           </div>\n00827|         </div>\n00828|       </div>\n00829|     </div>\n00830|   );\n00831| }\n00832| \n</file>",
    "metadata": {
      "preview": "'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Plus, Truck, Building2, Map } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\n\ninterface Cargo {\n  id: string;\n  length: number;\n  width: number;\n  height: number;\n  weight: number;"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1758615931847,
      "end": 1758615931854
    }
  }
}