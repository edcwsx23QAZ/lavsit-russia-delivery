{
  "id": "prt_acc415d4b001LiNf0lkvSBrMtw",
  "sessionID": "ses_54b97e247ffenCZZa4jZiIWD0l",
  "messageID": "msg_acc414d79001dAN1olsy2rOMn4",
  "type": "tool",
  "callID": "call_b09c0c5df678463790c9588f",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/CalculationDetails.tsx"
    },
    "output": "<file>\n00001| \"use client\";\n00002| \n00003| import { useState } from 'react';\n00004| import { ChevronDown, ChevronUp, Info, Calculator, AlertTriangle } from 'lucide-react';\n00005| import { Button } from '@/components/ui/button';\n00006| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00007| import { Badge } from '@/components/ui/badge';\n00008| \n00009| interface CalculationDetails {\n00010|   company: string;\n00011|   price: number;\n00012|   days: number;\n00013|   details?: any;\n00014|   requestData?: any;\n00015|   responseData?: any;\n00016|   apiUrl?: string;\n00017|   parseTime?: number;\n00018|   error?: string;\n00019| }\n00020| \n00021| interface ServiceItem {\n00022|   name: string;\n00023|   price: number;\n00024|   basePrice?: number;\n00025|   discount?: number;\n00026| }\n00027| \n00028| interface CalculationDetailsProps {\n00029|   details: CalculationDetails;\n00030|   isExpanded?: boolean;\n00031| }\n00032| \n00033| export default function CalculationDetails({ details, isExpanded = false }: CalculationDetailsProps) {\n00034|   const [expanded, setExpanded] = useState(isExpanded);\n00035| \n00036|   const formatPrice = (price: number) => {\n00037|     return price.toLocaleString('ru-RU') + ' ‚ÇΩ';\n00038|   };\n00039| \n00040|   const formatDuration = (parseTime: number) => {\n00041|     return parseTime ? `${parseTime} —Å–µ–∫` : '–ù/–î';\n00042|   };\n00043| \n00044|   const getDiscountPercentage = (basePrice: number, price: number) => {\n00045|     if (!basePrice || basePrice === 0) return 0;\n00046|     return ((basePrice - price) / basePrice * 100).toFixed(1);\n00047|   };\n00048| \n00049|   const getStatusColor = (company: string) => {\n00050|     switch (company) {\n00051|       case '–í–æ–∑–æ–≤–æ–∑': return 'text-blue-600';\n00052|       case '–ü–∞—Ä—Å–µ—Ä Vozovoz': return 'text-green-600';\n00053|       case 'API Vozovoz': return 'text-purple-600';\n00054|       default: return 'text-gray-600';\n00055|     }\n00056|   };\n00057| \n00058|   const getStatusIcon = (company: string) => {\n00059|     switch (company) {\n00060|       case '–í–æ–∑–æ–≤–æ–∑': return <Calculator className=\"w-4 h-4\" />;\n00061|       case '–ü–∞—Ä—Å–µ—Ä Vozovoz': return <Info className=\"w-4 h-4\" />;\n00062|       case 'API Vozovoz': return <AlertTriangle className=\"w-4 h-4\" />;\n00063|       default: return <Info className=\"w-4 h-4\" />;\n00064|     }\n00065|   };\n00066| \n00067|   return (\n00068|     <Card className=\"bg-gray-800 border-gray-700\">\n00069|       <CardHeader>\n00070|         <CardTitle className=\"flex items-center justify-between\">\n00071|           <div className=\"flex items-center gap-2\">\n00072|             {getStatusIcon(details.company)}\n00073|             <span className={getStatusColor(details.company)}>\n00074|               {details.company}\n00075|             </span>\n00076|             {details.parseTime && (\n00077|               <Badge variant=\"secondary\" className=\"text-xs\">\n00078|                 {formatDuration(details.parseTime)}\n00079|               </Badge>\n00080|             )}\n00081|           </div>\n00082|           <Button\n00083|             variant=\"ghost\"\n00084|             size=\"sm\"\n00085|             onClick={() => setExpanded(!expanded)}\n00086|             className=\"text-gray-400 hover:text-gray-200\"\n00087|           >\n00088|             {expanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n00089|           </Button>\n00090|         </CardTitle>\n00091|       </CardHeader>\n00092|       \n00093|       <CardContent className=\"space-y-4\">\n00094|         {/* –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}\n00095|         <div className=\"flex justify-between items-center\">\n00096|           <span className=\"text-gray-300\">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å:</span>\n00097|           <span className=\"text-xl font-bold text-white\">\n00098|             {formatPrice(details.price)}\n00099|           </span>\n00100|         </div>\n00101|         \n00102|         <div className=\"flex justify-between items-center\">\n00103|           <span className=\"text-gray-300\">‚è∞ –°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:</span>\n00104|           <span className=\"text-white\">\n00105|             {details.days} {details.days === 1 ? '–¥–µ–Ω—å' : '–¥–Ω–µ–π'}\n00106|           </span>\n00107|         </div>\n00108| \n00109|         {details.error && (\n00110|           <div className=\"bg-red-900 border border-red-700 rounded p-3\">\n00111|             <div className=\"flex items-center gap-2 text-red-200\">\n00112|               <AlertTriangle className=\"w-4 h-4\" />\n00113|               <span>–û—à–∏–±–∫–∞: {details.error}</span>\n00114|             </div>\n00115|           </div>\n00116|         )}\n00117| \n00118|         {/* –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —É—Å–ª—É–≥ */}\n00119|         {expanded && details.details?.services && (\n00120|           <div className=\"space-y-3\">\n00121|             <h4 className=\"text-lg font-semibold text-white mb-3\">üì¶ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è —É—Å–ª—É–≥</h4>\n00122|             \n00123|             <div className=\"space-y-2\">\n00124|               {details.details.services.map((service: ServiceItem, index: number) => (\n00125|                 <div key={index} className=\"flex justify-between items-center p-3 bg-gray-700 rounded-lg\">\n00126|                   <div className=\"flex-1\">\n00127|                     <div className=\"font-medium text-white\">\n00128|                       {service.name}\n00129|                     </div>\n00130|                     {service.discount && (\n00131|                       <div className=\"text-sm text-gray-400\">\n00132|                         (—Å–∫–∏–¥–∫–∞ {service.discount} ‚ÇΩ)\n00133|                       </div>\n00134|                     )}\n00135|                   </div>\n00136|                   <div className=\"text-right\">\n00137|                     <div className=\"font-bold text-white\">\n00138|                       {formatPrice(service.price)}\n00139|                     </div>\n00140|                     {service.basePrice && service.basePrice !== service.price && (\n00141|                       <div className=\"text-sm text-gray-400 line-through\">\n00142|                         {formatPrice(service.basePrice)}\n00143|                       </div>\n00144|                     )}\n00145|                   </div>\n00146|                 </div>\n00147|               ))}\n00148|             </div>\n00149| \n00150|             {/* –ò—Ç–æ–≥–∏ –ø–æ —Å–∫–∏–¥–∫–∞–º */}\n00151|             {details.details.services.some(s => s.discount) && (\n00152|               <div className=\"bg-yellow-900 border border-yellow-700 rounded p-3\">\n00153|                 <div className=\"text-yellow-200\">\n00154|                   <strong>üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏—è:</strong>\n00155|                   <div className=\"text-white mt-1\">\n00156|                     {details.details.services\n00157|                       .filter(s => s.discount)\n00158|                       .reduce((total, s) => total + s.discount, 0)\n00159|                       .toLocaleString('ru-RU')} ‚ÇΩ\n00160|                   </div>\n00161|                 </div>\n00162|               </div>\n00163|             )}\n00164|           </div>\n00165|         )}\n00166| \n00167|         {/* –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}\n00168|         {expanded && (\n00169|           <div className=\"space-y-3\">\n00170|             <h4 className=\"text-lg font-semibold text-white mb-3\">üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h4>\n00171|             \n00172|             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n00173|               <div>\n00174|                 <span className=\"text-gray-400\">API URL:</span>\n00175|                 <div className=\"text-white font-mono bg-gray-900 p-2 rounded\">\n00176|                   {details.apiUrl || '–ù/–î'}\n00177|                 </div>\n00178|               </div>\n00179|               \n00180|               <div>\n00181|                 <span className=\"text-gray-400\">–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</span>\n00182|                 <div className=\"text-white\">\n00183|                   {formatDuration(details.parseTime)}\n00184|                 </div>\n00185|               </div>\n00186|             </div>\n00187| \n00188|             {details.requestData && (\n00189|               <div>\n00190|                 <span className=\"text-gray-400\">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:</span>\n00191|                 <div className=\"text-white font-mono bg-gray-900 p-2 rounded text-xs max-h-32 overflow-y-auto\">\n00192|                   <pre>{JSON.stringify(details.requestData, null, 2)}</pre>\n00193|                 </div>\n00194|               </div>\n00195|             )}\n00196| \n00197|             {details.responseData && (\n00198|               <div>\n00199|                 <span className=\"text-gray-400\">–û—Ç–≤–µ—Ç API:</span>\n00200|                 <div className=\"text-white font-mono bg-gray-900 p-2 rounded text-xs max-h-32 overflow-y-auto\">\n00201|                   <pre>{JSON.stringify(details.responseData, null, 2)}</pre>\n00202|                 </div>\n00203|               </div>\n00204|             )}\n00205|           </div>\n00206|         )}\n00207|       </CardContent>\n00208|     </Card>\n00209|   );\n00210| }\n\n(End of file - total 210 lines)\n</file>",
    "title": "components/CalculationDetails.tsx",
    "metadata": {
      "preview": "\"use client\";\n\nimport { useState } from 'react';\nimport { ChevronDown, ChevronUp, Info, Calculator, AlertTriangle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\n\ninterface CalculationDetails {\n  company: string;\n  price: number;\n  days: number;\n  details?: any;\n  requestData?: any;\n  responseData?: any;\n  apiUrl?: string;\n  parseTime?: number;\n  error?: string;\n}\n"
    },
    "time": {
      "start": 1764363427150,
      "end": 1764363427153
    }
  }
}