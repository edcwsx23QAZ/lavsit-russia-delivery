{
  "id": "prt_a714999c9001JPe416pZWz9neq",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_a71498e39002tFpk3JnLkggvRP",
  "type": "tool",
  "callID": "toolu_01AtD6EG5KnJ9TDMKr8qkyTs",
  "tool": "multiedit",
  "state": {
    "status": "completed",
    "input": {
      "edits": [
        {
          "newString": "      checkAPIStatus('cdek', async () => {\n        try {\n          const response = await fetch('/api/cdek', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              from_city: testData.fromCity,\n              to_city: testData.toCity,\n              packages: [{\n                height: 10,\n                length: 20,\n                width: 10,\n                weight: 1000\n              }]\n            })\n          });\n          const data = await response.json();\n          \n          if (!response.ok) {\n            const errorText = data.details || data.error || 'Unknown error';\n            if (errorText.includes('<!DOCTYPE') || errorText.includes('<html')) {\n              return { error: true, errorType: '‚ö†Ô∏è —Ç–æ–∫–µ–Ω' };\n            }\n            if (response.status === 401 || response.status === 403) {\n              return { error: true, errorType: 'üîê auth' };\n            }\n            return { error: true, errorType: '‚ùå API' };\n          }\n          \n          if (response.ok && data.tariff_codes && data.tariff_codes.length > 0) {\n            return { success: true };\n          } else {\n            return { error: true, errorType: '‚ö†Ô∏è —Ñ–æ—Ä–º–∞—Ç' };\n          }\n        } catch (error) {\n          return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n        }\n      }),",
          "oldString": "      checkAPIStatus('cdek', async () => {\n        try {\n          const response = await fetch('/api/cdek', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              from_city: testData.fromCity,\n              to_city: testData.toCity,\n              packages: [{\n                height: 10,\n                length: 20,\n                width: 10,\n                weight: 1000\n              }]\n            })\n          });\n          const data = await response.json();\n          \n          if (response.ok && data.tariff_codes && data.tariff_codes.length > 0) {\n            return { success: true };\n          } else {\n            return { error: true };\n          }\n        } catch (error) {\n          return { error: true };\n        }\n      }),"
        }
      ],
      "filePath": "app/page.tsx"
    },
    "output": "",
    "title": "app/page.tsx",
    "metadata": {
      "results": [
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/page.tsx\n===================================================================\n--- /home/user/project/app/page.tsx\n+++ /home/user/project/app/page.tsx\n@@ -709,993 +709,28 @@\n           })\n         });\n         const data = await response.json();\n         \n+        if (!response.ok) {\n+          const errorText = data.details || data.error || 'Unknown error';\n+          if (errorText.includes('<!DOCTYPE') || errorText.includes('<html')) {\n+            return { error: true, errorType: '‚ö†Ô∏è —Ç–æ–∫–µ–Ω' };\n+          }\n+          if (response.status === 401 || response.status === 403) {\n+            return { error: true, errorType: 'üîê auth' };\n+          }\n+          return { error: true, errorType: '‚ùå API' };\n+        }\n+        \n         if (response.ok && data.tariff_codes && data.tariff_codes.length > 0) {\n           return { success: true };\n         } else {\n-          return { error: true };\n+          return { error: true, errorType: '‚ö†Ô∏è —Ñ–æ—Ä–º–∞—Ç' };\n         }\n       } catch (error) {\n-        return { error: true };\n+        return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n       }\n-    })\n-  ]).finally(() => {\n-    // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã\n-    setForm(currentForm);\n-  });\n-};\n-\n-const searchAddresses = useCallback(async (query: string, field: string, element?: HTMLInputElement) => {\n-  if (query.length < 3) {\n-    setSuggestions([]);\n-    setShowSuggestions(false);\n-    return;\n-  }\n-\n-  setActiveField(field);\n-  \n-  // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫\n-  if (element) {\n-    const rect = element.getBoundingClientRect();\n-    setSuggestionPosition({\n-      top: rect.bottom + window.scrollY,\n-      left: rect.left + window.scrollX\n-    });\n-  }\n-  \n-  try {\n-    const response = await fetch('https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address', {\n-      method: 'POST',\n-      headers: {\n-        'Content-Type': 'application/json',\n-        'Accept': 'application/json',\n-        'Authorization': 'Token eb87bbb3789bb43ed465f796892ea951f9e91008'\n-      },\n-      body: JSON.stringify({\n-        query: query,\n-        count: 10,\n-        // –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª–µ–π –≥–æ—Ä–æ–¥–æ–≤ - —Ç–æ–ª—å–∫–æ –≥–æ—Ä–æ–¥–∞\n-        ...(field === 'fromCity' || field === 'toCity' ? {\n-          restrict_value: true,\n-          locations: [{\n-            country: '–†–æ—Å—Å–∏—è'\n-          }],\n-          from_bound: { value: 'city' },\n-          to_bound: { value: 'city' }\n-        } : {})\n-      })\n-    });\n-\n-    if (response.ok) {\n-      const data = await response.json();\n-      setSuggestions(data.suggestions || []);\n-      setShowSuggestions(true);\n-    }\n-  } catch (error) {\n-    console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫:', error);\n-  }\n-}, []);\n-\n-const debounceTimer = React.useRef<NodeJS.Timeout>();\n-const handleAddressChange = (field: string, value: string, element?: HTMLInputElement) => {\n-  setForm(prev => ({ ...prev, [field]: value }));\n-  \n-  clearTimeout(debounceTimer.current);\n-  debounceTimer.current = setTimeout(() => {\n-    searchAddresses(value, field, element);\n-  }, 50);\n-};\n-\n-const selectSuggestion = (suggestion: AddressSuggestion) => {\n-  setForm(prev => ({ ...prev, [activeField]: suggestion.value }));\n-  setShowSuggestions(false);\n-  setActiveField('');\n-};\n-\n-// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞ \"–°–æ —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç\"\n-const handleLavsiteWarehouseChange = (checked: boolean) => {\n-  if (checked) {\n-    setForm(prev => ({\n-      ...prev,\n-      fromLavsiteWarehouse: true,\n-      fromAddressDelivery: true,\n-      fromTerminal: false,\n-      fromCity: '–õ–æ—Å–∏–Ω–æ-–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π',\n-      fromAddress: '–¥–µ—Ä–µ–≤–Ω—è –û—Å–µ–µ–≤–æ, 202, –≥–æ—Ä–æ–¥—Å–∫–æ–π –æ–∫—Ä—É–≥ –õ–æ—Å–∏–Ω–æ-–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å'\n-    }));\n-  } else {\n-    setForm(prev => ({\n-      ...prev,\n-      fromLavsiteWarehouse: false,\n-      fromCity: '',\n-      fromAddress: ''\n-    }));\n-  }\n-};\n-\n-const addCargo = () => {\n-  const newId = (form.cargos.length + 1).toString();\n-  setForm(prev => ({\n-    ...prev,\n-    cargos: [...prev.cargos, { id: newId, length: 0, width: 0, height: 0, weight: 0 }]\n-  }));\n-};\n-\n-const updateCargo = (id: string, field: string, value: number) => {\n-  setForm(prev => {\n-    const updatedCargos = prev.cargos.map(cargo => \n-      cargo.id === id ? { ...cargo, [field]: value } : cargo\n-    );\n-    \n-    // –û—á–∏—â–∞–µ–º –ø—É—Å—Ç—ã–µ –≥—Ä—É–∑—ã —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ\n-    const cleanResult = cleanEmptyCargos(updatedCargos, prev.selectedProducts || []);\n-    \n-    return {\n-      ...prev,\n-      cargos: cleanResult.cargos,\n-      selectedProducts: cleanResult.products\n-    };\n-  });\n-};\n-\n-const removeCargo = (id: string) => {\n-  if (form.cargos.length > 1) {\n-    setForm(prev => ({\n-      ...prev,\n-      cargos: prev.cargos.filter(cargo => cargo.id !== id)\n-    }));\n-  }\n-};\n-\n-// üîß –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤ (–≤—Å–µ –ø–æ–ª—è —Ä–∞–≤–Ω—ã 0)\n-const isEmptyCargo = (cargo: Cargo) => {\n-  return cargo.length === 0 && cargo.width === 0 && cargo.height === 0 && cargo.weight === 0;\n-};\n-\n-// üîß –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤\n-const cleanEmptyCargos = (cargos: Cargo[], selectedProducts: ProductInForm[]) => {\n-  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –≥—Ä—É–∑\n-  const hasFilledCargos = cargos.some(cargo => !isEmptyCargo(cargo));\n-  \n-  if (!hasFilledCargos) {\n-    // –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤, –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π –ø—É—Å—Ç–æ–π\n-    return {\n-      cargos: cargos.length > 0 ? [{ id: '1', length: 0, width: 0, height: 0, weight: 0 }] : [{ id: '1', length: 0, width: 0, height: 0, weight: 0 }],\n-      products: selectedProducts\n-    };\n-  }\n-\n-  // –°–æ–∑–¥–∞–µ–º –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ä—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ –∫ –Ω–æ–≤—ã–º\n-  const oldToNewIndexMap = new globalThis.Map<number, number>();\n-  let newIndex = 0;\n-  \n-  cargos.forEach((cargo, oldIndex) => {\n-    if (!isEmptyCargo(cargo)) {\n-      oldToNewIndexMap.set(oldIndex, newIndex);\n-      newIndex++;\n-    }\n-  });\n-  \n-  // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –≥—Ä—É–∑—ã\n-  const filledCargos = cargos.filter(cargo => !isEmptyCargo(cargo));\n-  \n-  // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω–¥–µ–∫—Å—ã —É —Ç–æ–≤–∞—Ä–æ–≤\n-  const updatedProducts = selectedProducts.map(productItem => ({\n-    ...productItem,\n-    cargoIndexes: productItem.cargoIndexes\n-      .map(oldIndex => oldToNewIndexMap.get(oldIndex))\n-      .filter(newIdx => newIdx !== undefined) as number[]\n-  }));\n-  \n-  return {\n-    cargos: filledCargos,\n-    products: updatedProducts\n-  };\n-};\n-\n-// üîß –§—É–Ω–∫—Ü–∏—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –≥—Ä—É–∑–æ–≤ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n-interface GroupedCargoDisplay {\n-  length: number;\n-  width: number;\n-  height: number;\n-  weight: number;\n-  quantity: number;\n-  indices: number[];\n-  isEmpty: boolean;\n-}\n-\n-const groupCargosForDisplay = (cargos: Cargo[]): GroupedCargoDisplay[] => {\n-  const groups = new globalThis.Map<string, GroupedCargoDisplay>();\n-  \n-  cargos.forEach((cargo, index) => {\n-    const isEmpty = isEmptyCargo(cargo);\n-    \n-    // –î–ª—è –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤ –Ω–µ –≥—Ä—É–ø–ø–∏—Ä—É–µ–º\n-    if (isEmpty) {\n-      groups.set(`empty_${index}`, {\n-        length: 0,\n-        width: 0,\n-        height: 0,\n-        weight: 0,\n-        quantity: 1,\n-        indices: [index],\n-        isEmpty: true\n-      });\n-      return;\n-    }\n-    \n-    // –°–æ–∑–¥–∞–µ–º –∫–ª—é—á –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥–∞–±–∞—Ä–∏—Ç–æ–≤ –∏ –≤–µ—Å–∞\n-    const key = `${cargo.length}_${cargo.width}_${cargo.height}_${cargo.weight}`;\n-    \n-    if (groups.has(key)) {\n-      const existing = groups.get(key)!;\n-      existing.quantity += 1;\n-      existing.indices.push(index);\n-    } else {\n-      groups.set(key, {\n-        length: cargo.length,\n-        width: cargo.width,\n-        height: cargo.height,\n-        weight: cargo.weight,\n-        quantity: 1,\n-        indices: [index],\n-        isEmpty: false\n-      });\n-    }\n-  });\n-  \n-  // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤: —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É–±—ã–≤–∞–Ω–∏—è), –ø–æ—Ç–æ–º –ø—É—Å—Ç—ã–µ\n-  return Array.from(groups.values()).sort((a, b) => {\n-    if (a.isEmpty && !b.isEmpty) return 1;\n-    if (!a.isEmpty && b.isEmpty) return -1;\n-    if (!a.isEmpty && !b.isEmpty) {\n-      return b.quantity - a.quantity; // –ü–æ —É–±—ã–≤–∞–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞\n-    }\n-    return a.indices[0] - b.indices[0]; // –ü—É—Å—Ç—ã–µ –ø–æ –ø–æ—Ä—è–¥–∫—É –∏–Ω–¥–µ–∫—Å–æ–≤\n-  });\n-};\n-\n-// üîß –§—É–Ω–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏\n-const handleProductAdd = (product: FurnitureProduct) => {\n-  const timestamp = Date.now();\n-  \n-  console.log(`‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞: ${product.name} (${product.cargoPlaces.length} –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç)`);\n-  \n-  // –°–æ–∑–¥–∞–µ–º –≥—Ä—É–∑–æ–≤—ã–µ –º–µ—Å—Ç–∞ –¥–ª—è —Ç–æ–≤–∞—Ä–∞\n-  const newCargos = createCargosForProduct(product, 1, timestamp);\n-  \n-  console.log('–°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö –≥—Ä—É–∑–æ–≤:', newCargos.length);\n-  console.log('–ù–æ–≤—ã–µ –≥—Ä—É–∑—ã:', newCargos.map(c => ({ id: c.id, productId: c.productId, addedAt: c.addedAt })));\n-  \n-  // –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç —Ç–æ–≤–∞—Ä–∞ –≤ —Ñ–æ—Ä–º–µ\n-  const productInForm: ProductInForm = {\n-    product,\n-    quantity: 1,\n-    totalPrice: product.retailPrice,\n-    cargoIndexes: [], // –ó–∞–ø–æ–ª–Ω–∏–º –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–∑–æ–≤\n-    addedAt: timestamp\n-  };\n-  \n-  setForm(prev => {\n-    let updatedCargos = [...prev.cargos];\n-    let cargoIndexes: number[] = [];\n-    \n-    // –ù–∞—Ö–æ–¥–∏–º –ø—É—Å—Ç—ã–µ –≥—Ä—É–∑—ã –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è\n-    const emptyCargos = updatedCargos\n-      .map((cargo, index) => ({ cargo, index }))\n-      .filter(item => isEmptyCargo(item.cargo));\n-    \n-    console.log('–ù–∞–π–¥–µ–Ω–æ –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤:', emptyCargos.length);\n-    console.log('–ù—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≥—Ä—É–∑–æ–≤:', newCargos.length);\n-    \n-    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø—É—Å—Ç—ã–µ –≥—Ä—É–∑—ã –¥–∞–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞\n-    let filledCount = 0;\n-    for (let i = 0; i < Math.min(emptyCargos.length, newCargos.length); i++) {\n-      const emptyCargoIndex = emptyCargos[i].index;\n-      const newCargoData = newCargos[i];\n-      \n-      updatedCargos[emptyCargoIndex] = {\n-        ...updatedCargos[emptyCargoIndex],\n-        length: newCargoData.length,\n-        width: newCargoData.width,\n-        height: newCargoData.height,\n-        weight: newCargoData.weight,\n-        productId: newCargoData.productId,\n-        placeNumber: newCargoData.placeNumber,\n-        isFromProduct: newCargoData.isFromProduct,\n-        addedAt: newCargoData.addedAt\n-      };\n-      \n-      cargoIndexes.push(emptyCargoIndex);\n-      filledCount++;\n-    }\n-    \n-    // –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≥—Ä—É–∑–æ–≤, —á–µ–º –µ—Å—Ç—å –ø—É—Å—Ç—ã—Ö - –¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ\n-    if (filledCount < newCargos.length) {\n-      const remainingCargos = newCargos.slice(filledCount);\n-      const startIndex = updatedCargos.length;\n-      \n-      for (let i = 0; i < remainingCargos.length; i++) {\n-        updatedCargos.push(remainingCargos[i]);\n-        cargoIndexes.push(startIndex + i);\n-      }\n-    }\n-    \n-    productInForm.cargoIndexes = cargoIndexes;\n-    \n-    console.log('–ò–Ω–¥–µ–∫—Å—ã –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤:', cargoIndexes);\n-    console.log('–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:', updatedCargos.length);\n-    \n-    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å\n-    const prevSelectedProducts = prev.selectedProducts || [];\n-    const newSelectedProducts = [...prevSelectedProducts, productInForm];\n-    const newDeclaredValue = calculateTotalValue(newSelectedProducts);\n-    \n-    // –û—á–∏—â–∞–µ–º –ø—É—Å—Ç—ã–µ –≥—Ä—É–∑—ã —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ\n-    const cleanResult = cleanEmptyCargos(updatedCargos, newSelectedProducts);\n-    \n-    return {\n-      ...prev,\n-      cargos: cleanResult.cargos,\n-      selectedProducts: cleanResult.products,\n-      declaredValue: newDeclaredValue\n-    };\n-  });\n-  \n-  console.log(`‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–æ–≤–∞—Ä: ${product.name} (${newCargos.length} –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç)`);\n-  console.log('–§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≥—Ä—É–∑–æ–≤:', newCargos.length);\n-};\n-\n-const handleProductQuantityChange = (productId: string, addedAt: number, newQuantity: number) => {\n-  setForm(prev => {\n-    console.log(`üî¢ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ ${productId} —Å ${prev.selectedProducts?.find(p => p.product.id === productId && p.addedAt === addedAt)?.quantity || 0} –Ω–∞ ${newQuantity}`);\n-    \n-    // –ù–∞—Ö–æ–¥–∏–º —Ç–æ–≤–∞—Ä\n-    const selectedProducts = prev.selectedProducts || [];\n-    const productIndex = selectedProducts.findIndex(p => \n-      p.product.id === productId && p.addedAt === addedAt\n-    );\n-    \n-    if (productIndex === -1) {\n-      console.warn('‚ùå –¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞');\n-      return prev;\n-    }\n-    \n-    const product = selectedProducts[productIndex];\n-    console.log('–ì—Ä—É–∑—ã –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:', prev.cargos.length);\n-    \n-    // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –≥—Ä—É–∑—ã —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞\n-    const cargosWithoutProduct = removeCargosForProduct(\n-      prev.cargos as CargoWithMetadata[], \n-      productId, \n-      addedAt\n-    );\n-    \n-    console.log('–ì—Ä—É–∑—ã –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö:', cargosWithoutProduct.length);\n-    \n-    // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ –≥—Ä—É–∑—ã —Å –Ω–æ–≤—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º\n-    const newCargos = createCargosForProduct(product.product, newQuantity, addedAt);\n-    const updatedCargos = [...cargosWithoutProduct, ...newCargos];\n-    \n-    console.log('–ì—Ä—É–∑—ã –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö:', updatedCargos.length);\n-    \n-    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ–≤–∞—Ä\n-    const updatedProduct = {\n-      ...product,\n-      quantity: newQuantity,\n-      totalPrice: product.product.retailPrice * newQuantity,\n-      cargoIndexes: findCargoIndexesForProduct(updatedCargos, productId, addedAt)\n-    };\n-    \n-    const updatedProducts = selectedProducts.map((p, index) => \n-      index === productIndex ? updatedProduct : p\n-    );\n-    \n-    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å\n-    const newDeclaredValue = calculateTotalValue(updatedProducts);\n-    \n-    // –û—á–∏—â–∞–µ–º –ø—É—Å—Ç—ã–µ –≥—Ä—É–∑—ã —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ\n-    const cleanResult = cleanEmptyCargos(updatedCargos, updatedProducts);\n-    \n-    return {\n-      ...prev,\n-      cargos: cleanResult.cargos,\n-      selectedProducts: cleanResult.products,\n-      declaredValue: newDeclaredValue\n-    };\n-  });\n-  \n-  console.log(`üîÑ –ò–∑–º–µ–Ω–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–∞ ${productId}: ${newQuantity} —à—Ç.`);\n-};\n-\n-const handleProductRemove = (productId: string, addedAt: number) => {\n-  setForm(prev => {\n-    console.log(`üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ ${productId} (addedAt: ${addedAt})`);\n-    \n-    // –ù–∞—Ö–æ–¥–∏–º —Ç–æ–≤–∞—Ä –∏ –µ–≥–æ –∏–Ω–¥–µ–∫—Å—ã –≥—Ä—É–∑–æ–≤\n-    const selectedProducts = prev.selectedProducts || [];\n-    const product = selectedProducts.find(p => \n-      p.product.id === productId && p.addedAt === addedAt\n-    );\n-    \n-    if (!product) {\n-      console.log('–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω');\n-      return prev;\n-    }\n-    \n-    // –û—á–∏—â–∞–µ–º –≥—Ä—É–∑—ã —Ç–æ–≤–∞—Ä–∞ (–¥–µ–ª–∞–µ–º –∏—Ö –ø—É—Å—Ç—ã–º–∏ –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è)\n-    const updatedCargos = prev.cargos.map((cargo, index) => {\n-      if (product.cargoIndexes.includes(index)) {\n-        return {\n-          ...cargo,\n-          length: 0,\n-          width: 0,\n-          height: 0,\n-          weight: 0,\n-          productId: undefined,\n-          placeNumber: undefined,\n-          isFromProduct: undefined,\n-          addedAt: undefined\n-        };\n-      }\n-      return cargo;\n-    });\n-    \n-    // –£–¥–∞–ª—è–µ–º —Ç–æ–≤–∞—Ä –∏–∑ —Å–ø–∏—Å–∫–∞\n-    const updatedProducts = selectedProducts.filter(p => \n-      !(p.product.id === productId && p.addedAt === addedAt)\n-    );\n-    \n-    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–±—ä—è–≤–ª–µ–Ω–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å\n-    const newDeclaredValue = calculateTotalValue(updatedProducts);\n-    \n-    // –û—á–∏—â–∞–µ–º –ø—É—Å—Ç—ã–µ –≥—Ä—É–∑—ã —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–µ\n-    const cleanResult = cleanEmptyCargos(updatedCargos, updatedProducts);\n-    \n-    console.log('–ì—Ä—É–∑—ã –ø–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏:', cleanResult.cargos.length);\n-    console.log('–£–¥–∞–ª–µ–Ω–æ –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤:', updatedCargos.length - cleanResult.cargos.length);\n-    \n-    return {\n-      ...prev,\n-      cargos: cleanResult.cargos,\n-      selectedProducts: cleanResult.products,\n-      declaredValue: newDeclaredValue\n-    };\n-  });\n-  \n-  console.log(`üóëÔ∏è –£–¥–∞–ª–µ–Ω —Ç–æ–≤–∞—Ä ${productId}`);\n-};\n-\n-// –ü–æ–ª—É—á–µ–Ω–∏–µ sessionID –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n-const getDellinSessionId = async (): Promise<string | null> => {\n-  try {\n-    const authResponse = await fetch('https://api.dellin.ru/v3/auth/login.json', {\n-      method: 'POST',\n-      headers: {\n-        'Content-Type': 'application/json'\n-      },\n-      body: JSON.stringify({\n-        appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n-        login: 'service@lavsit.ru',\n-        password: 'edcwsx123QAZ'\n-      })\n-    });\n-\n-    const authData = await authResponse.json();\n-    console.log('üîë –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –î–õ response.ok:', authResponse.ok);\n-    console.log('üîë –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –î–õ authData:', authData);\n-    console.log('üîë –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –î–õ authData.data:', authData.data);\n-    console.log('üîë –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –î–õ authData.data?.sessionID:', authData.data?.sessionID);\n-    \n-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—É—Ç–∏ –∫ sessionID\n-    let sessionID = null;\n-    \n-    if (authData.data?.sessionID) {\n-      sessionID = authData.data.sessionID;\n-      console.log('‚úÖ SessionID –Ω–∞–π–¥–µ–Ω –≤ data.sessionID:', sessionID);\n-    } else if (authData.sessionID) {\n-      sessionID = authData.sessionID;\n-      console.log('‚úÖ SessionID –Ω–∞–π–¥–µ–Ω –≤ sessionID:', sessionID);\n-    } else if (authData.data?.session) {\n-      sessionID = authData.data.session;\n-      console.log('‚úÖ SessionID –Ω–∞–π–¥–µ–Ω –≤ data.session:', sessionID);\n-    }\n-    \n-    if (authResponse.ok && sessionID) {\n-      return sessionID;\n-    } else {\n-      console.error('‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏:', authData);\n-      console.error('‚ùå –°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', authResponse.status);\n-      console.error('‚ùå –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞:', authResponse.statusText);\n-      return null;\n-    }\n-  } catch (error) {\n-    console.error('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏:', error);\n-  }\n-  return null;\n-};\n-\n-// –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –≥–æ—Ä–æ–¥–æ–≤ –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n-const loadDellinCities = async () => {\n-  try {\n-    const response = await fetch('/data/dellin-cities.json');\n-    if (!response.ok) {\n-      console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≥–æ—Ä–æ–¥–æ–≤');\n-      return null;\n-    }\n-    const data = await response.json();\n-    return data.cities;\n-  } catch (error) {\n-    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –≥–æ—Ä–æ–¥–æ–≤:', error);\n-    return null;\n-  }\n-};\n-\n-// –ü–æ–∏—Å–∫ cityID –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ\n-const getCityIDFromLocal = async (cityName: string): Promise<string | null> => {\n-  const cities = await loadDellinCities();\n-  if (!cities) return null;\n-\n-  const normalizedSearch = cityName.toLowerCase().trim()\n-    .replace(/^–≥\\s+/, '') // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å \"–≥ \"\n-    .replace(/^–≥–æ—Ä–æ–¥\\s+/, '') // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å \"–≥–æ—Ä–æ–¥ \"\n-    .replace(/\\s+/g, ' '); // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–±–µ–ª—ã\n-\n-  console.log(`üîç –ü–æ–∏—Å–∫ cityID –¥–ª—è –≥–æ—Ä–æ–¥–∞: \"${normalizedSearch}\"`);\n-\n-  // –ü–æ–∏—Å–∫ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ\n-  for (const city of cities) {\n-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –∏–º–µ–Ω–µ–º –≥–æ—Ä–æ–¥–∞\n-    if (city.name.toLowerCase() === normalizedSearch) {\n-      console.log(`‚úÖ –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: \"${city.name}\" -> cityID: ${city.cityID}`);\n-      return city.cityID;\n-    }\n-\n-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –ø–æ–∏—Å–∫–æ–≤—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏\n-    for (const searchString of city.searchStrings) {\n-      if (searchString === normalizedSearch) {\n-        console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫–∞—Ö: \"${searchString}\" –¥–ª—è –≥–æ—Ä–æ–¥–∞ \"${city.name}\" -> cityID: ${city.cityID}`);\n-        return city.cityID;\n-      }\n-    }\n-  }\n-\n-  console.warn(`‚ö†Ô∏è cityID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –¥–ª—è –≥–æ—Ä–æ–¥–∞: \"${normalizedSearch}\"`);\n-  return null;\n-};\n-\n-// –ü–æ–ª—É—á–µ–Ω–∏–µ cityID —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n-const findCityInDellinDirectory = async (cityName: string): Promise<{cityID: number, code: string} | null> => {\n-  try {\n-    console.log(`üîç –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –î–õ: ${cityName}`);\n-    \n-    // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞\n-    const normalizedCity = cityName.toLowerCase().trim()\n-      .replace(/^–≥\\s+/, '') // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å \"–≥ \"\n-      .replace(/^–≥–æ—Ä–æ–¥\\s+/, '') // –£–±–∏—Ä–∞–µ–º –ø—Ä–µ—Ñ–∏–∫—Å \"–≥–æ—Ä–æ–¥ \"\n-      .replace(/\\s+/g, ' '); // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ–±–µ–ª—ã\n-    \n-    // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤\n-    const response = await fetch('https://api.dellin.ru/v2/public/kladr.json', {\n-      method: 'POST',\n-      headers: {\n-        'Content-Type': 'application/json'\n-      },\n-      body: JSON.stringify({\n-        appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n-        q: normalizedCity,\n-        limit: 10\n-      })\n-    });\n-    \n-    const data = await response.json();\n-    console.log(`üèôÔ∏è –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–∞ \"${normalizedCity}\" response:`, data);\n-    \n-    if (response.ok && data.cities && Array.isArray(data.cities) && data.cities.length > 0) {\n-      // –ò—â–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–ª–∏ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –≥–æ—Ä–æ–¥\n-      let bestMatch = data.cities.find((city: any) => \n-        city.searchString?.toLowerCase() === normalizedCity ||\n-        city.aString?.toLowerCase().includes(normalizedCity)\n-      );\n-      \n-      // –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–µ—Ç, –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —Å —Ç–µ—Ä–º–∏–Ω–∞–ª–∞–º–∏\n-      if (!bestMatch) {\n-        bestMatch = data.cities.find((city: any) => city.isTerminal === 1);\n-      }\n-      \n-      // –ï—Å–ª–∏ –∏ —ç—Ç–æ–≥–æ –Ω–µ—Ç, –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π\n-      if (!bestMatch) {\n-        bestMatch = data.cities[0];\n-      }\n-      \n-      if (bestMatch) {\n-        console.log(`‚úÖ –ù–∞–π–¥–µ–Ω –≥–æ—Ä–æ–¥:`, {\n-          cityID: bestMatch.cityID,\n-          name: bestMatch.aString,\n-          code: bestMatch.code,\n-          hasTerminals: bestMatch.isTerminal === 1\n-        });\n-        \n-        return {\n-          cityID: bestMatch.cityID,\n-          code: bestMatch.code\n-        };\n-      }\n-    }\n-    \n-    console.warn(`‚ö†Ô∏è –ì–æ—Ä–æ–¥ \"${normalizedCity}\" –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –î–õ`);\n-    return null;\n-    \n-  } catch (error) {\n-    console.error(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –≥–æ—Ä–æ–¥–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –î–õ:`, error);\n-    return null;\n-  }\n-};\n-\n-\n-\n-// –ü–æ–∏—Å–∫ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ —á–µ—Ä–µ–∑ —Ä–∞–±–æ—á–∏–π v1 API (–∏–∑ test-dellin-terminals-simple.js)\n-const getDellinTerminalByDirection = async (citySearch: string, direction: 'arrival' | 'derival'): Promise<string | null> => {\n-  try {\n-    console.log(`üîç –†–ê–ë–û–ß–ò–ô v1 API: –ü–æ–∏—Å–∫ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ ${direction} –¥–ª—è –≥–æ—Ä–æ–¥–∞: ${citySearch}`);\n-    \n-    // –ü–æ–ª—É—á–∞–µ–º sessionID –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞\n-    const sessionID = await getDellinSessionId();\n-    if (!sessionID) {\n-      console.error('‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç sessionID –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤');\n-      return null;\n-    }\n-    \n-    // –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ —Ä–∞–±–æ—á–µ–º—É API\n-    const requestData = {\n-      appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n-      sessionID: sessionID,\n-      search: citySearch,\n-      direction: direction\n-    };\n-    \n-    console.log(`üì§ –ó–∞–ø—Ä–æ—Å —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤:`, requestData);\n-    \n-    const response = await fetch('https://api.dellin.ru/v1/public/request_terminals.json', {\n-      method: 'POST',\n-      headers: {\n-        'Content-Type': 'application/json'\n-      },\n-      body: JSON.stringify(requestData)\n-    });\n-    \n-    const data = await response.json();\n-    console.log(`üì• –û—Ç–≤–µ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ (${response.status}):`, data);\n-    \n-    if (!response.ok) {\n-      console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤:', data);\n-      return null;\n-    }\n-    \n-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ\n-    const terminals = data.terminals || [];\n-    if (terminals.length === 0) {\n-      console.warn(`‚ö†Ô∏è –¢–µ—Ä–º–∏–Ω–∞–ª—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è –≥–æ—Ä–æ–¥–∞ \"${citySearch}\"`);\n-      return null;\n-    }\n-    \n-    // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª\n-    const selectedTerminal = terminals[0];\n-    \n-    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª ${direction}:`, {\n-      id: selectedTerminal.id,\n-      name: selectedTerminal.name,\n-      address: selectedTerminal.address\n-    });\n-    \n-    return selectedTerminal.id.toString();\n-    \n-  } catch (error) {\n-    console.error(`‚ùå –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ ${direction} (v1 API):`, error);\n-    return null;\n-  }\n-};\n-\n-// –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–æ–≤ –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ –¥–ª—è –≥–æ—Ä–æ–¥–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º)\n-const getDellinTerminal = async (citySearch: string): Promise<string | null> => {\n-  return getDellinTerminalByDirection(citySearch, 'arrival');\n-};\n-\n-// –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ DaData –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n-const normalizeAddressForDellin = async (address: string): Promise<string> => {\n-  try {\n-    console.log(`üåê –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ DaData: ${address}`);\n-    \n-    const response = await fetch('/api/dadata', {\n-      method: 'POST',\n-      headers: {\n-        'Content-Type': 'application/json'\n-      },\n-      body: JSON.stringify({\n-        address: address,\n-        type: 'clean'\n-      })\n-    });\n-    \n-    const data = await response.json();\n-    console.log(`üåê DaData response:`, data);\n-    \n-    if (data.success && data.data?.dellinFormat) {\n-      console.log(`‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∞–¥—Ä–µ—Å: ${data.data.dellinFormat}`);\n-      return data.data.dellinFormat;\n-    }\n-    \n-    // –ï—Å–ª–∏ DaData –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∞–¥—Ä–µ—Å\n-    console.warn(`‚ö†Ô∏è DaData –Ω–µ —Å–º–æ–≥ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π`);\n-    return address;\n-    \n-  } catch (error) {\n-    console.error(`‚ùå –û—à–∏–±–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–¥—Ä–µ—Å–∞ —á–µ—Ä–µ–∑ DaData:`, error);\n-    return address; // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∞–¥—Ä–µ—Å –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏\n-  }\n-};\n-\n-// –ü–æ–ª—É—á–µ–Ω–∏–µ UID —É–ø–∞–∫–æ–≤–∫–∏ —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π workflow —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –î–õ\n-const getDellinPackageUid = async (packageName: string = 'crate_with_bubble'): Promise<string | null> => {\n-  try {\n-    console.log(`üì¶ CSV WORKFLOW: –ü–æ–ª—É—á–µ–Ω–∏–µ UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π workflow...`);\n-    console.log('üì¶ CSV WORKFLOW: API –î–õ ‚Üí CSV —Å—Å—ã–ª–∫–∞ ‚Üí —Å–∫–∞—á–∞—Ç—å CSV ‚Üí –ø–∞—Ä—Å–∏—Ç—å ‚Üí –ø–æ–ª—É—á–∏—Ç—å UID');\n-    \n-    const response = await fetch('/api/dellin-packages', {\n-      method: 'GET',\n-      headers: {\n-        'Content-Type': 'application/json'\n-      }\n-    });\n-\n-    const data = await response.json();\n-    console.log('üì¶ CSV WORKFLOW response.ok:', response.ok);\n-    console.log('üì¶ CSV WORKFLOW status:', response.status);\n-    console.log('üì¶ CSV WORKFLOW workflow info:', data.workflow || 'not specified');\n-    \n-    if (response.ok && data.success && data.data && Array.isArray(data.data)) {\n-      console.log('üì¶ CSV WORKFLOW: —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫');\n-      console.log('üì¶ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ø–∞–∫–æ–≤–æ–∫ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ:', data.data.length);\n-      console.log('üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö:', data.cached ? '–∫—ç—à (24—á)' : '—Å–≤–µ–∂–∏–π CSV —Ñ–∞–π–ª');\n-      if (data.csvUrl) {\n-        console.log('üì¶ CSV URL:', data.csvUrl);\n-      }\n-      \n-      // –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º –Ω–∞–∑–≤–∞–Ω–∏—è\n-      const searchTerms = [\n-        packageName,\n-        '–æ–±—Ä–µ—à–µ—Ç–∫–∞',\n-        '–æ–±—Ä–µ—à—ë—Ç–∫–∞',\n-        '–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è',\n-        'bubble',\n-        '–∑–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞'\n-      ];\n-      \n-      let foundPackage: any = null;\n-      \n-      for (const term of searchTerms) {\n-        foundPackage = data.data.find((pkg: any) => \n-          pkg.name && pkg.name.toLowerCase().includes(term.toLowerCase())\n-        );\n-        \n-        if (foundPackage) {\n-          console.log(`‚úÖ CSV WORKFLOW: –ù–∞–π–¥–µ–Ω–∞ —É–ø–∞–∫–æ–≤–∫–∞ –ø–æ —Ç–µ—Ä–º–∏–Ω—É \"${term}\": ${foundPackage.name} ‚Üí ${foundPackage.uid}`);\n-          break;\n-        }\n-      }\n-      \n-      if (foundPackage && foundPackage.uid) {\n-        return foundPackage.uid;\n-      } else {\n-        console.log('‚ùå CSV WORKFLOW: –£–ø–∞–∫–æ–≤–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ø–æ –ø–æ–∏—Å–∫–æ–≤—ã–º —Ç–µ—Ä–º–∏–Ω–∞–º');\n-        \n-        // –í—ã–≤–æ–¥–∏–º –ø–µ—Ä–≤—ã–µ 10 —É–ø–∞–∫–æ–≤–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n-        console.log('üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø–∞–∫–æ–≤–∫–∏ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ (–ø–µ—Ä–≤—ã–µ 10):');\n-        data.data.slice(0, 10).forEach((pkg: any, index: number) => {\n-          console.log(`  ${index + 1}. ${pkg.name} (${pkg.uid})`);\n-        });\n-      }\n-    } else {\n-      console.error('‚ùå CSV WORKFLOW: –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞:', data);\n-    }\n-    \n-    return null;\n-      \n-  } catch (error) {\n-    console.error('‚ùå CSV WORKFLOW: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞:', error);\n-    return null;\n-  }\n-};\n-\n-// –†–∞—Å—á–µ—Ç –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π —á–µ—Ä–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π API v2/calculator.json —Å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π\n-const calculateDellin = async (): Promise<CalculationResult> => {\n-  const { enhancedApiRequest } = await import('@/lib/api-utils');\n-  const apiUrl = 'https://api.dellin.ru/v2/calculator.json';\n-  const maxRetries = 2;\n-  \n-  console.log('üöÄ === –ù–ê–ß–ê–õ–û –†–ê–°–ß–ï–¢–ê –î–ï–õ–û–í–´–• –õ–ò–ù–ò–ô ===');\n-  console.log('üöÄ API URL:', apiUrl);\n-  \n-  try {\n-    let sessionID = await getDellinSessionId();\n-    \n-    if (!sessionID) {\n-      return {\n-        company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n-        price: 0,\n-        days: 0,\n-        error: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å sessionID',\n-        apiUrl,\n-        requestData: null,\n-        responseData: null\n-      };\n-    }\n-\n-    // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –∏ –æ–±—ä–µ–º—ã\n-    const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n-    const totalVolume = form.cargos.reduce((sum, cargo) => \n-      sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n-    );\n-    const maxLength = Math.max(...form.cargos.map(c => c.length)) / 100; // –≤ –º–µ—Ç—Ä–∞—Ö\n-    const maxWidth = Math.max(...form.cargos.map(c => c.width)) / 100;\n-    const maxHeight = Math.max(...form.cargos.map(c => c.height)) / 100;\n-\n-    // –ü–æ–ª—É—á–∞–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª—ã –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞\n-    let fromTerminalId: string | null = null;\n-    let toTerminalId: string | null = null;\n-    let normalizedFromAddress: string | null = null;\n-    let normalizedToAddress: string | null = null;\n-    \n-    // –î–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ–ª—É—á–∞–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª—ã\n-    if (!form.fromAddressDelivery) {\n-      fromTerminalId = await getDellinTerminalByDirection(form.fromCity, 'derival');\n-    } else {\n-      // –î–ª—è –∞–¥—Ä–µ—Å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∞–¥—Ä–µ—Å\n-      const addressToNormalize = form.fromAddress || form.fromCity;\n-      normalizedFromAddress = await normalizeAddressForDellin(addressToNormalize);\n-    }\n-    \n-    if (!form.toAddressDelivery) {\n-      toTerminalId = await getDellinTerminalByDirection(form.toCity, 'arrival');\n-    } else {\n-      // –î–ª—è –∞–¥—Ä–µ—Å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∞–¥—Ä–µ—Å\n-      const addressToNormalize = form.toAddress || form.toCity;\n-      normalizedToAddress = await normalizeAddressForDellin(addressToNormalize);\n-    }\n-    \n-    console.log('üè¢ –î–ê–ù–ù–´–ï –î–õ:');\n-    console.log('üè¢ form.fromAddressDelivery:', form.fromAddressDelivery);\n-    console.log('üè¢ form.toAddressDelivery:', form.toAddressDelivery);\n-    console.log('üè¢ fromTerminalId:', fromTerminalId);\n-    console.log('üè¢ toTerminalId:', toTerminalId);\n-    console.log('üè¢ normalizedFromAddress:', normalizedFromAddress);\n-    console.log('üè¢ normalizedToAddress:', normalizedToAddress);\n-    \n-    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª—ã –Ω–∞–π–¥–µ–Ω—ã –¢–û–õ–¨–ö–û –¥–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏\n-    if (!form.fromAddressDelivery && !fromTerminalId) {\n-      console.error('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–æ–¥–∞:', form.fromCity);\n-      return {\n-        company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n-        price: 0,\n-        days: 0,\n-        error: `–ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π –≤ –≥–æ—Ä–æ–¥–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: ${form.fromCity}`,\n-        apiUrl,\n-        requestData: null,\n-        responseData: null\n-      };\n-    }\n-    \n-    if (!form.toAddressDelivery && !toTerminalId) {\n-      console.error('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–æ–¥–∞:', form.toCity);\n-      return {\n-        company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n-        price: 0,\n-        days: 0,\n-        error: `–ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π –≤ –≥–æ—Ä–æ–¥–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è: ${form.toCity}`,\n-        apiUrl,\n-        requestData: null,\n-        responseData: null\n-      };\n-    }\n-    \n-    // –î–ª—è –∞–¥—Ä–µ—Å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∞–¥—Ä–µ—Å–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã\n-    if (form.fromAddressDelivery && !normalizedFromAddress) {\n-      console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è:', form.fromAddress || form.fromCity);\n-      return {\n-        company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n-        price: 0,\n-        days: 0,\n-        error: `–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: ${form.fromAddress || form.fromCity}`,\n-        apiUrl,\n-        requestData: null,\n-        responseData: null\n-      };\n-    }\n-    \n-    if (form.toAddressDelivery && !normalizedToAddress) {\n-      console.error('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:', form.toAddress || form.toCity);\n-      return {\n-        company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n-        price: 0,\n-        days: 0,\n-        error: `–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∞–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è: ${form.toAddress || form.toCity}`,\n-        apiUrl,\n-        requestData: null,\n-        responseData: null\n-      };\n-    }\n-\n-    // –ü–æ–ª—É—á–∞–µ–º UID —É–ø–∞–∫–æ–≤–∫–∏ crate_with_bubble (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —É–ø–∞–∫–æ–≤–∫–∞)\n-    let packageUid: string | null = null;\n-    console.log('=== –ù–ê–ß–ê–õ–û –û–¢–õ–ê–î–ö–ò –£–ü–ê–ö–û–í–ö–ò ===');\n-    console.log('üîç –û–¢–õ–ê–î–ö–ê –£–ü–ê–ö–û–í–ö–ò: form.needPackaging =', form.needPackaging);\n-    console.log('üîç –û–¢–õ–ê–î–ö–ê –£–ü–ê–ö–û–í–ö–ò: typeof form.needPackaging =', typeof form.needPackaging);\n-    \n-    if (form.needPackaging) {\n-      console.log('üîç ‚úÖ –£–ü–ê–ö–û–í–ö–ê –¢–†–ï–ë–£–ï–¢–°–Ø - –ó–ê–ü–†–ê–®–ò–í–ê–ï–ú UID —á–µ—Ä–µ–∑ CSV WORKFLOW...');\n-      try {\n-        packageUid = await getDellinPackageUid('crate_with_bubble');\n-        console.log('üîç ‚úÖ –ü–û–õ–£–ß–ï–ù packageUid –∏–∑ CSV WORKFLOW:', packageUid);\n-        \n-        // –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ UID –∏–∑ CSV, –∏—Å–ø–æ–ª—å–∑—É–µ–º UID —Å —Å–∞–π—Ç–∞ –î–õ (–∏—Å–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ 500‚ÇΩ)\n-        if (!packageUid) {\n-          packageUid = '0x9dd8901b0ecef10c11e8ed001199bf6e'; // UID —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –î–õ\n-          console.log('üîç üß™ –ò–°–ü–û–õ–¨–ó–£–ï–ú UID –° –°–ê–ô–¢–ê –î–õ (–∏—Å–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ):', packageUid);\n-        }\n-        \n-        console.log('üîç ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô packageUid:', packageUid);\n-        console.log('üîç ‚úÖ typeof packageUid:', typeof packageUid);\n-        console.log('üîç ‚úÖ packageUid truthy:', !!packageUid);\n-      } catch (error) {\n-        console.log('üîç ‚ùå –û–®–ò–ë–ö–ê –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ packageUid —á–µ—Ä–µ–∑ CSV WORKFLOW:', error);\n-        // –ò—Å–ø–æ–ª—å–∑—É–µ–º UID —Å —Å–∞–π—Ç–∞ –î–õ –∫–∞–∫ fallback (–∏—Å–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ)\n-        packageUid = '0x9dd8901b0ecef10c11e8ed001199bf6e'; // UID —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –î–õ\n-        console.log('üîç üß™ –ò–°–ü–û–õ–¨–ó–£–ï–ú UID –° –°–ê–ô–¢–ê –î–õ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ (–∏—Å–ø—Ä–∞–≤–ª—è–µ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ):', packageUid);\n-      }\n-    } else {\n-      console.log('üîç ‚ùå –£–ø–∞–∫–æ–≤–∫–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ UID');\n-    }\n-    console.log('=== –ö–û–ù–ï–¶ –û–¢–õ–ê–î–ö–ò –£–ü–ê–ö–û–í–ö–ò ===');\n-\n-    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –∑–∞–≤—Ç—Ä–∞\n-    const tomorrow = new Date();\n-    tomorrow.setDate(tomorrow.getDate() + 1);\n-    const produceDate = tomorrow.toISOString().split('T')[0];\n-\n-    // –û—Ç–ª–∞–¥–∫–∞ –ø–µ—Ä–µ–¥ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∑–∞–ø—Ä–æ—Å–∞\n-    console.log('=== –û–¢–õ–ê–î–ö–ê –§–û–†–ú–ò–†–û–í–ê–ù–ò–Ø –ó–ê–ü–†–û–°–ê ===');\n-    console.log('üîç form.needPackaging =', form.needPackaging, '(—Ç–∏–ø:', typeof form.needPackaging, ')');\n-    console.log('üîç packageUid =', packageUid, '(—Ç–∏–ø:', typeof packageUid, ')');\n-    console.log('üîç packageUid truthy =', !!packageUid);\n-    console.log('üîç –£—Å–ª–æ–≤–∏–µ (form.needPackaging && packageUid) =', form.needPackaging && packageUid);\n-    \n-    if (form.needPackaging && packageUid) {\n-      console.log('‚úÖ PACKAGES –ë–£–î–ï–¢ –î–û–ë–ê–í–õ–ï–ù –í –ó–ê–ü–†–û–°!');\n-    } else {\n-      console.log('‚ùå PACKAGES –ù–ï –ë–£–î–ï–¢ –î–û–ë–ê–í–õ–ï–ù:');\n-      if (!form.needPackaging) console.log('  - form.needPackaging = false');\n-      if (!packageUid) console.log('  - packageUid –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç/null');\n-    }\n-\n-    // –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏\n-    const requestData = {\n-      appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n-      sessionID: sessionID,\n-      delivery: {\n-        deliveryType: {\n-          type: 'auto'  // –í—Å–µ–≥–¥–∞ \"auto\" –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n-        },\n-        derival: {\n-          produceDate: produceDate,  // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –¥–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è\n-          variant: form.fromAddressDelivery ? 'address' : 'terminal',\n-          ...(form.fromAddressDelivery ? {\n-            address: {\n-              search: normalizedFromAddress || form.fromAddress || form.fromCity\n-            }\n-          } : {\n-            terminalID: fromTerminalId\n-          }),\n+    }),\n           time: {\n             worktimeStart: '10:00',\n             worktimeEnd: '18:00',\n             breakStart: '13:00',\n"
        }
      ]
    },
    "time": {
      "start": 1762837250100,
      "end": 1762837250665
    }
  }
}