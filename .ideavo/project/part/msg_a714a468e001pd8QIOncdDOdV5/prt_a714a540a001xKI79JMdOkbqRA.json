{
  "id": "prt_a714a540a001xKI79JMdOkbqRA",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_a714a468e001pd8QIOncdDOdV5",
  "type": "tool",
  "callID": "toolu_012xXCyFLoUe6DGF6XMetkwN",
  "tool": "edit",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "app/page.tsx",
      "newString": "      checkAPIStatus('cdek', async () => {\n        try {\n          const response = await fetch('/api/cdek', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              from_city: testData.fromCity,\n              to_city: testData.toCity,\n              packages: [{\n                height: 10,\n                length: 20,\n                width: 10,\n                weight: 1000\n              }]\n            })\n          });\n          const data = await response.json();\n          \n          if (!response.ok) {\n            const errorText = data.details || data.error || 'Unknown error';\n            if (errorText.includes('<!DOCTYPE') || errorText.includes('<html')) {\n              return { error: true, errorType: '‚ö†Ô∏è —Ç–æ–∫–µ–Ω' };\n            }\n            if (response.status === 401 || response.status === 403) {\n              return { error: true, errorType: 'üîê auth' };\n            }\n            return { error: true, errorType: '‚ùå API' };\n          }\n          \n          if (response.ok && data.tariff_codes && data.tariff_codes.length > 0) {\n            return { success: true };\n          } else {\n            return { error: true, errorType: '‚ö†Ô∏è —Ñ–æ—Ä–º–∞—Ç' };\n          }\n        } catch (error) {\n          return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n        }\n      }),\n      \n      checkAPIStatus('kit', async () => {\n        try {\n          const response = await fetch('/api/kit', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              from_city: testData.fromCity,\n              to_city: testData.toCity,\n              declared_price: testData.declaredValue\n            })\n          });\n          const data = await response.json();\n          \n          if (!response.ok) {\n            const errorText = data.details || data.error || 'Unknown error';\n            if (errorText.includes('<!DOCTYPE') || errorText.includes('<html')) {\n              return { error: true, errorType: '‚ö†Ô∏è —Ç–æ–∫–µ–Ω' };\n            }\n            if (response.status === 401 || response.status === 403) {\n              return { error: true, errorType: 'üîê —Ç–æ–∫–µ–Ω' };\n            }\n            return { error: true, errorType: '‚ùå API' };\n          }\n          \n          if (Array.isArray(data) && data.length > 0) {\n            return { success: true };\n          } else {\n            return { error: true, errorType: '‚ö†Ô∏è —Ñ–æ—Ä–º–∞—Ç' };\n          }\n        } catch (error) {\n          return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n        }\n      })",
      "oldString": "      checkAPIStatus('cdek', async () => {\n        try {\n          const response = await fetch('/api/cdek', {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              from_city: testData.fromCity,\n              to_city: testData.toCity,\n              packages: [{\n                height: 10,\n                length: 20,\n                width: 10,\n                weight: 1000\n              }]\n            })\n          });\n          const data = await response.json();\n          \n          if (!response.ok) {\n            const errorText = data.details || data.error || 'Unknown error';\n            if (errorText.includes('<!DOCTYPE') || errorText.includes('<html')) {\n              return { error: true, errorType: '‚ö†Ô∏è —Ç–æ–∫–µ–Ω' };\n            }\n            if (response.status === 401 || response.status === 403) {\n              return { error: true, errorType: 'üîê auth' };\n            }\n            return { error: true, errorType: '‚ùå API' };\n          }\n          \n          if (response.ok && data.tariff_codes && data.tariff_codes.length > 0) {\n            return { success: true };\n          } else {\n            return { error: true, errorType: '‚ö†Ô∏è —Ñ–æ—Ä–º–∞—Ç' };\n          }\n        } catch (error) {\n          return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n        }\n      })"
    },
    "output": "",
    "title": "app/page.tsx",
    "metadata": {
      "diagnostics": {},
      "diff": "Index: /home/user/project/app/page.tsx\n===================================================================\n--- /home/user/project/app/page.tsx\n+++ /home/user/project/app/page.tsx\n@@ -743,8 +743,42 @@\n   } catch (error) {\n     return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n   }\n }),\n+\n+checkAPIStatus('kit', async () => {\n+  try {\n+    const response = await fetch('/api/kit', {\n+      method: 'POST',\n+      headers: { 'Content-Type': 'application/json' },\n+      body: JSON.stringify({\n+        from_city: testData.fromCity,\n+        to_city: testData.toCity,\n+        declared_price: testData.declaredValue\n+      })\n+    });\n+    const data = await response.json();\n+    \n+    if (!response.ok) {\n+      const errorText = data.details || data.error || 'Unknown error';\n+      if (errorText.includes('<!DOCTYPE') || errorText.includes('<html')) {\n+        return { error: true, errorType: '‚ö†Ô∏è —Ç–æ–∫–µ–Ω' };\n+      }\n+      if (response.status === 401 || response.status === 403) {\n+        return { error: true, errorType: 'üîê —Ç–æ–∫–µ–Ω' };\n+      }\n+      return { error: true, errorType: '‚ùå API' };\n+    }\n+    \n+    if (Array.isArray(data) && data.length > 0) {\n+      return { success: true };\n+    } else {\n+      return { error: true, errorType: '‚ö†Ô∏è —Ñ–æ—Ä–º–∞—Ç' };\n+    }\n+  } catch (error) {\n+    return { error: true, errorType: 'üì° —Å–µ—Ç—å' };\n+  }\n+}),\n       time: {\n         worktimeStart: '10:00',\n         worktimeEnd: '18:00',\n         breakStart: '13:00',\n"
    },
    "time": {
      "start": 1762837298875,
      "end": 1762837298910
    }
  }
}