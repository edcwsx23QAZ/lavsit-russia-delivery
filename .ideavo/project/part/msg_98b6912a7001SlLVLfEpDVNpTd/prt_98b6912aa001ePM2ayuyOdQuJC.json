{
  "id": "prt_98b6912aa001ePM2ayuyOdQuJC",
  "type": "text",
  "text": "Раздели проблемы на две части.\nЧасть 1:\n401 Ошибка авторизации API Деловых Линий\n\nИспользуй для Деловых Линий ключ E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B\n\nНиже данные документации API ПЭК:\nМетод /calculator/calculateprice/ — расчет стоимости и сроков перевозки\nДоступ\nЗарегистрированные пользователи\nКомментарии\nОбщие рекомендации по передаче адреса забора/доставки в запрос при интеграции с транспортной компанией\nВыбор адреса отправления и адреса получения осуществляется по следующей логике: если заказана услуга забора/доставки, то расчет стоимости ведется по координатам напрямую переданным в запрос (параметр \"coordinates\" блоков pickup / delivery), или координатам, полученным по переданной строке адреса (параметр \"address\" блоков pickup / delivery). Все прочие параметры определяющие адреса будут проигнорированы.\nЕсли услуга забора/доставки не заказана, то необходимо передавать ID склада отправления/назначения (параметр senderWarehouseId / receiverWarehouseId).\nID склада населенного пункта (с отбором по разрешенным габаритам можно получить методом /branches/nearestdepartments, возвращающим ближайшие отделения к переданному в запрос адресу. Или самостоятельно выбирать удобное отделение/склад из ответа метода /branches/all (поле branches[].divisions[].warehouses[].id), при этом необходимо учитывать доступность складов по габаритам и разрешенных для них операций.\nБыстро получить ID склада основного отделения любого филиала можно используя метод /branches/findzonebyaddress. в ответе метода реквизит mainWarehouseId. Основное отделение является центральным складом конкретного филиала, из которого можно дозаказать доставку до адреса или ПВЗ, который относится к зоне обслуживаемого филиала.\nНапример, по адресу «Самарская область, город Отрадный», основным является отделение филиала «Самара» по адресу: ул. Земеца, д. 32 литера 354, так как город Отрадный обслуживает филиал «Самара».\nОбъекты со стоимостью услуг для разных видов перевозки возвращаются отдельно в массиве transfers. Тип перевозки указывается в поле объекта transfers[].type; 3 соответствует автоперевозке, 1 — авиа.\nСроки авиаперевозки могут указываться несколькими значениями, для разных вариантов времени сдачи груза на склад отправителем. В ответе метод возвращает массив данных по времени приемки груза — transportingTimes. Количество элементов в массивах сроков перевозки commonTerms[].transporting и перевозки с доставкой commonTerms[].transportingWithDelivery равно количеству элементов в данном массиве transportingTimes. Чтобы определить ориентировочный срок доставки, нужно сначала выбрать элемент массива данных по времени приемки груза transportingTimes со временем, ранее которого груз был сдан на склад. После этого ориентировочный срок доставки можно смотреть в соответствующих элементах массивов commonTerms[].transporting и commonTerms[].transportingWithDelivery.\nВ массиве cargos нужно передавать информацию по каждому грузоместу груза, заполняя несколько элементов массива. Каждый элемент массива будет восприниматься, как отдельное грузоместо одного груза. Если Вам известны габариты и вес каждого грузоместа, то передавайте Длину, Ширину, Высоту и Вес. Если Вам известны только общие габариты всего груза (Объём, Вес, Максимальный габарит и количество мест) и не известны вес и габариты каждого грузоместа, то передавайте на вход столько элементов массива - сколько мест. В каждом элементе массива указывайте средние Вес и Объём грузоместа (разделите общий вес груза и общий объём груза на кол-во мест) и Максимальный габарит грузоместа. Важно! Признак isHP в калькуляторе рассчитывается всегда по грузу в целом - если хотя бы у одного грузоместа значение будет true, то защитная транспортировочная упаковка будет рассчитана для всего груза.\nПараметр needReturnDocuments необязательный. Выберите, если необходим возврат документов с подписью и печатью получателя, подтверждающих, что груз им получен. Подробнее.\nПараметр needArrangeTransportationDocuments необязательный. Выберите, чтобы расчитать передачу вместе с грузом комплекта сопроводительных документов, которые будут выданы грузополучателю вместе с грузом. Подробнее.\nАрхив с примерами минимальных запросов CalculatePrice (.zip, 2Кб).\nФормат запроса\n{\n   \"currencyCode\": \"643\", // Код валюты [String]. Необязательно. По умолчанию 643 - российский рубль.\n                          // Допустимые валюты см.в ответе метода /currency/all/\n\n   \"types\": [ 1 ], // Массив идентификаторов продуктов/тарифов ПЭК для расчета [Array][Number]. Обязательно.\n                   // Полный список доступных в API продуктов/тарифов можно получить методом /typesOfDelivery/all/\n                   // ВНИМАНИЕ! В настоящее время метод не позволяет рассчитывать стоимость по продукту/тарифу 5 - ПЭК:Express Авто \n   \"senderWarehouseId\": \"dc6c746d-812d-11e4-bbfc-001999d8b3c5\", // Идентификатор склада отправителя [String]\n   \"receiverWarehouseId\": \"b436c978-086d-11e6-b6ca-00155d668909\", // Идентификатор склада получателя [String]\n   \"isOpenCarSender\": false, // Растентовка отправителя [Boolean]\n   \"isOpenCarReceiver\": false, // Растентовка получателя [Boolean]\n   \"isHyperMarket\": false, // признак гипермаркета [Boolean]\n   \"plannedDateTime\": \"2023-02-28T14:00:00\", // Дата и время планируемой передачи груза в ПЭК (по часовому поясу филиала отправления) [DateTime]:\n                                             // при заказанном заборе - дата и время начала интервала забора груза \n                                             // (не позднее 4-х часов до окончания работы филиала),\n                                             // при самопривозе - дата и время плановой сдачи груза на склад ПЭК\n   \"isInsurance\": true, // Страхование [Boolean]\n   \"isInsurancePrice\": 234.15, // Стоимость груза (сумма, на которую будет застрахован груз), руб [Number]\n   \"isPickUp\": false, // Нужен забор [Boolean]\n   \"isDelivery\": false, // Нужна доставка [Boolean]\n   \"needReturnDocuments\": false, // Возврат документов [Boolean] (см. комментарии)\n   \"needArrangeTransportationDocuments\": false, // Организация перевозки сопроводительных документов [Boolean] (см. комментарии)\n   \n   \"senderDistanceType\": 0, // В актуальной версии протокола не используется [Number]\n   \"receiverDistanceType\": 0, // В актуальной версии протокола не используется [Number]\n   \"pickupServices\": { // Погрузочно-разгрузочные работы при заборе\n       \"isLoading\": true, // Расчитывать ПРР [Boolean]\n       \"floor\": 0, // Поднять/спустить на этаж [Number]\n       \"carryingDistance\": 0, // Перенести груз (в метрах) [Number]\n       \"isElevator\": false // Подъем на лифте [Boolean]\n    },\n   \"deliveryServices\": { // Погрузочно-разгрузочные работы при доставке\n       \"isLoading\": true, // Расчитывать ПРР [Boolean]\n       \"floor\": 3, // Поднять/спустить на этаж [Number]\n       \"carryingDistance\": 50, // Перенести груз (в метрах) [Number]\n       \"isElevator\": true // Подъем на лифте [Boolean]\n   },\n   \"pickup\": {\n        \"address\" : \"Россия, Москва, улица Большая Лубянка, 2\",\t// Обязательный параметр для расчёта забора груза. Для успешного определения \n                                                                // координат адреса забора, передавайте все составляющие адреса в такой \n                                                                // последовательности: страна, регион, район, населенный пункт, улица, дом, \n                                                                // квартира и разделяйте их запятыми. Запрещено в данной строке указывать \n                                                                // данные, не являющиеся частью адреса (см. комментарии)\n        \"coordinates\" : { // Необязательный параметр координат адреса (используется для точности вычислений)\n            \"latitude\" : \"55.761011\",\n            \"longitude\" : \"37.627553\"\n        }\n   },\n   \"delivery\" : {\n        \"address\" : \"Россия, Москва, улица Большая Лубянка, 2\",\t// Обязательный параметр для расчёта доставки груза. Для успешного определения \n                                                                // координат адреса доставки, передавайте все составляющие адреса в такой \n                                                                // последовательности: страна, регион, район, населенный пункт, улица, дом, \n                                                                // квартира и разделяйте их запятыми. Запрещено в данной строке указывать \n                                                                // данные, не являющиеся частью адреса (см. комментарии)\n        \"coordinates\" : { // Необязательный параметр координат адреса (используется для точности вычислений)\n            \"latitude\" : \"55.761011\",\n            \"longitude\" : \"37.627553\"\n        }\n   },\n   \"counterpart\": { // Данные контрагента для расчета с учетом спецусловий\n        \"inn\": \"1234567890\", // ИНН контрагента [String]\n        \"kpp\": \"123456789\", // КПП контрагента [String], поле необязательно\n        \"counterpartClientCard\": \"1234567890\", // Номер карты клиента [String]\n        \"whoMakesCalculation\": [1,2,3,4] // Роль заказчика перевозки  [Array][Number]. (Кто производит расчет: \n                                         // 1 - отправитель, 2 - получатель, 3 - плательщик, 4 - не участник перевозки)\n   },\n   \"cargos\": [{ // Данные о грузе/грузоместах груза (см. комментарии) [Array]\n                // Для корректного расчёта передавайте не более двух знаков после запятой, \n                // На нашей стороне округление выполняется до сотых в большую сторону.\n                // Например, 0.00041 будет 0.01;  1.871001 будет 1.88\n      \"length\": 3.2, // Длина груза, м [Number]. Необязательно, если передан maxSize\n      \"width\": 0.9, // Ширина груза, м [Number]. Необязательно, если передан maxSize\n      \"height\": 1.5, // Высота груза, м [Number]. Необязательно, если передан maxSize\n      \"volume\": 4.32, // Объем груза, м3 [Number]. Необязательно, если переданы длина, ширина, высота.\n      \"maxSize\": 3.2, // Максимальный габарит, м [Number]. Необязательно, если переданы длина, ширина, высота (которые имеют приоритет). \n      \"isHP\": false, // Защитная транспортировочная упаковка [Boolean]. Необязательно\n      \"sealingPositionsCount\": 0, // Количество мест для пломбировки - пломб (применяются для небольших мест или сложных грузов)[Number]. Необязательно.\n      \"weight\": 622.5 // Вес, кг [Number]. Обязательно.\n      \"maxPlaceWeight\": 50.2 [Number] // максимальный вес грузоместа. Необязательно.\n                                      // Рекомендуем передавать только в массиве с одним элементом\n                                      // для общих параметров всего груза.\n   }]\n}\nФормат ответа\n{\n    \"hasError\": false, // Признак ошибок при расчетах [Boolean]\n    \"errorMessage\": null, // Текст ошибки [String]\n    \"currencyCode\": \"643\", // Код валюты, в которой выполнен расчет стоимости [String]\n    \"branchSenderUID\": \"b473ce9f-dd68-44ea-a4b2-4cb63b6e970d\",// Идентификатор филиала отправления [String]\n    \"branchSender\": \"Москва Восток\", // Наименование филиала отправления [String]. \n                                     // Отвечает за оказание услуги \"первая миля\". При сдаче в отделении \n                                     // выводится филиал по организационной структуре\n    \"branchReceiverUID\": \"64adbe2c-a185-11dc-a911-000a5e19ccb4\",// Идентификатор филиала получения [String]\n    \"branchReceiver\": \"Санкт-Петербург\", // Наименование филиала получения [String]. \n                                         // Отвечает за оказание услуги \"последняя миля\". При выдаче в отделении\n                                         // выводится филиал по организационной структуре\n    \"transfers\": [{ // Результаты расчетов по каждому из запрошенных продуктов/тарифов [Array]\n            \"type\": 3, // Продукт/тариф, для которого выведена стоимость [Number]\n            \"hasError\": false, // Признак ошибок при расчетах [Boolean]\n            \"errorMessage\": null, // Текст ошибки [String]\n            \"costTotal\": 5319, // Общая стоимость услуг по продукту/тарифу, руб. [Number]\n            \"estDeliveryTime\": 3, // Срок перевозки (календарные дни) [Number]. На основании заказанных услуг забора/доставки\n            \"services\": [// Данные по услугам, входящим в продукт/тариф [Array]\n                // Перечень услуг, которые будут выставлены в УПД, после перевозки груза с указанными параметрами\n                // Каждый элемент массива и подмассива - отдельная услуга, со своей стоимостью\n                {\n                    \"serviceType\": \"Перевозка\", // Наименование группы услуги [String]\n                    \"senderCity\": \"Москва\", // Город отправитель [String]\n                    \"cost\": 5269, // Сумма за услугу, руб. [String]\n                    \"info\": \"Перевозка:\" // Наименование конкретной услуги [String]\n                    \"services\": null // Вложенные услуги [Array] элементов service\n                }, {\n                    \"serviceType\": \"Перевозка\",\n                    \"senderCity\": \"Москва\",\n                    \"cost\": 50,\n                    \"info\": \"Страхование:\",\n                    \"services\": null\n                }, {\n                    \"serviceType\": \"Перевозка\",\n                    \"senderCity\": \"Москва\",\n                    \"cost\": 446.6, // Стоимость основной услуги (не включает стоимости подуслуг из вложенного массива services)\n                    \"info\": \"Доставка груза\",\n                    \"services\": [// Массив отдельно выделяемых услуг со стоимостью [Array].\n                        //Стоимость услуг из массива НЕ ВХОДИТ в стоимость (реквизит Cost) родительского элемента\n                        {\n                            \"serviceType\": \"Перевозка\",\n                            \"senderCity\": \"Москва\",\n                            \"cost\": 200.0,\n                            \"info\": \"Перенос груза по улице и внутри зданий более 30 метров\",\n                            \"services\": null\n                        }, {\n                            \"serviceType\": \"Перевозка\",\n                            \"senderCity\": \"Москва\",\n                            \"cost\": 250.0,\n                            \"info\": \"Погрузо-разгрузочные работы\",\n                            \"services\": null\n                        }\n                    ]\n                }\n            ],\n            \"transportingTypes\": 1 // В актуальной версии протокола API не используется\n        }, {\n            \"type\": 1,\n            \"hasError\": true,\n            \"errorMessage\": \"Длина груза превышает допустимую для АВИА. Допустимая длина 2 м.\n            Груз может быть не принят к данному виду перевозки; Ширина груза превышает допустимую для АВИА. Допустимая ширина 1 м.\n            Груз может быть не принят к данному виду перевозки; Высота груза превышает допустимую для АВИА. Допустимая высота 0,8 м.\n            Груз может быть не принят к данному виду перевозки\",\n            \"costTotal\": 0,\n            \"services\": [],\n            \"transportingTypes\": 2 // В актуальной версии протокола API не используется\n        }, {\n            \"type\": 12,\n            \"hasError\": false,\n            \"errorMessage\": null,\n            \"costTotal\": 430.0,\n            \"services\": [{\n                    \"serviceType\": \"Перевозка\",\n                    \"senderCity\": \"Москва\",\n                    \"cost\": 430.0,\n                    \"info\": \"Автоперевозка\",\n                    \"services\": null\n                }\n            ]\n        }\n    ],\n    \"transportingTimes\": [// Массив данных по времени приемки груза [Array]. Используется для точного определения сроков перевозки.\n        \"0001-01-01T12:00:00\", // Значения времени, до которого ожидается, что груз будет сдан на склад.\n        // Из соответствующего элемента массива transporting или\n        // transportingWithDelivery нужно взять значение сроков перевозки\n        \"0001-01-01T15:00:00\",\n        \"0001-01-01T17:00:00\"\n    ],\n    \"commonTerms\": [{ // Общие данные по срокам перевозок [Array]\n            // Значения по срокам перевозки представлены в виде строки \"КоличествоДнейПеревозки\"\n            // или \"МинимальноеКоличествоДнейПеревозки – МаксимальноеКоличествоДнейПеревозки\"\n            \"type\": 3, // Продукт/тариф, для которого выведены сроки перевозки [Number]\n            \"branchSender\": \"Москва Восток\", // Филиал-отправитель [String]\n            \"branchReceiver\": \"Санкт-Петербург\", // Филиал-получатель [String]\n            \"discountedDeliveryWeekDays\": [// Дни льготной доставки [Array]\n                2, 4 // Значения соответствуют дню недели льготной доставки (понедельник - 1, воскресенье - 7)\n            ],\n            \"transporting\": [// Ориентировочные сроки перевозки, суток [Array]\n                // из массива надо выбрать элемент в соответствии со временем сдачи груза на склад и\n                // Массивом данных по времени приемки груза transportingTimes\n                \"1\",\n                \"1 - 2\",\n                \"2 - 3\"\n            ],\n            \"transportingWithDelivery\": [// Ориентировочные сроки перевозки с доставкой, суток [Array]\n                \"2 - 3\",\n                \"2 - 4\",\n                \"3 - 5\"\n            ],\n            \"transportingWithPickup\": \"3 - 4\", // Срок перевозки с забором, суток [String]\n            \"transportingWithDeliveryWithPickup\": \"4 - 6\", // Срок перевозки с забором и доставкой, суток [String]\n            \"senderShippingDays\": [// Указываются дни недели отправки груза из филиала отправления в филиал получения. 1 - ПН, 2 - ВТ и т.д\n                1,\n                2,\n                3,\n                4,\n                5,\n                6\n            ],\n            \"transportingTypes\": 1 // В актуальной версии протокола API не используется\n        }, {\n            \"type\": 12,\n            ...\n        }, {\n            \"type\": 1,\n            ...\n        }\n    ]\n}\nМетод /calculator/checkdeliverydate/ — возвращает ближайшие даты и интервалы времени по дате забора/доставки от даты запроса \"requestDateTime\"\nДоступ\nЗарегистрированные пользователи\nФормат запроса\n{\n    \"requestDateTime\": \"2023-01-17\", // дата запроса, необязательный параметр,\n                                     // если не заполнен считается от текущей даты [Date]\n    \"calculateDays\": 1, // количество дней для расчета забора/доставки от даты запроса, расчет не более 7 дней,\n                        // если не заполнен значение по умолчанию равно 1 [Number], необязательный параметр\n    \"address\": \"Россия, Москва, улица Большая Лубянка, 2\",  // адрес забора/доставки груза [String],необязательный параметр, если переданы координаты\n    \"coordinates\": { // координаты адреса забора/доставки (используется для точности вычислений), \n                     // если переданы координаты, то значение в поле address игнорируется. Необязательный параметр\n        \"latitude\": 55.761016, // [Number]\n        \"longitude\": 37.627562 // [Number] \n    }\n}\nФормат ответа\n[\n    {\n        \"date\": \"2022-12-31T00:00:00\", // ближайший день забора/доставки от переданной даты в запросе [DateTime]\n        \"isPreferential\": false, // в этот день действует льготный тариф на забор/доставку по запрошенному адресу [Boolean]\n        \"periods\": [ // минимальные временные интервалы на забор/доставку груза\n            {\n                \"periodTimeFrom\": \"14:00:00\",  // время начала интервала [TimeSpan]\n                \"periodTimeTo\": \"18:00:00\", // время окончания интервала [TimeSpan]\n                \"isDayLight\": true // временной интервал без наценки на забор/доставку в ночное время [Boolean], \n                                   // значение false означает, что будет наценка за ночное время (возможность оказания услуги необходимо уточнять у менеджера)\n            },\n            {\n                \"periodTimeFrom\": \"15:00:00\",\n                \"periodTimeTo\": \"19:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"16:00:00\",\n                \"periodTimeTo\": \"20:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"17:00:00\",\n                \"periodTimeTo\": \"21:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"18:00:00\",\n                \"periodTimeTo\": \"22:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"19:00:00\",\n                \"periodTimeTo\": \"23:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"20:00:00\",\n                \"periodTimeTo\": \"00:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"21:00:00\",\n                \"periodTimeTo\": \"01:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"22:00:00\",\n                \"periodTimeTo\": \"02:00:00\",\n                \"isDayLight\": true\n            },\n            {\n                \"periodTimeFrom\": \"23:00:00\",\n                \"periodTimeTo\": \"03:00:00\",\n                \"isDayLight\": true\n            }\n        ]\n    }\n]\n\nМетод /branches/findzonebyaddress/ — поиск тарифных зон и филиалов по строке адреса\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод по строке адреса выводит филиал, к которому относится указанный адрес, наименование тарифной зоны, ID склада основного отделения филиала. Составляющие части адреса возвращаются в виде массива: страна, регион, населенный пункт, улица, дом.\nЕсли возвращается пустой ответ - значит зона адреса не обслуживается ПЭК.\nФормат запроса\n{\n    \"address\": \"Ростовская обл, Азовский р-н, поселок Койсуг\" // Адрес [string]\n}\nФормат ответа\n{\n    \"zoneId\": \"52ce7ec0-ab5f-11e8-80ca-00155d444127\", // Идентификатор зоны [String]\n    \"zoneName\": \"Батайск город\", // Наименование зоны [String]\n    \"branchUID\": \"614cdae3-7070-11e8-80c9-00155d668927\", // Идентификатор филиала [String]\n    \"bitrixId\": \"2729346\", // Код филиала [String]. В актуальной версии протокола не используется\n    \"branchCode\": \"БТ\", // Код филиала [String]\n    \"branchTitle\": \"Батайск\", // Название филиала [String]\n    \"mainWarehouseId\": \"a5ab5545-7076-11e8-80c9-00155d668927\", // ID склада основного отделения филиала [String]\n    \"warehousePoint\": { // Координаты «Основного отделения филиала компании», к которому относится адрес\n        \"latitude\": 47.12786575851295, // Координата широты [double]\n        \"longitude\": 39.85232042817180 // Координата долготы [double]\n    },\n    \"GeoData\": {\n        \"precision\": \"exact\", // критерий точности распознавания координат адреса [String]. Возможные значения: \n                              // \"exact\" - точно; \"bad\" - заявка по такому адресу не будет принята, \n                              // \"near\" - поняли адрес приблизительно (до улицы, соседнего дома и т.п.), \n                              // заявка будет принята, но потребуется уточнение адреса при оформлении груза.\n        \"kind\": \"locality\", // название компоненты адреса, до которой определен адрес в ответе. Пример значений: \"house\", \"street\", \"locality\" (город, село и т.п.), \"province\" (часть региона), \"country\"\n        \"Address\": {\n            \"country_code\": \"RU\", // код страны, к которой относится адрес (выводится только если определен точный адрес)\n            \"formatted\": \"Россия, Ростовская область, Азовский район, посёлок Койсуг\", // полное представление найденного адреса\n            \"Components\": [ // массив составляющих частей адреса: страна, регион, населенный пункт, улица, дом\n                {\n                    \"kind\": \"country\",\n                    \"name\": \"Россия\"\n                },\n                {\n                    \"kind\": \"province\",\n                    \"name\": \"Южный федеральный округ\"\n                },\n                {\n                    \"kind\": \"province\",\n                    \"name\": \"Ростовская область\"\n                },\n                {\n                    \"kind\": \"area\",\n                    \"name\": \"Азовский район\"\n                },\n                {\n                    \"kind\": \"locality\",\n                    \"name\": \"посёлок Койсуг\"\n                }\n            ]\n        }\n    }\n}\n}\nМетод /branches/checkpickupdate/ — определение доступности дат забора груза\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод позволяет определить только возможность забора груза в указанную дату и выводит массив доступных дат до и после указанной даты.\nЕсли необходимо проверить, действует ли льготный тариф на забор по запрошенному адресу в указанную дату, рекомендуем использовать метод /calculator/checkdeliverydate/.\nФормат запроса\n{\n    \"address\": \"Вологда\", // Адрес забора [String]\n    \"planPickupDate\": \"2022-08-20\" // Плановая дата забора [\"String\"]\n}\nФормат ответа\n{\n    \"AddressAvailable\": true, // Забор с адреса возможен [Boolean]\n    \"PickupDateAvailable\": true, // Забор на указанную дату возможен [Boolean]\n    \"AvailablePickupDatesBefore\": [ // Массив доступных дат до указанной [Array]\n        \"2022-08-17\", // Доступая дата [String]\n        \"2022-08-18\",\n        \"2022-08-19\"\n    ],\n    \"AvailablePickupDatesAfter\": [ // Массив доступных дат после указанной [Array]\n        \"2022-08-22\", // Доступная дата [String]\n        \"2022-08-23\",\n        \"2022-08-24\"\n        ]\n}\nМетод /branches/suggestaddressofintakeordelivery/ — запрос поисковых подсказок адресов забора/доставки груза\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод позволяет в ИТ системе реализовать быстрый подбор адреса забора/ доставки по аналогии с тем, как это сделано на сайте pecom.ru при подаче заявки. На вход дается строка с частью адреса, в ответе выводятся наиболее похожие варианты. При этом перечень вариантов содержит только адреса зоны доставки/ забора ПЭК. В некоторых случаях отсутствие вариантов адресов может говорить только о том, что адреса еще нет в базе, но забор/ доставка по адресу возможны, если есть забор/ доставка на соседние улицы/ дома.\nНе используйте данный метод для проверки доступности адреса, т.к. есть ограничения по числу запросов для всех пользователей в сутки.\nДля проверки доступности адреса Забора и Доставки используйте метод /BRANCHES/FINDZONEBYADDRESS/. Правильность адреса можно смотреть в ответе метода /FINDZONEBYADDRESS/ в блоке GeoData. Address. formatted\nФормат запроса\n{\n    \"address\": \"Койсуг\" // Часть адреса для получения вариантов наиболее похожих доступных адресов забора и доставки [string]\n}\nФормат ответа\n{\n    \"response\": {\n        \"GeoObjectCollection\": {\n            \"metaDataProperty\": {\n                \"GeocoderResponseMetaData\": {\n                    \"request\": \"Койсуг\", // часть адреса, по котормоу подбирались варианты\n                    \"results\": \"10\",\n                    \"found\": \"6\" // количество найденных вариантов адресов по стркое запроса\n                }\n            },\n            \"featureMember\": [ // массив предлагаемых вариантов вариантов адресов, подобранных по запросу\n                {\n                    \"GeoObject\": {\n                        \"metaDataProperty\": {\n                            \"GeocoderMetaData\": {\n                                \"precision\": \"other\",\n                                \"text\": \"Россия, Ростовская область, Азовский район, посёлок Койсуг\", // Полный адрес, предлагаемый как вариант искомого по запросу\n                                \"kind\": \"locality\",\n                                \"Address\": {\n                                    \"country_code\": \"RU\",\n                                    \"formatted\": \"Россия, Ростовская область, Азовский район, посёлок Койсуг\",\n                                    \"Components\": [\n                                        {\n                                            \"kind\": \"country\",\n                                            \"name\": \"Россия\"\n                                        },\n                                        {\n                                            \"kind\": \"province\",\n                                            \"name\": \"Южный федеральный округ\"\n                                        },\n                                        {\n                                            \"kind\": \"province\",\n                                            \"name\": \"Ростовская область\"\n                                        },\n                                        {\n                                            \"kind\": \"area\",\n                                            \"name\": \"Азовский район\"\n                                        },\n                                        {\n                                            \"kind\": \"locality\",\n                                            \"name\": \"посёлок Койсуг\"\n                                        }\n                                    ]\n                                },\n                                \"AddressDetails\": {\n                                    \"Country\": {\n                                        \"AddressLine\": \"Россия, Ростовская область, Азовский район, посёлок Койсуг\",\n                                        \"CountryNameCode\": \"RU\",\n                                        \"CountryName\": \"Россия\",\n                                        \"AdministrativeArea\": {\n                                            \"AdministrativeAreaName\": \"Ростовская область\",\n                                            \"SubAdministrativeArea\": {\n                                                \"SubAdministrativeAreaName\": \"Азовский район\",\n                                                \"Locality\": {\n                                                    \"LocalityName\": \"посёлок Койсуг\"\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        },\n                        \"name\": \"посёлок Койсуг\",\n                        \"description\": \"Азовский район, Ростовская область, Россия\",\n                        \"boundedBy\": {\n                            \"Envelope\": {\n                                \"lowerCorner\": \"39.657835 47.105628\",\n                                \"upperCorner\": \"39.678784 47.129095\"\n                            }\n                        },\n                        \"Point\": {\n                            \"pos\": \"39.668004 47.116158\" // координаты центральной точки, найденного объекта\n                        }\n                    }\n                },\n                ...\n            ]\n        }\n    }\n}\nФормат ответа с ошибкой\n{ \n    \"hasError\": true, // Признак ошибок при вызове метода [Boolean] \n    \"errorMessage\": \"Превышено общее для всех пользователей число запросов метода в сутки. Обратитесь в поддержку ПЭК: admin-extintegration@pecom.ru\" // Текст ошибки [String]\n}\nМетод /branches/nearestdepartments/ — подбор ближайших к адресу отделений для приема/выдачи грузов\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод предназначен для организации подбора ближайших к клиенту (адресу клиента) отделений для приема/выдачи грузов, которые подойдут для конкретного груза. Или подбора отделений в конкретном городе.\nФормат запроса\n\n{\n    \"address\": \"Россия, Самара\", // Если переданы координаты в реквизите «coordinates», то указанный здесь адрес игнорируется [string]\n    \"coordinates\": // Координаты. Необязательно, если передан параметр «address»\n    {\n        \"latitude\": \"55.717426\", // Координата широты [string]\n        \"longitude\": \"37.757728\" // Координата долготы [string]\n    },\n    \"weight\": null, // Вес груза, для которого необходимо подобрать подходящее отделение [double]. Необязательно\n    \"volume\": null, // Общий объем груза, для которого нужно подобрать отделение [double]. Необязательно\n    \"maxDimension\": null, // Максимальный габарит груза, для которого нужно подобрать отделение [double]. Необязательно\n    \"maxWeightPerPlace\": null, // Самое тяжелое место из всех грузомест груза [double]. Необязательно\n    \"departmentOperation\": 3, // 2 – есть приемка грузов, 3 – есть выдача грузов [int]. Обязательно.\n    \"type\":  3,  // Идентификатор продукта/тарифа ПЭК, с которым должно работать отделение [Number]. Обязательно.\n                 // Полный список доступных в API продуктов/тарифов можно получить методом /typesOfDelivery/all/\n    \"searchRadius\": 50, // Километры [int]. На каком расстоянии по прямой от точки переданных\n                        // координат или адреса до предлагаемых Отделений/Складов. Обязательно.\n    \"limit\": 5 // Сколько подходящих отделений возвращать в каждом массиве [int]. Обязательно.\n}\nФормат ответа\n{\n    \"freeDepartments\": // Массив с собственными отделениями ПЭК, подходящие в выборку [Array]\n    [ \n        {\n            \"warehouseId\": \"85974fc8-d0b8-11e5-9833-00155d668909\", // ID склада, используется в методах расчета стоимости и подачи заявок [string]\n            \"departmentType\": \"Отделение компании\", // Тип отделения. На текущий момент может быть 3 варианта: «Отделение компании», \n                                                    // \"Основное отделение филиала компании\", «ПВЗ» \n                                                    // (этот тип только в массиве paidDepartments) [string]\n            \"departmentTypeId\": 0, // ID типа отделения [Number]. Обозначения: //0 - Отделение компании, 1 - ПВЗ, 4 - Основное отделение компании в филиале\n            \"branchId\": \"64adbe2b-a185-11dc-a911-000a5e19ccb4\", // ID филиала, к которому относится отделение (организационная привязка).      \n            \"branchName\": \"Самара\", // Наименование филиала, к которому относится отделение (используется для передачи значения City в методах API) [string]\n            \"divisionName\": \"Самара Запад\", // Наименование отделения [string]\n            \"isActive\": true, // не используется. В ответе метода всегда только Активные отделения. [Boolean]\n            \"address\": \"Самарская область, г. Самара, ул. Верхне-Карьерная, д. 3В\", // Адрес отделения [string]\n            \"coordinates\": { // Координаты отделения                     \n                \"latitude\": 53.181565, [double]\n                \"longitude\": 50.174304 [double]\n            },\n            \"timeZone\": \"04:00:00\", // Временная зона, к которой относится отделение [string]\n            \"townBitrixId\": 481, // Идентификатор города, к которому относится отделение. Используется в методе CalculatePrice [int]\n            \"email\": \"samara@pecom.ru\", // Электронный адрес отделения [string]\n            \"phone\": \"8(846) 201-60-33\", // Телефон отделения [string]\n            \"priority\": 70, // Внутренний приоритет отделения (в рамках данного метода не важен). Отделения с наивысшим приоритетом ПЭК предлагает по умолчанию клиентам. [int]\n            \"maxWeight\": 0.0, // Ограничение на общий вес груза, который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxVolume\": 0.0, // Ограничение на общий объем груза, который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxDimension\": 0.0, // Ограничение на максимальный габарит груза \n                                 // (наибольший размер из длины, ширины и высоты из всех мест), \n                                 // который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxWeightOnePlace\": 0.0, // Ограничение на максимальный вес одного места груза, который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxCount\": 0, // Ограничение на количество мест груза, которое может обрабатывать отделение. 0 – ограничений нет. [int]\n            \"scheduleShortWorkDays\": [ // Сокращенный режим работы [Array]\n                 {\n                     \"date\": \"2023-11-03T00:00:00\", //Дата сокращённого дня\n                     \"workTime\":{ //Время работы сокращённого дня\n                          \"periodTimeFrom\": \"09:00:00\", // Начало рабочего дня [String]\n                          \"periodTimeTo\": \"17:00:00\", // Конец рабочего дня [String]\n                          },\n                     \"breakTime\": null // Обеденный перерыв [String]\n                 },       \n            ],\n            \"scheduleHolidayDays\": // Праздничные и выходные дни отделения вне графика его работы [Array]\n            [ \n                \"2022-06-12T00:00:00\",\n                \"2022-06-13T00:00:00\",\n                \"2022-11-04T00:00:00\"\n            ]\n        },\n        ...\n    ],\n    \"paidDepartments\": // Массив с ПВЗ (структура элемента массива такая же как для собственных отделений) [Array]\n    [ \n        { \n            ...\n        },\n        ...\n    ]\n}\nМетод /branches/country/ — список стран, в которых присутствуют отделения ПЭК\nДоступ\nЗарегистрированные пользователи\nКомментарии\nВыводится перечень стран, в которых присутствуют отделения ПЭК. Обращаем Ваше внимание, что перед началом интеграции процессов по перевозке между разными странами и внутри стран (кроме РФ) необходимо уточнить ограничения и правила перевозки между интересующими направлениям у Вашего менеджера ПЭК!\nФормат запроса\n// Пустой объект или пустой json\n{\n}\nФормат ответа\n[ // Список стран, в которых присутствует ПЭК [Array]\n    { // Информация о стране [Object]\n        \"codeByClassifier\": \"051\", // Код страны по общероссийскому классификатору [String]\n        \"name\": \"АРМЕНИЯ\", // Наименование страны [String]\n        \"shortName\": \"AM\" // Краткое наименование страны [String]\n    },\n    {\n        \"codeByClassifier\": \"112\",\n        \"name\": \"БЕЛАРУСЬ\",\n        \"shortName\": \"BY\"\n    },\n    ...\n]\nМетод /branches/checknocalcservices/ — проверка возможности предоставления услуг, не проверяемых в методе расчета стоимости\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод на текущий момент позволяет проверить только услуги Наложенный платеж: GUID = 739293fd-edc7-495d-9e56-6f61ad39bb8c и Выдача по СМС (упрощенная выдача): GUID = ffb40421-4761-11e8-80c9-00155d668927 по конкретному направлению перевозки.\nОбращаем ваше внимание, что метод проверяет доступность услуг только по географии. Для проверки возможности использования данных услуг конкретными отправителями и их условия необходимо использовать метод /connecteddiscountsservicesagreements/.\nНа вход данного метода ожидается ID филиалов отправления и назначения, которые можно получить из метода расчета стоимости или из методов получения географии, при этом для отделений филиал необходимо брать из организационной структуры.\nФормат запроса\n{  \n    \"branchSenderId\":\"b473ce9f-dd68-44ea-a4b2-4cb63b6e970d\",   // ID филиала отправления груза, см.комментарии к методу\n    \"branchReceiverId\":\"3211d5f7-9916-11ec-80d0-00155d66894c\"  // ID филиала назначения груза, см. комментарии к методу\n} \nФормат ответа\n[\n    {\n        \"specialCondition\": {\n            \"UID\": \"739293fd-edc7-495d-9e56-6f61ad39bb8c\", // Соглашение о Наложенном платеже UID [String]. Если есть в ответе, значит услуга \"наложенный платеж\" может оказываться для указанного направления. Но необходимо проверить еще ее подключение для конкретного контрагента. \n            \"Title\": \"Наложенный платеж\" // Наименование услуги [String]\n        }\n    },\n    {\n        \"specialCondition\": {\n            \"UID\": \"ffb40421-4761-11e8-80c9-00155d668927\", // Выдача по СМС для физ.лиц (упрощенная выдача) UID [String]. Если есть в ответе, то услуга \"Выдача по СМС\" может быть заказана по выбранному направлению, с ограничением по объявленной стоимости (уточняйте актуальные ограничения на сайте ПЭК).\n            \"Title\": \"Упрощенная выдача\"\n        }\n    }\n]\nМетод /branches/countrytypeidentitydocument/ — возвращает допустимые документы, удостоверяющие личность, для страны отправления/получения\nДоступ\nЗарегистрированные пользователи\nФормат запроса\n{\n    \"codeByClassifier\": \"643\" // Код страны по общероссийскому классификатору [String].\n                              // Можно получить методом /branches/country/\n} \nФормат ответа\n{\n    \"result\": [\n        {\n            \"guid\": \"b87bc99c-c4c2-11e7-80c9-00155d668927\", // Уникальный идентификатор типа документа [String]\n            \"name\": \"Без предоставления документа\",         // Наименование документа [String]\n            \"mask\": {\n                \"series\": null,\n                \"number\": null\n            }\n        },\n        {\n            \"guid\": \"229fbe79-34a4-11e6-b11a-00155d668909\",\n            \"name\": \"Паспорт гражданина РФ\",\n            \"mask\": {\n                \"series\": null,\n                \"number\": null\n            }\n        },\n        ...\n    ]\n}\nМетод /branches/departmentslimit/ — ограничения весо-габаритных характеристик груза для тарифа/ продукта «Express Автоперевозка».\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод возвращает максимально-допустимые значения ВГХ груза для тарифа \"Express Автоперевозка\" между указанными филиалами или складами. Результат возвращается в виде структуры.\nМетод не проверяет наличие маршрута перевозки между филиалами.\nЕсли возвращается пустой ответ - значит для тарифа \"Express Автоперевозка\" нет возможности перевозить груз между указанными филиалами (складами).\nИдентификаторы филиалов и складов отправителя/ получателя можно получить методом /branches/nearestdepartments/ (в ответе метода freeDepartments.branchId и freeDepartments.warehouseId)\nФормат запроса\n{\n    \"senderBranchId\": \"b473ce9f-dd68-44ea-a4b2-4cb63b6e970d\",//Идентификатор филиала отправителя [String]. Обязателен\n                     //Можно получить методом /branches/nearestdepartments/ по адресу забора freeDepartments.branchId\n    \"recipientBranchId\": \"64adbe2c-a185-11dc-a911-000a5e19ccb4\",//Идентификатор филиала получателя [String]. Обязателен\n                        //Можно получить методом  /branches/nearestdepartments/ по адресу доставки freeDepartments.branchId\n    \"senderWarehouseId\": \"a678333f-2a2a-11e9-80ce-00155d713b38\",//Идентификатор склада отправителя [String]. Не обязателен\n                        //Можно получить методом  /branches/nearestdepartments/ по адресу забора freeDepartments.warehouseId\n    \"recipientWarehouseId\": \"77968d17-65bc-11e9-80cd-00155d4a0436\", //Идентификатор склада получателя [String]. Не обязателен\n                           //Можно получить методом  /branches/nearestdepartments/ по адресу доставки freeDepartments.warehouseId\n    \"type\": 5 // Идентификатор продукта/тарифа Express Автоперевозка [Number]. Обязателен\n}\nФормат ответа\n{\n    \"senderBranchId\": \"b473ce9f-dd68-44ea-a4b2-4cb63b6e970d\", //Идентификатор филиала отправителя [String].\n    \"recipientBranchId\": \"64adbe2c-a185-11dc-a911-000a5e19ccb4\", //Идентификатор филиала получателя [String].\n    \"senderWarehouseId\": \"a678333f-2a2a-11e9-80ce-00155d713b38\", //Идентификатор склада отправителя [String]. Выводится, если был передан в запросе\n    \"recipientWarehouseId\": \"77968d17-65bc-11e9-80cd-00155d4a0436\", //Идентификатор склада получателя [String]. Выводится, если был передан в запросе\n    \"type\": 5, // Идентификатор продукта/тарифа Express Автоперевозка [Number].\n    \"wdcLimits\": { //Лимиты ВГХ\n        \"weight\": 2500.000, //Максимальный вес, грузоместа\n        \"totalWeight\": 2500.000, //Максимальный общий вес груза\n        \"height\": 2.45, //Максимальная высота грузоместа\n        \"length\": 3.000, //Максимальная длина грузоместа\n        \"maxLength\": 3.000, //Максимальный габарит грузоместа\n        \"volume\": 8.92, //Максимальный объем грузоместа\n        \"width\": 2.42 //Максимальная ширина грузоместа\n    }\n}",
  "messageID": "msg_98b6912a7001SlLVLfEpDVNpTd",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14"
}