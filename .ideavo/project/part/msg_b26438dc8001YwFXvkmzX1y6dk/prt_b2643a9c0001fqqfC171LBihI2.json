{
  "id": "prt_b2643a9c0001fqqfC171LBihI2",
  "sessionID": "ses_4dcf54091ffe1XHg1W7jdm1ovr",
  "messageID": "msg_b26438dc8001YwFXvkmzX1y6dk",
  "type": "tool",
  "callID": "toolu_01DeWP72ExxgLSVhHgq35vZ3",
  "tool": "write",
  "state": {
    "status": "completed",
    "input": {
      "content": "/**\n * –¢–µ—Å—Ç: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —É–ø–∞–∫–æ–≤–∫–∏ –ø—Ä–∏ –ê–î–†–ï–°–ù–û–ô –¥–æ—Å—Ç–∞–≤–∫–µ\n */\n\nconst VOZOVOZ_TOKEN = 'sBDUaEmzVBO6syQWHvHxmjxJQiON2BZplQaqrU3N';\n\nasync function testPackagingWithAddress() {\n  console.log('üß™ –¢–ï–°–¢: –£–ø–∞–∫–æ–≤–∫–∞ –ø—Ä–∏ –ê–î–†–ï–°–ù–û–ô –¥–æ—Å—Ç–∞–≤–∫–µ\\n');\n  console.log('='.repeat(100));\n\n  const apiUrl = `https://vozovoz.ru/api/?token=${VOZOVOZ_TOKEN}`;\n\n  // –¢–µ—Å—Ç 1: –ê–¥—Ä–µ—Å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –ë–ï–ó —É–ø–∞–∫–æ–≤–∫–∏\n  console.log('\\nüì¶ –¢–ï–°–¢ 1: –ê–î–†–ï–°–ù–ê–Ø –¥–æ—Å—Ç–∞–≤–∫–∞ –ë–ï–ó —É–ø–∞–∫–æ–≤–∫–∏');\n  console.log('-'.repeat(100));\n\n  const test1 = {\n    object: \"price\",\n    action: \"get\",\n    params: {\n      cargo: {\n        wizard: [\n          {\n            length: 1.0,\n            width: 0.5,\n            height: 0.3,\n            quantity: 1,\n            weight: 20\n          }\n        ],\n        insuranceNdv: true\n      },\n      gateway: {\n        dispatch: {\n          point: {\n            location: \"–ú–æ—Å–∫–≤–∞\",\n            address: \"—É–ª–∏—Ü–∞ –¢–≤–µ—Ä—Å–∫–∞—è, 1\"  // –ê–î–†–ï–°–ù–ê–Ø –¥–æ—Å—Ç–∞–≤–∫–∞\n          }\n        },\n        destination: {\n          point: {\n            location: \"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\",\n            address: \"–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1\"  // –ê–î–†–ï–°–ù–ê–Ø –¥–æ—Å—Ç–∞–≤–∫–∞\n          }\n        }\n      }\n    }\n  };\n\n  const result1 = await makeRequest(apiUrl, test1, '–ê–¥—Ä–µ—Å–Ω–∞—è –ë–ï–ó —É–ø–∞–∫–æ–≤–∫–∏');\n\n  // –¢–µ—Å—Ç 2: –ê–¥—Ä–µ—Å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –° —É–ø–∞–∫–æ–≤–∫–æ–π hardPackageVolumeUOD_WP\n  console.log('\\n\\nüì¶ –¢–ï–°–¢ 2: –ê–î–†–ï–°–ù–ê–Ø –¥–æ—Å—Ç–∞–≤–∫–∞ –° —É–ø–∞–∫–æ–≤–∫–æ–π hardPackageVolumeUOD_WP');\n  console.log('-'.repeat(100));\n\n  const test2 = JSON.parse(JSON.stringify(test1));\n  test2.params.cargo.wizard[0].wrapping = {\n    hardPackageVolumeUOD_WP: 0.15\n  };\n\n  const result2 = await makeRequest(apiUrl, test2, '–ê–¥—Ä–µ—Å–Ω–∞—è –° —É–ø–∞–∫–æ–≤–∫–æ–π');\n\n  // –¢–µ—Å—Ç 3: –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –° —É–ø–∞–∫–æ–≤–∫–æ–π –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è\n  console.log('\\n\\nüì¶ –¢–ï–°–¢ 3: –¢–ï–†–ú–ò–ù–ê–õ–¨–ù–ê–Ø –¥–æ—Å—Ç–∞–≤–∫–∞ –° —É–ø–∞–∫–æ–≤–∫–æ–π (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è)');\n  console.log('-'.repeat(100));\n\n  const test3 = {\n    object: \"price\",\n    action: \"get\",\n    params: {\n      cargo: {\n        wizard: [\n          {\n            length: 1.0,\n            width: 0.5,\n            height: 0.3,\n            quantity: 1,\n            weight: 20,\n            wrapping: {\n              hardPackageVolumeUOD_WP: 0.15\n            }\n          }\n        ],\n        insuranceNdv: true\n      },\n      gateway: {\n        dispatch: {\n          point: {\n            location: \"–ú–æ—Å–∫–≤–∞\",\n            terminal: \"default\"\n          }\n        },\n        destination: {\n          point: {\n            location: \"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\",\n            terminal: \"default\"\n          }\n        }\n      }\n    }\n  };\n\n  const result3 = await makeRequest(apiUrl, test3, '–¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –° —É–ø–∞–∫–æ–≤–∫–æ–π');\n\n  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ\n  console.log('\\n\\n' + '='.repeat(100));\n  console.log('üìä –°–†–ê–í–ù–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–û–í');\n  console.log('='.repeat(100));\n\n  console.log('\\n1. –ê–î–†–ï–°–ù–ê–Ø –ë–ï–ó —É–ø–∞–∫–æ–≤–∫–∏:');\n  console.log(`   –¶–µ–Ω–∞: ${result1?.price || '–û–®–ò–ë–ö–ê'} —Ä—É–±.`);\n  if (result1?.services) {\n    const packagingServices = result1.services.filter(s => \n      s.name.toLowerCase().includes('—É–ø–∞–∫–æ–≤') || \n      s.name.toLowerCase().includes('–∂—ë—Å—Ç') ||\n      s.name.toLowerCase().includes('–∂–µ—Å—Ç')\n    );\n    console.log(`   –£—Å–ª—É–≥ —É–ø–∞–∫–æ–≤–∫–∏: ${packagingServices.length}`);\n    packagingServices.forEach(s => console.log(`      - ${s.name}: ${s.price} —Ä—É–±.`));\n  }\n\n  console.log('\\n2. –ê–î–†–ï–°–ù–ê–Ø –° —É–ø–∞–∫–æ–≤–∫–æ–π hardPackageVolumeUOD_WP:');\n  console.log(`   –¶–µ–Ω–∞: ${result2?.price || '–û–®–ò–ë–ö–ê'} —Ä—É–±.`);\n  console.log(`   –†–∞–∑–Ω–∏—Ü–∞: ${result2?.price && result1?.price ? (result2.price - result1.price) : 'N/A'} —Ä—É–±.`);\n  if (result2?.services) {\n    const packagingServices = result2.services.filter(s => \n      s.name.toLowerCase().includes('—É–ø–∞–∫–æ–≤') || \n      s.name.toLowerCase().includes('–∂—ë—Å—Ç') ||\n      s.name.toLowerCase().includes('–∂–µ—Å—Ç')\n    );\n    console.log(`   –£—Å–ª—É–≥ —É–ø–∞–∫–æ–≤–∫–∏: ${packagingServices.length}`);\n    packagingServices.forEach(s => console.log(`      - ${s.name}: ${s.price} —Ä—É–±.`));\n  }\n\n  console.log('\\n3. –¢–ï–†–ú–ò–ù–ê–õ–¨–ù–ê–Ø –° —É–ø–∞–∫–æ–≤–∫–æ–π:');\n  console.log(`   –¶–µ–Ω–∞: ${result3?.price || '–û–®–ò–ë–ö–ê'} —Ä—É–±.`);\n  if (result3?.services) {\n    const packagingServices = result3.services.filter(s => \n      s.name.toLowerCase().includes('—É–ø–∞–∫–æ–≤') || \n      s.name.toLowerCase().includes('–∂—ë—Å—Ç') ||\n      s.name.toLowerCase().includes('–∂–µ—Å—Ç')\n    );\n    console.log(`   –£—Å–ª—É–≥ —É–ø–∞–∫–æ–≤–∫–∏: ${packagingServices.length}`);\n    packagingServices.forEach(s => console.log(`      - ${s.name}: ${s.price} —Ä—É–±.`));\n  }\n\n  console.log('\\n' + '='.repeat(100));\n  console.log('üí° –í–´–í–û–î:');\n  console.log('='.repeat(100));\n  if (result1 && result2) {\n    if (result2.price === result1.price) {\n      console.log('‚ùå –£–ø–∞–∫–æ–≤–∫–∞ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ —Ü–µ–Ω—É –ø—Ä–∏ –∞–¥—Ä–µ—Å–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ!');\n      console.log('   –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:');\n      console.log('   1. –£–ø–∞–∫–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π');\n      console.log('   2. API –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç wrapping –≤ wizard –ø—Ä–∏ price.get');\n      console.log('   3. –£–ø–∞–∫–æ–≤–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ order.set (–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞)');\n    } else {\n      console.log(`‚úÖ –£–ø–∞–∫–æ–≤–∫–∞ –í–õ–ò–Ø–ï–¢ –Ω–∞ —Ü–µ–Ω—É! –†–∞–∑–Ω–∏—Ü–∞: ${result2.price - result1.price} —Ä—É–±.`);\n    }\n  }\n}\n\nasync function makeRequest(apiUrl, requestData, label) {\n  try {\n    console.log(`\\nüì§ –ó–∞–ø—Ä–æ—Å (${label}):`);\n    console.log(JSON.stringify(requestData, null, 2));\n\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(requestData)\n    });\n\n    if (!response.ok) {\n      console.log(`\\n‚ùå HTTP –æ—à–∏–±–∫–∞: ${response.status}`);\n      return null;\n    }\n\n    const data = await response.json();\n\n    if (data.error) {\n      console.log('\\n‚ùå API –æ—à–∏–±–∫–∞:', data.error);\n      return null;\n    }\n\n    if (data.response) {\n      console.log('\\n‚úÖ –û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω:');\n      console.log(`   –¶–µ–Ω–∞: ${data.response.price} —Ä—É–±.`);\n      console.log(`   –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: ${data.response.basePrice} —Ä—É–±.`);\n      console.log(`\\n   –í—Å–µ —É—Å–ª—É–≥–∏ (${data.response.service.length}):`);\n      data.response.service.forEach(s => {\n        console.log(`   - ${s.name}: ${s.price} —Ä—É–±.`);\n      });\n\n      return {\n        price: data.response.price,\n        basePrice: data.response.basePrice,\n        services: data.response.service\n      };\n    }\n\n    return null;\n\n  } catch (error) {\n    console.log('\\n‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error.message);\n    return null;\n  }\n}\n\n// –ó–∞–ø—É—Å–∫\ntestPackagingWithAddress();\n",
      "filePath": "/home/user/project/test-vozovoz-packaging-address.js"
    },
    "output": "",
    "title": "test-vozovoz-packaging-address.js",
    "metadata": {
      "diagnostics": {},
      "filepath": "/home/user/project/test-vozovoz-packaging-address.js",
      "exists": false
    },
    "time": {
      "start": 1765873559752,
      "end": 1765873559765
    }
  }
}