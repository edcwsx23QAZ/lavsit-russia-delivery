{
  "id": "prt_ab47262840012H4BYx0nmfQ3h9",
  "sessionID": "ses_54b97e247ffenCZZa4jZiIWD0l",
  "messageID": "msg_ab47249b3002ADVepppkWsgBQt",
  "type": "tool",
  "callID": "call_7497d839e1f74c55a6383ce5",
  "tool": "edit",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/ProductSearch.tsx",
      "oldString": "    if (query.trim().length >= 2) {\n      const filtered = searchProducts(allProducts, query);\n      setSearchState(prev => ({\n        ...prev,\n        suggestions: filtered,\n        showSuggestions: true\n      }));\n    } else {\n      setSearchState(prev => ({\n        ...prev,\n        suggestions: [],\n        showSuggestions: false\n      }));\n    }\n  }, [allProducts]);",
      "newString": "    if (query.trim().length >= 2) {\n      // Используем debounce для оптимизации поиска\n      const debouncedSearch = setTimeout(() => {\n        const filtered = searchProducts(allProducts, query);\n        setSearchState(prev => ({\n          ...prev,\n          suggestions: filtered,\n          showSuggestions: true\n        }));\n      }, 150);\n      \n      return () => clearTimeout(debouncedSearch);\n    } else {\n      setSearchState(prev => ({\n        ...prev,\n        suggestions: [],\n        showSuggestions: false\n      }));\n    }\n  }, [allProducts]);"
    },
    "output": "",
    "title": "components/ProductSearch.tsx",
    "metadata": {
      "diagnostics": {},
      "diff": "Index: /home/user/project/components/ProductSearch.tsx\n===================================================================\n--- /home/user/project/components/ProductSearch.tsx\n+++ /home/user/project/components/ProductSearch.tsx\n@@ -93,14 +93,19 @@\n   selectedIndex: -1\n }));\n \n if (query.trim().length >= 2) {\n-  const filtered = searchProducts(allProducts, query);\n-  setSearchState(prev => ({\n-    ...prev,\n-    suggestions: filtered,\n-    showSuggestions: true\n-  }));\n+  // Используем debounce для оптимизации поиска\n+  const debouncedSearch = setTimeout(() => {\n+    const filtered = searchProducts(allProducts, query);\n+    setSearchState(prev => ({\n+      ...prev,\n+      suggestions: filtered,\n+      showSuggestions: true\n+    }));\n+  }, 150);\n+  \n+  return () => clearTimeout(debouncedSearch);\n } else {\n   setSearchState(prev => ({\n     ...prev,\n     suggestions: [],\n"
    },
    "time": {
      "start": 1763963986565,
      "end": 1763963986572
    }
  }
}