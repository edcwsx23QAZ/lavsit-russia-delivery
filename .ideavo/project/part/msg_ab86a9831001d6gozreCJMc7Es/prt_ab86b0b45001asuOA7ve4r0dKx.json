{
  "id": "prt_ab86b0b45001asuOA7ve4r0dKx",
  "sessionID": "ses_54b97e247ffenCZZa4jZiIWD0l",
  "messageID": "msg_ab86a9831001d6gozreCJMc7Es",
  "type": "tool",
  "callID": "call_04820715",
  "tool": "multiedit",
  "state": {
    "status": "error",
    "input": {
      "edits": "[{\"newString\":       \"       const data = await response.json(); // Парсинг ответа API - поддерживаем разные форматы\\n       let price = 0;\\n       let days = 0;\\n       let details: any = {};\\n\\n       if (data.success) {\\n         // Новый формат API с auto/avia объектами\\n         if (data.auto || data.avia) {\\n           const options = [];\\n           \\n           if (data.auto) {\\n             options.push({\\n               type: 'auto',\\n               price: data.auto.total_price || 0,\\n               days: data.auto.delivery_date || 0,\\n               services: data.auto.services || []\\n             });\\n           }\\n           \\n           if (data.avia) {\\n             options.push({\\n               type: 'avia',\\n               price: data.avia.total_price || 0,\\n               days: data.avia.delivery_date || 0,\\n               services: data.avia.services || []\\n             });\\n           }\\n           \\n           // Выбираем самый дешевый вариант\\n           const bestOption = options.reduce((best, current) => \\n             current.price < best.price ? current : best\\n           );\\n           \\n           price = bestOption.price;\\n           days = bestOption.days;\\n           details = {\\n             totalCost: price,\\n             deliveryCost: price, // В новом формате общая стоимость включает все\\n             transportType: bestOption.type,\\n             services: bestOption.services,\\n             allOptions: options, // Сохраняем все варианты для отладки\\n             currency: 'RUB'\\n           };\\n         } else {\\n           // Альтернативный формат ответа\\n           price = data.price || data.total_cost || data.cost || 0;\\n           days = data.days || data.delivery_days || data.delivery_time || 0;\\n           details = {\\n             totalCost: price,\\n             deliveryCost: data.delivery_cost || 0,\\n             pickupCost: data.pickup_cost || 0,\\n             insuranceCost: data.insurance_cost || 0,\\n             services: data.services || [],\\n             currency: data.currency || 'RUB'\\n           };\\n         }\\n       } else if (data.price !== undefined) {\\n         // Старый формат ответа\\n         price = data.price;\\n         days = data.days || data.delivery_time || 0;\\n         details = {\\n           totalCost: price,\\n           currency: data.currency || 'RUB'\\n         };\\n       } else {\\n         // Если ответ не содержит цены, возвращаем ошибку\\n         console.error('❌ Nord Wheel: Неверный формат ответа API:', data);\\n         return {\\n           company: 'Nord Wheel',\\n           price: 0,\\n           days: 0,\\n           error: 'Неверный формат ответа API',\\n           apiUrl,\\n           requestData,\\n           responseData: data\\n         };\\n       }",
      "filePath": "app/page.tsx"
    },
    "error": "TypeError: params.edits.entries is not a function. (In 'params.edits.entries()', 'params.edits.entries' is undefined)",
    "time": {
      "start": 1764030614344,
      "end": 1764030614345
    }
  }
}