{
  "id": "prt_9b96072fe001AlQXnTD3G7mG2V",
  "messageID": "msg_9b96049e4001PIgrQ1UG3nb4Dk",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_0131RE56uoDwYXzBxRx8AfDf",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/diagnostic/FullTestingResults.tsx"
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import React from 'react';\n00004| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00005| import { Progress } from '@/components/ui/progress';\n00006| import { Badge } from '@/components/ui/badge';\n00007| import { BarChart3, Activity, CheckCircle, XCircle, Clock, Target } from 'lucide-react';\n00008| \n00009| interface TestResult {\n00010|   company: string;\n00011|   status: 'passed' | 'failed' | 'timeout' | 'skipped';\n00012|   message: string;\n00013|   details?: any;\n00014|   timing: number;\n00015|   timestamp: string;\n00016| }\n00017| \n00018| interface TestSummary {\n00019|   total: number;\n00020|   passed: number;\n00021|   failed: number;\n00022|   skipped: number;\n00023|   averageTime: number;\n00024|   successRate: number;\n00025|   errors: string[];\n00026| }\n00027| \n00028| interface FullTestingResultsProps {\n00029|   fullTestResults: {\n00030|     summary: TestSummary;\n00031|     details: TestResult[];\n00032|   } | null;\n00033|   testProgress: number;\n00034|   isFullTesting: boolean;\n00035| }\n00036| \n00037| const FullTestingResults = React.memo(function FullTestingResults({\n00038|   fullTestResults,\n00039|   testProgress,\n00040|   isFullTesting\n00041| }: FullTestingResultsProps) {\n00042|   if (!fullTestResults && !isFullTesting) {\n00043|     return null;\n00044|   }\n00045| \n00046|   const getStatusIcon = (status: string) => {\n00047|     switch (status) {\n00048|       case 'passed': return <CheckCircle className=\"h-4 w-4 text-green-400\" />;\n00049|       case 'failed': return <XCircle className=\"h-4 w-4 text-red-400\" />;\n00050|       case 'timeout': return <Clock className=\"h-4 w-4 text-yellow-400\" />;\n00051|       case 'skipped': return <Target className=\"h-4 w-4 text-gray-400\" />;\n00052|       default: return <Activity className=\"h-4 w-4 text-gray-400\" />;\n00053|     }\n00054|   };\n00055| \n00056|   const getStatusColor = (status: string) => {\n00057|     switch (status) {\n00058|       case 'passed': return 'text-green-400';\n00059|       case 'failed': return 'text-red-400';\n00060|       case 'timeout': return 'text-yellow-400';\n00061|       case 'skipped': return 'text-gray-400';\n00062|       default: return 'text-gray-400';\n00063|     }\n00064|   };\n00065| \n00066|   return (\n00067|     <Card className=\"border-green-500 bg-green-900/20 mt-6\">\n00068|       <CardHeader>\n00069|         <CardTitle className=\"flex items-center gap-2\">\n00070|           <BarChart3 className=\"h-5 w-5 text-green-400\" />\n00071|           <span className=\"text-white\">Результаты полного тестирования</span>\n00072|         </CardTitle>\n00073|       </CardHeader>\n00074|       <CardContent>\n00075|         {isFullTesting && (\n00076|           <div className=\"mb-6\">\n00077|             <div className=\"flex justify-between items-center mb-2\">\n00078|               <span className=\"text-white\">Прогресс тестирования</span>\n00079|               <span className=\"text-gray-300\">{testProgress}%</span>\n00080|             </div>\n00081|             <Progress value={testProgress} className=\"h-2\" />\n00082|           </div>\n00083|         )}\n00084| \n00085|         {fullTestResults && (\n00086|           <div className=\"space-y-6\">\n00087|             {/* Статистика */}\n00088|             <div className=\"grid grid-cols-2 md:grid-cols-6 gap-4\">\n00089|               <div className=\"bg-gray-800 p-3 rounded text-center\">\n00090|                 <div className=\"text-2xl font-bold text-white\">{fullTestResults.summary.total}</div>\n00091|                 <div className=\"text-sm text-gray-400\">Всего тестов</div>\n00092|               </div>\n00093|               <div className=\"bg-gray-800 p-3 rounded text-center\">\n00094|                 <div className=\"text-2xl font-bold text-green-400\">{fullTestResults.summary.passed}</div>\n00095|                 <div className=\"text-sm text-gray-400\">Успешных</div>\n00096|               </div>\n00097|               <div className=\"bg-gray-800 p-3 rounded text-center\">\n00098|                 <div className=\"text-2xl font-bold text-red-400\">{fullTestResults.summary.failed}</div>\n00099|                 <div className=\"text-sm text-gray-400\">Неудачных</div>\n00100|               </div>\n00101|               <div className=\"bg-gray-800 p-3 rounded text-center\">\n00102|                 <div className=\"text-2xl font-bold text-gray-400\">{fullTestResults.summary.skipped}</div>\n00103|                 <div className=\"text-sm text-gray-400\">Пропущено</div>\n00104|               </div>\n00105|               <div className=\"bg-gray-800 p-3 rounded text-center\">\n00106|                 <div className=\"text-2xl font-bold text-blue-400\">\n00107|                   {fullTestResults.summary.successRate.toFixed(1)}%\n00108|                 </div>\n00109|                 <div className=\"text-sm text-gray-400\">Успешность</div>\n00110|               </div>\n00111|               <div className=\"bg-gray-800 p-3 rounded text-center\">\n00112|                 <div className=\"text-2xl font-bold text-purple-400\">{fullTestResults.summary.averageTime}мс</div>\n00113|                 <div className=\"text-sm text-gray-400\">Среднее время</div>\n00114|               </div>\n00115|             </div>\n00116| \n00117|             {/* Статистика по компаниям */}\n00118|             <div>\n00119|               <h4 className=\"font-medium mb-2 text-white\">Статистика по транспортным компаниям:</h4>\n00120|               <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n00121|                 {Array.from(new Set(fullTestResults.details.map(d => d.company))).map(company => {\n00122|                   const companyResults = fullTestResults.details.filter(d => d.company === company);\n00123|                   const passed = companyResults.filter(r => r.status === 'passed').length;\n00124|                   const total = companyResults.length;\n00125|                   const rate = total > 0 ? (passed / total * 100).toFixed(1) : 0;\n00126|                   \n00127|                   return (\n00128|                     <div key={company} className=\"bg-gray-800 p-3 rounded\">\n00129|                       <div className=\"flex justify-between items-center\">\n00130|                         <span className=\"text-white font-medium\">{company}</span>\n00131|                         <Badge variant=\"outline\" className={\n00132|                           rate === '100.0' ? 'border-green-400 text-green-400' :\n00133|                           parseFloat(rate.toString()) >= 80 ? 'border-yellow-400 text-yellow-400' :\n00134|                           'border-red-400 text-red-400'\n00135|                         }>\n00136|                           {rate}%\n00137|                         </Badge>\n00138|                       </div>\n00139|                       <div className=\"text-sm text-gray-400\">\n00140|                         {passed}/{total} тестов пройдено\n00141|                       </div>\n00142|                     </div>\n00143|                   );\n00144|                 })}\n00145|               </div>\n00146|             </div>\n00147| \n00148|             {/* Ошибки */}\n00149|             {fullTestResults.summary.errors.length > 0 && (\n00150|               <div>\n00151|                 <div className=\"font-medium mb-2 text-white\">Найденные ошибки ({fullTestResults.summary.errors.length}):</div>\n00152|                 <div className=\"space-y-2\">\n00153|                   {fullTestResults.summary.errors.map((error, index) => (\n00154|                     <div key={index} className=\"bg-red-900/20 border border-red-500 p-3 rounded\">\n00155|                       <div className=\"text-red-400 text-sm\">{error}</div>\n00156|                     </div>\n00157|                   ))}\n00158|                 </div>\n00159|               </div>\n00160|             )}\n00161| \n00162|             {/* Подробные результаты */}\n00163|             <details className=\"bg-gray-800 rounded p-4\">\n00164|               <summary className=\"cursor-pointer text-sm font-medium text-white\">Подробные результаты ({fullTestResults.details.length} записей)</summary>\n00165|               <div className=\"mt-4 space-y-3\">\n00166|                 {fullTestResults.details.map((result, index) => (\n00167|                   <div key={index} className=\"border border-gray-600 rounded p-3\">\n00168|                     <div className=\"flex items-center justify-between mb-2\">\n00169|                       <div className=\"flex items-center gap-2\">\n00170|                         {getStatusIcon(result.status)}\n00171|                         <span className=\"font-medium text-white\">{result.company}</span>\n00172|                         <Badge variant=\"outline\" className={getStatusColor(result.status)}>\n00173|                           {result.status}\n00174|                         </Badge>\n00175|                       </div>\n00176|                       <div className=\"text-sm text-gray-400\">\n00177|                         {result.timing}мс | {new Date(result.timestamp).toLocaleTimeString()}\n00178|                       </div>\n00179|                     </div>\n00180|                     <div className=\"text-sm text-gray-300 mb-2\">{result.message}</div>\n00181|                     {result.details && (\n00182|                       <details className=\"mt-2\">\n00183|                         <summary className=\"cursor-pointer text-sm text-gray-300\">Подробности</summary>\n00184|                         <pre className=\"text-xs mt-2 p-2 bg-gray-900 rounded overflow-auto text-gray-300\">\n00185|                           {JSON.stringify(result.details, null, 2)}\n00186|                         </pre>\n00187|                       </details>\n00188|                     )}\n00189|                   </div>\n00190|                 ))}\n00191|               </div>\n00192|             </details>\n00193|           </div>\n00194|         )}\n00195|       </CardContent>\n00196|     </Card>\n00197|   );\n00198| });\n00199| \n00200| export default FullTestingResults;\n</file>",
    "metadata": {
      "preview": "'use client';\n\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { BarChart3, Activity, CheckCircle, XCircle, Clock, Target } from 'lucide-react';\n\ninterface TestResult {\n  company: string;\n  status: 'passed' | 'failed' | 'timeout' | 'skipped';\n  message: string;\n  details?: any;\n  timing: number;\n  timestamp: string;\n}\n\ninterface TestSummary {\n  total: number;\n  passed: number;"
    },
    "title": "components/diagnostic/FullTestingResults.tsx",
    "time": {
      "start": 1759751730293,
      "end": 1759751730295
    }
  }
}