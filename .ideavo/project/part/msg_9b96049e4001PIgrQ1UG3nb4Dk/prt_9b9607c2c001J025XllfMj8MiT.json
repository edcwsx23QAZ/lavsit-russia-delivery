{
  "id": "prt_9b9607c2c001J025XllfMj8MiT",
  "messageID": "msg_9b96049e4001PIgrQ1UG3nb4Dk",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_011Be5G7QP4PY8HiGQ6BqmdA",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/diagnostic/VehicleManagement.tsx"
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import React from 'react';\n00004| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00005| import { Button } from '@/components/ui/button';\n00006| import { Alert, AlertDescription } from '@/components/ui/alert';\n00007| import { Badge } from '@/components/ui/badge';\n00008| import { Input } from '@/components/ui/input';\n00009| import { Label } from '@/components/ui/label';\n00010| import { Truck, AlertCircle, Plus, Trash2, Save } from 'lucide-react';\n00011| \n00012| interface VehicleType {\n00013|   id: string;\n00014|   name: string;\n00015|   length: number;\n00016|   width: number;\n00017|   height: number;\n00018| }\n00019| \n00020| interface VehicleManagementProps {\n00021|   vehicleTypes: VehicleType[];\n00022|   newVehicle: { name: string; length: string; width: string; height: string };\n00023|   hasUnsavedChanges: boolean;\n00024|   saveStatus: 'idle' | 'saving' | 'success' | 'error';\n00025|   isSaving: boolean;\n00026|   lastUpdateTime: string | null;\n00027|   onAddVehicleType: () => void;\n00028|   onRemoveVehicleType: (id: string) => void;\n00029|   onUpdateVehicleType: (id: string, field: string, value: string | number) => void;\n00030|   onSaveVehicleTypes: () => void;\n00031|   onSetNewVehicle: (vehicle: { name: string; length: string; width: string; height: string }) => void;\n00032| }\n00033| \n00034| const VehicleManagement = React.memo(function VehicleManagement({\n00035|   vehicleTypes,\n00036|   newVehicle,\n00037|   hasUnsavedChanges,\n00038|   saveStatus,\n00039|   isSaving,\n00040|   lastUpdateTime,\n00041|   onAddVehicleType,\n00042|   onRemoveVehicleType,\n00043|   onUpdateVehicleType,\n00044|   onSaveVehicleTypes,\n00045|   onSetNewVehicle\n00046| }: VehicleManagementProps) {\n00047|   return (\n00048|     <Card className=\"border-blue-500 bg-blue-900/20 mt-6\">\n00049|       <CardHeader>\n00050|         <div className=\"flex items-center justify-between\">\n00051|           <CardTitle className=\"flex items-center gap-2\">\n00052|             <Truck className=\"h-5 w-5 text-blue-400\" />\n00053|             <span className=\"text-white\">Типы автомобилей</span>\n00054|             {hasUnsavedChanges && (\n00055|               <Badge variant=\"outline\" className=\"text-orange-400 border-orange-400\">\n00056|                 Есть несохранённые изменения\n00057|               </Badge>\n00058|             )}\n00059|           </CardTitle>\n00060|           <Button \n00061|             onClick={onSaveVehicleTypes}\n00062|             disabled={!hasUnsavedChanges || isSaving}\n00063|             className={\n00064|               saveStatus === 'success' \n00065|                 ? \"bg-green-600 hover:bg-green-700 text-white\" \n00066|                 : saveStatus === 'error'\n00067|                 ? \"bg-red-600 hover:bg-red-700 text-white\"\n00068|                 : \"bg-green-600 hover:bg-green-700 disabled:bg-gray-600\"\n00069|             }\n00070|             size=\"sm\"\n00071|           >\n00072|             <Save className=\"h-4 w-4 mr-2\" />\n00073|             {saveStatus === 'saving' && 'Сохранение...'}\n00074|             {saveStatus === 'success' && 'Сохранено!'}\n00075|             {saveStatus === 'error' && 'Ошибка'}\n00076|             {saveStatus === 'idle' && 'Сохранить'}\n00077|           </Button>\n00078|         </div>\n00079|       </CardHeader>\n00080|       <CardContent>\n00081|         {/* Информационное сообщение */}\n00082|         <Alert className=\"border-blue-500 bg-blue-900/20 mb-4\">\n00083|           <AlertCircle className=\"h-4 w-4\" />\n00084|           <AlertDescription>\n00085|             <span className=\"text-gray-300\">\n00086|               Изменения в размерах и названиях типов автомобилей будут сохранены локально в браузере. Нажмите \"Сохранить\" для применения изменений.\n00087|               <br /><br />\n00088|               <strong>Обновление из Google Sheets:</strong> Данные также могут быть автоматически обновлены с помощью кнопки \"Обновить данные\" сверху. Это заменит все местные данные на актуальную информацию из таблицы.\n00089|               {lastUpdateTime && (\n00090|                 <><br /><br /><strong>Последнее обновление:</strong> {lastUpdateTime}</>\n00091|               )}\n00092|             </span>\n00093|           </AlertDescription>\n00094|         </Alert>\n00095|         \n00096|         {/* Список существующих автомобилей */}\n00097|         <div className=\"space-y-4 mb-6\">\n00098|           <h3 className=\"text-lg font-medium text-white\">Существующие типы:</h3>\n00099|           <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n00100|             {vehicleTypes.map((vehicle) => (\n00101|               <div key={vehicle.id} className=\"bg-gray-800 p-4 rounded-lg border border-gray-600\">\n00102|                 <div className=\"space-y-3\">\n00103|                   <div>\n00104|                     <Label className=\"text-sm text-gray-300\">Название</Label>\n00105|                     <Input\n00106|                       value={vehicle.name}\n00107|                       onChange={(e) => onUpdateVehicleType(vehicle.id, 'name', e.target.value)}\n00108|                       className=\"bg-gray-700 border-gray-600 text-white\"\n00109|                     />\n00110|                   </div>\n00111|                   \n00112|                   <div className=\"grid grid-cols-3 gap-2\">\n00113|                     <div>\n00114|                       <Label className=\"text-xs text-gray-400\">Длина (мм)</Label>\n00115|                       <Input\n00116|                         type=\"number\"\n00117|                         value={vehicle.length}\n00118|                         onChange={(e) => onUpdateVehicleType(vehicle.id, 'length', parseInt(e.target.value) || 0)}\n00119|                         className=\"bg-gray-700 border-gray-600 text-white text-xs\"\n00120|                       />\n00121|                     </div>\n00122|                     <div>\n00123|                       <Label className=\"text-xs text-gray-400\">Ширина (мм)</Label>\n00124|                       <Input\n00125|                         type=\"number\"\n00126|                         value={vehicle.width}\n00127|                         onChange={(e) => onUpdateVehicleType(vehicle.id, 'width', parseInt(e.target.value) || 0)}\n00128|                         className=\"bg-gray-700 border-gray-600 text-white text-xs\"\n00129|                       />\n00130|                     </div>\n00131|                     <div>\n00132|                       <Label className=\"text-xs text-gray-400\">Высота (мм)</Label>\n00133|                       <Input\n00134|                         type=\"number\"\n00135|                         value={vehicle.height}\n00136|                         onChange={(e) => onUpdateVehicleType(vehicle.id, 'height', parseInt(e.target.value) || 0)}\n00137|                         className=\"bg-gray-700 border-gray-600 text-white text-xs\"\n00138|                       />\n00139|                     </div>\n00140|                   </div>\n00141|                   \n00142|                   <div className=\"flex justify-between items-center pt-2\">\n00143|                     <div className=\"text-xs text-gray-400\">\n00144|                       Объём: {((vehicle.length * vehicle.width * vehicle.height) / 1000000000).toFixed(1)} м³\n00145|                     </div>\n00146|                     <Button\n00147|                       onClick={() => onRemoveVehicleType(vehicle.id)}\n00148|                       variant=\"outline\"\n00149|                       size=\"sm\"\n00150|                       className=\"text-red-400 border-red-400 hover:bg-red-400 hover:text-white\"\n00151|                     >\n00152|                       <Trash2 className=\"h-3 w-3\" />\n00153|                     </Button>\n00154|                   </div>\n00155|                 </div>\n00156|               </div>\n00157|             ))}\n00158|           </div>\n00159|         </div>\n00160|         \n00161|         {/* Добавление нового автомобиля */}\n00162|         <div className=\"bg-gray-800 p-4 rounded-lg border-2 border-dashed border-gray-600\">\n00163|           <h3 className=\"text-lg font-medium text-white mb-4\">Добавить новый тип:</h3>\n00164|           <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n00165|             <div>\n00166|               <Label className=\"text-sm text-gray-300\">Название</Label>\n00167|               <Input\n00168|                 placeholder=\"напр. Мерседес Спринтер\"\n00169|                 value={newVehicle.name}\n00170|                 onChange={(e) => onSetNewVehicle({ ...newVehicle, name: e.target.value })}\n00171|                 className=\"bg-gray-700 border-gray-600 text-white\"\n00172|               />\n00173|             </div>\n00174|             <div>\n00175|               <Label className=\"text-sm text-gray-300\">Длина кузова (внутри), мм</Label>\n00176|               <Input\n00177|                 type=\"number\"\n00178|                 placeholder=\"4200\"\n00179|                 value={newVehicle.length}\n00180|                 onChange={(e) => onSetNewVehicle({ ...newVehicle, length: e.target.value })}\n00181|                 className=\"bg-gray-700 border-gray-600 text-white\"\n00182|               />\n00183|             </div>\n00184|             <div>\n00185|               <Label className=\"text-sm text-gray-300\">Ширина кузова (внутри), мм</Label>\n00186|               <Input\n00187|                 type=\"number\"\n00188|                 placeholder=\"2025\"\n00189|                 value={newVehicle.width}\n00190|                 onChange={(e) => onSetNewVehicle({ ...newVehicle, width: e.target.value })}\n00191|                 className=\"bg-gray-700 border-gray-600 text-white\"\n00192|               />\n00193|             </div>\n00194|             <div>\n00195|               <Label className=\"text-sm text-gray-300\">Высота кузова (внутри), мм</Label>\n00196|               <Input\n00197|                 type=\"number\"\n00198|                 placeholder=\"2025\"\n00199|                 value={newVehicle.height}\n00200|                 onChange={(e) => onSetNewVehicle({ ...newVehicle, height: e.target.value })}\n00201|                 className=\"bg-gray-700 border-gray-600 text-white\"\n00202|               />\n00203|             </div>\n00204|           </div>\n00205|           \n00206|           <div className=\"flex justify-between items-center\">\n00207|             <div className=\"text-sm text-gray-400\">\n00208|               {newVehicle.length && newVehicle.width && newVehicle.height && (\n00209|                 <span>\n00210|                   Прогнозируемый объём: {((parseInt(newVehicle.length) * parseInt(newVehicle.width) * parseInt(newVehicle.height)) / 1000000000).toFixed(1)} м³\n00211|                 </span>\n00212|               )}\n00213|             </div>\n00214|             <Button \n00215|               onClick={onAddVehicleType}\n00216|               className=\"bg-blue-600 hover:bg-blue-700\"\n00217|             >\n00218|               <Plus className=\"h-4 w-4 mr-2\" />\n00219|               Добавить\n00220|             </Button>\n00221|           </div>\n00222|         </div>\n00223|       </CardContent>\n00224|     </Card>\n00225|   );\n00226| });\n00227| \n00228| export default VehicleManagement;\n</file>",
    "metadata": {
      "preview": "'use client';\n\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Truck, AlertCircle, Plus, Trash2, Save } from 'lucide-react';\n\ninterface VehicleType {\n  id: string;\n  name: string;\n  length: number;\n  width: number;\n  height: number;\n}\n\ninterface VehicleManagementProps {"
    },
    "title": "components/diagnostic/VehicleManagement.tsx",
    "time": {
      "start": 1759751733077,
      "end": 1759751733078
    }
  }
}