{
  "id": "prt_a96c898cc001jJMVOBDbCduwd2",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_a96c854fe001uun7bt0XjG3lny",
  "type": "tool",
  "callID": "call_37369379",
  "tool": "edit",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "app/page.tsx",
      "newString": "  // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n  const calculateNordWheel = async (): Promise<CalculationResult> => {\n    const apiUrl = 'https://api.nordw.orog.ru/api/v1/calculate';\n    \n    try {\n      // üîß –í–∞–ª–∏–¥–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      validateMultipleCargos(form.cargos);\n      \n      const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n      const totalVolume = form.cargos.reduce((sum, cargo) => \n        sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n      );\n\n      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –†–∞—Å—á–µ—Ç –≥–∞–±–∞—Ä–∏—Ç–æ–≤ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      const maxLength = Math.max(...form.cargos.map(c => c.length));\n      const maxWidth = Math.max(...form.cargos.map(c => c.width));\n      const maxHeight = Math.max(...form.cargos.map(c => c.height));\n      \n      // üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      console.log('üåê Nord Wheel: –ê–Ω–∞–ª–∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç:');\n      console.log(`   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç: ${form.cargos.length}`);\n      console.log(`   - –û–±—â–∏–π –≤–µ—Å: ${totalWeight} –∫–≥`);\n      console.log(`   - –û–±—â–∏–π –æ–±—ä–µ–º: ${totalVolume.toFixed(3)} –º¬≥`);\n      \n      form.cargos.forEach((cargo, index) => {\n        console.log(`   üì¶ –ú–µ—Å—Ç–æ ${index + 1}:`);\n        console.log(`     - –ì–∞–±–∞—Ä–∏—Ç—ã: ${cargo.length}√ó${cargo.width}√ó${cargo.height} —Å–º`);\n        console.log(`     - –í–µ—Å: ${cargo.weight} –∫–≥`);\n        console.log(`     - –û–±—ä–µ–º: ${((cargo.length * cargo.width * cargo.height) / 1000000).toFixed(3)} –º¬≥`);\n      });\n\n      if (form.cargos.length > 1) {\n        console.log(`   üìê –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –≥–∞–±–∞—Ä–∏—Ç—ã: ${maxLength}√ó${maxWidth}√ó${maxHeight} —Å–º`);\n      }\n\n      // –§–ò–ê–° –∫–æ–¥—ã –≥–æ—Ä–æ–¥–æ–≤ (—Ç–µ—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ú–æ—Å–∫–≤—ã –∏ –°–ü–±)\n      const cityFiasMap: { [key: string]: string } = {\n        '–ú–æ—Å–∫–≤–∞': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5',\n        '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': 'c2deb16a-0330-4f05-821f-1d09c93331e6',\n        '–°–ü–±': 'c2deb16a-0330-4f05-821f-1d09c93331e6'\n      };\n\n      const fromCityFias = cityFiasMap[form.fromCity] || '0c5b2444-70a0-4932-980c-b4dc0d3f02b5'; // –ú–æ—Å–∫–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n      const toCityFias = cityFiasMap[form.toCity] || 'c2deb16a-0330-4f05-821f-1d09c93331e6'; // –°–ü–± –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n\n      // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API\n      const requestData = {\n        dispatch: {\n          location: {\n            type: form.fromAddressDelivery ? 'address' : 'terminal',\n            city_fias: fromCityFias\n          }\n        },\n        destination: {\n          location: {\n            type: form.toAddressDelivery ? 'address' : 'terminal',\n            city_fias: toCityFias\n          }\n        },\n        cargo: {\n          total_weight: totalWeight,\n          total_volume: totalVolume,\n          total_quantity: form.cargos.length\n        },\n        insurance: form.needInsurance ? form.declaredValue || 1000 : 0,\n        insurance_refuse: !form.needInsurance,\n        services: {\n          is_package: form.needPackaging,\n          is_documents_return: false, // –ü–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–µ\n          is_fragile: false // –ü–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–µ\n        },\n        promocode: null\n      };\n\n      console.log('üöõ Nord Wheel –Ω–æ–≤—ã–π API –∑–∞–ø—Ä–æ—Å:', JSON.stringify(requestData, null, 2));\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(requestData)\n      });\n\n      if (!response.ok) {\n        console.error('‚ùå Nord Wheel API –æ—à–∏–±–∫–∞:', response.status, response.statusText);\n        return {\n          company: 'Nord Wheel',\n          price: 0,\n          days: 0,\n          error: `–û—à–∏–±–∫–∞ API: ${response.status} ${response.statusText}`,\n          apiUrl,\n          requestData\n        };\n      }\n\n      const data = await response.json();\n      console.log('üöõ Nord Wheel –Ω–æ–≤—ã–π API –æ—Ç–≤–µ—Ç:', data);\n\n      if (data.auto && data.auto.total_price) {\n        const autoData = data.auto;\n        const price = autoData.total_price;\n        \n        // –ü–∞—Ä—Å–∏–º –¥–∞—Ç—É –¥–æ—Å—Ç–∞–≤–∫–∏\n        let days = 0;\n        if (autoData.delivery_date) {\n          const deliveryDate = new Date(autoData.delivery_date);\n          const today = new Date();\n          const diffTime = deliveryDate.getTime() - today.getTime();\n          days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n        }\n\n        // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–µ—Ç–∞–ª–∏ —É—Å–ª—É–≥\n        const details: any = {};\n        if (autoData.services && Array.isArray(autoData.services)) {\n          autoData.services.forEach((service: any) => {\n            if (service.name && service.amount) {\n              details[service.name] = service.amount;\n            }\n          });\n        }\n\n        return {\n          company: 'Nord Wheel',\n          price: Math.round(price),\n          days: days,\n          details: {\n            totalCost: price,\n            deliveryCost: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –º–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–≤–æ–∑–∫–∏'] || 0,\n            pickupCost: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–±–æ—Ä–∞'] || 0,\n            deliveryToDoorCost: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –¥–≤–µ—Ä–∏'] || 0,\n            insuranceCost: details['–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞'] || 0,\n            additionalServices: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø.—É—Å–ª—É–≥'] || 0,\n            services: autoData.services || []\n          },\n          requestData,\n          responseData: data,\n          apiUrl\n        };\n      } else {\n        return {\n          company: 'Nord Wheel',\n          price: 0,\n          days: 0,\n          error: data.message || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–≤—Ç–æ –¥–æ—Å—Ç–∞–≤–∫–∏',\n          requestData,\n          responseData: data,\n          apiUrl\n        };\n      }\n    } catch (error: any) {\n      console.error('üöõ Nord Wheel –æ—à–∏–±–∫–∞:', error);\n      return {\n        company: 'Nord Wheel',\n        price: 0,\n        days: 0,\n        error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n        apiUrl\n      };\n    }\n  };",
      "oldString": "  // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n  const calculateNordWheel = async (): Promise<CalculationResult> => {\n    const apiUrl = 'https://nordw.ru/tools/api/calc/calculate/';\n    \n    try {\n      // üîß –í–∞–ª–∏–¥–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      validateMultipleCargos(form.cargos);\n      \n      const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n      const totalVolume = form.cargos.reduce((sum, cargo) => \n        sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n      );\n\n      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –†–∞—Å—á–µ—Ç –≥–∞–±–∞—Ä–∏—Ç–æ–≤ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      const maxLength = Math.max(...form.cargos.map(c => c.length));\n      const maxWidth = Math.max(...form.cargos.map(c => c.width));\n      const maxHeight = Math.max(...form.cargos.map(c => c.height));\n      \n      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç (>2–º –ø–æ –ª—é–±–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é)\n      const isOversized = maxLength > 200 || maxWidth > 200 || maxHeight > 200 || totalWeight > 1000;\n      \n      // üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      console.log('üåê Nord Wheel: –ê–Ω–∞–ª–∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç:');\n      console.log(`   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç: ${form.cargos.length}`);\n      console.log(`   - –û–±—â–∏–π –≤–µ—Å: ${totalWeight} –∫–≥`);\n      console.log(`   - –û–±—â–∏–π –æ–±—ä–µ–º: ${totalVolume.toFixed(3)} –º¬≥`);\n      \n      form.cargos.forEach((cargo, index) => {\n        console.log(`   üì¶ –ú–µ—Å—Ç–æ ${index + 1}:`);\n        console.log(`     - –ì–∞–±–∞—Ä–∏—Ç—ã: ${cargo.length}√ó${cargo.width}√ó${cargo.height} —Å–º`);\n        console.log(`     - –í–µ—Å: ${cargo.weight} –∫–≥`);\n        console.log(`     - –û–±—ä–µ–º: ${((cargo.length * cargo.width * cargo.height) / 1000000).toFixed(3)} –º¬≥`);\n      });\n      \n      if (form.cargos.length > 1) {\n        console.log(`   üìê –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –≥–∞–±–∞—Ä–∏—Ç—ã: ${maxLength}√ó${maxWidth}√ó${maxHeight} —Å–º`);\n        console.log(`   üöõ –ù–µ–≥–∞–±–∞—Ä–∏—Ç: ${isOversized ? '–î–ê' : '–ù–ï–¢'}`);\n      }\n\n      // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n      const params = new URLSearchParams({\n        from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n        to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n        pickup: form.fromAddressDelivery ? '1' : '0',\n        deliver: form.toAddressDelivery ? '1' : '0',\n        weight: totalWeight.toString(),\n        volume: totalVolume.toString(),\n        oversized: isOversized ? '1' : '0', // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n        package: form.needPackaging ? '1' : '0',\n        packageCount: form.cargos.length.toString(),\n        insurance: form.needInsurance ? '1' : '0',\n        sum: form.declaredValue.toString(),\n        documentsReturn: '0',\n        fragile: '1',\n        // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ì–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã\n        length: (maxLength / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n        width: (maxWidth / 100).toString(),        // –≤ –º–µ—Ç—Ä–∞—Ö\n        height: (maxHeight / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n        // üîß –î–û–ë–ê–í–õ–ï–ù–û: –§–ª–∞–≥ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n        multiplePackages: form.cargos.length > 1 ? '1' : '0',\n        // üîß –î–û–ë–ê–í–õ–ï–ù–û: API –∫–ª—é—á NordWheel\n        api_key: '5|WYpV9f788Y2ASobpv3xy6N5qxtIUaKhxFF4yWETOfc398950'\n      });\n\n      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ NordWheel API\n      console.log('üöõ Nord Wheel –∑–∞–ø—Ä–æ—Å:', params);\n\n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        },\n        body: params.toString()\n      });\n\n      if (!response.ok) {\n        console.error('‚ùå Nord Wheel API –æ—à–∏–±–∫–∞:', response.status, response.statusText);\n        return {\n          company: 'Nord Wheel',\n          price: 0,\n          days: 0,\n          error: `–û—à–∏–±–∫–∞ API: ${response.status} ${response.statusText}`,\n          apiUrl\n        };\n      }\n\n      const data = await response.json();\n      console.log('üöõ Nord Wheel –æ—Ç–≤–µ—Ç:', data);\n\n      if (data.success && data.data) {\n        const price = data.data.total_cost || 0;\n        const days = data.data.delivery_time || 0;\n\n        return {\n          company: 'Nord Wheel',\n          price: Math.round(price),\n          days: days,\n          details: {\n            totalCost: price,\n            deliveryCost: data.data.delivery_cost,\n            terminalCost: data.data.terminal_cost,\n            pickupCost: data.data.pickup_cost,\n            deliveryToDoorCost: data.data.delivery_to_door_cost,\n            additionalServices: data.data.additional_services\n          },\n          requestData: Object.fromEntries(params),\n          responseData: data,\n          apiUrl\n        };\n      } else {\n        return {\n          company: 'Nord Wheel',\n          price: 0,\n          days: 0,\n          error: data.message || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n          requestData: Object.fromEntries(params),\n          responseData: data,\n          apiUrl\n        };\n      }\n    } catch (error: any) {\n      console.error('üöõ Nord Wheel –æ—à–∏–±–∫–∞:', error);\n      return {\n        company: 'Nord Wheel',\n        price: 0,\n        days: 0,\n        error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n        apiUrl\n      };\n    }\n  };"
    },
    "output": "",
    "title": "app/page.tsx",
    "metadata": {
      "diagnostics": {},
      "diff": "Index: /home/user/project/app/page.tsx\n===================================================================\n--- /home/user/project/app/page.tsx\n+++ /home/user/project/app/page.tsx\n@@ -3404,9 +3404,9 @@\n };\n \n // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n const calculateNordWheel = async (): Promise<CalculationResult> => {\n-  const apiUrl = 'https://nordw.ru/tools/api/calc/calculate/';\n+  const apiUrl = 'https://api.nordw.orog.ru/api/v1/calculate';\n   \n   try {\n     // üîß –í–∞–ª–∏–¥–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n     validateMultipleCargos(form.cargos);\n@@ -3420,11 +3420,8 @@\n     const maxLength = Math.max(...form.cargos.map(c => c.length));\n     const maxWidth = Math.max(...form.cargos.map(c => c.width));\n     const maxHeight = Math.max(...form.cargos.map(c => c.height));\n     \n-    // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç (>2–º –ø–æ –ª—é–±–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é)\n-    const isOversized = maxLength > 200 || maxWidth > 200 || maxHeight > 200 || totalWeight > 1000;\n-    \n     // üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n     console.log('üåê Nord Wheel: –ê–Ω–∞–ª–∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç:');\n     console.log(`   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç: ${form.cargos.length}`);\n     console.log(`   - –û–±—â–∏–π –≤–µ—Å: ${totalWeight} –∫–≥`);\n@@ -3435,48 +3432,60 @@\n       console.log(`     - –ì–∞–±–∞—Ä–∏—Ç—ã: ${cargo.length}√ó${cargo.width}√ó${cargo.height} —Å–º`);\n       console.log(`     - –í–µ—Å: ${cargo.weight} –∫–≥`);\n       console.log(`     - –û–±—ä–µ–º: ${((cargo.length * cargo.width * cargo.height) / 1000000).toFixed(3)} –º¬≥`);\n     });\n-    \n+\n     if (form.cargos.length > 1) {\n       console.log(`   üìê –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –≥–∞–±–∞—Ä–∏—Ç—ã: ${maxLength}√ó${maxWidth}√ó${maxHeight} —Å–º`);\n-      console.log(`   üöõ –ù–µ–≥–∞–±–∞—Ä–∏—Ç: ${isOversized ? '–î–ê' : '–ù–ï–¢'}`);\n     }\n \n-    // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n-    const params = new URLSearchParams({\n-      from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n-      to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n-      pickup: form.fromAddressDelivery ? '1' : '0',\n-      deliver: form.toAddressDelivery ? '1' : '0',\n-      weight: totalWeight.toString(),\n-      volume: totalVolume.toString(),\n-      oversized: isOversized ? '1' : '0', // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n-      package: form.needPackaging ? '1' : '0',\n-      packageCount: form.cargos.length.toString(),\n-      insurance: form.needInsurance ? '1' : '0',\n-      sum: form.declaredValue.toString(),\n-      documentsReturn: '0',\n-      fragile: '1',\n-      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ì–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã\n-      length: (maxLength / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n-      width: (maxWidth / 100).toString(),        // –≤ –º–µ—Ç—Ä–∞—Ö\n-      height: (maxHeight / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n-      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –§–ª–∞–≥ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n-      multiplePackages: form.cargos.length > 1 ? '1' : '0',\n-      // üîß –î–û–ë–ê–í–õ–ï–ù–û: API –∫–ª—é—á NordWheel\n-      api_key: '5|WYpV9f788Y2ASobpv3xy6N5qxtIUaKhxFF4yWETOfc398950'\n-    });\n+    // –§–ò–ê–° –∫–æ–¥—ã –≥–æ—Ä–æ–¥–æ–≤ (—Ç–µ—Å—Ç–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ú–æ—Å–∫–≤—ã –∏ –°–ü–±)\n+    const cityFiasMap: { [key: string]: string } = {\n+      '–ú–æ—Å–∫–≤–∞': '0c5b2444-70a0-4932-980c-b4dc0d3f02b5',\n+      '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥': 'c2deb16a-0330-4f05-821f-1d09c93331e6',\n+      '–°–ü–±': 'c2deb16a-0330-4f05-821f-1d09c93331e6'\n+    };\n \n-    // üîß –î–û–ë–ê–í–õ–ï–ù–û: –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –∫ NordWheel API\n-    console.log('üöõ Nord Wheel –∑–∞–ø—Ä–æ—Å:', params);\n+    const fromCityFias = cityFiasMap[form.fromCity] || '0c5b2444-70a0-4932-980c-b4dc0d3f02b5'; // –ú–æ—Å–∫–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n+    const toCityFias = cityFiasMap[form.toCity] || 'c2deb16a-0330-4f05-821f-1d09c93331e6'; // –°–ü–± –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n \n+    // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API\n+    const requestData = {\n+      dispatch: {\n+        location: {\n+          type: form.fromAddressDelivery ? 'address' : 'terminal',\n+          city_fias: fromCityFias\n+        }\n+      },\n+      destination: {\n+        location: {\n+          type: form.toAddressDelivery ? 'address' : 'terminal',\n+          city_fias: toCityFias\n+        }\n+      },\n+      cargo: {\n+        total_weight: totalWeight,\n+        total_volume: totalVolume,\n+        total_quantity: form.cargos.length\n+      },\n+      insurance: form.needInsurance ? form.declaredValue || 1000 : 0,\n+      insurance_refuse: !form.needInsurance,\n+      services: {\n+        is_package: form.needPackaging,\n+        is_documents_return: false, // –ü–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–µ\n+        is_fragile: false // –ü–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–µ\n+      },\n+      promocode: null\n+    };\n+\n+    console.log('üöõ Nord Wheel –Ω–æ–≤—ã–π API –∑–∞–ø—Ä–æ—Å:', JSON.stringify(requestData, null, 2));\n+\n     const response = await fetch(apiUrl, {\n       method: 'POST',\n       headers: {\n-        'Content-Type': 'application/x-www-form-urlencoded',\n+        'Content-Type': 'application/json',\n       },\n-      body: params.toString()\n+      body: JSON.stringify(requestData)\n     });\n \n     if (!response.ok) {\n       console.error('‚ùå Nord Wheel API –æ—à–∏–±–∫–∞:', response.status, response.statusText);\n@@ -3484,42 +3493,63 @@\n         company: 'Nord Wheel',\n         price: 0,\n         days: 0,\n         error: `–û—à–∏–±–∫–∞ API: ${response.status} ${response.statusText}`,\n-        apiUrl\n+        apiUrl,\n+        requestData\n       };\n     }\n \n     const data = await response.json();\n-    console.log('üöõ Nord Wheel –æ—Ç–≤–µ—Ç:', data);\n+    console.log('üöõ Nord Wheel –Ω–æ–≤—ã–π API –æ—Ç–≤–µ—Ç:', data);\n \n-    if (data.success && data.data) {\n-      const price = data.data.total_cost || 0;\n-      const days = data.data.delivery_time || 0;\n+    if (data.auto && data.auto.total_price) {\n+      const autoData = data.auto;\n+      const price = autoData.total_price;\n+      \n+      // –ü–∞—Ä—Å–∏–º –¥–∞—Ç—É –¥–æ—Å—Ç–∞–≤–∫–∏\n+      let days = 0;\n+      if (autoData.delivery_date) {\n+        const deliveryDate = new Date(autoData.delivery_date);\n+        const today = new Date();\n+        const diffTime = deliveryDate.getTime() - today.getTime();\n+        days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n+      }\n \n+      // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–µ—Ç–∞–ª–∏ —É—Å–ª—É–≥\n+      const details: any = {};\n+      if (autoData.services && Array.isArray(autoData.services)) {\n+        autoData.services.forEach((service: any) => {\n+          if (service.name && service.amount) {\n+            details[service.name] = service.amount;\n+          }\n+        });\n+      }\n+\n       return {\n         company: 'Nord Wheel',\n         price: Math.round(price),\n         days: days,\n         details: {\n           totalCost: price,\n-          deliveryCost: data.data.delivery_cost,\n-          terminalCost: data.data.terminal_cost,\n-          pickupCost: data.data.pickup_cost,\n-          deliveryToDoorCost: data.data.delivery_to_door_cost,\n-          additionalServices: data.data.additional_services\n+          deliveryCost: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –º–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–≤–æ–∑–∫–∏'] || 0,\n+          pickupCost: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–±–æ—Ä–∞'] || 0,\n+          deliveryToDoorCost: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –¥–≤–µ—Ä–∏'] || 0,\n+          insuranceCost: details['–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞'] || 0,\n+          additionalServices: details['–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø.—É—Å–ª—É–≥'] || 0,\n+          services: autoData.services || []\n         },\n-        requestData: Object.fromEntries(params),\n+        requestData,\n         responseData: data,\n         apiUrl\n       };\n     } else {\n       return {\n         company: 'Nord Wheel',\n         price: 0,\n         days: 0,\n-        error: data.message || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n-        requestData: Object.fromEntries(params),\n+        error: data.message || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel - –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–≤—Ç–æ –¥–æ—Å—Ç–∞–≤–∫–∏',\n+        requestData,\n         responseData: data,\n         apiUrl\n       };\n     }\n"
    },
    "time": {
      "start": 1763466320079,
      "end": 1763466320116
    }
  }
}