{
  "id": "prt_994b33d910011QxjHqN3IC8jMh",
  "messageID": "msg_994af0ade001eZFeIj9XDJ123G",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_0152ftM6WqWXFmb62jibgUYU",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/TruckVisualization.tsx",
      "limit": 100
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import React, { useState } from 'react';\n00004| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00005| import { Button } from '@/components/ui/button';\n00006| import { Truck, RotateCcw, RotateCw } from 'lucide-react';\n00007| \n00008| interface Cargo {\n00009|   id: string;\n00010|   length: number; // в мм\n00011|   width: number;  // в мм\n00012|   height: number; // в мм\n00013|   weight: number;\n00014|   productName?: string;\n00015| }\n00016| \n00017| interface Orientation {\n00018|   length: number;\n00019|   width: number;\n00020|   height: number;\n00021|   rotationAngle: number; // в градусах\n00022|   flipped: boolean; // перевернут ли груз по высоте\n00023| }\n00024| \n00025| interface CargoPlacement {\n00026|   cargo: Cargo;\n00027|   x: number;\n00028|   y: number;\n00029|   z: number;\n00030|   orientation: Orientation;\n00031|   color: string;\n00032|   projectedVertices: Array<{x: number, y: number}>; // Для 3D отображения\n00033| }\n00034| \n00035| interface TruckVisualizationProps {\n00036|   cargos: Cargo[];\n00037|   isVisible?: boolean;\n00038| }\n00039| \n00040| // Размеры кузова в мм\n00041| const TRUCK_DIMENSIONS = {\n00042|   length: 4200,\n00043|   width: 2025,\n00044|   height: 2025\n00045| };\n00046| \n00047| // Углы поворота для размещения грузов (в градусах)\n00048| const ROTATION_ANGLES = [0, 45, 90, 135, 180, 225, 270, 315];\n00049| \n00050| // Цвета для разных грузов\n00051| const CARGO_COLORS = [\n00052|   '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57',\n00053|   '#FF9FF3', '#54A0FF', '#5F27CD', '#00D2D3', '#FF9F43',\n00054|   '#10AC84', '#EE5A24', '#0984E3', '#6C5CE7', '#FD79A8'\n00055| ];\n00056| \n00057| export default function TruckVisualization({ cargos, isVisible = false }: TruckVisualizationProps) {\n00058|   const [rotationAngle, setRotationAngle] = useState(0); // Угол поворота в градусах\n00059|   \n00060|   // Функция проверки ключевых слов\n00061|   const isChairOrSeat = (productName?: string) => {\n00062|     if (!productName) return false;\n00063|     const lowerName = productName.toLowerCase();\n00064|     return lowerName.includes('стул') || lowerName.includes('кресло');\n00065|   };\n00066| \n00067|   // Генерация всех возможных ориентаций груза\n00068|   const generateOrientations = (cargo: Cargo): Orientation[] => {\n00069|     const orientations: Orientation[] = [];\n00070|     const baseDimensions = [\n00071|       [cargo.length, cargo.width, cargo.height],\n00072|       [cargo.width, cargo.length, cargo.height],\n00073|       [cargo.length, cargo.height, cargo.width],\n00074|       [cargo.height, cargo.length, cargo.width],\n00075|       [cargo.width, cargo.height, cargo.length],\n00076|       [cargo.height, cargo.width, cargo.length]\n00077|     ];\n00078| \n00079|     // Для стульев/кресел ограничиваем повороты (нельзя переворачивать)\n00080|     const allowedDimensions = isChairOrSeat(cargo.productName) \n00081|       ? baseDimensions.slice(0, 2) // Только первые 2 варианта (без поворота по высоте)\n00082|       : baseDimensions;\n00083| \n00084|     allowedDimensions.forEach(([l, w, h]) => {\n00085|       ROTATION_ANGLES.forEach(angle => {\n00086|         // Вычисляем размеры после поворота\n00087|         const rad = (angle * Math.PI) / 180;\n00088|         const cos = Math.abs(Math.cos(rad));\n00089|         const sin = Math.abs(Math.sin(rad));\n00090|         \n00091|         const rotatedLength = l * cos + w * sin;\n00092|         const rotatedWidth = l * sin + w * cos;\n00093| \n00094|         orientations.push({\n00095|           length: rotatedLength,\n00096|           width: rotatedWidth,\n00097|           height: h,\n00098|           rotationAngle: angle,\n00099|           flipped: h !== cargo.height\n00100|         });\n\n(File has more lines. Use 'offset' parameter to read beyond line 100)\n</file>",
    "metadata": {
      "preview": "'use client';\n\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Truck, RotateCcw, RotateCw } from 'lucide-react';\n\ninterface Cargo {\n  id: string;\n  length: number; // в мм\n  width: number;  // в мм\n  height: number; // в мм\n  weight: number;\n  productName?: string;\n}\n\ninterface Orientation {\n  length: number;\n  width: number;\n  height: number;"
    },
    "title": "components/TruckVisualization.tsx",
    "time": {
      "start": 1759136399148,
      "end": 1759136399151
    }
  }
}