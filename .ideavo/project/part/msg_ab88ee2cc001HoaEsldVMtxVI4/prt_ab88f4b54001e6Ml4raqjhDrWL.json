{
  "id": "prt_ab88f4b54001e6Ml4raqjhDrWL",
  "sessionID": "ses_54b97e247ffenCZZa4jZiIWD0l",
  "messageID": "msg_ab88ee2cc001HoaEsldVMtxVI4",
  "type": "tool",
  "callID": "call_01d113b5dbdc4d628223eff7",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "limit": 150,
      "offset": 3696
    },
    "output": "<file>\n03697|       console.log('üöõ Nord Wheel API –æ—Ç–≤–µ—Ç:', data);\n03698| \n03699|        // –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ API - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã\n03700|        let price = 0;\n03701|        let days = 0;\n03702|        let details: any = {};\n03703| \n03704|        if (data.success) {\n03705|          // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç API —Å auto/avia –æ–±—ä–µ–∫—Ç–∞–º–∏\n03706|          if (data.auto || data.avia) {\n03707|            const options: Array<{type: string, price: number, days: number, services: any[]}> = [];\n03708|            \n03709|            if (data.auto) {\n03710|              options.push({\n03711|                type: 'auto',\n03712|                price: data.auto.total_price || 0,\n03713|                days: data.auto.delivery_date || 0,\n03714|                services: data.auto.services || []\n03715|              });\n03716|            }\n03717|            \n03718|            if (data.avia) {\n03719|              options.push({\n03720|                type: 'avia',\n03721|                price: data.avia.total_price || 0,\n03722|                days: data.avia.delivery_date || 0,\n03723|                services: data.avia.services || []\n03724|              });\n03725|            }\n03726|            \n03727|            // –í—ã–±–∏—Ä–∞–µ–º —Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç\n03728|            const bestOption = options.reduce((best, current) => \n03729|              current.price < best.price ? current : best\n03730|            );\n03731|            \n03732|            price = bestOption.price;\n03733|            days = bestOption.days;\n03734|            details = {\n03735|              totalCost: price,\n03736|              deliveryCost: price, // –í –Ω–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –æ–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ\n03737|              transportType: bestOption.type,\n03738|              services: bestOption.services,\n03739|              allOptions: options, // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n03740|              currency: 'RUB'\n03741|            };\n03742|          } else {\n03743|            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞\n03744|            price = data.price || data.total_cost || data.cost || 0;\n03745|            days = data.days || data.delivery_days || data.delivery_time || 0;\n03746|            details = {\n03747|              totalCost: price,\n03748|              deliveryCost: data.delivery_cost || 0,\n03749|              pickupCost: data.pickup_cost || 0,\n03750|              insuranceCost: data.insurance_cost || 0,\n03751|              services: data.services || [],\n03752|              currency: data.currency || 'RUB'\n03753|            };\n03754|          }\n03755|        } else if (data.price !== undefined) {\n03756|          // –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞\n03757|          price = data.price;\n03758|          days = data.days || data.delivery_time || 0;\n03759|          details = {\n03760|            totalCost: price,\n03761|            currency: data.currency || 'RUB'\n03762|          };\n03763|        } else {\n03764|          // –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ü–µ–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É\n03765|          console.error('‚ùå Nord Wheel: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API:', data);\n03766|          return {\n03767|            company: 'Nord Wheel',\n03768|            price: 0,\n03769|            days: 0,\n03770|            error: '–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ API',\n03771|            apiUrl,\n03772|            requestData,\n03773|            responseData: data\n03774|          };\n03775|        }\n03776| \n03777|       return {\n03778|         company: 'Nord Wheel',\n03779|         price: Math.round(price),\n03780|         days: days,\n03781|         details,\n03782|         requestData,\n03783|         responseData: data,\n03784|         apiUrl\n03785|       };\n03786|     } catch (error: any) {\n03787|       console.error('üöõ Nord Wheel –æ—à–∏–±–∫–∞:', error);\n03788|       return {\n03789|         company: 'Nord Wheel',\n03790|         price: 0,\n03791|         days: 0,\n03792|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n03793|         apiUrl\n03794|       };\n03795|     }\n03796|   };\n03797|     const calculateCdek = async (): Promise<CalculationResult> => {\n03798|     const apiUrl = '/api/cdek';\n03799|     \n03800|     try {\n03801|       validateMultipleCargos(form.cargos);\n03802|       \n03803|       const packages = form.cargos.map(cargo => ({\n03804|         height: cargo.height,\n03805|         length: cargo.length,\n03806|         width: cargo.width,\n03807|         weight: cargo.weight * 1000\n03808|       }));\n03809| \n03810|       const requestData: any = {\n03811|         from_city: form.fromCity || '–ú–æ—Å–∫–≤–∞',\n03812|         to_city: form.toCity || '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n03813|         packages: packages\n03814|       };\n03815| \n03816|       if (form.needInsurance && form.declaredValue > 0) {\n03817|         requestData.services = [{\n03818|           code: 'INSURANCE',\n03819|           parameter: form.declaredValue\n03820|         }];\n03821|         console.log('üì¶ CDEK: –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ', form.declaredValue);\n03822|       }\n03823| \n03824|       console.log('üì¶ CDEK –∑–∞–ø—Ä–æ—Å:', JSON.stringify(requestData, null, 2));\n03825|       console.log('üì¶ CDEK –º–∞—Ä—à—Ä—É—Ç:', {\n03826|         fromAddressDelivery: form.fromAddressDelivery,\n03827|         fromLavsiteWarehouse: form.fromLavsiteWarehouse,\n03828|         toAddressDelivery: form.toAddressDelivery\n03829|       });\n03830| \n03831|        const result = await enhancedApiRequest(\n03832|          apiUrl,\n03833|          {\n03834|            method: 'POST',\n03835|            headers: {\n03836|              'Content-Type': 'application/json',\n03837|            },\n03838|            body: JSON.stringify(requestData)\n03839|          },\n03840|          { operation: 'calculate', company: '–°–î–≠–ö' }\n03841|        );\n03842| \n03843|        if (result && typeof result === 'object' && 'success' in result && !result.success) {\n03844|          console.error('‚ùå –°–î–≠–ö API –æ—à–∏–±–∫–∞:', result.error);\n03845|          return {\n03846|            company: '–°–î–≠–ö',\n\n(File has more lines. Use 'offset' parameter to read beyond line 3846)\n</file>",
    "title": "app/page.tsx",
    "metadata": {
      "preview": "      console.log('üöõ Nord Wheel API –æ—Ç–≤–µ—Ç:', data);\n\n       // –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–≤–µ—Ç–∞ API - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã\n       let price = 0;\n       let days = 0;\n       let details: any = {};\n\n       if (data.success) {\n         // –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç API —Å auto/avia –æ–±—ä–µ–∫—Ç–∞–º–∏\n         if (data.auto || data.avia) {\n           const options: Array<{type: string, price: number, days: number, services: any[]}> = [];\n           \n           if (data.auto) {\n             options.push({\n               type: 'auto',\n               price: data.auto.total_price || 0,\n               days: data.auto.delivery_date || 0,\n               services: data.auto.services || []\n             });\n           }"
    },
    "time": {
      "start": 1764032990047,
      "end": 1764032990062
    }
  }
}