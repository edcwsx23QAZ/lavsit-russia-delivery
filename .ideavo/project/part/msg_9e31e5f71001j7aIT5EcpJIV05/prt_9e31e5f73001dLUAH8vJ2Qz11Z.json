{
  "id": "prt_9e31e5f73001dLUAH8vJ2Qz11Z",
  "type": "text",
  "text": "Create a comprehensive freight calculator application with the following enhancements, ensuring all monitoring and testing infrastructure is consolidated on the dedicated \"Diagnostics\" page:\n\nCore Improvements:\n\nRobust Error Handling: Implement centralized error management with graceful degradation, user-friendly messages instead of technical errors, exponential backoff retries, and result caching for offline resilience.\n\nPerformance Monitoring: Integrate APM tools (Sentry/New Relic), custom API metrics, Core Web Vitals tracking, and automated alerts for performance thresholds.\n\nComprehensive Testing Suite: Establish unit tests for business logic, integration tests for APIs, E2E tests for critical user flows, and CI/CD pipeline with 80%+ code coverage - all accessible via Diagnostics page.\n\nModern UI/UX: Develop contemporary design with micro-interactions, advanced components (drag-drop, autocomplete), dark theme support, and PWA capabilities.\n\nDetailed Implementation Requirements:\n\nMonitoring & Logging System (Diagnostics Page):\n\nFrontend: Sentry error tracking + Web Vitals metrics\nBackend: Winston structured logging + PM2 process monitoring\nAPI: Custom middleware for request/response logging with context (user agent, IP, session)\nDashboard: Grafana/Prometheus visualization with Slack/Discord alerts\nMetrics: API response times, error rates, usage analytics, weekly performance reports\nFrontend Performance Optimization:\n\nBundle analysis and code splitting by routes with lazy loading\nReact.memo, useMemo/useCallback for component optimization\nTree shaking, compression (gzip/brotli), CDN assets, Service Worker caching\nRuntime: Debounced search, Intersection Observer, virtual scrolling\nTarget: 40-60% faster load times, improved Core Web Vitals\nTesting Infrastructure (Diagnostics Page):\n\nJest + React Testing Library for unit/component tests\nMSW for API mocking, Cypress for E2E testing\nTest categories: Business logic validation, API integration, error boundaries\nCI/CD: GitHub Actions with coverage reporting, pre-commit hooks\nTest data: Fixtures for transport companies, snapshot testing\nUI/UX Design Enhancement:\n\nDesign system with tokens (colors, typography, spacing) using shadcn/ui\nProgressive form reveals, interactive maps, animated state transitions\nAdvanced features: Drag-drop file upload, geolocation autocomplete, tabular TK comparison\nAnimations: Skeleton loaders, smooth transitions, feedback interactions\nAccessibility: ARIA labels, keyboard navigation, screen reader support\nMobile Responsiveness:\n\nMobile-first CSS with 44px+ touch targets, optimized typography\nTouch gestures: Swipe between TKs, pull-to-refresh, long-press menus\nPWA: Service Worker offline support, app manifest, push notifications\nMobile components: Bottom sheets, collapsible sections, floating action buttons\nPerformance: Critical CSS, WebP images, lazy loading\nExternal API Integration:\n\nRESTful API with OpenAPI documentation, rate limiting, API key authentication\nCore endpoints: POST /calculate, GET /companies, GET /history (authenticated)\nAdvanced: Webhooks, batch calculations, custom pricing rules\nSDK: JavaScript library with PHP/Python wrappers, developer portal\nMonitoring: Usage tracking, revenue attribution, SLA monitoring\nTechnical Requirements:\n\nAll monitoring dashboards and test runners must be accessible exclusively through the Diagnostics page\nImplement comprehensive error boundaries and fallback mechanisms\nEnsure backward compatibility and progressive enhancement\nTarget 99.9% uptime with automated recovery mechanisms\nProvide detailed API documentation and integration guides\nFocus on production-ready code with security best practices, comprehensive logging, and scalable architecture. Prioritize user experience improvements and system reliability.",
  "messageID": "msg_9e31e5f71001j7aIT5EcpJIV05",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14"
}