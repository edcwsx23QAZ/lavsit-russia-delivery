{
  "id": "prt_98cfab4a6001EALenw3B7HQ5f0",
  "messageID": "msg_98cf90455001N3n50eOJRYIHgT",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "bash",
  "callID": "toolu_01PcEDYgWX1RcdG5He9kueJX",
  "state": {
    "status": "completed",
    "input": {
      "command": "cd /home/user/project && npm run build",
      "description": "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Nord Wheel API"
    },
    "output": "\n> ideavo-nextjs@0.1.0 build\n> next build\n\n  ‚ñ≤ Next.js 14.2.31\n  - Environments: .env.local, .env\n\n   Creating an optimized production build ...\nFailed to compile.\n\n./app/page.tsx\nError: \n  \u001b[31mx\u001b[0m the name `calculateNordWheel` is defined multiple times\n      ,-[\u001b[36;1;4m/home/user/project/app/page.tsx\u001b[0m:1008:1]\n \u001b[2m1008\u001b[0m |   };\n \u001b[2m1009\u001b[0m | \n \u001b[2m1010\u001b[0m |   // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n \u001b[2m1011\u001b[0m |   const calculateNordWheel = async (): Promise<CalculationResult> => {\n      : \u001b[31;1m        ^^^^^^^^^|^^^^^^^^\u001b[0m\n      :                  \u001b[31;1m`-- \u001b[31;1mprevious definition of `calculateNordWheel` here\u001b[0m\u001b[0m\n \u001b[2m1012\u001b[0m |     const apiUrl = 'https://nordw.ru/tools/api/calc/calculate/';\n \u001b[2m1013\u001b[0m |     \n \u001b[2m1014\u001b[0m |     try {\n \u001b[2m1015\u001b[0m |       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n \u001b[2m1016\u001b[0m |       const totalVolume = form.cargos.reduce((sum, cargo) => \n \u001b[2m1017\u001b[0m |         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n \u001b[2m1018\u001b[0m |       );\n \u001b[2m1019\u001b[0m | \n \u001b[2m1020\u001b[0m |       const params = new URLSearchParams({\n \u001b[2m1021\u001b[0m |         from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n \u001b[2m1022\u001b[0m |         to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n \u001b[2m1023\u001b[0m |         pickup: form.fromAddressDelivery ? '1' : '0',\n \u001b[2m1024\u001b[0m |         deliver: form.toAddressDelivery ? '1' : '0',\n \u001b[2m1025\u001b[0m |         weight: totalWeight.toString(),\n \u001b[2m1026\u001b[0m |         volume: totalVolume.toString(),\n \u001b[2m1027\u001b[0m |         oversized: '0',\n \u001b[2m1028\u001b[0m |         package: form.needPackaging ? '1' : '0',\n \u001b[2m1029\u001b[0m |         packageCount: form.cargos.length.toString(),\n \u001b[2m1030\u001b[0m |         insurance: form.needInsurance ? '1' : '0',\n \u001b[2m1031\u001b[0m |         sum: form.declaredValue.toString(),\n \u001b[2m1032\u001b[0m |         documentsReturn: '0',\n \u001b[2m1033\u001b[0m |         fragile: '1'\n \u001b[2m1034\u001b[0m |       });\n \u001b[2m1035\u001b[0m | \n \u001b[2m1036\u001b[0m |       const requestData = Object.fromEntries(params);\n \u001b[2m1037\u001b[0m |       const fullUrl = `${apiUrl}?${params.toString()}`;\n \u001b[2m1038\u001b[0m | \n \u001b[2m1039\u001b[0m |       const response = await fetch(fullUrl);\n \u001b[2m1040\u001b[0m |       const data = await response.json();\n \u001b[2m1041\u001b[0m | \n \u001b[2m1042\u001b[0m |       if (response.ok && data.status === 'success' && data.data) {\n \u001b[2m1043\u001b[0m |         return {\n \u001b[2m1044\u001b[0m |           company: 'Nord Wheel',\n \u001b[2m1045\u001b[0m |           price: data.data.total || 0,\n \u001b[2m1046\u001b[0m |           days: data.data.days || 0,\n \u001b[2m1047\u001b[0m |           details: {\n \u001b[2m1048\u001b[0m |             ...data.data,\n \u001b[2m1049\u001b[0m |             totalCost: data.data.total,\n \u001b[2m1050\u001b[0m |             deliveryCost: data.data.door,\n \u001b[2m1051\u001b[0m |             terminalCost: data.data.terminal,\n \u001b[2m1052\u001b[0m |             pickupCost: data.data.pick,\n \u001b[2m1053\u001b[0m |             deliveryToDoorCost: data.data.deliver,\n \u001b[2m1054\u001b[0m |             additionalServices: (data.data.total || 0) - (data.data.door || 0)\n \u001b[2m1055\u001b[0m |           },\n \u001b[2m1056\u001b[0m |           requestData,\n \u001b[2m1057\u001b[0m |           responseData: data,\n \u001b[2m1058\u001b[0m |           apiUrl: fullUrl\n \u001b[2m1059\u001b[0m |         };\n \u001b[2m1060\u001b[0m |       } else {\n \u001b[2m1061\u001b[0m |         return {\n \u001b[2m1062\u001b[0m |           company: 'Nord Wheel',\n \u001b[2m1063\u001b[0m |           price: 0,\n \u001b[2m1064\u001b[0m |           days: 0,\n \u001b[2m1065\u001b[0m |           error: '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n \u001b[2m1066\u001b[0m |           requestData,\n \u001b[2m1067\u001b[0m |           responseData: data,\n \u001b[2m1068\u001b[0m |           apiUrl: fullUrl\n \u001b[2m1069\u001b[0m |         };\n \u001b[2m1070\u001b[0m |       }\n \u001b[2m1071\u001b[0m |     } catch (error: any) {\n \u001b[2m1072\u001b[0m |       return {\n \u001b[2m1073\u001b[0m |         company: 'Nord Wheel',\n \u001b[2m1074\u001b[0m |         price: 0,\n \u001b[2m1075\u001b[0m |         days: 0,\n \u001b[2m1076\u001b[0m |         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n \u001b[2m1077\u001b[0m |         apiUrl\n \u001b[2m1078\u001b[0m |       };\n \u001b[2m1079\u001b[0m |     }\n \u001b[2m1080\u001b[0m |   };\n \u001b[2m1081\u001b[0m | \n \u001b[2m1082\u001b[0m |   // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–Ω–æ–π –∑–æ–Ω—ã –∏ —Å–∫–ª–∞–¥–∞ –ü–≠–ö –ø–æ –∞–¥—Ä–µ—Å—É —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏\n \u001b[2m1083\u001b[0m |   const getPekZoneByAddress = async (address: string) => {\n \u001b[2m1084\u001b[0m |     try {\n \u001b[2m1085\u001b[0m |       console.log(`üîç –ü–≠–ö: –ø–æ–∏—Å–∫ –∑–æ–Ω—ã –¥–ª—è –∞–¥—Ä–µ—Å–∞ \"${address}\"`);\n \u001b[2m1086\u001b[0m |       \n \u001b[2m1087\u001b[0m |       const response = await fetch('/api/pek', {\n \u001b[2m1088\u001b[0m |         method: 'POST',\n \u001b[2m1089\u001b[0m |         headers: {\n \u001b[2m1090\u001b[0m |           'Content-Type': 'application/json',\n \u001b[2m1091\u001b[0m |         },\n \u001b[2m1092\u001b[0m |         body: JSON.stringify({\n \u001b[2m1093\u001b[0m |           method: 'findzonebyaddress',\n \u001b[2m1094\u001b[0m |           address: address\n \u001b[2m1095\u001b[0m |         })\n \u001b[2m1096\u001b[0m |       });\n \u001b[2m1097\u001b[0m | \n \u001b[2m1098\u001b[0m |       console.log(`üì° –ü–≠–ö API —Å—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}`);\n \u001b[2m1099\u001b[0m |       \n \u001b[2m1100\u001b[0m |       if (!response.ok) {\n \u001b[2m1101\u001b[0m |         let errorData;\n \u001b[2m1102\u001b[0m |         try {\n \u001b[2m1103\u001b[0m |           errorData = await response.json();\n \u001b[2m1104\u001b[0m |         } catch {\n \u001b[2m1105\u001b[0m |           errorData = { error: '–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç' };\n \u001b[2m1106\u001b[0m |         }\n \u001b[2m1107\u001b[0m |         \n \u001b[2m1108\u001b[0m |         console.error(`‚ùå –ü–≠–ö API –æ—à–∏–±–∫–∞ ${response.status}:`, errorData);\n \u001b[2m1109\u001b[0m |         \n \u001b[2m1110\u001b[0m |         // –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫\n \u001b[2m1111\u001b[0m |         if (response.status === 401) {\n \u001b[2m1112\u001b[0m |           console.error('‚ùå –ü–≠–ö: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω');\n \u001b[2m1113\u001b[0m |         } else if (response.status === 404) {\n \u001b[2m1114\u001b[0m |           console.error('‚ùå –ü–≠–ö: –ú–µ—Ç–æ–¥ API –Ω–µ –Ω–∞–π–¥–µ–Ω');\n \u001b[2m1115\u001b[0m |         } else if (response.status === 400) {\n \u001b[2m1116\u001b[0m |           console.error('‚ùå –ü–≠–ö: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞');\n \u001b[2m1117\u001b[0m |         } else if (response.status >= 500) {\n \u001b[2m1118\u001b[0m |           console.error('‚ùå –ü–≠–ö: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ü–≠–ö');\n \u001b[2m1119\u001b[0m |         }\n \u001b[2m1120\u001b[0m |         \n \u001b[2m1121\u001b[0m |         console.log(`üîÑ –ü–≠–ö: –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–æ–ª–ª–±—ç–∫ –º–µ—Ç–æ–¥—É –¥–ª—è \"${address}\"`);\n \u001b[2m1122\u001b[0m |         return getPekZoneFallback(address);\n \u001b[2m1123\u001b[0m |       }\n \u001b[2m1124\u001b[0m | \n \u001b[2m1125\u001b[0m |       const data = await response.json();\n \u001b[2m1126\u001b[0m |       console.log(`‚úÖ –ü–≠–ö –∑–æ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞:`, data);\n \u001b[2m1127\u001b[0m |       \n \u001b[2m1128\u001b[0m |       if (data.zoneId && data.mainWarehouseId) {\n \u001b[2m1129\u001b[0m |         return {\n \u001b[2m1130\u001b[0m |           zoneId: data.zoneId,\n \u001b[2m1131\u001b[0m |           zoneName: data.zoneName,\n \u001b[2m1132\u001b[0m |           branchUID: data.branchUID,\n \u001b[2m1133\u001b[0m |           branchCode: data.branchCode,\n \u001b[2m1134\u001b[0m |           branchTitle: data.branchTitle,\n \u001b[2m1135\u001b[0m |           mainWarehouseId: data.mainWarehouseId,\n \u001b[2m1136\u001b[0m |           warehousePoint: data.warehousePoint,\n \u001b[2m1137\u001b[0m |           geoData: data.GeoData,\n \u001b[2m1138\u001b[0m |           precision: data.GeoData?.precision\n \u001b[2m1139\u001b[0m |         };\n \u001b[2m1140\u001b[0m |       }\n \u001b[2m1141\u001b[0m |       \n \u001b[2m1142\u001b[0m |       console.warn(`‚ö†Ô∏è –ü–≠–ö: –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç:`, data);\n \u001b[2m1143\u001b[0m |       return getPekZoneFallback(address);\n \u001b[2m1144\u001b[0m |       \n \u001b[2m1145\u001b[0m |     } catch (error) {\n \u001b[2m1146\u001b[0m |       console.error('‚ùå –ü–≠–ö: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –∑–æ–Ω—ã:', error);\n \u001b[2m1147\u001b[0m |       return getPekZoneFallback(address);\n \u001b[2m1148\u001b[0m |     }\n \u001b[2m1149\u001b[0m |   };\n \u001b[2m1150\u001b[0m | \n \u001b[2m1151\u001b[0m |   // –§–æ–ª–ª–±—ç–∫ –º–µ—Ç–æ–¥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã –ü–≠–ö\n \u001b[2m1152\u001b[0m |   const getPekZoneFallback = (address: string) => {\n \u001b[2m1153\u001b[0m |     console.log(`üîÑ –ü–≠–ö —Ñ–æ–ª–ª–±—ç–∫: –∞–Ω–∞–ª–∏–∑ –∞–¥—Ä–µ—Å–∞ \"${address}\"`);\n \u001b[2m1154\u001b[0m |     \n \u001b[2m1155\u001b[0m |     const addressLower = address.toLowerCase();\n \u001b[2m1156\u001b[0m |     \n \u001b[2m1157\u001b[0m |     // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ\n \u001b[2m1158\u001b[0m |     const cityMappings: { [key: string]: any } = {\n \u001b[2m1159\u001b[0m |       '–º–æ—Å–∫–≤–∞': {\n \u001b[2m1160\u001b[0m |         zoneId: 'moscow-zone-001',\n \u001b[2m1161\u001b[0m |         zoneName: '–ú–æ—Å–∫–≤–∞',\n \u001b[2m1162\u001b[0m |         branchUID: 'moscow-branch-001',\n \u001b[2m1163\u001b[0m |         branchCode: '–ú–°–ö',\n \u001b[2m1164\u001b[0m |         branchTitle: '–ú–æ—Å–∫–≤–∞',\n \u001b[2m1165\u001b[0m |         mainWarehouseId: 'dc6c746d-812d-11e4-bbfc-001999d8b3c5',\n \u001b[2m1166\u001b[0m |         warehousePoint: {\n \u001b[2m1167\u001b[0m |           latitude: 55.755826,\n \u001b[2m1168\u001b[0m |           longitude: 37.6173\n \u001b[2m1169\u001b[0m |         }\n \u001b[2m1170\u001b[0m |       },\n \u001b[2m1171\u001b[0m |       '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥': {\n \u001b[2m1172\u001b[0m |         zoneId: 'spb-zone-001',\n \u001b[2m1173\u001b[0m |         zoneName: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n \u001b[2m1174\u001b[0m |         branchUID: 'spb-branch-001',\n \u001b[2m1175\u001b[0m |         branchCode: '–°–ü–ë',\n \u001b[2m1176\u001b[0m |         branchTitle: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n \u001b[2m1177\u001b[0m |         mainWarehouseId: 'b436c978-086d-11e6-b6ca-00155d668909',\n \u001b[2m1178\u001b[0m |         warehousePoint: {\n \u001b[2m1179\u001b[0m |           latitude: 59.9311,\n \u001b[2m1180\u001b[0m |           longitude: 30.3609\n \u001b[2m1181\u001b[0m |         }\n \u001b[2m1182\u001b[0m |       },\n \u001b[2m1183\u001b[0m |       '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': {\n \u001b[2m1184\u001b[0m |         zoneId: 'ekb-zone-001',\n \u001b[2m1185\u001b[0m |         zoneName: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',\n \u001b[2m1186\u001b[0m |         branchUID: 'ekb-branch-001',\n \u001b[2m1187\u001b[0m |         branchCode: '–ï–ö–ë',\n \u001b[2m1188\u001b[0m |         branchTitle: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',\n \u001b[2m1189\u001b[0m |         mainWarehouseId: 'f8d9c8e3-8e2d-11e4-bbfc-001999d8b3c5',\n \u001b[2m1190\u001b[0m |         warehousePoint: {\n \u001b[2m1191\u001b[0m |           latitude: 56.8431,\n \u001b[2m1192\u001b[0m |           longitude: 60.6454\n \u001b[2m1193\u001b[0m |         }\n \u001b[2m1194\u001b[0m |       }\n \u001b[2m1195\u001b[0m |     };\n \u001b[2m1196\u001b[0m |     \n \u001b[2m1197\u001b[0m |     for (const [city, data] of Object.entries(cityMappings)) {\n \u001b[2m1198\u001b[0m |       if (addressLower.includes(city) || addressLower.includes(city.replace('-', ' '))) {\n \u001b[2m1199\u001b[0m |         console.log(`‚úÖ –ü–≠–ö —Ñ–æ–ª–ª–±—ç–∫: –Ω–∞–π–¥–µ–Ω –≥–æ—Ä–æ–¥ ${city}`);\n \u001b[2m1200\u001b[0m |         return {\n \u001b[2m1201\u001b[0m |           ...data,\n \u001b[2m1202\u001b[0m |           geoData: {\n \u001b[2m1203\u001b[0m |             precision: 'fallback',\n \u001b[2m1204\u001b[0m |             kind: 'locality'\n \u001b[2m1205\u001b[0m |           },\n \u001b[2m1206\u001b[0m |           precision: 'fallback'\n \u001b[2m1207\u001b[0m |         };\n \u001b[2m1208\u001b[0m |       }\n \u001b[2m1209\u001b[0m |     }\n \u001b[2m1210\u001b[0m |     \n \u001b[2m1211\u001b[0m |     console.warn(`‚ùå –ü–≠–ö —Ñ–æ–ª–ª–±—ç–∫: –≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ \"${address}\"`);\n \u001b[2m1212\u001b[0m |     return null;\n \u001b[2m1213\u001b[0m |   };\n \u001b[2m1214\u001b[0m | \n \u001b[2m1215\u001b[0m |   // –ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –ü–≠–ö\n \u001b[2m1216\u001b[0m |   const getPekNearestDepartments = async (address: string, coordinates?: { latitude: string, longitude: string }) => {\n \u001b[2m1217\u001b[0m |     try {\n \u001b[2m1218\u001b[0m |       console.log(`üè¢ –ü–≠–ö: –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –¥–ª—è \"${address}\"`);\n \u001b[2m1219\u001b[0m |       \n \u001b[2m1220\u001b[0m |       const requestBody: any = {\n \u001b[2m1221\u001b[0m |         departmentOperation: 3, // –≤—ã–¥–∞—á–∞ –≥—Ä—É–∑–æ–≤\n \u001b[2m1222\u001b[0m |         type: 3, // –∞–≤—Ç–æ-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç\n \u001b[2m1223\u001b[0m |         searchRadius: 50, // –∫–º\n \u001b[2m1224\u001b[0m |         limit: 5\n \u001b[2m1225\u001b[0m |       };\n \u001b[2m1226\u001b[0m |       \n \u001b[2m1227\u001b[0m |       // –ü–≠–ö API —Ç—Ä–µ–±—É–µ—Ç –∏ –∞–¥—Ä–µ—Å, –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ\n \u001b[2m1228\u001b[0m |       requestBody.address = address;\n \u001b[2m1229\u001b[0m |       \n \u001b[2m1230\u001b[0m |       if (coordinates) {\n \u001b[2m1231\u001b[0m |         requestBody.coordinates = coordinates;\n \u001b[2m1232\u001b[0m |         console.log(`üìç –ü–≠–ö: –ø–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É \"${address}\" –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º`, coordinates);\n \u001b[2m1233\u001b[0m |       } else {\n \u001b[2m1234\u001b[0m |         console.log(`üìç –ü–≠–ö: –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –∞–¥—Ä–µ—Å—É \"${address}\"`);\n \u001b[2m1235\u001b[0m |       }\n \u001b[2m1236\u001b[0m |       \n \u001b[2m1237\u001b[0m |       const response = await fetch('/api/pek', {\n \u001b[2m1238\u001b[0m |         method: 'POST',\n \u001b[2m1239\u001b[0m |         headers: {\n \u001b[2m1240\u001b[0m |           'Content-Type': 'application/json',\n \u001b[2m1241\u001b[0m |         },\n \u001b[2m1242\u001b[0m |         body: JSON.stringify({\n \u001b[2m1243\u001b[0m |           method: 'nearestdepartments',\n \u001b[2m1244\u001b[0m |           ...requestBody\n \u001b[2m1245\u001b[0m |         })\n \u001b[2m1246\u001b[0m |       });\n \u001b[2m1247\u001b[0m | \n \u001b[2m1248\u001b[0m |       console.log(`üì° –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è API —Å—Ç–∞—Ç—É—Å: ${response.status}`);\n \u001b[2m1249\u001b[0m |       \n \u001b[2m1250\u001b[0m |       if (!response.ok) {\n \u001b[2m1251\u001b[0m |         const errorText = await response.text();\n \u001b[2m1252\u001b[0m |         console.error(`‚ùå –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è API –æ—à–∏–±–∫–∞: ${response.status} ${response.statusText}`);\n \u001b[2m1253\u001b[0m |         console.error(`‚ùå –û—Ç–≤–µ—Ç:`, errorText.substring(0, 500));\n \u001b[2m1254\u001b[0m |         return null;\n \u001b[2m1255\u001b[0m |       }\n \u001b[2m1256\u001b[0m | \n \u001b[2m1257\u001b[0m |       const data = await response.json();\n \u001b[2m1258\u001b[0m |       console.log(`‚úÖ –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω—ã:`, data);\n \u001b[2m1259\u001b[0m |       \n \u001b[2m1260\u001b[0m |       // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤–æ–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º\n \u001b[2m1261\u001b[0m |       if (data.freeDepartments && data.freeDepartments.length > 0) {\n \u001b[2m1262\u001b[0m |         const bestDepartment = data.freeDepartments.sort((a: any, b: any) => b.priority - a.priority)[0];\n \u001b[2m1263\u001b[0m |         console.log(`‚úÖ –ü–≠–ö: –≤—ã–±—Ä–∞–Ω–æ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ`, bestDepartment.divisionName);\n \u001b[2m1264\u001b[0m |         return {\n \u001b[2m1265\u001b[0m |           warehouseId: bestDepartment.warehouseId,\n \u001b[2m1266\u001b[0m |           branchId: bestDepartment.branchId,\n \u001b[2m1267\u001b[0m |           branchName: bestDepartment.branchName,\n \u001b[2m1268\u001b[0m |           divisionName: bestDepartment.divisionName,\n \u001b[2m1269\u001b[0m |           address: bestDepartment.address,\n \u001b[2m1270\u001b[0m |           coordinates: bestDepartment.coordinates,\n \u001b[2m1271\u001b[0m |           phone: bestDepartment.phone,\n \u001b[2m1272\u001b[0m |           email: bestDepartment.email\n \u001b[2m1273\u001b[0m |         };\n \u001b[2m1274\u001b[0m |       }\n \u001b[2m1275\u001b[0m |       \n \u001b[2m1276\u001b[0m |       console.warn(`‚ùå –ü–≠–ö: –æ—Ç–¥–µ–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è \"${address}\"`);\n \u001b[2m1277\u001b[0m |       return null;\n \u001b[2m1278\u001b[0m |     } catch (error) {\n \u001b[2m1279\u001b[0m |       console.error('‚ùå –ü–≠–ö: –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –æ—Ç–¥–µ–ª–µ–Ω–∏–π:', error);\n \u001b[2m1280\u001b[0m |       return null;\n \u001b[2m1281\u001b[0m |     }\n \u001b[2m1282\u001b[0m |   };\n \u001b[2m1283\u001b[0m | \n \u001b[2m1284\u001b[0m |   // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ü–≠–ö)\n \u001b[2m1285\u001b[0m |   const getYandexCoordinates = async (address: string): Promise<{ latitude: string, longitude: string } | null> => {\n \u001b[2m1286\u001b[0m |     try {\n \u001b[2m1287\u001b[0m |       const encodedAddress = encodeURIComponent(address);\n \u001b[2m1288\u001b[0m |       const response = await fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=YOUR_API_KEY&geocode=${encodedAddress}&format=json`);\n \u001b[2m1289\u001b[0m |       \n \u001b[2m1290\u001b[0m |       if (!response.ok) return null;\n \u001b[2m1291\u001b[0m |       \n \u001b[2m1292\u001b[0m |       const data = await response.json();\n \u001b[2m1293\u001b[0m |       const coords = data?.response?.GeoObjectCollection?.featureMember?.[0]?.GeoObject?.Point?.pos?.split(' ');\n \u001b[2m1294\u001b[0m |       \n \u001b[2m1295\u001b[0m |       if (coords && coords.length === 2) {\n \u001b[2m1296\u001b[0m |         return {\n \u001b[2m1297\u001b[0m |           longitude: coords[0],\n \u001b[2m1298\u001b[0m |           latitude: coords[1]\n \u001b[2m1299\u001b[0m |         };\n \u001b[2m1300\u001b[0m |       }\n \u001b[2m1301\u001b[0m |       \n \u001b[2m1302\u001b[0m |       return null;\n \u001b[2m1303\u001b[0m |     } catch (error) {\n \u001b[2m1304\u001b[0m |       console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ø–Ω–¥–µ–∫—Å:', error);\n \u001b[2m1305\u001b[0m |       return null;\n \u001b[2m1306\u001b[0m |     }\n \u001b[2m1307\u001b[0m |   };\n \u001b[2m1308\u001b[0m | \n \u001b[2m1309\u001b[0m |   // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API v1/calculateprice/\n \u001b[2m1310\u001b[0m |   const calculatePEK = async (): Promise<CalculationResult> => {\n \u001b[2m1311\u001b[0m |     const apiUrl = 'https://kabinet.pecom.ru/api/v1/calculateprice/';\n \u001b[2m1312\u001b[0m |     \n \u001b[2m1313\u001b[0m |     // –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç\n \u001b[2m1314\u001b[0m |     const validateCoordinates = (coords: any) => {\n \u001b[2m1315\u001b[0m |       console.log('üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:', coords);\n \u001b[2m1316\u001b[0m |       \n \u001b[2m1317\u001b[0m |       if (!coords) {\n \u001b[2m1318\u001b[0m |         console.log('‚ö†Ô∏è –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç');\n \u001b[2m1319\u001b[0m |         return null;\n \u001b[2m1320\u001b[0m |       }\n \u001b[2m1321\u001b[0m |       \n \u001b[2m1322\u001b[0m |       if (typeof coords.latitude !== 'number' || typeof coords.longitude !== 'number') {\n \u001b[2m1323\u001b[0m |         console.warn(`‚ö†Ô∏è –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∏—Å–ª–∞–º–∏:`, { \n \u001b[2m1324\u001b[0m |           lat: coords.latitude, \n \u001b[2m1325\u001b[0m |           lng: coords.longitude,\n \u001b[2m1326\u001b[0m |           latType: typeof coords.latitude,\n \u001b[2m1327\u001b[0m |           lngType: typeof coords.longitude\n \u001b[2m1328\u001b[0m |         });\n \u001b[2m1329\u001b[0m |         return null;\n \u001b[2m1330\u001b[0m |       }\n \u001b[2m1331\u001b[0m |       \n \u001b[2m1332\u001b[0m |       const lat = Number(coords.latitude);\n \u001b[2m1333\u001b[0m |       const lng = Number(coords.longitude);\n \u001b[2m1334\u001b[0m |       \n \u001b[2m1335\u001b[0m |       console.log(`üìç –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: lat=${lat}, lng=${lng}`);\n \u001b[2m1336\u001b[0m |       \n \u001b[2m1337\u001b[0m |       // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω—ã\n \u001b[2m1338\u001b[0m |       if (lat < -90 || lat > 90 || lng < -180 || lng > 180 || isNaN(lat) || isNaN(lng)) {\n \u001b[2m1339\u001b[0m |         console.warn(`‚ö†Ô∏è –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:`, { \n \u001b[2m1340\u001b[0m |           lat, lng, \n \u001b[2m1341\u001b[0m |           latValid: lat >= -90 && lat <= 90,\n \u001b[2m1342\u001b[0m |           lngValid: lng >= -180 && lng <= 180,\n \u001b[2m1343\u001b[0m |           latIsNaN: isNaN(lat),\n \u001b[2m1344\u001b[0m |           lngIsNaN: isNaN(lng)\n \u001b[2m1345\u001b[0m |         });\n \u001b[2m1346\u001b[0m |         return null;\n \u001b[2m1347\u001b[0m |       }\n \u001b[2m1348\u001b[0m |       \n \u001b[2m1349\u001b[0m |       console.log('‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã:', { latitude: lat, longitude: lng });\n \u001b[2m1350\u001b[0m |       return { latitude: lat, longitude: lng };\n \u001b[2m1351\u001b[0m |     };\n \u001b[2m1352\u001b[0m |     \n \u001b[2m1353\u001b[0m |     try {\n \u001b[2m1354\u001b[0m |       // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–æ–Ω–∞—Ö –∏ —Å–∫–ª–∞–¥–∞—Ö –ø–æ –∞–¥—Ä–µ—Å–∞–º\n \u001b[2m1355\u001b[0m |       console.log(`üöÄ –ü–≠–ö: –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞—Å—á–µ—Ç`);\n \u001b[2m1356\u001b[0m |       console.log(`üìç –û—Ç: ${form.fromAddress || form.fromCity}`);\n \u001b[2m1357\u001b[0m |       console.log(`üìç –î–æ: ${form.toAddress || form.toCity}`);\n \u001b[2m1358\u001b[0m |       \n \u001b[2m1359\u001b[0m |       const senderZone = await getPekZoneByAddress(form.fromAddress || `–≥ ${form.fromCity}`);\n \u001b[2m1360\u001b[0m |       const receiverZone = await getPekZoneByAddress(form.toAddress || `–≥ ${form.toCity}`);\n \u001b[2m1361\u001b[0m |       \n \u001b[2m1362\u001b[0m |       console.log(`üîç –ü–≠–ö –∑–æ–Ω—ã:`);\n \u001b[2m1363\u001b[0m |       console.log(`üìç –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å:`, senderZone ? `${senderZone.branchTitle} (${senderZone.mainWarehouseId})` : '–ù–ï –ù–ê–ô–î–ï–ù–ê');\n \u001b[2m1364\u001b[0m |       console.log(`üìç –ü–æ–ª—É—á–∞—Ç–µ–ª—å:`, receiverZone ? `${receiverZone.branchTitle} (${receiverZone.mainWarehouseId})` : '–ù–ï –ù–ê–ô–î–ï–ù–ê');\n \u001b[2m1365\u001b[0m |       \n \u001b[2m1366\u001b[0m |       if (!senderZone || !receiverZone) {\n \u001b[2m1367\u001b[0m |         // –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞\n \u001b[2m1368\u001b[0m |         const debugInfo = {\n \u001b[2m1369\u001b[0m |           senderAddress: form.fromAddress || form.fromCity,\n \u001b[2m1370\u001b[0m |           receiverAddress: form.toAddress || form.toCity,\n \u001b[2m1371\u001b[0m |           senderZoneFound: !!senderZone,\n \u001b[2m1372\u001b[0m |           receiverZoneFound: !!receiverZone,\n \u001b[2m1373\u001b[0m |           apiTested: true\n \u001b[2m1374\u001b[0m |         };\n \u001b[2m1375\u001b[0m |         \n \u001b[2m1376\u001b[0m |         console.error(`‚ùå –ü–≠–ö: –∑–æ–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`, debugInfo);\n \u001b[2m1377\u001b[0m |         \n \u001b[2m1378\u001b[0m |         return {\n \u001b[2m1379\u001b[0m |           company: '–ü–≠–ö',\n \u001b[2m1380\u001b[0m |           price: 0,\n \u001b[2m1381\u001b[0m |           days: 0,\n \u001b[2m1382\u001b[0m |           error: `–ó–æ–Ω–∞ –ü–≠–ö –Ω–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å–∞: ${!senderZone ? (form.fromAddress || form.fromCity) : ''} ${!receiverZone ? (form.toAddress || form.toCity) : ''}`.trim(),\n \u001b[2m1383\u001b[0m |           apiUrl,\n \u001b[2m1384\u001b[0m |           requestData: debugInfo,\n \u001b[2m1385\u001b[0m |           responseData: { senderZone, receiverZone }\n \u001b[2m1386\u001b[0m |         };\n \u001b[2m1387\u001b[0m |       }\n \u001b[2m1388\u001b[0m | \n \u001b[2m1389\u001b[0m |       // –ü–æ–ª—É—á–∞–µ–º –±–ª–∏–∂–∞–π—à–∏–µ –æ—Ç–¥–µ–ª–µ–Ω–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–¥—Ä–µ—Å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞\n \u001b[2m1390\u001b[0m |       let senderWarehouseId = senderZone.mainWarehouseId;\n \u001b[2m1391\u001b[0m |       let receiverWarehouseId = receiverZone.mainWarehouseId;\n \u001b[2m1392\u001b[0m |       \n \u001b[2m1393\u001b[0m |       if (form.fromAddressDelivery && senderZone.warehousePoint) {\n \u001b[2m1394\u001b[0m |         const validSenderCoords = validateCoordinates(senderZone.warehousePoint);\n \u001b[2m1395\u001b[0m |         if (validSenderCoords) {\n \u001b[2m1396\u001b[0m |           try {\n \u001b[2m1397\u001b[0m |             const senderDepartment = await getPekNearestDepartments(\n \u001b[2m1398\u001b[0m |               form.fromAddress || form.fromCity,\n \u001b[2m1399\u001b[0m |               {\n \u001b[2m1400\u001b[0m |                 latitude: validSenderCoords.latitude.toString(),\n \u001b[2m1401\u001b[0m |                 longitude: validSenderCoords.longitude.toString()\n \u001b[2m1402\u001b[0m |               }\n \u001b[2m1403\u001b[0m |             );\n \u001b[2m1404\u001b[0m |             if (senderDepartment) {\n \u001b[2m1405\u001b[0m |               senderWarehouseId = senderDepartment.warehouseId;\n \u001b[2m1406\u001b[0m |               console.log('‚úÖ –ù–∞–π–¥–µ–Ω –±–ª–∏–∂–∞–π—à–∏–π —Å–∫–ª–∞–¥ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:', senderDepartment.warehouseId);\n \u001b[2m1407\u001b[0m |             }\n \u001b[2m1408\u001b[0m |           } catch (error) {\n \u001b[2m1409\u001b[0m |             console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥:', error);\n \u001b[2m1410\u001b[0m |           }\n \u001b[2m1411\u001b[0m |         } else {\n \u001b[2m1412\u001b[0m |           console.warn('‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥');\n \u001b[2m1413\u001b[0m |         }\n \u001b[2m1414\u001b[0m |       }\n \u001b[2m1415\u001b[0m |       \n \u001b[2m1416\u001b[0m |       if (form.toAddressDelivery && receiverZone.warehousePoint) {\n \u001b[2m1417\u001b[0m |         const validReceiverCoords = validateCoordinates(receiverZone.warehousePoint);\n \u001b[2m1418\u001b[0m |         if (validReceiverCoords) {\n \u001b[2m1419\u001b[0m |           try {\n \u001b[2m1420\u001b[0m |             const receiverDepartment = await getPekNearestDepartments(\n \u001b[2m1421\u001b[0m |               form.toAddress || form.toCity,\n \u001b[2m1422\u001b[0m |               {\n \u001b[2m1423\u001b[0m |                 latitude: validReceiverCoords.latitude.toString(),\n \u001b[2m1424\u001b[0m |                 longitude: validReceiverCoords.longitude.toString()\n \u001b[2m1425\u001b[0m |               }\n \u001b[2m1426\u001b[0m |             );\n \u001b[2m1427\u001b[0m |             if (receiverDepartment) {\n \u001b[2m1428\u001b[0m |               receiverWarehouseId = receiverDepartment.warehouseId;\n \u001b[2m1429\u001b[0m |               console.log('‚úÖ –ù–∞–π–¥–µ–Ω –±–ª–∏–∂–∞–π—à–∏–π —Å–∫–ª–∞–¥ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:', receiverDepartment.warehouseId);\n \u001b[2m1430\u001b[0m |             }\n \u001b[2m1431\u001b[0m |           } catch (error) {\n \u001b[2m1432\u001b[0m |             console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥:', error);\n \u001b[2m1433\u001b[0m |           }\n \u001b[2m1434\u001b[0m |         } else {\n \u001b[2m1435\u001b[0m |           console.warn('‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥');\n \u001b[2m1436\u001b[0m |         }\n \u001b[2m1437\u001b[0m |       }\n \u001b[2m1438\u001b[0m | \n \u001b[2m1439\u001b[0m |       // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞—Ç—ã N –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è\n \u001b[2m1440\u001b[0m |       const getDateForCalculation = (daysFromToday: number): string => {\n \u001b[2m1441\u001b[0m |         const date = new Date();\n \u001b[2m1442\u001b[0m |         date.setDate(date.getDate() + daysFromToday);\n \u001b[2m1443\u001b[0m |         return date.toISOString().slice(0, 19); // 2025-09-28T14:00:00\n \u001b[2m1444\u001b[0m |       };\n \u001b[2m1445\u001b[0m | \n \u001b[2m1446\u001b[0m |       // –ù–∞—á–∏–Ω–∞–µ–º —Å –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–≥–æ –¥–Ω—è\n \u001b[2m1447\u001b[0m |       let currentDayOffset = 1;\n \u001b[2m1448\u001b[0m |       let plannedDateTime = getDateForCalculation(currentDayOffset);\n \u001b[2m1449\u001b[0m | \n \u001b[2m1450\u001b[0m |       // –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –≥—Ä—É–∑–æ–≤ (–±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)\n \u001b[2m1451\u001b[0m |       const cargos = form.cargos.map(cargo => {\n \u001b[2m1452\u001b[0m |         const cargoData = {\n \u001b[2m1453\u001b[0m |           length: cargo.length / 100, // –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–µ—Ç—Ä—ã\n \u001b[2m1454\u001b[0m |           width: cargo.width / 100,\n \u001b[2m1455\u001b[0m |           height: cargo.height / 100,\n \u001b[2m1456\u001b[0m |           volume: (cargo.length * cargo.width * cargo.height) / 1000000, // –º3\n \u001b[2m1457\u001b[0m |           weight: cargo.weight,\n \u001b[2m1458\u001b[0m |           isHP: form.needPackaging, // –∑–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞\n \u001b[2m1459\u001b[0m |           sealingPositionsCount: 0\n \u001b[2m1460\u001b[0m |         };\n \u001b[2m1461\u001b[0m |         \n \u001b[2m1462\u001b[0m |         console.log('üì¶ –ì—Ä—É–∑ –¥–ª—è –ü–≠–ö:', cargoData);\n \u001b[2m1463\u001b[0m |         return cargoData;\n \u001b[2m1464\u001b[0m |       });\n \u001b[2m1465\u001b[0m | \n \u001b[2m1466\u001b[0m |       // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–Ω—É–∂–Ω–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ)\n \u001b[2m1467\u001b[0m |       let finalRequestData: any = null;\n \u001b[2m1468\u001b[0m |       \n \u001b[2m1469\u001b[0m |       // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç–æ–π\n \u001b[2m1470\u001b[0m |       const tryCalculateWithDate = async (plannedDateTime: string): Promise<any> => {\n \u001b[2m1471\u001b[0m |         // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –∫ API –ü–≠–ö —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n \u001b[2m1472\u001b[0m |         const requestData: any = {\n \u001b[2m1473\u001b[0m |           currencyCode: \"643\", // —Ä—É–±–ª–∏\n \u001b[2m1474\u001b[0m |           types: [3], // —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ –ø–µ—Ä–µ–≤–æ–∑–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –º–∞—Å—Å–∏–≤)\n \u001b[2m1475\u001b[0m |           senderWarehouseId,\n \u001b[2m1476\u001b[0m |           receiverWarehouseId,\n \u001b[2m1477\u001b[0m |           isOpenCarSender: false,\n \u001b[2m1478\u001b[0m |           isOpenCarReceiver: false,\n \u001b[2m1479\u001b[0m |           isHyperMarket: false,\n \u001b[2m1480\u001b[0m |           plannedDateTime,\n \u001b[2m1481\u001b[0m |           isInsurance: form.needInsurance && form.declaredValue > 0,\n \u001b[2m1482\u001b[0m |           isInsurancePrice: form.needInsurance ? form.declaredValue : 0,\n \u001b[2m1483\u001b[0m |           isPickUp: form.fromAddressDelivery,\n \u001b[2m1484\u001b[0m |           isDelivery: form.toAddressDelivery,\n \u001b[2m1485\u001b[0m |           needReturnDocuments: false,\n \u001b[2m1486\u001b[0m |           needArrangeTransportationDocuments: false,\n \u001b[2m1487\u001b[0m |           senderDistanceType: 0,\n \u001b[2m1488\u001b[0m |           receiverDistanceType: 0,\n \u001b[2m1489\u001b[0m |           cargos // –º–∞—Å—Å–∏–≤ –≥—Ä—É–∑–æ–≤\n \u001b[2m1490\u001b[0m |         };\n \u001b[2m1491\u001b[0m |         \n \u001b[2m1492\u001b[0m |         console.log('üìã –ü–≠–ö: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ requestData:', JSON.stringify(requestData, null, 2));\n \u001b[2m1493\u001b[0m | \n \u001b[2m1494\u001b[0m |         // –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ –ü–†–† –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n \u001b[2m1495\u001b[0m |         if (form.needCarry) {\n \u001b[2m1496\u001b[0m |           requestData.pickupServices = {\n \u001b[2m1497\u001b[0m |             isLoading: true,\n \u001b[2m1498\u001b[0m |             floor: Math.max(0, form.floor - 1), // –ü–≠–ö —Å—á–∏—Ç–∞–µ—Ç —Å 0\n \u001b[2m1499\u001b[0m |             carryingDistance: 0,\n \u001b[2m1500\u001b[0m |             isElevator: form.hasFreightLift\n \u001b[2m1501\u001b[0m |           };\n \u001b[2m1502\u001b[0m |           requestData.deliveryServices = {\n \u001b[2m1503\u001b[0m |             isLoading: true,\n \u001b[2m1504\u001b[0m |             floor: Math.max(0, form.floor - 1),\n \u001b[2m1505\u001b[0m |             carryingDistance: 0,\n \u001b[2m1506\u001b[0m |             isElevator: form.hasFreightLift\n \u001b[2m1507\u001b[0m |           };\n \u001b[2m1508\u001b[0m |         }\n \u001b[2m1509\u001b[0m | \n \u001b[2m1510\u001b[0m |         // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫–∏ pickup/delivery —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ü–≠–ö\n \u001b[2m1511\u001b[0m |         if (form.fromAddressDelivery) {\n \u001b[2m1512\u001b[0m |           console.log('üìç –ü–≠–ö: –¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ pickup –¥–ª—è –∑–∞–±–æ—Ä–∞');\n \u001b[2m1513\u001b[0m |           requestData.pickup = {\n \u001b[2m1514\u001b[0m |             address: form.fromAddress || `–†–æ—Å—Å–∏—è, ${form.fromCity}`\n \u001b[2m1515\u001b[0m |             // coordinates –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏\n \u001b[2m1516\u001b[0m |           };\n \u001b[2m1517\u001b[0m |         }\n \u001b[2m1518\u001b[0m |         \n \u001b[2m1519\u001b[0m |         if (form.toAddressDelivery) {\n \u001b[2m1520\u001b[0m |           console.log('üìç –ü–≠–ö: –¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ delivery –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏');\n \u001b[2m1521\u001b[0m |           requestData.delivery = {\n \u001b[2m1522\u001b[0m |             address: form.toAddress || `–†–æ—Å—Å–∏—è, ${form.toCity}`\n \u001b[2m1523\u001b[0m |             // coordinates –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏\n \u001b[2m1524\u001b[0m |           };\n \u001b[2m1525\u001b[0m |         }\n \u001b[2m1526\u001b[0m | \n \u001b[2m1527\u001b[0m |         // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n \u001b[2m1528\u001b[0m |         const requiredFields = ['types', 'senderWarehouseId', 'receiverWarehouseId', 'plannedDateTime', 'cargos'];\n \u001b[2m1529\u001b[0m |         const missingFields = requiredFields.filter(field => !requestData[field]);\n \u001b[2m1530\u001b[0m |         \n \u001b[2m1531\u001b[0m |         if (missingFields.length > 0) {\n \u001b[2m1532\u001b[0m |           throw new Error(`–ü–≠–ö: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: ${missingFields.join(', ')}`);\n \u001b[2m1533\u001b[0m |         }\n \u001b[2m1534\u001b[0m |         \n \u001b[2m1535\u001b[0m |         if (!Array.isArray(requestData.types) || requestData.types.length === 0) {\n \u001b[2m1536\u001b[0m |           throw new Error('–ü–≠–ö: –ø–æ–ª–µ types –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º');\n \u001b[2m1537\u001b[0m |         }\n \u001b[2m1538\u001b[0m |         \n \u001b[2m1539\u001b[0m |         if (!Array.isArray(requestData.cargos) || requestData.cargos.length === 0) {\n \u001b[2m1540\u001b[0m |           throw new Error('–ü–≠–ö: –ø–æ–ª–µ cargos –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º');\n \u001b[2m1541\u001b[0m |         }\n \u001b[2m1542\u001b[0m |         \n \u001b[2m1543\u001b[0m |         console.log('‚úÖ –ü–≠–ö: –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –ø—Ä–æ–π–¥–µ–Ω–∞');\n \u001b[2m1544\u001b[0m | \n \u001b[2m1545\u001b[0m |         // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏\n \u001b[2m1546\u001b[0m |         finalRequestData = {\n \u001b[2m1547\u001b[0m |           method: 'calculateprice',\n \u001b[2m1548\u001b[0m |           ...requestData\n \u001b[2m1549\u001b[0m |         };\n \u001b[2m1550\u001b[0m |         \n \u001b[2m1551\u001b[0m |         console.log('üöÄ –ü–≠–ö API –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å:', JSON.stringify(finalRequestData, null, 2));\n \u001b[2m1552\u001b[0m |         console.log('üåê –ü–≠–ö API URL:', apiUrl);\n \u001b[2m1553\u001b[0m |         console.log('üìã –ü–≠–ö: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ —Ç–∞—Ä–∏—Ñ–æ–≤:', requestData.types.length);\n \u001b[2m1554\u001b[0m |         console.log('üìã –ü–≠–ö: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤:', requestData.cargos.length);\n \u001b[2m1555\u001b[0m |       \n \u001b[2m1556\u001b[0m |       // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π\n \u001b[2m1557\u001b[0m |       if (finalRequestData.pickup?.coordinates) {\n \u001b[2m1558\u001b[0m |         console.log('üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã pickup:', finalRequestData.pickup.coordinates);\n \u001b[2m1559\u001b[0m |       }\n \u001b[2m1560\u001b[0m |       if (finalRequestData.delivery?.coordinates) {\n \u001b[2m1561\u001b[0m |         console.log('üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã delivery:', finalRequestData.delivery.coordinates);\n \u001b[2m1562\u001b[0m |       }\n \u001b[2m1563\u001b[0m | \n \u001b[2m1564\u001b[0m |       const response = await fetch('/api/pek', {\n \u001b[2m1565\u001b[0m |         method: 'POST',\n \u001b[2m1566\u001b[0m |         headers: {\n \u001b[2m1567\u001b[0m |           'Content-Type': 'application/json',\n \u001b[2m1568\u001b[0m |         },\n \u001b[2m1569\u001b[0m |         body: JSON.stringify(finalRequestData)\n \u001b[2m1570\u001b[0m |       });\n \u001b[2m1571\u001b[0m | \n \u001b[2m1572\u001b[0m |       console.log(`üì° –ü–≠–ö API —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}`);\n \u001b[2m1573\u001b[0m |       consol\n\n(Output was truncated due to length limit)",
    "metadata": {
      "output": "\n> ideavo-nextjs@0.1.0 build\n> next build\n\n  ‚ñ≤ Next.js 14.2.31\n  - Environments: .env.local, .env\n\n   Creating an optimized production build ...\nFailed to compile.\n\n./app/page.tsx\nError: \n  \u001b[31mx\u001b[0m the name `calculateNordWheel` is defined multiple times\n      ,-[\u001b[36;1;4m/home/user/project/app/page.tsx\u001b[0m:1008:1]\n \u001b[2m1008\u001b[0m |   };\n \u001b[2m1009\u001b[0m | \n \u001b[2m1010\u001b[0m |   // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n \u001b[2m1011\u001b[0m |   const calculateNordWheel = async (): Promise<CalculationResult> => {\n      : \u001b[31;1m        ^^^^^^^^^|^^^^^^^^\u001b[0m\n      :                  \u001b[31;1m`-- \u001b[31;1mprevious definition of `calculateNordWheel` here\u001b[0m\u001b[0m\n \u001b[2m1012\u001b[0m |     const apiUrl = 'https://nordw.ru/tools/api/calc/calculate/';\n \u001b[2m1013\u001b[0m |     \n \u001b[2m1014\u001b[0m |     try {\n \u001b[2m1015\u001b[0m |       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n \u001b[2m1016\u001b[0m |       const totalVolume = form.cargos.reduce((sum, cargo) => \n \u001b[2m1017\u001b[0m |         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n \u001b[2m1018\u001b[0m |       );\n \u001b[2m1019\u001b[0m | \n \u001b[2m1020\u001b[0m |       const params = new URLSearchParams({\n \u001b[2m1021\u001b[0m |         from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n \u001b[2m1022\u001b[0m |         to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n \u001b[2m1023\u001b[0m |         pickup: form.fromAddressDelivery ? '1' : '0',\n \u001b[2m1024\u001b[0m |         deliver: form.toAddressDelivery ? '1' : '0',\n \u001b[2m1025\u001b[0m |         weight: totalWeight.toString(),\n \u001b[2m1026\u001b[0m |         volume: totalVolume.toString(),\n \u001b[2m1027\u001b[0m |         oversized: '0',\n \u001b[2m1028\u001b[0m |         package: form.needPackaging ? '1' : '0',\n \u001b[2m1029\u001b[0m |         packageCount: form.cargos.length.toString(),\n \u001b[2m1030\u001b[0m |         insurance: form.needInsurance ? '1' : '0',\n \u001b[2m1031\u001b[0m |         sum: form.declaredValue.toString(),\n \u001b[2m1032\u001b[0m |         documentsReturn: '0',\n \u001b[2m1033\u001b[0m |         fragile: '1'\n \u001b[2m1034\u001b[0m |       });\n \u001b[2m1035\u001b[0m | \n \u001b[2m1036\u001b[0m |       const requestData = Object.fromEntries(params);\n \u001b[2m1037\u001b[0m |       const fullUrl = `${apiUrl}?${params.toString()}`;\n \u001b[2m1038\u001b[0m | \n \u001b[2m1039\u001b[0m |       const response = await fetch(fullUrl);\n \u001b[2m1040\u001b[0m |       const data = await response.json();\n \u001b[2m1041\u001b[0m | \n \u001b[2m1042\u001b[0m |       if (response.ok && data.status === 'success' && data.data) {\n \u001b[2m1043\u001b[0m |         return {\n \u001b[2m1044\u001b[0m |           company: 'Nord Wheel',\n \u001b[2m1045\u001b[0m |           price: data.data.total || 0,\n \u001b[2m1046\u001b[0m |           days: data.data.days || 0,\n \u001b[2m1047\u001b[0m |           details: {\n \u001b[2m1048\u001b[0m |             ...data.data,\n \u001b[2m1049\u001b[0m |             totalCost: data.data.total,\n \u001b[2m1050\u001b[0m |             deliveryCost: data.data.door,\n \u001b[2m1051\u001b[0m |             terminalCost: data.data.terminal,\n \u001b[2m1052\u001b[0m |             pickupCost: data.data.pick,\n \u001b[2m1053\u001b[0m |             deliveryToDoorCost: data.data.deliver,\n \u001b[2m1054\u001b[0m |             additionalServices: (data.data.total || 0) - (data.data.door || 0)\n \u001b[2m1055\u001b[0m |           },\n \u001b[2m1056\u001b[0m |           requestData,\n \u001b[2m1057\u001b[0m |           responseData: data,\n \u001b[2m1058\u001b[0m |           apiUrl: fullUrl\n \u001b[2m1059\u001b[0m |         };\n \u001b[2m1060\u001b[0m |       } else {\n \u001b[2m1061\u001b[0m |         return {\n \u001b[2m1062\u001b[0m |           company: 'Nord Wheel',\n \u001b[2m1063\u001b[0m |           price: 0,\n \u001b[2m1064\u001b[0m |           days: 0,\n \u001b[2m1065\u001b[0m |           error: '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n \u001b[2m1066\u001b[0m |           requestData,\n \u001b[2m1067\u001b[0m |           responseData: data,\n \u001b[2m1068\u001b[0m |           apiUrl: fullUrl\n \u001b[2m1069\u001b[0m |         };\n \u001b[2m1070\u001b[0m |       }\n \u001b[2m1071\u001b[0m |     } catch (error: any) {\n \u001b[2m1072\u001b[0m |       return {\n \u001b[2m1073\u001b[0m |         company: 'Nord Wheel',\n \u001b[2m1074\u001b[0m |         price: 0,\n \u001b[2m1075\u001b[0m |         days: 0,\n \u001b[2m1076\u001b[0m |         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n \u001b[2m1077\u001b[0m |         apiUrl\n \u001b[2m1078\u001b[0m |       };\n \u001b[2m1079\u001b[0m |     }\n \u001b[2m1080\u001b[0m |   };\n \u001b[2m1081\u001b[0m | \n \u001b[2m1082\u001b[0m |   // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–Ω–æ–π –∑–æ–Ω—ã –∏ —Å–∫–ª–∞–¥–∞ –ü–≠–ö –ø–æ –∞–¥—Ä–µ—Å—É —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏\n \u001b[2m1083\u001b[0m |   const getPekZoneByAddress = async (address: string) => {\n \u001b[2m1084\u001b[0m |     try {\n \u001b[2m1085\u001b[0m |       console.log(`üîç –ü–≠–ö: –ø–æ–∏—Å–∫ –∑–æ–Ω—ã –¥–ª—è –∞–¥—Ä–µ—Å–∞ \"${address}\"`);\n \u001b[2m1086\u001b[0m |       \n \u001b[2m1087\u001b[0m |       const response = await fetch('/api/pek', {\n \u001b[2m1088\u001b[0m |         method: 'POST',\n \u001b[2m1089\u001b[0m |         headers: {\n \u001b[2m1090\u001b[0m |           'Content-Type': 'application/json',\n \u001b[2m1091\u001b[0m |         },\n \u001b[2m1092\u001b[0m |         body: JSON.stringify({\n \u001b[2m1093\u001b[0m |           method: 'findzonebyaddress',\n \u001b[2m1094\u001b[0m |           address: address\n \u001b[2m1095\u001b[0m |         })\n \u001b[2m1096\u001b[0m |       });\n \u001b[2m1097\u001b[0m | \n \u001b[2m1098\u001b[0m |       console.log(`üì° –ü–≠–ö API —Å—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}`);\n \u001b[2m1099\u001b[0m |       \n \u001b[2m1100\u001b[0m |       if (!response.ok) {\n \u001b[2m1101\u001b[0m |         let errorData;\n \u001b[2m1102\u001b[0m |         try {\n \u001b[2m1103\u001b[0m |           errorData = await response.json();\n \u001b[2m1104\u001b[0m |         } catch {\n \u001b[2m1105\u001b[0m |           errorData = { error: '–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å –æ—Ç–≤–µ—Ç' };\n \u001b[2m1106\u001b[0m |         }\n \u001b[2m1107\u001b[0m |         \n \u001b[2m1108\u001b[0m |         console.error(`‚ùå –ü–≠–ö API –æ—à–∏–±–∫–∞ ${response.status}:`, errorData);\n \u001b[2m1109\u001b[0m |         \n \u001b[2m1110\u001b[0m |         // –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ—à–∏–±–æ–∫\n \u001b[2m1111\u001b[0m |         if (response.status === 401) {\n \u001b[2m1112\u001b[0m |           console.error('‚ùå –ü–≠–ö: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ - –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω');\n \u001b[2m1113\u001b[0m |         } else if (response.status === 404) {\n \u001b[2m1114\u001b[0m |           console.error('‚ùå –ü–≠–ö: –ú–µ—Ç–æ–¥ API –Ω–µ –Ω–∞–π–¥–µ–Ω');\n \u001b[2m1115\u001b[0m |         } else if (response.status === 400) {\n \u001b[2m1116\u001b[0m |           console.error('‚ùå –ü–≠–ö: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞');\n \u001b[2m1117\u001b[0m |         } else if (response.status >= 500) {\n \u001b[2m1118\u001b[0m |           console.error('‚ùå –ü–≠–ö: –û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –ü–≠–ö');\n \u001b[2m1119\u001b[0m |         }\n \u001b[2m1120\u001b[0m |         \n \u001b[2m1121\u001b[0m |         console.log(`üîÑ –ü–≠–ö: –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–æ–ª–ª–±—ç–∫ –º–µ—Ç–æ–¥—É –¥–ª—è \"${address}\"`);\n \u001b[2m1122\u001b[0m |         return getPekZoneFallback(address);\n \u001b[2m1123\u001b[0m |       }\n \u001b[2m1124\u001b[0m | \n \u001b[2m1125\u001b[0m |       const data = await response.json();\n \u001b[2m1126\u001b[0m |       console.log(`‚úÖ –ü–≠–ö –∑–æ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞:`, data);\n \u001b[2m1127\u001b[0m |       \n \u001b[2m1128\u001b[0m |       if (data.zoneId && data.mainWarehouseId) {\n \u001b[2m1129\u001b[0m |         return {\n \u001b[2m1130\u001b[0m |           zoneId: data.zoneId,\n \u001b[2m1131\u001b[0m |           zoneName: data.zoneName,\n \u001b[2m1132\u001b[0m |           branchUID: data.branchUID,\n \u001b[2m1133\u001b[0m |           branchCode: data.branchCode,\n \u001b[2m1134\u001b[0m |           branchTitle: data.branchTitle,\n \u001b[2m1135\u001b[0m |           mainWarehouseId: data.mainWarehouseId,\n \u001b[2m1136\u001b[0m |           warehousePoint: data.warehousePoint,\n \u001b[2m1137\u001b[0m |           geoData: data.GeoData,\n \u001b[2m1138\u001b[0m |           precision: data.GeoData?.precision\n \u001b[2m1139\u001b[0m |         };\n \u001b[2m1140\u001b[0m |       }\n \u001b[2m1141\u001b[0m |       \n \u001b[2m1142\u001b[0m |       console.warn(`‚ö†Ô∏è –ü–≠–ö: –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –æ—Ç–≤–µ—Ç:`, data);\n \u001b[2m1143\u001b[0m |       return getPekZoneFallback(address);\n \u001b[2m1144\u001b[0m |       \n \u001b[2m1145\u001b[0m |     } catch (error) {\n \u001b[2m1146\u001b[0m |       console.error('‚ùå –ü–≠–ö: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –∑–æ–Ω—ã:', error);\n \u001b[2m1147\u001b[0m |       return getPekZoneFallback(address);\n \u001b[2m1148\u001b[0m |     }\n \u001b[2m1149\u001b[0m |   };\n \u001b[2m1150\u001b[0m | \n \u001b[2m1151\u001b[0m |   // –§–æ–ª–ª–±—ç–∫ –º–µ—Ç–æ–¥ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω—ã –ü–≠–ö\n \u001b[2m1152\u001b[0m |   const getPekZoneFallback = (address: string) => {\n \u001b[2m1153\u001b[0m |     console.log(`üîÑ –ü–≠–ö —Ñ–æ–ª–ª–±—ç–∫: –∞–Ω–∞–ª–∏–∑ –∞–¥—Ä–µ—Å–∞ \"${address}\"`);\n \u001b[2m1154\u001b[0m |     \n \u001b[2m1155\u001b[0m |     const addressLower = address.toLowerCase();\n \u001b[2m1156\u001b[0m |     \n \u001b[2m1157\u001b[0m |     // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –≥–æ—Ä–æ–¥–∞ –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ\n \u001b[2m1158\u001b[0m |     const cityMappings: { [key: string]: any } = {\n \u001b[2m1159\u001b[0m |       '–º–æ—Å–∫–≤–∞': {\n \u001b[2m1160\u001b[0m |         zoneId: 'moscow-zone-001',\n \u001b[2m1161\u001b[0m |         zoneName: '–ú–æ—Å–∫–≤–∞',\n \u001b[2m1162\u001b[0m |         branchUID: 'moscow-branch-001',\n \u001b[2m1163\u001b[0m |         branchCode: '–ú–°–ö',\n \u001b[2m1164\u001b[0m |         branchTitle: '–ú–æ—Å–∫–≤–∞',\n \u001b[2m1165\u001b[0m |         mainWarehouseId: 'dc6c746d-812d-11e4-bbfc-001999d8b3c5',\n \u001b[2m1166\u001b[0m |         warehousePoint: {\n \u001b[2m1167\u001b[0m |           latitude: 55.755826,\n \u001b[2m1168\u001b[0m |           longitude: 37.6173\n \u001b[2m1169\u001b[0m |         }\n \u001b[2m1170\u001b[0m |       },\n \u001b[2m1171\u001b[0m |       '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥': {\n \u001b[2m1172\u001b[0m |         zoneId: 'spb-zone-001',\n \u001b[2m1173\u001b[0m |         zoneName: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n \u001b[2m1174\u001b[0m |         branchUID: 'spb-branch-001',\n \u001b[2m1175\u001b[0m |         branchCode: '–°–ü–ë',\n \u001b[2m1176\u001b[0m |         branchTitle: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n \u001b[2m1177\u001b[0m |         mainWarehouseId: 'b436c978-086d-11e6-b6ca-00155d668909',\n \u001b[2m1178\u001b[0m |         warehousePoint: {\n \u001b[2m1179\u001b[0m |           latitude: 59.9311,\n \u001b[2m1180\u001b[0m |           longitude: 30.3609\n \u001b[2m1181\u001b[0m |         }\n \u001b[2m1182\u001b[0m |       },\n \u001b[2m1183\u001b[0m |       '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': {\n \u001b[2m1184\u001b[0m |         zoneId: 'ekb-zone-001',\n \u001b[2m1185\u001b[0m |         zoneName: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',\n \u001b[2m1186\u001b[0m |         branchUID: 'ekb-branch-001',\n \u001b[2m1187\u001b[0m |         branchCode: '–ï–ö–ë',\n \u001b[2m1188\u001b[0m |         branchTitle: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥',\n \u001b[2m1189\u001b[0m |         mainWarehouseId: 'f8d9c8e3-8e2d-11e4-bbfc-001999d8b3c5',\n \u001b[2m1190\u001b[0m |         warehousePoint: {\n \u001b[2m1191\u001b[0m |           latitude: 56.8431,\n \u001b[2m1192\u001b[0m |           longitude: 60.6454\n \u001b[2m1193\u001b[0m |         }\n \u001b[2m1194\u001b[0m |       }\n \u001b[2m1195\u001b[0m |     };\n \u001b[2m1196\u001b[0m |     \n \u001b[2m1197\u001b[0m |     for (const [city, data] of Object.entries(cityMappings)) {\n \u001b[2m1198\u001b[0m |       if (addressLower.includes(city) || addressLower.includes(city.replace('-', ' '))) {\n \u001b[2m1199\u001b[0m |         console.log(`‚úÖ –ü–≠–ö —Ñ–æ–ª–ª–±—ç–∫: –Ω–∞–π–¥–µ–Ω –≥–æ—Ä–æ–¥ ${city}`);\n \u001b[2m1200\u001b[0m |         return {\n \u001b[2m1201\u001b[0m |           ...data,\n \u001b[2m1202\u001b[0m |           geoData: {\n \u001b[2m1203\u001b[0m |             precision: 'fallback',\n \u001b[2m1204\u001b[0m |             kind: 'locality'\n \u001b[2m1205\u001b[0m |           },\n \u001b[2m1206\u001b[0m |           precision: 'fallback'\n \u001b[2m1207\u001b[0m |         };\n \u001b[2m1208\u001b[0m |       }\n \u001b[2m1209\u001b[0m |     }\n \u001b[2m1210\u001b[0m |     \n \u001b[2m1211\u001b[0m |     console.warn(`‚ùå –ü–≠–ö —Ñ–æ–ª–ª–±—ç–∫: –≥–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ \"${address}\"`);\n \u001b[2m1212\u001b[0m |     return null;\n \u001b[2m1213\u001b[0m |   };\n \u001b[2m1214\u001b[0m | \n \u001b[2m1215\u001b[0m |   // –ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –ü–≠–ö\n \u001b[2m1216\u001b[0m |   const getPekNearestDepartments = async (address: string, coordinates?: { latitude: string, longitude: string }) => {\n \u001b[2m1217\u001b[0m |     try {\n \u001b[2m1218\u001b[0m |       console.log(`üè¢ –ü–≠–ö: –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –¥–ª—è \"${address}\"`);\n \u001b[2m1219\u001b[0m |       \n \u001b[2m1220\u001b[0m |       const requestBody: any = {\n \u001b[2m1221\u001b[0m |         departmentOperation: 3, // –≤—ã–¥–∞—á–∞ –≥—Ä—É–∑–æ–≤\n \u001b[2m1222\u001b[0m |         type: 3, // –∞–≤—Ç–æ-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç\n \u001b[2m1223\u001b[0m |         searchRadius: 50, // –∫–º\n \u001b[2m1224\u001b[0m |         limit: 5\n \u001b[2m1225\u001b[0m |       };\n \u001b[2m1226\u001b[0m |       \n \u001b[2m1227\u001b[0m |       // –ü–≠–ö API —Ç—Ä–µ–±—É–µ—Ç –∏ –∞–¥—Ä–µ—Å, –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ\n \u001b[2m1228\u001b[0m |       requestBody.address = address;\n \u001b[2m1229\u001b[0m |       \n \u001b[2m1230\u001b[0m |       if (coordinates) {\n \u001b[2m1231\u001b[0m |         requestBody.coordinates = coordinates;\n \u001b[2m1232\u001b[0m |         console.log(`üìç –ü–≠–ö: –ø–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É \"${address}\" –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º`, coordinates);\n \u001b[2m1233\u001b[0m |       } else {\n \u001b[2m1234\u001b[0m |         console.log(`üìç –ü–≠–ö: –ø–æ–∏—Å–∫ —Ç–æ–ª—å–∫–æ –ø–æ –∞–¥—Ä–µ—Å—É \"${address}\"`);\n \u001b[2m1235\u001b[0m |       }\n \u001b[2m1236\u001b[0m |       \n \u001b[2m1237\u001b[0m |       const response = await fetch('/api/pek', {\n \u001b[2m1238\u001b[0m |         method: 'POST',\n \u001b[2m1239\u001b[0m |         headers: {\n \u001b[2m1240\u001b[0m |           'Content-Type': 'application/json',\n \u001b[2m1241\u001b[0m |         },\n \u001b[2m1242\u001b[0m |         body: JSON.stringify({\n \u001b[2m1243\u001b[0m |           method: 'nearestdepartments',\n \u001b[2m1244\u001b[0m |           ...requestBody\n \u001b[2m1245\u001b[0m |         })\n \u001b[2m1246\u001b[0m |       });\n \u001b[2m1247\u001b[0m | \n \u001b[2m1248\u001b[0m |       console.log(`üì° –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è API —Å—Ç–∞—Ç—É—Å: ${response.status}`);\n \u001b[2m1249\u001b[0m |       \n \u001b[2m1250\u001b[0m |       if (!response.ok) {\n \u001b[2m1251\u001b[0m |         const errorText = await response.text();\n \u001b[2m1252\u001b[0m |         console.error(`‚ùå –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è API –æ—à–∏–±–∫–∞: ${response.status} ${response.statusText}`);\n \u001b[2m1253\u001b[0m |         console.error(`‚ùå –û—Ç–≤–µ—Ç:`, errorText.substring(0, 500));\n \u001b[2m1254\u001b[0m |         return null;\n \u001b[2m1255\u001b[0m |       }\n \u001b[2m1256\u001b[0m | \n \u001b[2m1257\u001b[0m |       const data = await response.json();\n \u001b[2m1258\u001b[0m |       console.log(`‚úÖ –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω—ã:`, data);\n \u001b[2m1259\u001b[0m |       \n \u001b[2m1260\u001b[0m |       // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤–æ–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º\n \u001b[2m1261\u001b[0m |       if (data.freeDepartments && data.freeDepartments.length > 0) {\n \u001b[2m1262\u001b[0m |         const bestDepartment = data.freeDepartments.sort((a: any, b: any) => b.priority - a.priority)[0];\n \u001b[2m1263\u001b[0m |         console.log(`‚úÖ –ü–≠–ö: –≤—ã–±—Ä–∞–Ω–æ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ`, bestDepartment.divisionName);\n \u001b[2m1264\u001b[0m |         return {\n \u001b[2m1265\u001b[0m |           warehouseId: bestDepartment.warehouseId,\n \u001b[2m1266\u001b[0m |           branchId: bestDepartment.branchId,\n \u001b[2m1267\u001b[0m |           branchName: bestDepartment.branchName,\n \u001b[2m1268\u001b[0m |           divisionName: bestDepartment.divisionName,\n \u001b[2m1269\u001b[0m |           address: bestDepartment.address,\n \u001b[2m1270\u001b[0m |           coordinates: bestDepartment.coordinates,\n \u001b[2m1271\u001b[0m |           phone: bestDepartment.phone,\n \u001b[2m1272\u001b[0m |           email: bestDepartment.email\n \u001b[2m1273\u001b[0m |         };\n \u001b[2m1274\u001b[0m |       }\n \u001b[2m1275\u001b[0m |       \n \u001b[2m1276\u001b[0m |       console.warn(`‚ùå –ü–≠–ö: –æ—Ç–¥–µ–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è \"${address}\"`);\n \u001b[2m1277\u001b[0m |       return null;\n \u001b[2m1278\u001b[0m |     } catch (error) {\n \u001b[2m1279\u001b[0m |       console.error('‚ùå –ü–≠–ö: –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –æ—Ç–¥–µ–ª–µ–Ω–∏–π:', error);\n \u001b[2m1280\u001b[0m |       return null;\n \u001b[2m1281\u001b[0m |     }\n \u001b[2m1282\u001b[0m |   };\n \u001b[2m1283\u001b[0m | \n \u001b[2m1284\u001b[0m |   // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ü–≠–ö)\n \u001b[2m1285\u001b[0m |   const getYandexCoordinates = async (address: string): Promise<{ latitude: string, longitude: string } | null> => {\n \u001b[2m1286\u001b[0m |     try {\n \u001b[2m1287\u001b[0m |       const encodedAddress = encodeURIComponent(address);\n \u001b[2m1288\u001b[0m |       const response = await fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=YOUR_API_KEY&geocode=${encodedAddress}&format=json`);\n \u001b[2m1289\u001b[0m |       \n \u001b[2m1290\u001b[0m |       if (!response.ok) return null;\n \u001b[2m1291\u001b[0m |       \n \u001b[2m1292\u001b[0m |       const data = await response.json();\n \u001b[2m1293\u001b[0m |       const coords = data?.response?.GeoObjectCollection?.featureMember?.[0]?.GeoObject?.Point?.pos?.split(' ');\n \u001b[2m1294\u001b[0m |       \n \u001b[2m1295\u001b[0m |       if (coords && coords.length === 2) {\n \u001b[2m1296\u001b[0m |         return {\n \u001b[2m1297\u001b[0m |           longitude: coords[0],\n \u001b[2m1298\u001b[0m |           latitude: coords[1]\n \u001b[2m1299\u001b[0m |         };\n \u001b[2m1300\u001b[0m |       }\n \u001b[2m1301\u001b[0m |       \n \u001b[2m1302\u001b[0m |       return null;\n \u001b[2m1303\u001b[0m |     } catch (error) {\n \u001b[2m1304\u001b[0m |       console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ø–Ω–¥–µ–∫—Å:', error);\n \u001b[2m1305\u001b[0m |       return null;\n \u001b[2m1306\u001b[0m |     }\n \u001b[2m1307\u001b[0m |   };\n \u001b[2m1308\u001b[0m | \n \u001b[2m1309\u001b[0m |   // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API v1/calculateprice/\n \u001b[2m1310\u001b[0m |   const calculatePEK = async (): Promise<CalculationResult> => {\n \u001b[2m1311\u001b[0m |     const apiUrl = 'https://kabinet.pecom.ru/api/v1/calculateprice/';\n \u001b[2m1312\u001b[0m |     \n \u001b[2m1313\u001b[0m |     // –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç\n \u001b[2m1314\u001b[0m |     const validateCoordinates = (coords: any) => {\n \u001b[2m1315\u001b[0m |       console.log('üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:', coords);\n \u001b[2m1316\u001b[0m |       \n \u001b[2m1317\u001b[0m |       if (!coords) {\n \u001b[2m1318\u001b[0m |         console.log('‚ö†Ô∏è –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç');\n \u001b[2m1319\u001b[0m |         return null;\n \u001b[2m1320\u001b[0m |       }\n \u001b[2m1321\u001b[0m |       \n \u001b[2m1322\u001b[0m |       if (typeof coords.latitude !== 'number' || typeof coords.longitude !== 'number') {\n \u001b[2m1323\u001b[0m |         console.warn(`‚ö†Ô∏è –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ —è–≤–ª—è—é—Ç—Å—è —á–∏—Å–ª–∞–º–∏:`, { \n \u001b[2m1324\u001b[0m |           lat: coords.latitude, \n \u001b[2m1325\u001b[0m |           lng: coords.longitude,\n \u001b[2m1326\u001b[0m |           latType: typeof coords.latitude,\n \u001b[2m1327\u001b[0m |           lngType: typeof coords.longitude\n \u001b[2m1328\u001b[0m |         });\n \u001b[2m1329\u001b[0m |         return null;\n \u001b[2m1330\u001b[0m |       }\n \u001b[2m1331\u001b[0m |       \n \u001b[2m1332\u001b[0m |       const lat = Number(coords.latitude);\n \u001b[2m1333\u001b[0m |       const lng = Number(coords.longitude);\n \u001b[2m1334\u001b[0m |       \n \u001b[2m1335\u001b[0m |       console.log(`üìç –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: lat=${lat}, lng=${lng}`);\n \u001b[2m1336\u001b[0m |       \n \u001b[2m1337\u001b[0m |       // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∏–∞–ø–∞–∑–æ–Ω—ã\n \u001b[2m1338\u001b[0m |       if (lat < -90 || lat > 90 || lng < -180 || lng > 180 || isNaN(lat) || isNaN(lng)) {\n \u001b[2m1339\u001b[0m |         console.warn(`‚ö†Ô∏è –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–Ω–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞:`, { \n \u001b[2m1340\u001b[0m |           lat, lng, \n \u001b[2m1341\u001b[0m |           latValid: lat >= -90 && lat <= 90,\n \u001b[2m1342\u001b[0m |           lngValid: lng >= -180 && lng <= 180,\n \u001b[2m1343\u001b[0m |           latIsNaN: isNaN(lat),\n \u001b[2m1344\u001b[0m |           lngIsNaN: isNaN(lng)\n \u001b[2m1345\u001b[0m |         });\n \u001b[2m1346\u001b[0m |         return null;\n \u001b[2m1347\u001b[0m |       }\n \u001b[2m1348\u001b[0m |       \n \u001b[2m1349\u001b[0m |       console.log('‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–∞–ª–∏–¥–Ω—ã:', { latitude: lat, longitude: lng });\n \u001b[2m1350\u001b[0m |       return { latitude: lat, longitude: lng };\n \u001b[2m1351\u001b[0m |     };\n \u001b[2m1352\u001b[0m |     \n \u001b[2m1353\u001b[0m |     try {\n \u001b[2m1354\u001b[0m |       // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–æ–Ω–∞—Ö –∏ —Å–∫–ª–∞–¥–∞—Ö –ø–æ –∞–¥—Ä–µ—Å–∞–º\n \u001b[2m1355\u001b[0m |       console.log(`üöÄ –ü–≠–ö: –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞—Å—á–µ—Ç`);\n \u001b[2m1356\u001b[0m |       console.log(`üìç –û—Ç: ${form.fromAddress || form.fromCity}`);\n \u001b[2m1357\u001b[0m |       console.log(`üìç –î–æ: ${form.toAddress || form.toCity}`);\n \u001b[2m1358\u001b[0m |       \n \u001b[2m1359\u001b[0m |       const senderZone = await getPekZoneByAddress(form.fromAddress || `–≥ ${form.fromCity}`);\n \u001b[2m1360\u001b[0m |       const receiverZone = await getPekZoneByAddress(form.toAddress || `–≥ ${form.toCity}`);\n \u001b[2m1361\u001b[0m |       \n \u001b[2m1362\u001b[0m |       console.log(`üîç –ü–≠–ö –∑–æ–Ω—ã:`);\n \u001b[2m1363\u001b[0m |       console.log(`üìç –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å:`, senderZone ? `${senderZone.branchTitle} (${senderZone.mainWarehouseId})` : '–ù–ï –ù–ê–ô–î–ï–ù–ê');\n \u001b[2m1364\u001b[0m |       console.log(`üìç –ü–æ–ª—É—á–∞—Ç–µ–ª—å:`, receiverZone ? `${receiverZone.branchTitle} (${receiverZone.mainWarehouseId})` : '–ù–ï –ù–ê–ô–î–ï–ù–ê');\n \u001b[2m1365\u001b[0m |       \n \u001b[2m1366\u001b[0m |       if (!senderZone || !receiverZone) {\n \u001b[2m1367\u001b[0m |         // –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞\n \u001b[2m1368\u001b[0m |         const debugInfo = {\n \u001b[2m1369\u001b[0m |           senderAddress: form.fromAddress || form.fromCity,\n \u001b[2m1370\u001b[0m |           receiverAddress: form.toAddress || form.toCity,\n \u001b[2m1371\u001b[0m |           senderZoneFound: !!senderZone,\n \u001b[2m1372\u001b[0m |           receiverZoneFound: !!receiverZone,\n \u001b[2m1373\u001b[0m |           apiTested: true\n \u001b[2m1374\u001b[0m |         };\n \u001b[2m1375\u001b[0m |         \n \u001b[2m1376\u001b[0m |         console.error(`‚ùå –ü–≠–ö: –∑–æ–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`, debugInfo);\n \u001b[2m1377\u001b[0m |         \n \u001b[2m1378\u001b[0m |         return {\n \u001b[2m1379\u001b[0m |           company: '–ü–≠–ö',\n \u001b[2m1380\u001b[0m |           price: 0,\n \u001b[2m1381\u001b[0m |           days: 0,\n \u001b[2m1382\u001b[0m |           error: `–ó–æ–Ω–∞ –ü–≠–ö –Ω–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å–∞: ${!senderZone ? (form.fromAddress || form.fromCity) : ''} ${!receiverZone ? (form.toAddress || form.toCity) : ''}`.trim(),\n \u001b[2m1383\u001b[0m |           apiUrl,\n \u001b[2m1384\u001b[0m |           requestData: debugInfo,\n \u001b[2m1385\u001b[0m |           responseData: { senderZone, receiverZone }\n \u001b[2m1386\u001b[0m |         };\n \u001b[2m1387\u001b[0m |       }\n \u001b[2m1388\u001b[0m | \n \u001b[2m1389\u001b[0m |       // –ü–æ–ª—É—á–∞–µ–º –±–ª–∏–∂–∞–π—à–∏–µ –æ—Ç–¥–µ–ª–µ–Ω–∏—è –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–¥—Ä–µ—Å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞\n \u001b[2m1390\u001b[0m |       let senderWarehouseId = senderZone.mainWarehouseId;\n \u001b[2m1391\u001b[0m |       let receiverWarehouseId = receiverZone.mainWarehouseId;\n \u001b[2m1392\u001b[0m |       \n \u001b[2m1393\u001b[0m |       if (form.fromAddressDelivery && senderZone.warehousePoint) {\n \u001b[2m1394\u001b[0m |         const validSenderCoords = validateCoordinates(senderZone.warehousePoint);\n \u001b[2m1395\u001b[0m |         if (validSenderCoords) {\n \u001b[2m1396\u001b[0m |           try {\n \u001b[2m1397\u001b[0m |             const senderDepartment = await getPekNearestDepartments(\n \u001b[2m1398\u001b[0m |               form.fromAddress || form.fromCity,\n \u001b[2m1399\u001b[0m |               {\n \u001b[2m1400\u001b[0m |                 latitude: validSenderCoords.latitude.toString(),\n \u001b[2m1401\u001b[0m |                 longitude: validSenderCoords.longitude.toString()\n \u001b[2m1402\u001b[0m |               }\n \u001b[2m1403\u001b[0m |             );\n \u001b[2m1404\u001b[0m |             if (senderDepartment) {\n \u001b[2m1405\u001b[0m |               senderWarehouseId = senderDepartment.warehouseId;\n \u001b[2m1406\u001b[0m |               console.log('‚úÖ –ù–∞–π–¥–µ–Ω –±–ª–∏–∂–∞–π—à–∏–π —Å–∫–ª–∞–¥ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:', senderDepartment.warehouseId);\n \u001b[2m1407\u001b[0m |             }\n \u001b[2m1408\u001b[0m |           } catch (error) {\n \u001b[2m1409\u001b[0m |             console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥:', error);\n \u001b[2m1410\u001b[0m |           }\n \u001b[2m1411\u001b[0m |         } else {\n \u001b[2m1412\u001b[0m |           console.warn('‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥');\n \u001b[2m1413\u001b[0m |         }\n \u001b[2m1414\u001b[0m |       }\n \u001b[2m1415\u001b[0m |       \n \u001b[2m1416\u001b[0m |       if (form.toAddressDelivery && receiverZone.warehousePoint) {\n \u001b[2m1417\u001b[0m |         const validReceiverCoords = validateCoordinates(receiverZone.warehousePoint);\n \u001b[2m1418\u001b[0m |         if (validReceiverCoords) {\n \u001b[2m1419\u001b[0m |           try {\n \u001b[2m1420\u001b[0m |             const receiverDepartment = await getPekNearestDepartments(\n \u001b[2m1421\u001b[0m |               form.toAddress || form.toCity,\n \u001b[2m1422\u001b[0m |               {\n \u001b[2m1423\u001b[0m |                 latitude: validReceiverCoords.latitude.toString(),\n \u001b[2m1424\u001b[0m |                 longitude: validReceiverCoords.longitude.toString()\n \u001b[2m1425\u001b[0m |               }\n \u001b[2m1426\u001b[0m |             );\n \u001b[2m1427\u001b[0m |             if (receiverDepartment) {\n \u001b[2m1428\u001b[0m |               receiverWarehouseId = receiverDepartment.warehouseId;\n \u001b[2m1429\u001b[0m |               console.log('‚úÖ –ù–∞–π–¥–µ–Ω –±–ª–∏–∂–∞–π—à–∏–π —Å–∫–ª–∞–¥ –ø–æ–ª—É—á–∞—Ç–µ–ª—è:', receiverDepartment.warehouseId);\n \u001b[2m1430\u001b[0m |             }\n \u001b[2m1431\u001b[0m |           } catch (error) {\n \u001b[2m1432\u001b[0m |             console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥:', error);\n \u001b[2m1433\u001b[0m |           }\n \u001b[2m1434\u001b[0m |         } else {\n \u001b[2m1435\u001b[0m |           console.warn('‚ö†Ô∏è –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–æ–ª—É—á–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–ª–∞–¥');\n \u001b[2m1436\u001b[0m |         }\n \u001b[2m1437\u001b[0m |       }\n \u001b[2m1438\u001b[0m | \n \u001b[2m1439\u001b[0m |       // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞—Ç—ã N –¥–Ω–µ–π –æ—Ç —Å–µ–≥–æ–¥–Ω—è\n \u001b[2m1440\u001b[0m |       const getDateForCalculation = (daysFromToday: number): string => {\n \u001b[2m1441\u001b[0m |         const date = new Date();\n \u001b[2m1442\u001b[0m |         date.setDate(date.getDate() + daysFromToday);\n \u001b[2m1443\u001b[0m |         return date.toISOString().slice(0, 19); // 2025-09-28T14:00:00\n \u001b[2m1444\u001b[0m |       };\n \u001b[2m1445\u001b[0m | \n \u001b[2m1446\u001b[0m |       // –ù–∞—á–∏–Ω–∞–µ–º —Å –∑–∞–≤—Ç—Ä–∞—à–Ω–µ–≥–æ –¥–Ω—è\n \u001b[2m1447\u001b[0m |       let currentDayOffset = 1;\n \u001b[2m1448\u001b[0m |       let plannedDateTime = getDateForCalculation(currentDayOffset);\n \u001b[2m1449\u001b[0m | \n \u001b[2m1450\u001b[0m |       // –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –≥—Ä—É–∑–æ–≤ (–±–µ–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç)\n \u001b[2m1451\u001b[0m |       const cargos = form.cargos.map(cargo => {\n \u001b[2m1452\u001b[0m |         const cargoData = {\n \u001b[2m1453\u001b[0m |           length: cargo.length / 100, // –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–µ—Ç—Ä—ã\n \u001b[2m1454\u001b[0m |           width: cargo.width / 100,\n \u001b[2m1455\u001b[0m |           height: cargo.height / 100,\n \u001b[2m1456\u001b[0m |           volume: (cargo.length * cargo.width * cargo.height) / 1000000, // –º3\n \u001b[2m1457\u001b[0m |           weight: cargo.weight,\n \u001b[2m1458\u001b[0m |           isHP: form.needPackaging, // –∑–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞\n \u001b[2m1459\u001b[0m |           sealingPositionsCount: 0\n \u001b[2m1460\u001b[0m |         };\n \u001b[2m1461\u001b[0m |         \n \u001b[2m1462\u001b[0m |         console.log('üì¶ –ì—Ä—É–∑ –¥–ª—è –ü–≠–ö:', cargoData);\n \u001b[2m1463\u001b[0m |         return cargoData;\n \u001b[2m1464\u001b[0m |       });\n \u001b[2m1465\u001b[0m | \n \u001b[2m1466\u001b[0m |       // –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–Ω—É–∂–Ω–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ)\n \u001b[2m1467\u001b[0m |       let finalRequestData: any = null;\n \u001b[2m1468\u001b[0m |       \n \u001b[2m1469\u001b[0m |       // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ —Ä–∞—Å—á–µ—Ç–∞ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–∞—Ç–æ–π\n \u001b[2m1470\u001b[0m |       const tryCalculateWithDate = async (plannedDateTime: string): Promise<any> => {\n \u001b[2m1471\u001b[0m |         // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –∫ API –ü–≠–ö —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n \u001b[2m1472\u001b[0m |         const requestData: any = {\n \u001b[2m1473\u001b[0m |           currencyCode: \"643\", // —Ä—É–±–ª–∏\n \u001b[2m1474\u001b[0m |           types: [3], // —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ –ø–µ—Ä–µ–≤–æ–∑–∫–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –º–∞—Å—Å–∏–≤)\n \u001b[2m1475\u001b[0m |           senderWarehouseId,\n \u001b[2m1476\u001b[0m |           receiverWarehouseId,\n \u001b[2m1477\u001b[0m |           isOpenCarSender: false,\n \u001b[2m1478\u001b[0m |           isOpenCarReceiver: false,\n \u001b[2m1479\u001b[0m |           isHyperMarket: false,\n \u001b[2m1480\u001b[0m |           plannedDateTime,\n \u001b[2m1481\u001b[0m |           isInsurance: form.needInsurance && form.declaredValue > 0,\n \u001b[2m1482\u001b[0m |           isInsurancePrice: form.needInsurance ? form.declaredValue : 0,\n \u001b[2m1483\u001b[0m |           isPickUp: form.fromAddressDelivery,\n \u001b[2m1484\u001b[0m |           isDelivery: form.toAddressDelivery,\n \u001b[2m1485\u001b[0m |           needReturnDocuments: false,\n \u001b[2m1486\u001b[0m |           needArrangeTransportationDocuments: false,\n \u001b[2m1487\u001b[0m |           senderDistanceType: 0,\n \u001b[2m1488\u001b[0m |           receiverDistanceType: 0,\n \u001b[2m1489\u001b[0m |           cargos // –º–∞—Å—Å–∏–≤ –≥—Ä—É–∑–æ–≤\n \u001b[2m1490\u001b[0m |         };\n \u001b[2m1491\u001b[0m |         \n \u001b[2m1492\u001b[0m |         console.log('üìã –ü–≠–ö: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ requestData:', JSON.stringify(requestData, null, 2));\n \u001b[2m1493\u001b[0m | \n \u001b[2m1494\u001b[0m |         // –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ –ü–†–† –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n \u001b[2m1495\u001b[0m |         if (form.needCarry) {\n \u001b[2m1496\u001b[0m |           requestData.pickupServices = {\n \u001b[2m1497\u001b[0m |             isLoading: true,\n \u001b[2m1498\u001b[0m |             floor: Math.max(0, form.floor - 1), // –ü–≠–ö —Å—á–∏—Ç–∞–µ—Ç —Å 0\n \u001b[2m1499\u001b[0m |             carryingDistance: 0,\n \u001b[2m1500\u001b[0m |             isElevator: form.hasFreightLift\n \u001b[2m1501\u001b[0m |           };\n \u001b[2m1502\u001b[0m |           requestData.deliveryServices = {\n \u001b[2m1503\u001b[0m |             isLoading: true,\n \u001b[2m1504\u001b[0m |             floor: Math.max(0, form.floor - 1),\n \u001b[2m1505\u001b[0m |             carryingDistance: 0,\n \u001b[2m1506\u001b[0m |             isElevator: form.hasFreightLift\n \u001b[2m1507\u001b[0m |           };\n \u001b[2m1508\u001b[0m |         }\n \u001b[2m1509\u001b[0m | \n \u001b[2m1510\u001b[0m |         // –î–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫–∏ pickup/delivery —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ü–≠–ö\n \u001b[2m1511\u001b[0m |         if (form.fromAddressDelivery) {\n \u001b[2m1512\u001b[0m |           console.log('üìç –ü–≠–ö: –¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ pickup –¥–ª—è –∑–∞–±–æ—Ä–∞');\n \u001b[2m1513\u001b[0m |           requestData.pickup = {\n \u001b[2m1514\u001b[0m |             address: form.fromAddress || `–†–æ—Å—Å–∏—è, ${form.fromCity}`\n \u001b[2m1515\u001b[0m |             // coordinates –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏\n \u001b[2m1516\u001b[0m |           };\n \u001b[2m1517\u001b[0m |         }\n \u001b[2m1518\u001b[0m |         \n \u001b[2m1519\u001b[0m |         if (form.toAddressDelivery) {\n \u001b[2m1520\u001b[0m |           console.log('üìç –ü–≠–ö: –¥–æ–±–∞–≤–ª—è–µ–º –±–ª–æ–∫ delivery –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏');\n \u001b[2m1521\u001b[0m |           requestData.delivery = {\n \u001b[2m1522\u001b[0m |             address: form.toAddress || `–†–æ—Å—Å–∏—è, ${form.toCity}`\n \u001b[2m1523\u001b[0m |             // coordinates –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏\n \u001b[2m1524\u001b[0m |           };\n \u001b[2m1525\u001b[0m |         }\n \u001b[2m1526\u001b[0m | \n \u001b[2m1527\u001b[0m |         // –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n \u001b[2m1528\u001b[0m |         const requiredFields = ['types', 'senderWarehouseId', 'receiverWarehouseId', 'plannedDateTime', 'cargos'];\n \u001b[2m1529\u001b[0m |         const missingFields = requiredFields.filter(field => !requestData[field]);\n \u001b[2m1530\u001b[0m |         \n \u001b[2m1531\u001b[0m |         if (missingFields.length > 0) {\n \u001b[2m1532\u001b[0m |           throw new Error(`–ü–≠–ö: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: ${missingFields.join(', ')}`);\n \u001b[2m1533\u001b[0m |         }\n \u001b[2m1534\u001b[0m |         \n \u001b[2m1535\u001b[0m |         if (!Array.isArray(requestData.types) || requestData.types.length === 0) {\n \u001b[2m1536\u001b[0m |           throw new Error('–ü–≠–ö: –ø–æ–ª–µ types –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º');\n \u001b[2m1537\u001b[0m |         }\n \u001b[2m1538\u001b[0m |         \n \u001b[2m1539\u001b[0m |         if (!Array.isArray(requestData.cargos) || requestData.cargos.length === 0) {\n \u001b[2m1540\u001b[0m |           throw new Error('–ü–≠–ö: –ø–æ–ª–µ cargos –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º');\n \u001b[2m1541\u001b[0m |         }\n \u001b[2m1542\u001b[0m |         \n \u001b[2m1543\u001b[0m |         console.log('‚úÖ –ü–≠–ö: –≤–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –ø—Ä–æ–π–¥–µ–Ω–∞');\n \u001b[2m1544\u001b[0m | \n \u001b[2m1545\u001b[0m |         // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏\n \u001b[2m1546\u001b[0m |         finalRequestData = {\n \u001b[2m1547\u001b[0m |           method: 'calculateprice',\n \u001b[2m1548\u001b[0m |           ...requestData\n \u001b[2m1549\u001b[0m |         };\n \u001b[2m1550\u001b[0m |         \n \u001b[2m1551\u001b[0m |         console.log('üöÄ –ü–≠–ö API –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å:', JSON.stringify(finalRequestData, null, 2));\n \u001b[2m1552\u001b[0m |         console.log('üåê –ü–≠–ö API URL:', apiUrl);\n \u001b[2m1553\u001b[0m |         console.log('üìã –ü–≠–ö: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ —Ç–∞—Ä–∏—Ñ–æ–≤:', requestData.types.length);\n \u001b[2m1554\u001b[0m |         console.log('üìã –ü–≠–ö: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤:', requestData.cargos.length);\n \u001b[2m1555\u001b[0m |       \n \u001b[2m1556\u001b[0m |       // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π\n \u001b[2m1557\u001b[0m |       if (finalRequestData.pickup?.coordinates) {\n \u001b[2m1558\u001b[0m |         console.log('üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã pickup:', finalRequestData.pickup.coordinates);\n \u001b[2m1559\u001b[0m |       }\n \u001b[2m1560\u001b[0m |       if (finalRequestData.delivery?.coordinates) {\n \u001b[2m1561\u001b[0m |         console.log('üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã delivery:', finalRequestData.delivery.coordinates);\n \u001b[2m1562\u001b[0m |       }\n \u001b[2m1563\u001b[0m | \n \u001b[2m1564\u001b[0m |       const response = await fetch('/api/pek', {\n \u001b[2m1565\u001b[0m |         method: 'POST',\n \u001b[2m1566\u001b[0m |         headers: {\n \u001b[2m1567\u001b[0m |           'Content-Type': 'application/json',\n \u001b[2m1568\u001b[0m |         },\n \u001b[2m1569\u001b[0m |         body: JSON.stringify(finalRequestData)\n \u001b[2m1570\u001b[0m |       });\n \u001b[2m1571\u001b[0m | \n \u001b[2m1572\u001b[0m |       console.log(`üì° –ü–≠–ö API —Ä–∞—Å—á–µ—Ç —Å—Ç–∞—Ç—É—Å: ${response.status} ${response.statusText}`);\n \u001b[2m1573\u001b[0m |       consol\n\n(Output was truncated due to length limit)",
      "exit": 1,
      "description": "–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏ –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è Nord Wheel API"
    },
    "title": "cd /home/user/project && npm run build",
    "time": {
      "start": 1759006865326,
      "end": 1759006869282
    }
  }
}