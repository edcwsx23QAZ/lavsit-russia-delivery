{
  "id": "prt_98cc65108001Ya234u94zrkxi5",
  "messageID": "msg_98cc62fb4001AcqPHDeKhzQd3j",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01MsYBy4TitWtJVwu42YigX9",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 1664,
      "limit": 150
    },
    "output": "<file>\n01665|     const apiUrl = '/api/rail-continent';\n01666|     \n01667|     try {\n01668|       // –í—ã—á–∏—Å–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥—Ä—É–∑–∞\n01669|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n01670|       const totalVolume = form.cargos.reduce((sum, cargo) => \n01671|         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n01672|       );\n01673|       \n01674|       // –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –≥–∞–±–∞—Ä–∏—Ç—ã\n01675|       const maxLength = Math.max(...form.cargos.map(c => c.length));\n01676|       const maxWidth = Math.max(...form.cargos.map(c => c.width));\n01677|       const maxHeight = Math.max(...form.cargos.map(c => c.height));\n01678|       \n01679|       // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è API Rail Continent\n01680|       const requestData = {\n01681|         city_sender: form.fromCity || '–ú–æ—Å–∫–≤–∞',\n01682|         city_receiver: form.toCity || '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n01683|         weight: totalWeight,\n01684|         volume: totalVolume,\n01685|         length: maxLength / 100, // –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–µ—Ç—Ä—ã\n01686|         width: maxWidth / 100,\n01687|         height: maxHeight / 100,\n01688|         declared_cost: form.declaredValue,\n01689|         pickup: form.fromAddressDelivery ? '1' : '0',\n01690|         delivery: form.toAddressDelivery ? '1' : '0',\n01691|         packaging: form.needPackaging ? '1' : '0',\n01692|         insurance: form.needInsurance ? '1' : '0',\n01693|         tariff: 'auto' // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞\n01694|       };\n01695| \n01696|       console.log('üöÇ Rail Continent –∑–∞–ø—Ä–æ—Å:', requestData);\n01697| \n01698|       const response = await fetch(apiUrl, {\n01699|         method: 'POST',\n01700|         headers: {\n01701|           'Content-Type': 'application/json',\n01702|         },\n01703|         body: JSON.stringify(requestData)\n01704|       });\n01705| \n01706|       const data = await response.json();\n01707|       console.log('üöÇ Rail Continent –æ—Ç–≤–µ—Ç:', data);\n01708| \n01709|       if (response.ok && data.result === 'success' && data.data) {\n01710|         // –í—ã–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π (—Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)\n01711|         const autoTariff = data.data.auto;\n01712|         \n01713|         if (autoTariff) {\n01714|           // –°–æ–±–∏—Ä–∞–µ–º –¥–µ—Ç–∞–ª–∏ –ø–æ —É—Å–ª—É–≥–∞–º\n01715|           const services = [];\n01716|           \n01717|           // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å\n01718|           if (autoTariff.price_with_out_sale) {\n01719|             services.push({\n01720|               name: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞',\n01721|               description: `${autoTariff.type} (${autoTariff.rsType})`,\n01722|               price: autoTariff.price_with_out_sale\n01723|             });\n01724|           }\n01725|           \n01726|           // –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —Å–±–æ—Ä—ã\n01727|           if (autoTariff.terminalEnter1) {\n01728|             services.push({\n01729|               name: '–¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å–±–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è',\n01730|               description: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä—É–∑–∞ –Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ',\n01731|               price: parseInt(autoTariff.terminalEnter1)\n01732|             });\n01733|           }\n01734|           \n01735|           // –£–ø–∞–∫–æ–≤–∫–∞\n01736|           if (form.needPackaging && autoTariff.pricePackage) {\n01737|             services.push({\n01738|               name: '–£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞',\n01739|               description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞',\n01740|               price: parseInt(autoTariff.pricePackage)\n01741|             });\n01742|           }\n01743|           \n01744|           // –ó–∞–±–æ—Ä/–¥–æ—Å—Ç–∞–≤–∫–∞\n01745|           if (form.fromAddressDelivery && autoTariff.pricePickup && parseInt(autoTariff.pricePickup) > 0) {\n01746|             services.push({\n01747|               name: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n01748|               description: '–û—Ç –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è',\n01749|               price: parseInt(autoTariff.pricePickup)\n01750|             });\n01751|           }\n01752|           \n01753|           if (form.toAddressDelivery && autoTariff.priceDelivery && parseInt(autoTariff.priceDelivery) > 0) {\n01754|             services.push({\n01755|               name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n01756|               description: '–î–æ –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è',\n01757|               price: parseInt(autoTariff.priceDelivery)\n01758|             });\n01759|           }\n01760|           \n01761|           // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ\n01762|           if (form.needInsurance && autoTariff.priceInsurance) {\n01763|             const insuranceCost = Math.round(form.declaredValue * parseFloat(autoTariff.priceInsurance) / 100);\n01764|             services.push({\n01765|               name: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n01766|               description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n01767|               price: insuranceCost\n01768|             });\n01769|           }\n01770| \n01771|           return {\n01772|             company: 'Rail Continent',\n01773|             price: Math.round(autoTariff.priceTotal || autoTariff.price || 0),\n01774|             days: parseInt(autoTariff.duration) || 5,\n01775|             details: {\n01776|               tariff: `${autoTariff.type} - ${autoTariff.service}`,\n01777|               transportType: autoTariff.rsType,\n01778|               weight: totalWeight,\n01779|               volume: totalVolume,\n01780|               route: `${form.fromCity} - ${form.toCity}`,\n01781|               services,\n01782|               allTariffs: data.data\n01783|             },\n01784|             requestData,\n01785|             responseData: data,\n01786|             apiUrl\n01787|           };\n01788|         } else {\n01789|           return {\n01790|             company: 'Rail Continent',\n01791|             price: 0,\n01792|             days: 0,\n01793|             error: '–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞',\n01794|             requestData,\n01795|             responseData: data,\n01796|             apiUrl\n01797|           };\n01798|         }\n01799|       } else {\n01800|         return {\n01801|           company: 'Rail Continent',\n01802|           price: 0,\n01803|           days: 0,\n01804|           error: data.error || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Rail Continent',\n01805|           requestData,\n01806|           responseData: data,\n01807|           apiUrl\n01808|         };\n01809|       }\n01810|     } catch (error: any) {\n01811|       console.error('üöÇ Rail Continent –æ—à–∏–±–∫–∞:', error);\n01812|       return {\n01813|         company: 'Rail Continent',\n01814|         price: 0,\n\n(File has more lines. Use 'offset' parameter to read beyond line 1814)\n</file>",
    "metadata": {
      "preview": "    const apiUrl = '/api/rail-continent';\n    \n    try {\n      // –í—ã—á–∏—Å–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥—Ä—É–∑–∞\n      const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n      const totalVolume = form.cargos.reduce((sum, cargo) => \n        sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n      );\n      \n      // –ù–∞—Ö–æ–¥–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –≥–∞–±–∞—Ä–∏—Ç—ã\n      const maxLength = Math.max(...form.cargos.map(c => c.length));\n      const maxWidth = Math.max(...form.cargos.map(c => c.width));\n      const maxHeight = Math.max(...form.cargos.map(c => c.height));\n      \n      // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è API Rail Continent\n      const requestData = {\n        city_sender: form.fromCity || '–ú–æ—Å–∫–≤–∞',\n        city_receiver: form.toCity || '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n        weight: totalWeight,\n        volume: totalVolume,"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1759003431912,
      "end": 1759003431914
    }
  }
}