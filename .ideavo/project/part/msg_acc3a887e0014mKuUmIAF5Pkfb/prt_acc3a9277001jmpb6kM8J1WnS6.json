{
  "id": "prt_acc3a9277001jmpb6kM8J1WnS6",
  "sessionID": "ses_54b97e247ffenCZZa4jZiIWD0l",
  "messageID": "msg_acc3a887e0014mKuUmIAF5Pkfb",
  "type": "tool",
  "callID": "call_0dbfb56c9c354eff8213e13d",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/api/vozovoz-parser-hybrid/route.ts"
    },
    "output": "<file>\n00001| import { NextRequest, NextResponse } from 'next/server';\n00002| \n00003| interface VozovozParserParams {\n00004|   fromCity: string;\n00005|   toCity: string;\n00006|   fromAddressDelivery: boolean;\n00007|   toAddressDelivery: boolean;\n00008|   fromAddress?: string;\n00009|   toAddress?: string;\n00010|   length: number;\n00011|   width: number;\n00012|   height: number;\n00013|   weight: number;\n00014|   needInsurance: boolean;\n00015|   declaredValue?: number;\n00016|   needPackaging: boolean;\n00017|   needLoading: boolean;\n00018|   hasFreightElevator: boolean;\n00019|   floor: number;\n00020| }\n00021| \n00022| interface ParsedResult {\n00023|   totalCost: number;\n00024|   services: ServiceItem[];\n00025|   deliveryTime?: string;\n00026|   warnings?: string[];\n00027|   parseTime?: number;\n00028| }\n00029| \n00030| interface ServiceItem {\n00031|   name: string;\n00032|   basePrice?: number;\n00033|   price: number;\n00034|   discount?: number;\n00035| }\n00036| \n00037| // –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä: API + —ç–º—É–ª—è—Ü–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è\n00038| async function parseVozovozHybrid(params: VozovozParserParams): Promise<ParsedResult> {\n00039|   const startTime = Date.now();\n00040|   \n00041|   try {\n00042|     console.log('üï∑Ô∏è –ó–∞–ø—É—Å–∫ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ Vozovoz...');\n00043|     \n00044|     // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π API Vozovoz –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n00045|     const maxDimensions = {\n00046|       length: params.length / 1000, // –ø–µ—Ä–µ–≤–æ–¥–∏–º –º–º –≤ –º\n00047|       width: params.width / 1000,\n00048|       height: params.height / 1000,\n00049|       weight: params.weight\n00050|     };\n00051| \n00052|     // –≠–º—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏ —Å–∞–π—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –æ–±—ä–µ–º–∞\n00053|     const calculateVolume = (length: number, width: number, height: number) => {\n00054|       const rawVolume = (length * width * height) / 1000000; // —Å–º¬≥ ‚Üí –º¬≥\n00055|       // –°–∞–π—Ç –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º 1 –º¬≥ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞\n00056|       return Math.max(rawVolume, 1.0); // –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—ä–µ–º 1 –º¬≥\n00057|     };\n00058|     \n00059|     const totalVolume = calculateVolume(params.length, params.width, params.height);\n00060|     const totalWeight = params.weight;\n00061| \n00062|     const requestData = {\n00063|       object: \"price\",\n00064|       action: \"get\",\n00065|       params: {\n00066|         cargo: {\n00067|           dimension: {\n00068|             max: maxDimensions,\n00069|             quantity: 1,\n00070|             volume: totalVolume,\n00071|             weight: totalWeight\n00072|           },\n00073|           ...(params.needInsurance && params.declaredValue && params.declaredValue > 0 ? {\n00074|             insurance: params.declaredValue,\n00075|             insuranceNdv: false\n00076|           } : {\n00077|             insuranceNdv: true\n00078|           }),\n00079|           ...(params.needPackaging ? {\n00080|             wrapping: {\n00081|               \"hardPackageVolume\": totalVolume\n00082|             }\n00083|           } : {})\n00084|         },\n00085|         gateway: {\n00086|           dispatch: {\n00087|             point: {\n00088|               location: params.fromCity,\n00089|               ...(params.fromAddressDelivery ? {\n00090|                 address: params.fromAddress || \"–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è\"\n00091|               } : {\n00092|                 terminal: \"default\"\n00093|               })\n00094|             }\n00095|           },\n00096|           destination: {\n00097|             point: {\n00098|               location: params.toCity,\n00099|               ...(params.toAddressDelivery ? {\n00100|                 address: params.toAddress || \"–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–µ–Ω–∏—è\"\n00101|               } : {\n00102|                 terminal: \"default\"\n00103|               })\n00104|             }\n00105|           }\n00106|         }\n00107|       }\n00108|     };\n00109| \n00110|     console.log('üîå –ó–∞–ø—Ä–æ—Å –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API Vozovoz...');\n00111|     \n00112|     // –ó–∞–ø—Ä–æ—Å –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É API Vozovoz\n00113|     const apiResponse = await fetch('https://vozovoz.ru/api/?token=sBDUaEmzVBO6syQWHvHxmjxJQiON2BZplQaqrU3N', {\n00114|       method: 'POST',\n00115|       headers: {\n00116|         'Content-Type': 'application/json',\n00117|         'Accept': 'application/json',\n00118|         'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n00119|       },\n00120|       body: JSON.stringify(requestData)\n00121|     });\n00122| \n00123|     if (!apiResponse.ok) {\n00124|       throw new Error(`API –æ—à–∏–±–∫–∞: ${apiResponse.status} ${apiResponse.statusText}`);\n00125|     }\n00126| \n00127|     const data = await apiResponse.json();\n00128|     console.log('üì• –û—Ç–≤–µ—Ç –æ—Ç API Vozovoz:', JSON.stringify(data, null, 2));\n00129| \n00130|     if (data.error) {\n00131|       throw new Error(`API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: ${data.error.message || data.error}`);\n00132|     }\n00133| \n00134|     if (!data.response) {\n00135|       throw new Error('API –Ω–µ –≤–µ—Ä–Ω—É–ª –¥–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–∞');\n00136|     }\n00137| \n00138|     const responseData = data.response;\n00139|     \n00140|     // –≠–º—É–ª–∏—Ä—É–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∞–π—Ç–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π\n00141|     console.log('üé≠ –≠–º—É–ª—è—Ü–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∞–π—Ç–∞ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–æ–π...');\n00142|     \n00143|     const services: ServiceItem[] = [];\n00144|     let totalPrice = responseData.price || responseData.basePrice || 0;\n00145|     \n00146|     // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –º–∞—Å—Å–∏–≤ —É—Å–ª—É–≥ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API\n00147|     if (responseData.service && Array.isArray(responseData.service)) {\n00148|       console.log('üöö Vozovoz –Ω–∞–π–¥–µ–Ω –º–∞—Å—Å–∏–≤ —É—Å–ª—É–≥:', responseData.service.length);\n00149|       \n00150|       responseData.service.forEach((service: any, index: number) => {\n00151|         console.log(`üöö –£—Å–ª—É–≥–∞ [${index}]:`, service);\n00152|         \n00153|         // –≠–º—É–ª–∏—Ä—É–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ\n00154|         let serviceName = service.name || '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —É—Å–ª—É–≥–∞';\n00155|         let servicePrice = service.price || 0;\n00156|         let basePrice = service.basePrice || servicePrice;\n00157|         \n00158|         // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏–π –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å–∞–π—Ç—É\n00159|         if (serviceName.includes('–ü–µ—Ä–µ–≤–æ–∑–∫–∞ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏')) {\n00160|           serviceName = '–ü–µ—Ä–µ–≤–æ–∑–∫–∞ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏';\n00161|         } else if (serviceName.includes('–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ –±–µ–∑')) {\n00162|           serviceName = '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ –±–µ–∑ –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏';\n00163|         } else if (serviceName.includes('–°–∫–ª–∞–¥—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞')) {\n00164|           serviceName = '–°–∫–ª–∞–¥—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞';\n00165|         } else if (serviceName.includes('–ü–ª–∞—Ç–Ω—ã–π –≤—ä–µ–∑–¥')) {\n00166|           serviceName = '–ü–ª–∞—Ç–Ω—ã–π –≤—ä–µ–∑–¥ (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å)';\n00167|         } else if (serviceName.includes('–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞')) {\n00168|           serviceName = '–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞ –∫–ª–∏–µ–Ω—Ç—É';\n00169|         }\n00170|         \n00171|         // –≠–º—É–ª–∏—Ä—É–µ–º —Å–∫–∏–¥–∫–∏ –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ\n00172|         if (basePrice > servicePrice) {\n00173|           const discount = basePrice - servicePrice;\n00174|           \n00175|           services.push({\n00176|             name: serviceName,\n00177|             price: servicePrice,\n00178|             basePrice: basePrice,\n00179|             discount: discount\n00180|           });\n00181|           \n00182|           // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–¥–µ–ª—å–Ω—É—é —É—Å–ª—É–≥—É \"–°–∫–∏–¥–∫–∞\" –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ\n00183|           services.push({\n00184|             name: '–°–∫–∏–¥–∫–∞',\n00185|             price: -discount,\n00186|             basePrice: 0,\n00187|             discount: discount\n00188|           });\n00189|         } else {\n00190|           services.push({\n00191|             name: serviceName,\n00192|             price: servicePrice,\n00193|             basePrice: basePrice\n00194|           });\n00195|         }\n00196|       });\n00197|     } else {\n00198|       console.log('üöö Vozovoz: –º–∞—Å—Å–∏–≤ —É—Å–ª—É–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏');\n00199|       \n00200|       // –ï—Å–ª–∏ –º–∞—Å—Å–∏–≤–∞ —É—Å–ª—É–≥ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ü–µ–Ω—ã\n00201|       if (responseData.basePrice && responseData.basePrice > 0) {\n00202|         // –≠–º—É–ª–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ —Å —É—á–µ—Ç–æ–º –æ–±—ä–µ–º–∞\n00203|         const volume = calculateVolume(params.length, params.width, params.height);\n00204|         \n00205|         // –ë–∞–∑–æ–≤—ã–µ –≤–µ—Å–∞ —É—Å–ª—É–≥ (–∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –ø–æ–¥ –æ–±—ä–µ–º)\n00206|         const baseServices = [\n00207|           { name: '–ü–ª–∞—Ç–Ω—ã–π –≤—ä–µ–∑–¥ (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å)', weight: 0.08 }, // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞\n00208|           { name: '–ü–µ—Ä–µ–≤–æ–∑–∫–∞ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏', weight: 0.65 }, // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è\n00209|           { name: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ –±–µ–∑ –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏', weight: 0.01 }, // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞\n00210|           { name: '–°–∫–ª–∞–¥—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞', weight: 0.08 } // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞\n00211|         ];\n00212|         \n00213|         // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–æ–∑ –≥—Ä—É–∑–∞ –µ—Å–ª–∏ –∞–¥—Ä–µ—Å–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞\n00214|         if (params.toAddressDelivery) {\n00215|           baseServices.push({ name: '–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞ –∫–ª–∏–µ–Ω—Ç—É', weight: 0.20 }); // –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è\n00216|         }\n00217|         \n00218|         // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –≤–µ—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞\n00219|         const volumeMultiplier = Math.max(1, volume / 2); // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤\n00220|         \n00221|         baseServices.forEach(service => {\n00222|           let servicePrice = Math.round(responseData.basePrice * service.weight * volumeMultiplier);\n00223|           \n00224|           // –î–ª—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏ –ø—Ä–∏–º–µ–Ω—è–µ–º –æ—Å–æ–±—É—é –ª–æ–≥–∏–∫—É\n00225|           if (service.name === '–ü–µ—Ä–µ–≤–æ–∑–∫–∞ –º–µ–∂–¥—É –≥–æ—Ä–æ–¥–∞–º–∏') {\n00226|             // –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –¥–ª—è –ú–æ—Å–∫–≤–∞-–°–ü–ë —Å –æ–±—ä–µ–º–æ–º 2–º¬≥\n00227|             const basePriceForRoute = 8960;\n00228|             // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ–±—ä–µ–º–∞\n00229|             servicePrice = Math.round(basePriceForRoute * (volume / 2));\n00230|           }\n00231|           \n00232|           services.push({\n00233|             name: service.name,\n00234|             price: servicePrice,\n00235|             basePrice: servicePrice\n00236|           });\n00237|         });\n00238|       }\n00239|     }\n00240|     \n00241|     // –ï—Å–ª–∏ –Ω–∏–∫–∞–∫–∏—Ö —É—Å–ª—É–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å\n00242|     if (services.length === 0 && totalPrice > 0) {\n00243|       services.push({\n00244|         name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n00245|         description: `${params.fromCity} - ${params.toCity}`,\n00246|         price: totalPrice\n00247|       });\n00248|     }\n00249| \n00250|     // –≠–º—É–ª–∏—Ä—É–µ–º –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∫ –Ω–∞ —Å–∞–π—Ç–µ\n00251|     const totalCost = services.reduce((sum, service) => sum + service.price, 0);\n00252|     \n00253|     // –≠–º—É–ª–∏—Ä—É–µ–º —Å—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏\n00254|     let deliveryTime = '1-2 –¥–Ω—è';\n00255|     if (responseData.deliveryTime) {\n00256|       if (responseData.deliveryTime.from && responseData.deliveryTime.to) {\n00257|         deliveryTime = `${responseData.deliveryTime.from}-${responseData.deliveryTime.to} –¥–Ω–µ–π`;\n00258|       } else if (responseData.deliveryTime.from) {\n00259|         deliveryTime = `${responseData.deliveryTime.from} –¥–Ω–µ–π`;\n00260|       } else if (responseData.deliveryTime.to) {\n00261|         deliveryTime = `${responseData.deliveryTime.to} –¥–Ω–µ–π`;\n00262|       }\n00263|     }\n00264| \n00265|     const parseTime = ((Date.now() - startTime) / 1000).toFixed(1);\n00266| \n00267|     console.log('‚úÖ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É');\n00268|     console.log('üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', totalCost);\n00269|     console.log('üì¶ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥:', services.length);\n00270| \n00271|     return {\n00272|       totalCost: Math.round(totalCost),\n00273|       services: services,\n00274|       deliveryTime: deliveryTime,\n00275|       warnings: ['–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º - API + —ç–º—É–ª—è—Ü–∏—è —Å–∞–π—Ç–∞'],\n00276|       parseTime: parseFloat(parseTime)\n00277|     };\n00278| \n00279|   } catch (error: any) {\n00280|     console.error('‚ùå –û—à–∏–±–∫–∞ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞:', error);\n00281|     throw new Error(`–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞: ${error.message}`);\n00282|   }\n00283| }\n00284| \n00285| export async function POST(request: NextRequest) {\n00286|   try {\n00287|     const body = await request.json();\n00288|     \n00289|     console.log('üï∑Ô∏è –ó–∞–ø—É—Å–∫ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞ Vozovoz —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:', JSON.stringify(body, null, 2));\n00290| \n00291|     // –í–∞–ª–∏–¥–∞—Ü–∏—è\n00292|     const requiredFields = ['fromCity', 'toCity', 'length', 'width', 'height', 'weight'];\n00293|     for (const field of requiredFields) {\n00294|       if (!body[field]) {\n00295|         return NextResponse.json({\n00296|           error: `–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ: ${field}`\n00297|         }, { status: 400 });\n00298|       }\n00299|     }\n00300| \n00301|     console.log('üöÄ –ó–∞–ø—É—Å–∫ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞...');\n00302|     \n00303|     // –ó–∞–ø—É—Å–∫ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞\n00304|     const result = await parseVozovozHybrid(body as VozovozParserParams);\n00305| \n00306|     console.log('‚úÖ –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É —É—Å–ø–µ—à–Ω–æ');\n00307|     console.log('üí∞ –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', result.totalCost);\n00308| \n00309|     return NextResponse.json(result);\n00310| \n00311|   } catch (error: any) {\n00312|     console.error('‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞:', error);\n00313|     \n00314|     return NextResponse.json({\n00315|       error: error.message || '–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ –ø–∞—Ä—Å–µ—Ä–∞',\n00316|       details: error.stack\n00317|     }, { status: 500 });\n00318|   }\n00319| }\n\n(End of file - total 319 lines)\n</file>",
    "title": "app/api/vozovoz-parser-hybrid/route.ts",
    "metadata": {
      "preview": "import { NextRequest, NextResponse } from 'next/server';\n\ninterface VozovozParserParams {\n  fromCity: string;\n  toCity: string;\n  fromAddressDelivery: boolean;\n  toAddressDelivery: boolean;\n  fromAddress?: string;\n  toAddress?: string;\n  length: number;\n  width: number;\n  height: number;\n  weight: number;\n  needInsurance: boolean;\n  declaredValue?: number;\n  needPackaging: boolean;\n  needLoading: boolean;\n  hasFreightElevator: boolean;\n  floor: number;\n}"
    },
    "time": {
      "start": 1764362982010,
      "end": 1764362982014
    }
  }
}