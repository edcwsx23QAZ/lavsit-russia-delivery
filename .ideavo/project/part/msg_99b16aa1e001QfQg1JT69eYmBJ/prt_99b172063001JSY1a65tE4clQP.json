{
  "id": "prt_99b172063001JSY1a65tE4clQP",
  "messageID": "msg_99b16aa1e001QfQg1JT69eYmBJ",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01KSPJBALSvLByTSZyc2Hx5N",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/diagnostic/page.tsx",
      "offset": 50,
      "limit": 100
    },
    "output": "<file>\n00051|     currentTK: string;\n00052|     completedTests: number;\n00053|     totalPlannedTests: number;\n00054|     stage: string;\n00055|   } | null>(null);\n00056| \n00057|   // Состояние для управления типами автомобилей\n00058|   const [vehicleTypes, setVehicleTypes] = useState([\n00059|     { id: '1', name: 'Форд Транзит', length: 4200, width: 2025, height: 2025 },\n00060|     { id: '2', name: 'Фура 18м3', length: 4200, width: 2200, height: 2000 }\n00061|   ]);\n00062|   const [newVehicle, setNewVehicle] = useState({ name: '', length: '', width: '', height: '' });\n00063|   const [isSaving, setIsSaving] = useState(false);\n00064|   const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n00065|   const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'success' | 'error'>('idle');\n00066|   const [isUpdatingData, setIsUpdatingData] = useState(false);\n00067|   const [updateStatus, setUpdateStatus] = useState<'idle' | 'updating' | 'success' | 'error'>('idle');\n00068|   const [lastUpdateTime, setLastUpdateTime] = useState<string | null>(null);\n00069|   \n00070|   // Загружаем сохранённые типы автомобилей при инициализации\n00071|   useEffect(() => {\n00072|     try {\n00073|       const saved = localStorage.getItem('vehicleTypes');\n00074|       if (saved) {\n00075|         const parsedVehicleTypes = JSON.parse(saved);\n00076|         setVehicleTypes(parsedVehicleTypes);\n00077|       }\n00078|       \n00079|       // Загружаем время последнего обновления\n00080|       const lastUpdate = localStorage.getItem('lastProductDataUpdate');\n00081|       if (lastUpdate) {\n00082|         setLastUpdateTime(new Date(lastUpdate).toLocaleString('ru-RU'));\n00083|       }\n00084|     } catch (error) {\n00085|       console.error('Ошибка загрузки сохранённых данных:', error);\n00086|     }\n00087|   }, []);\n00088| \n00089|   // Функции управления типами автомобилей\n00090|   const addVehicleType = () => {\n00091|     if (!newVehicle.name || !newVehicle.length || !newVehicle.width || !newVehicle.height) {\n00092|       alert('Пожалуйста, заполните все поля');\n00093|       return;\n00094|     }\n00095|     \n00096|     const newId = (vehicleTypes.length + 1).toString();\n00097|     const vehicleToAdd = {\n00098|       id: newId,\n00099|       name: newVehicle.name,\n00100|       length: parseInt(newVehicle.length),\n00101|       width: parseInt(newVehicle.width),\n00102|       height: parseInt(newVehicle.height)\n00103|     };\n00104|     \n00105|     setVehicleTypes([...vehicleTypes, vehicleToAdd]);\n00106|     setNewVehicle({ name: '', length: '', width: '', height: '' });\n00107|     setHasUnsavedChanges(true);\n00108|   };\n00109|   \n00110|   const removeVehicleType = (id: string) => {\n00111|     setVehicleTypes(vehicleTypes.filter(vehicle => vehicle.id !== id));\n00112|     setHasUnsavedChanges(true);\n00113|   };\n00114|   \n00115|   const updateVehicleType = (id: string, field: string, value: string | number) => {\n00116|     setVehicleTypes(vehicleTypes.map(vehicle => \n00117|       vehicle.id === id ? { ...vehicle, [field]: value } : vehicle\n00118|     ));\n00119|     setHasUnsavedChanges(true);\n00120|   };\n00121|   \n00122|   const saveVehicleTypes = async () => {\n00123|     setIsSaving(true);\n00124|     setSaveStatus('saving');\n00125|     try {\n00126|       // Имитация сохранения (в реальном приложении здесь бы был API запрос)\n00127|       localStorage.setItem('vehicleTypes', JSON.stringify(vehicleTypes));\n00128|       \n00129|       // Имитация задержки сетевого запроса\n00130|       await new Promise(resolve => setTimeout(resolve, 1000));\n00131|       \n00132|       setHasUnsavedChanges(false);\n00133|       setSaveStatus('success');\n00134|       \n00135|       // Автоматически скрываем сообщение об успехе через 3 секунды\n00136|       setTimeout(() => setSaveStatus('idle'), 3000);\n00137|     } catch (error) {\n00138|       console.error('Ошибка сохранения:', error);\n00139|       setSaveStatus('error');\n00140|       setTimeout(() => setSaveStatus('idle'), 5000);\n00141|     } finally {\n00142|       setIsSaving(false);\n00143|     }\n00144|   };\n00145| \n00146|   // Функция полного обновления данных из Google Sheets\n00147|   const updateProductData = async () => {\n00148|     setIsUpdatingData(true);\n00149|     setUpdateStatus('updating');\n00150|     \n\n(File has more lines. Use 'offset' parameter to read beyond line 150)\n</file>",
    "metadata": {
      "preview": "    currentTK: string;\n    completedTests: number;\n    totalPlannedTests: number;\n    stage: string;\n  } | null>(null);\n\n  // Состояние для управления типами автомобилей\n  const [vehicleTypes, setVehicleTypes] = useState([\n    { id: '1', name: 'Форд Транзит', length: 4200, width: 2025, height: 2025 },\n    { id: '2', name: 'Фура 18м3', length: 4200, width: 2200, height: 2000 }\n  ]);\n  const [newVehicle, setNewVehicle] = useState({ name: '', length: '', width: '', height: '' });\n  const [isSaving, setIsSaving] = useState(false);\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n  const [saveStatus, setSaveStatus] = useState<'idle' | 'saving' | 'success' | 'error'>('idle');\n  const [isUpdatingData, setIsUpdatingData] = useState(false);\n  const [updateStatus, setUpdateStatus] = useState<'idle' | 'updating' | 'success' | 'error'>('idle');\n  const [lastUpdateTime, setLastUpdateTime] = useState<string | null>(null);\n  \n  // Загружаем сохранённые типы автомобилей при инициализации"
    },
    "title": "app/diagnostic/page.tsx",
    "time": {
      "start": 1759243608959,
      "end": 1759243608960
    }
  }
}