{
  "id": "prt_985f26744001gD9yxoR6oW339L",
  "messageID": "msg_985f14ad4001ZhXtWEXl609pWo",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "text",
  "text": "Отлично! Сборка прошла успешно.\n\n## Резюме изменений\n\n✅ **Исправлен расчет срока доставки для Деловых Линий**\n\n### Новая логика расчета:\n- **Было**: Использование поля `derivalToAddressMax` напрямую\n- **Стало**: Вычисление как разность дат `arrivalToOspReceiver - pickup`\n\n### Алгоритм вычисления:\n1. **Извлечение дат**: Берём `pickup` и `arrivalToOspReceiver` из ответа API\n2. **Поиск в структуре**: Проверяем как в `data.data`, так и в корне `data`\n3. **Парсинг дат**: Создаём объекты Date из полученных строк\n4. **Вычисление разности**: `arrivalDate - pickupDate` в миллисекундах\n5. **Преобразование в дни**: Делим на `(1000 * 3600 * 24)` и округляем вверх\n\n### Безопасность и отладка:\n- **Try-catch блок**: Защита от ошибок парсинга дат\n- **Fallback значение**: `0` дней если вычисление не удалось\n- **Подробное логирование**: \n  - Исходные даты из API\n  - Результат вычисления\n  - Ошибки если возникнут\n\n### Пример работы:\n```javascript\n// Если API вернул:\npickup: \"2024-01-15T10:00:00\"\narrivalToOspReceiver: \"2024-01-18T15:00:00\"\n\n// Результат: 4 дня (округление вверх)\n```\n\n### Статус:\n- ✅ **Сборка успешна** - нет ошибок\n- ✅ **Логика корректна** - учитывает разные источники дат\n- ✅ **Безопасность** - обработка ошибок и fallback значения\n- ✅ **Отладка** - подробные логи для проверки работы\n\nТеперь срок доставки Деловых Линий будет точно вычисляться как разность между датами забора и доставки груза.",
  "time": {
    "start": 1758888889475,
    "end": 1758888889475
  }
}