{
  "id": "prt_ab35acee9001TcoNPgUPUNbEN6",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_ab35ac4fd001ZZZkHHs7uMSEHR",
  "type": "tool",
  "callID": "call_37893768",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "app/page.tsx",
      "offset": 4000
    },
    "output": "<file>\n04001|       }\n04002|       \n04003|       const results = await Promise.all(calculationFunctions);\n04004|       \n04005|       // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ\n04006|       const sortedResults = results\n04007|         .filter(result => !result.error)\n04008|         .sort((a, b) => a.price - b.price)\n04009|         .concat(results.filter(result => result.error));\n04010|       \n04011|       setCalculations(sortedResults);\n04012|     } catch (error) {\n04013|       console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ:', error);\n04014|     } finally {\n04015|       setCalculating(false);\n04016|     }\n04017|   };\n04018| \n04019|   const exportToPDF = () => {\n04020|     if (typeof window !== 'undefined') {\n04021|       // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥ –ø–µ—á–∞—Ç—å—é\n04022|       const allExpanded = calculations.reduce((acc, calc) => {\n04023|         acc[calc.company] = true;\n04024|         return acc;\n04025|       }, {} as { [key: string]: boolean });\n04026|       \n04027|       setExpandedDetails(allExpanded);\n04028|       \n04029|       // –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM\n04030|       setTimeout(() => {\n04031|         window.print();\n04032|       }, 100);\n04033|     }\n04034|   };\n04035| \n04036|   const toggleDetails = (company: string) => {\n04037|     setExpandedDetails(prev => ({\n04038|       ...prev,\n04039|       [company]: !prev[company]\n04040|     }));\n04041|   };\n04042| \n04043|   const toggleDebugInfo = (company: string) => {\n04044|     setExpandedDebugInfo(prev => ({\n04045|       ...prev,\n04046|       [company]: !prev[company]\n04047|     }));\n04048|   };\n04049| \n04050|   // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—á–µ—Ç–∞\n04051|   const handleReset = () => {\n04052|     if (typeof window !== 'undefined') {\n04053|       // –û—á–∏—â–∞–µ–º localStorage\n04054|       localStorage.removeItem('deliveryForm');\n04055|       \n04056|       // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É\n04057|       setForm(initialFormState);\n04058|       \n04059|       // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n04060|       setCalculations([]);\n04061|       setExpandedDetails({});\n04062|       setExpandedDebugInfo({});\n04063|       setSuggestions([]);\n04064|       setShowSuggestions(false);\n04065|       setActiveField('');\n04066|       \n04067|       console.log('–§–æ—Ä–º–∞ —Å–±—Ä–æ—à–µ–Ω–∞ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é');\n04068|     }\n04069|   };\n04070| \n04071|   // –ü–∞—Ä—Å–µ—Ä –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞\n04072|   const parseCalculationDetails = (calc: CalculationResult) => {\n04073|     console.log('üîç parseCalculationDetails –ø–æ–ª—É—á–∏–ª calc:', calc?.company || 'undefined');\n04074|     console.log('üîç calc.details:', calc?.details ? '—Å—É—â–µ—Å—Ç–≤—É–µ—Ç' : 'undefined/null');\n04075|     console.log('üîç typeof calc.details:', typeof calc?.details);\n04076|     \n04077|     const details: { service: string; description: string; price: number }[] = [];\n04078|     \n04079|     try {\n04080|       if (calc.company === '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏' && calc.details) {\n04081|         console.log('üîç –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–µ—Ç–∞–ª–µ–π –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π...');\n04082|       // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ (—É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –∏ —É–ø–∞–∫–æ–≤–∫—É)\n04083|       let basePrice = calc.details?.price || calc.price || 0;\n04084|       \n04085|       // –†–∞–∑–±–∏–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ\n04086|       let intercityPrice = 0;\n04087|       let derivalPrice = 0;\n04088|       let arrivalPrice = 0;\n04089|       let packagingPrice = 0;\n04090|       // packagingPremiums –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - –Ω–∞–¥–±–∞–≤–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ pkg.price\n04091|       let insurancePrice = 0;\n04092|       \n04093|       // –ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n04094|       if (calc.details?.intercity?.price) {\n04095|         intercityPrice = calc.details.intercity.price;\n04096|         details.push({\n04097|           service: '–ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞',\n04098|           description: `${form.fromCity} - ${form.toCity}`,\n04099|           price: intercityPrice\n04100|         });\n04101|       }\n04102|       \n04103|       // –ó–∞–±–æ—Ä –≥—Ä—É–∑–∞\n04104|       if (calc.details?.derival?.price) {\n04105|         derivalPrice = calc.details.derival.price;\n04106|         details.push({\n04107|           service: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n04108|           description: '–û—Ç –∞–¥—Ä–µ—Å–∞',\n04109|           price: derivalPrice\n04110|         });\n04111|       }\n04112|       \n04113|       // –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞\n04114|       if (calc.details?.arrival?.price) {\n04115|         arrivalPrice = calc.details.arrival.price;\n04116|         details.push({\n04117|           service: '–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞',\n04118|           description: '–î–æ –∞–¥—Ä–µ—Å–∞',\n04119|           price: arrivalPrice\n04120|         });\n04121|       }\n04122|       \n04123|       // –£–ø–∞–∫–æ–≤–∫–∞ (–Ω–∞–¥–±–∞–≤–∫–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ pkg.price, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏)\n04124|       if (form.needPackaging && calc.details?.packages) {\n04125|         Object.entries(calc.details?.packages || {}).forEach(([key, pkg]: [string, any]) => {\n04126|           if (pkg.price && pkg.price > 0) {\n04127|             // –í—ã—á–∏—Å–ª—è–µ–º –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É —É–ø–∞–∫–æ–≤–∫–∏ (–±–µ–∑ –Ω–∞–¥–±–∞–≤–æ–∫) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n04128|             let basePkgPrice = pkg.price;\n04129|             let totalPremiums = 0;\n04130|             \n04131|             if (pkg.premiumDetails && Array.isArray(pkg.premiumDetails)) {\n04132|               totalPremiums = pkg.premiumDetails.reduce((sum: number, premium: any) => \n04133|                 sum + (premium.value || 0), 0);\n04134|               basePkgPrice = pkg.price - totalPremiums;\n04135|             }\n04136|             \n04137|             packagingPrice += pkg.price; // –í –æ–±—â—É—é —Å—É–º–º—É –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–Ω—É—é —Ü–µ–Ω—É\n04138|             \n04139|             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–∑–æ–≤—É—é —É–ø–∞–∫–æ–≤–∫—É\n04140|             details.push({\n04141|               service: '–£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞',\n04142|               description: '–£–ø–∞–∫–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–ª–µ–∫—Å ¬´–æ–±—Ä–µ—à—ë—Ç–∫–∞ + –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è¬ª',\n04143|               price: basePkgPrice\n04144|             });\n04145|             \n04146|             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–¥–±–∞–≤–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ (–¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –∫ –æ–±—â–µ–π —Å—É–º–º–µ)\n04147|             if (pkg.premiumDetails && Array.isArray(pkg.premiumDetails)) {\n04148|               pkg.premiumDetails.forEach((premium: any) => {\n04149|                 if (premium.value && premium.value > 0) {\n04150|                   details.push({\n04151|                     service: '–ù–∞–¥–±–∞–≤–∫–∞ –∫ —É–ø–∞–∫–æ–≤–∫–µ',\n04152|                     description: premium.name || '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–¥–±–∞–≤–∫–∞',\n04153|                     price: premium.value\n04154|                   });\n04155|                 }\n04156|               });\n04157|             }\n04158|           }\n04159|         });\n04160|       }\n04161|       \n04162|       // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ\n04163|       if (form.needInsurance && calc.details?.insurance) {\n04164|         insurancePrice = calc.details.insurance;\n04165|         details.push({\n04166|           service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n04167|           description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n04168|           price: insurancePrice\n04169|         });\n04170|       }\n04171|       \n04172|       // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\n04173|       details.push({\n04174|         service: '–î–æ–ø.—É—Å–ª—É–≥–∏',\n04175|         description: '–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ —Å—Ç–∞—Ç—É—Å–µ –≥—Ä—É–∑–∞',\n04176|         price: 15\n04177|       });\n04178|       \n04179|       // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—É–º–º–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é, –¥–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞—Ç–æ–∫\n04180|       const calculatedSum = intercityPrice + derivalPrice + arrivalPrice + packagingPrice + insurancePrice + 15;\n04181|       const remainder = basePrice - calculatedSum;\n04182|       \n04183|       if (Math.abs(remainder) > 1) { // –ï—Å–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –±–æ–ª—å—à–µ 1 —Ä—É–±–ª—è\n04184|         details.push({\n04185|           service: remainder > 0 ? '–ü—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏' : '–°–∫–∏–¥–∫–∞',\n04186|           description: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–±–æ—Ä—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏',\n04187|           price: remainder\n04188|         });\n04189|       }\n04190|     } else if (calc.company === 'Nord Wheel' && calc.details) {\n04191|       // –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–ª—è Nord Wheel —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º\n04192|       if (calc.details.totalCost) {\n04193|         details.push({\n04194|           service: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏',\n04195|           description: '',\n04196|           price: calc.details.totalCost\n04197|         });\n04198|       }\n04199|       if (calc.details.deliveryCost) {\n04200|         details.push({\n04201|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–∑–∫–∏',\n04202|           description: '',\n04203|           price: calc.details.deliveryCost\n04204|         });\n04205|       }\n04206|       if (calc.details.terminalCost) {\n04207|         details.push({\n04208|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –º–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–≤–æ–∑–∫–∏',\n04209|           description: '',\n04210|           price: calc.details.terminalCost\n04211|         });\n04212|       }\n04213|       if (calc.details.pickupCost) {\n04214|         details.push({\n04215|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–±–æ—Ä–∞',\n04216|           description: '',\n04217|           price: calc.details.pickupCost\n04218|         });\n04219|       }\n04220|       if (calc.details.deliveryToDoorCost) {\n04221|         details.push({\n04222|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –¥–≤–µ—Ä–∏',\n04223|           description: '',\n04224|           price: calc.details.deliveryToDoorCost\n04225|         });\n04226|       }\n04227|       if (calc.details.additionalServices && calc.details.additionalServices > 0) {\n04228|         details.push({\n04229|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø.—É—Å–ª—É–≥',\n04230|           description: '',\n04231|           price: calc.details.additionalServices\n04232|         });\n04233|       }\n04234| \n04235|     } else if (calc.company === '–ü–≠–ö' && calc.details?.services) {\n04236|       // –î–ª—è –ü–≠–ö –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API\n04237|       calc.details.services.forEach((service: any) => {\n04238|         if (service.price > 0) {\n04239|           details.push({\n04240|             service: service.name || '–£—Å–ª—É–≥–∞ –ü–≠–ö',\n04241|             description: service.description || '',\n04242|             price: service.price\n04243|           });\n04244|         }\n04245|       });\n04246|     } else if (calc.company === '–°–î–≠–ö' && calc.details) {\n04247|       const cdekServiceNames: Record<string, string> = {\n04248|         'INSURANCE': '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n04249|         'HEAVY_CARGO': '–¢—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã–π –≥—Ä—É–∑',\n04250|         'DELIVERY_TO_DOOR': '–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –¥–≤–µ—Ä–∏',\n04251|         'PICKUP_FROM_SENDER': '–ó–∞–±–æ—Ä –æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è',\n04252|         'PACKAGE': '–£–ø–∞–∫–æ–≤–∫–∞',\n04253|         'TRYING_ON': '–ü—Ä–∏–º–µ—Ä–∫–∞ –Ω–∞ –¥–æ–º—É',\n04254|         'PART_DELIVERY': '–ß–∞—Å—Ç–∏—á–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞'\n04255|       };\n04256| \n04257|       if (calc.details.services && calc.details.services.length > 0) {\n04258|         calc.details.services.forEach((service: any) => {\n04259|           const serviceName = cdekServiceNames[service.code] || service.code || '–£—Å–ª—É–≥–∞ –°–î–≠–ö';\n04260|           const servicePrice = service.total_sum || service.sum || 0;\n04261|           \n04262|           if (servicePrice > 0) {\n04263|             details.push({\n04264|               service: serviceName,\n04265|               description: service.code === 'HEAVY_CARGO' \n04266|                 ? `–°–±–æ—Ä –∑–∞ –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–π –≥—Ä—É–∑ (—Ä–∞—Å—á–µ—Ç–Ω—ã–π –≤–µ—Å: ${(calc.details.weight_calc / 1000).toFixed(0)} –∫–≥)`\n04267|                 : service.code === 'INSURANCE'\n04268|                 ? `–û–±—ä—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${form.declaredValue?.toLocaleString() || 0} ‚ÇΩ`\n04269|                 : '',\n04270|               price: servicePrice\n04271|             });\n04272|           }\n04273|         });\n04274|         \n04275|         if (calc.details.delivery_sum && calc.details.total_sum) {\n04276|           details.push({\n04277|             service: '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',\n04278|             description: '',\n04279|             price: 0\n04280|           });\n04281|           details.push({\n04282|             service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏',\n04283|             description: calc.details.tariff_name || '–ü–µ—Ä–µ–≤–æ–∑–∫–∞',\n04284|             price: Math.round(calc.details.delivery_sum)\n04285|           });\n04286|           \n04287|           const additionalSum = calc.details.services.reduce((sum: number, s: any) => \n04288|             sum + (s.total_sum || s.sum || 0), 0\n04289|           );\n04290|           \n04291|           if (additionalSum > 0) {\n04292|             details.push({\n04293|               service: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏',\n04294|               description: '–î–æ–ø. —Å–±–æ—Ä—ã',\n04295|               price: Math.round(additionalSum)\n04296|             });\n04297|           }\n04298|           \n04299|           details.push({\n04300|             service: '–ò–¢–û–ì–û',\n04301|             description: '–ö –æ–ø–ª–∞—Ç–µ',\n04302|             price: Math.round(calc.details.total_sum)\n04303|           });\n04304|         }\n04305|       } else {\n04306|         details.push({\n04307|           service: '–¢–∞—Ä–∏—Ñ',\n04308|           description: calc.details.tariff_name || '–ù–µ —É–∫–∞–∑–∞–Ω',\n04309|           price: calc.price\n04310|         });\n04311|         \n04312|         if (calc.details.delivery_mode) {\n04313|           details.push({\n04314|             service: '–†–µ–∂–∏–º –¥–æ—Å—Ç–∞–≤–∫–∏',\n04315|             description: calc.details.delivery_mode,\n04316|             price: 0\n04317|           });\n04318|         }\n04319|       }\n04320|       \n04321|       if (calc.details.period_min && calc.details.period_max) {\n04322|         details.push({\n04323|           service: '–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏',\n04324|           description: `${calc.details.period_min}-${calc.details.period_max} –¥–Ω–µ–π`,\n04325|           price: 0\n04326|         });\n04327|       }\n04328|       \n04329|       if (calc.details.weight_calc) {\n04330|         details.push({\n04331|           service: '–†–∞—Å—á–µ—Ç–Ω—ã–π –≤–µ—Å',\n04332|           description: `${calc.details.weight_calc} –∫–≥`,\n04333|           price: 0\n04334|         });\n04335|       }\n04336|     } else if (calc.company === '–í–æ–∑–æ–≤–æ–∑' && calc.details?.service) {\n04337|       // ‚úÖ –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –í–æ–∑–æ–≤–æ–∑ –Ω–∞ –æ—Å–Ω–æ–≤–µ API –æ—Ç–≤–µ—Ç–∞\n04338|       const basePrice = calc.details.basePrice || 0;\n04339|       const finalPrice = calc.details.price || calc.price || 0;\n04340|       const totalDiscount = basePrice - finalPrice;\n04341|       \n04342|       // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∂–¥—É—é —É—Å–ª—É–≥—É —Å –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω–æ–π –∏ —Å–∫–∏–¥–∫–æ–π\n04343|       calc.details.service.forEach((service: any) => {\n04344|         const serviceDiscount = (service.basePrice || 0) - (service.price || 0);\n04345|         \n04346|         // –û—Å–Ω–æ–≤–Ω–∞—è —É—Å–ª—É–≥–∞\n04347|         details.push({\n04348|           service: service.name || '–£—Å–ª—É–≥–∞ –í–æ–∑–æ–≤–æ–∑',\n04349|           description: '',\n04350|           price: service.price || 0\n04351|         });\n04352|         \n04353|         // –°–∫–∏–¥–∫–∞ –Ω–∞ —É—Å–ª—É–≥—É (–µ—Å–ª–∏ –µ—Å—Ç—å)\n04354|         if (serviceDiscount > 0) {\n04355|           details.push({\n04356|             service: `–°–∫–∏–¥–∫–∞ –Ω–∞ ${service.name?.toLowerCase() || '—É—Å–ª—É–≥—É'}`,\n04357|             description: `${(service.basePrice || 0).toLocaleString()} - ${(service.price || 0).toLocaleString()}`,\n04358|             price: -serviceDiscount\n04359|           });\n04360|         }\n04361|       });\n04362|       \n04363|       // –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Å –æ–±—â–∏–º–∏ —Å–∫–∏–¥–∫–∞–º–∏\n04364|       if (totalDiscount > 0) {\n04365|         details.push({\n04366|           service: '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',\n04367|           description: '',\n04368|           price: 0\n04369|         });\n04370|         details.push({\n04371|           service: '–ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å',\n04372|           description: '–î–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–∫–∏–¥–æ–∫',\n04373|           price: basePrice\n04374|         });\n04375|         details.push({\n04376|           service: '–û–±—â–∏–µ —Å–∫–∏–¥–∫–∏',\n04377|           description: `–≠–∫–æ–Ω–æ–º–∏—è ${totalDiscount.toLocaleString()} ‚ÇΩ`,\n04378|           price: -totalDiscount\n04379|         });\n04380|         details.push({\n04381|           service: '–ò–¢–û–ì–û',\n04382|           description: '–ö –æ–ø–ª–∞—Ç–µ',\n04383|           price: finalPrice\n04384|         });\n04385|       }\n04386|     } else if (calc.company === '–ö–ò–¢' && calc.details?.services) {\n04387|       calc.details.services.forEach((service: any) => {\n04388|         details.push({\n04389|           service: service.name || '–£—Å–ª—É–≥–∞ –ö–ò–¢',\n04390|           description: service.code || '',\n04391|           price: service.price || 0\n04392|         });\n04393|       });\n04394|       \n04395|       if (calc.details.tariff_name) {\n04396|         details.push({\n04397|           service: '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ',\n04398|           description: '',\n04399|           price: 0\n04400|         });\n04401|         details.push({\n04402|           service: '–¢–∞—Ä–∏—Ñ',\n04403|           description: calc.details.tariff_name,\n04404|           price: 0\n04405|         });\n04406|         details.push({\n04407|           service: '–ò–¢–û–ì–û',\n04408|           description: calc.details.currency || 'RUB',\n04409|           price: calc.price\n04410|         });\n04411|       }\n04412|     } else {\n04413|       // –î–ª—è –¥—Ä—É–≥–∏—Ö –¢–ö - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\n04414|       details.push({\n04415|         service: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n04416|         description: `${form.fromCity} - ${form.toCity}`,\n04417|         price: calc.price\n04418|       });\n04419|       \n04420|       if (form.needInsurance && form.declaredValue > 0) {\n04421|         details.push({\n04422|           service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ',\n04423|           description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n04424|           price: Math.round(form.declaredValue * 0.02)\n04425|         });\n04426|       }\n04427|       \n04428|       if (form.needPackaging) {\n04429|         const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n04430|         details.push({\n04431|           service: '–£–ø–∞–∫–æ–≤–∫–∞',\n04432|           description: '',\n04433|           price: Math.round(totalWeight * 30)\n04434|         });\n04435|       }\n04436|     }\n04437|     \n04438|     return details;\n04439|   } catch (globalError) {\n04440|     console.error('‚ùå –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –û–®–ò–ë–ö–ê –≤ parseCalculationDetails:', globalError);\n04441|     console.error('‚ùå –°—Ç–µ–∫ –æ—à–∏–±–∫–∏:', globalError instanceof Error ? globalError.stack : '–ù–µ—Ç —Å—Ç–µ–∫–∞');\n04442|     console.log('‚ùå calc object:', calc);\n04443|     // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ\n04444|     return [{\n04445|       service: '–î–æ—Å—Ç–∞–≤–∫–∞',\n04446|       description: '–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å—á–µ—Ç–∞',\n04447|       price: calc?.price || 0\n04448|     }];\n04449|   }\n04450| };\n04451| \n04452|   // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –ø–æ–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–æ—Å—å (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏)\n04453|   if (!isLoaded) {\n04454|     return (\n04455|       <div className=\"min-h-screen bg-gray-900 text-white p-4 relative flex items-center justify-center\">\n04456|         <div className=\"text-center\">\n04457|           <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-400 mx-auto mb-4\"></div>\n04458|           <p className=\"text-blue-400\">–ó–∞–≥—Ä—É–∑–∫–∞...</p>\n04459|         </div>\n04460|       </div>\n04461|     );\n04462|   }\n04463| \n04464|   return (\n04465|     <div className=\"min-h-screen bg-gray-900 text-white p-4 relative\">\n04466|       <div className=\"max-w-7xl mx-auto\">\n04467|         <div className=\"flex items-center justify-between mb-3\">\n04468|           <h1 className=\"text-xl font-bold text-blue-400\">\n04469|             –ú–µ–∂–¥—É–≥–æ—Ä–æ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞ –õ–∞–≤—Å–∏—Ç\n04470|           </h1>\n04471|           \n04472|           {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è */}\n04473|           <div className=\"flex items-center gap-4\">\n04474|             {isFormChanged ? (\n04475|               <div className=\"flex items-center gap-2 text-yellow-400 text-sm\">\n04476|                 <div className=\"w-2 h-2 bg-yellow-400 rounded-full animate-pulse\"></div>\n04477|                 –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...\n04478|               </div>\n04479|             ) : lastSaveTime ? (\n04480|               <div className=\"flex items-center gap-2 text-green-400 text-sm\">\n04481|                 <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n04482|                 –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ {lastSaveTime.toLocaleTimeString()}\n04483|               </div>\n04484|             ) : hasStoredFormData() ? (\n04485|               <div className=\"flex items-center gap-2 text-blue-400 text-sm\">\n04486|                 <div className=\"w-2 h-2 bg-blue-400 rounded-full\"></div>\n04487|                 –î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã\n04488|               </div>\n04489|             ) : null}\n04490|             \n04491|             {/* –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö */}\n04492|             {hasStoredFormData() && (\n04493|               <Button\n04494|                 onClick={() => {\n04495|                   if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã?')) {\n04496|                     clearFormData();\n04497|                     setForm(initialFormState);\n04498|                     setLastSaveTime(null);\n04499|                     setIsFormChanged(false);\n04500|                   }\n04501|                 }}\n04502|                 variant=\"outline\"\n04503|                 size=\"sm\"\n04504|                 className=\"border-red-500 text-red-400 hover:bg-red-900/20\"\n04505|               >\n04506|                 <Trash2 className=\"h-3 w-3 mr-1\" />\n04507|                 –û—á–∏—Å—Ç–∏—Ç—å\n04508|               </Button>\n04509|             )}\n04510|           </div>\n04511|         </div>\n04512|         \n04513|         {/* –ö–Ω–æ–ø–∫–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ */}\n04514|         <div className=\"flex justify-end gap-2 mb-4\">\n04515|           <Button \n04516|             onClick={() => window.open('/diagnostic?tab=api', '_blank')}\n04517|             variant=\"outline\" \n04518|             className=\"border-green-500 text-green-400 hover:bg-green-900/20\"\n04519|           >\n04520|             <Settings className=\"h-4 w-4 mr-2\" />\n04521|             –í—Å–µ API\n04522|           </Button>\n04523|           <Button \n04524|             onClick={() => window.open('/diagnostic?tab=docs', '_blank')}\n04525|             variant=\"outline\" \n04526|             className=\"border-purple-500 text-purple-400 hover:bg-purple-900/20\"\n04527|           >\n04528|             <Package2 className=\"h-4 w-4 mr-2\" />\n04529|             –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è\n04530|           </Button>\n04531|           <Button \n04532|             onClick={() => window.open('/diagnostic', '_blank')}\n04533|             variant=\"outline\" \n04534|             className=\"border-blue-500 text-blue-400 hover:bg-blue-900/20\"\n04535|           >\n04536|             <Settings className=\"h-4 w-4 mr-2\" />\n04537|             –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞\n04538|           </Button>\n04539|         </div>\n04540|         \n04541|         <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-3 h-[85vh]\">\n04542|           {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - —Ñ–æ—Ä–º–∞ */}\n04543|           <div className=\"space-y-2 overflow-y-auto pr-2\">\n04544|             {/* –ö–∞—Ç–∞–ª–æ–≥ –º–µ–±–µ–ª–∏ */}\n04545|             <Card className=\"bg-gray-800 border-gray-700\">\n04546|               <CardHeader className=\"pb-2\">\n04547|                 <CardTitle className=\"text-white flex items-center gap-2 text-sm\">\n04548|                   <Package2 className=\"h-3 w-3\" />\n04549|                   –ö–∞—Ç–∞–ª–æ–≥ –º–µ–±–µ–ª–∏\n04550|                 </CardTitle>\n04551|               </CardHeader>\n04552|               <CardContent className=\"space-y-2\">\n04553|                 {/* –ü–æ–∏—Å–∫ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ */}\n04554|                 <ProductSearch \n04555|                   onProductAdd={handleProductAdd}\n04556|                   disabled={calculating}\n04557|                 />\n04558|                 \n04559|                 {/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ */}\n04560|                 <ProductManager\n04561|                   products={form.selectedProducts}\n04562|                   onQuantityChange={handleProductQuantityChange}\n04563|                   onProductRemove={handleProductRemove}\n04564|                   disabled={calculating}\n04565|                 />\n04566|               </CardContent>\n04567|             </Card>\n04568| \n04569|             {/* –ì—Ä—É–∑—ã */}\n04570|             <Card className=\"bg-gray-800 border-gray-700\">\n04571|               <CardHeader className=\"pb-2\">\n04572|                 <CardTitle className=\"text-white flex items-center gap-2 text-sm\">\n04573|                   <Truck className=\"h-3 w-3\" />\n04574|                   –ì—Ä—É–∑—ã\n04575|                 </CardTitle>\n04576|               </CardHeader>\n04577|               <CardContent className=\"space-y-2\">\n04578|                 {groupCargosForDisplay(form.cargos).map((group, groupIndex) => (\n04579|                    <div key={`group_${groupIndex}`} className=\"border border-gray-600 rounded p-2\">\n04580|                     <div className=\"flex justify-between items-center mb-2\">\n04581|                       <h4 className=\"text-sm font-medium text-white\">\n04582|                         {group.isEmpty ? (\n04583|                           `–ì—Ä—É–∑ ‚Ññ${group.indices[0] + 1}`\n04584|                         ) : group.quantity === 1 ? (\n04585|                           `–ì—Ä—É–∑ ‚Ññ${group.indices[0] + 1}`\n04586|                         ) : (\n04587|                           `–ì—Ä—É–∑ ‚Ññ${group.indices[0] + 1} - ${group.quantity} –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞`\n04588|                         )}\n04589|                       </h4>\n04590|                       {form.cargos.length > 1 && group.quantity === 1 && (\n04591|                         <Button\n04592|                           variant=\"destructive\"\n04593|                           size=\"sm\"\n04594|                           onClick={() => removeCargo(form.cargos[group.indices[0]].id)}\n04595|                           className=\"h-6 text-xs\"\n04596|                         >\n04597|                           –£–¥–∞–ª–∏—Ç—å\n04598|                         </Button>\n04599|                       )}\n04600|                       {group.quantity > 1 && (\n04601|                         <Badge variant=\"secondary\" className=\"text-xs\">\n04602|                           {group.quantity} —à—Ç.\n04603|                         </Badge>\n04604|                       )}\n04605|                     </div>\n04606|                     \n04607|                     {group.isEmpty || group.quantity === 1 ? (\n04608|                       // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞ –¥–ª—è –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤ –∏–ª–∏ –µ–¥–∏–Ω–∏—á–Ω—ã—Ö\n04609|                       <div className=\"grid grid-cols-2 gap-2\">\n04610|                         <div>\n04611|                           <Label className=\"text-white text-xs\">–î–ª–∏–Ω–∞ (—Å–º)</Label>\n04612|                           <Input\n04613|                             type=\"number\"\n04614|                             value={form.cargos[group.indices[0]].length || ''}\n04615|                             onChange={(e) => updateCargo(form.cargos[group.indices[0]].id, 'length', Number(e.target.value))}\n04616|                             className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n04617|                           />\n04618|                         </div>\n04619|                         <div>\n04620|                           <Label className=\"text-white text-xs\">–®–∏—Ä–∏–Ω–∞ (—Å–º)</Label>\n04621|                           <Input\n04622|                             type=\"number\"\n04623|                             value={form.cargos[group.indices[0]].width || ''}\n04624|                             onChange={(e) => updateCargo(form.cargos[group.indices[0]].id, 'width', Number(e.target.value))}\n04625|                             className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n04626|                           />\n04627|                         </div>\n04628|                         <div>\n04629|                           <Label className=\"text-white text-xs\">–í—ã—Å–æ—Ç–∞ (—Å–º)</Label>\n04630|                           <Input\n04631|                             type=\"number\"\n04632|                             value={form.cargos[group.indices[0]].height || ''}\n04633|                             onChange={(e) => updateCargo(form.cargos[group.indices[0]].id, 'height', Number(e.target.value))}\n04634|                             className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n04635|                           />\n04636|                         </div>\n04637|                         <div>\n04638|                           <Label className=\"text-white text-xs\">–í–µ—Å (–∫–≥)</Label>\n04639|                           <Input\n04640|                             type=\"number\"\n04641|                             value={form.cargos[group.indices[0]].weight || ''}\n04642|                             onChange={(e) => updateCargo(form.cargos[group.indices[0]].id, 'weight', Number(e.target.value))}\n04643|                             className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n04644|                           />\n04645|                         </div>\n04646|                       </div>\n04647|                     ) : (\n04648|                       // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –≥—Ä—É–ø–ø\n04649|                       <div className=\"grid grid-cols-2 gap-2 text-sm text-gray-300\">\n04650|                         <div>–î–ª–∏–Ω–∞: {group.length} —Å–º</div>\n04651|                         <div>–®–∏—Ä–∏–Ω–∞: {group.width} —Å–º</div>\n04652|                         <div>–í—ã—Å–æ—Ç–∞: {group.height} —Å–º</div>\n04653|                         <div>–í–µ—Å: {group.weight} –∫–≥</div>\n04654|                         <div className=\"col-span-2 text-xs text-blue-300 mt-1\">\n04655|                           –û–±—â–∏–π –≤–µ—Å: {(group.weight * group.quantity).toFixed(1)} –∫–≥, \n04656|                           –æ–±—ä–µ–º: {((group.length * group.width * group.height * group.quantity) / 1000000).toFixed(3)} –º¬≥\n04657|                         </div>\n04658|                       </div>\n04659|                     )}\n04660|                   </div>\n04661|                 ))}\n04662|                  <Button onClick={addCargo} className=\"w-full h-7 text-xs\" variant=\"outline\">\n04663|                   <Plus className=\"h-3 w-3 mr-1\" />\n04664|                   –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–∑\n04665|                 </Button>\n04666|               </CardContent>\n04667|             </Card>\n04668| \n04669|             {/* –ú–∞—Ä—à—Ä—É—Ç */}\n04670|             <Card className=\"bg-gray-800 border-gray-700\">\n04671|               <CardHeader className=\"pb-2\">\n04672|                 <CardTitle className=\"text-white flex items-center gap-2 text-sm\">\n04673|                   <Map className=\"h-3 w-3\" />\n04674|                   –ú–∞—Ä—à—Ä—É—Ç\n04675|                 </CardTitle>\n04676|               </CardHeader>\n04677|               <CardContent className=\"space-y-2\">\n04678|                 {/* –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */}\n04679|                 <div className=\"space-y-2\">\n04680|                   <Label className=\"text-sm font-medium text-white\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</Label>\n04681|                   <div className=\"flex gap-3 flex-wrap\">\n04682|                     <label className=\"flex items-center space-x-1\">\n04683|                       <input\n04684|                         type=\"radio\"\n04685|                         name=\"fromDelivery\"\n04686|                         checked={form.fromTerminal}\n04687|                         onChange={() => setForm(prev => ({ ...prev, fromTerminal: true, fromAddressDelivery: false, fromLavsiteWarehouse: false }))}\n04688|                       />\n04689|                       <span className=\"text-white text-xs\">–û—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞</span>\n04690|                     </label>\n04691|                     <label className=\"flex items-center space-x-1\">\n04692|                       <input\n04693|                         type=\"radio\"\n04694|                         name=\"fromDelivery\"\n04695|                         checked={form.fromAddressDelivery && !form.fromLavsiteWarehouse}\n04696|                         onChange={() => setForm(prev => ({ ...prev, fromTerminal: false, fromAddressDelivery: true, fromLavsiteWarehouse: false }))}\n04697|                       />\n04698|                       <span className=\"text-white text-xs\">–û—Ç –∞–¥—Ä–µ—Å–∞</span>\n04699|                     </label>\n04700|                     <label className=\"flex items-center space-x-1\">\n04701|                       <Checkbox\n04702|                         id=\"lavsiteWarehouse\"\n04703|                         checked={form.fromLavsiteWarehouse}\n04704|                         onCheckedChange={handleLavsiteWarehouseChange}\n04705|                       />\n04706|                       <span className=\"text-white text-xs cursor-pointer\">–°–æ —Å–∫–ª–∞–¥–∞ –õ–∞–≤—Å–∏—Ç</span>\n04707|                     </label>\n04708|                   </div>\n04709|                   \n04710|                   <div>\n04711|                     <Label className=\"text-white text-xs\">–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Label>\n04712|                     <Input\n04713|                       value={form.fromCity}\n04714|                       onChange={(e) => !form.fromLavsiteWarehouse && handleAddressChange('fromCity', e.target.value, e.target)}\n04715|                       placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥\"\n04716|                       disabled={form.fromLavsiteWarehouse}\n04717|                       className={`bg-gray-700 border-gray-600 h-7 text-white text-xs ${form.fromLavsiteWarehouse ? 'opacity-50 cursor-not-allowed' : ''}`}\n04718|                     />\n04719|                   </div>\n04720|                   \n04721|                   {form.fromAddressDelivery && (\n04722|                     <div>\n04723|                       <Label className=\"text-white text-xs\">–ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Label>\n04724|                       <Input\n04725|                         value={form.fromAddress}\n04726|                         onChange={(e) => !form.fromLavsiteWarehouse && handleAddressChange('fromAddress', e.target.value, e.target)}\n04727|                         placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å\"\n04728|                         disabled={form.fromLavsiteWarehouse}\n04729|                         className={`bg-gray-700 border-gray-600 h-7 text-white text-xs ${form.fromLavsiteWarehouse ? 'opacity-50 cursor-not-allowed' : ''}`}\n04730|                       />\n04731|                     </div>\n04732|                   )}\n04733|                 </div>\n04734| \n04735|                 {/* –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ */}\n04736|                 <div className=\"space-y-2\">\n04737|                   <Label className=\"text-sm font-medium text-white\">–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ</Label>\n04738|                   <div className=\"flex gap-3 flex-wrap\">\n04739|                     <label className=\"flex items-center space-x-1\">\n04740|                       <input\n04741|                         type=\"radio\"\n04742|                         name=\"toDelivery\"\n04743|                         checked={form.toTerminal}\n04744|                         onChange={() => setForm(prev => ({ ...prev, toTerminal: true, toAddressDelivery: false }))}\n04745|                       />\n04746|                       <span className=\"text-white text-xs\">–î–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞</span>\n04747|                     </label>\n04748|                     <label className=\"flex items-center space-x-1\">\n04749|                       <input\n04750|                         type=\"radio\"\n04751|                         name=\"toDelivery\"\n04752|                         checked={form.toAddressDelivery}\n04753|                         onChange={() => setForm(prev => ({ ...prev, toTerminal: false, toAddressDelivery: true }))}\n04754|                       />\n04755|                       <span className=\"text-white text-xs\">–î–æ –∞–¥—Ä–µ—Å–∞</span>\n04756|                     </label>\n04757|                   </div>\n04758|                   \n04759|                   <div>\n04760|                     <Label className=\"text-white text-xs\">–ì–æ—Ä–æ–¥ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</Label>\n04761|                     <Input\n04762|                       value={form.toCity}\n04763|                       onChange={(e) => handleAddressChange('toCity', e.target.value, e.target)}\n04764|                       placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥\"\n04765|                       className=\"bg-gray-700 border-gray-600 h-7 text-white text-xs\"\n04766|                     />\n04767|                   </div>\n04768|                   \n04769|                   {form.toAddressDelivery && (\n04770|                     <div>\n04771|                       <Label className=\"text-white text-xs\">–ê–¥—Ä–µ—Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è</Label>\n04772|                       <Input\n04773|                         value={form.toAddress}\n04774|                         onChange={(e) => handleAddressChange('toAddress', e.target.value, e.target)}\n04775|                         placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å\"\n04776|                         className=\"bg-gray-700 border-gray-600 h-7 text-white text-xs\"\n04777|                       />\n04778|                     </div>\n04779|                   )}\n04780|                 </div>\n04781| \n04782|                 <div>\n04783|                   <Label className=\"text-white text-xs\">–û–±—ä—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (—Ä—É–±.)</Label>\n04784|                   <Input\n04785|                     type=\"number\"\n04786|                     value={form.declaredValue || ''}\n04787|                     onChange={(e) => setForm(prev => ({ ...prev, declaredValue: Number(e.target.value) }))}\n04788|                     className=\"bg-gray-700 border-gray-600 h-7 text-white text-xs\"\n04789|                   />\n04790|                 </div>\n04791|                 \n04792|                 <div className=\"space-y-2\">\n04793|                   <div className=\"flex items-center space-x-2\">\n04794|                     <Checkbox\n04795|                       id=\"packaging\"\n04796|                       checked={form.needPackaging}\n04797|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needPackaging: checked as boolean }))}\n04798|                       className=\"border-white data-[state=checked]:bg-white data-[state=checked]:text-black\"\n04799|                     />\n04800|                     <Label htmlFor=\"packaging\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è —É–ø–∞–∫–æ–≤–∫–∞</Label>\n04801|                   </div>\n04802|                   \n04803|                   <div className=\"flex items-center space-x-2\">\n04804|                     <Checkbox\n04805|                       id=\"insurance\"\n04806|                       checked={form.needInsurance}\n04807|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needInsurance: checked as boolean }))}\n04808|                       className=\"border-white data-[state=checked]:bg-white data-[state=checked]:text-black\"\n04809|                     />\n04810|                     <Label htmlFor=\"insurance\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞</Label>\n04811|                   </div>\n04812|                   \n04813|                   <div className=\"flex items-center space-x-2\">\n04814|                     <Checkbox\n04815|                       id=\"loading\"\n04816|                       checked={form.needLoading}\n04817|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needLoading: checked as boolean }))}\n04818|                       className=\"border-white data-[state=checked]:bg-white data-[state=checked]:text-black\"\n04819|                     />\n04820|                     <Label htmlFor=\"loading\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≥—Ä—É–∑–∫–∞/—Ä–∞–∑–≥—Ä—É–∑–∫–∞</Label>\n04821|                   </div>\n04822|                   \n04823|                   <div className=\"flex items-center space-x-2\">\n04824|                     <Checkbox\n04825|                       id=\"carry\"\n04826|                       checked={form.needCarry}\n04827|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needCarry: checked as boolean }))}\n04828|                       className=\"border-white data-[state=checked]:bg-white data-[state=checked]:text-black\"\n04829|                     />\n04830|                     <Label htmlFor=\"carry\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—ä–µ–º</Label>\n04831|                   </div>\n04832|                   \n04833|                   {form.needCarry && (\n04834|                     <div className=\"ml-6 space-y-2 border-l-2 border-gray-600 pl-3\">\n04835|                       <div>\n04836|                         <Label className=\"text-white text-xs\">–≠—Ç–∞–∂</Label>\n04837|                         <Input\n04838|                           type=\"number\"\n04839|                           value={form.floor}\n04840|                           onChange={(e) => setForm(prev => ({ ...prev, floor: Number(e.target.value) }))}\n04841|                           className=\"bg-gray-700 border-gray-600 h-7 text-white text-xs\"\n04842|                         />\n04843|                       </div>\n04844|                       <div className=\"flex items-center space-x-2\">\n04845|                         <Checkbox\n04846|                           id=\"freightLift\"\n04847|                           checked={form.hasFreightLift}\n04848|                           onCheckedChange={(checked) => setForm(prev => ({ ...prev, hasFreightLift: checked as boolean }))}\n04849|                         />\n04850|                         <Label htmlFor=\"freightLift\" className=\"text-white text-xs\">–ù–∞–ª–∏—á–∏–µ –≥—Ä—É–∑–æ–≤–æ–≥–æ –ª–∏—Ñ—Ç–∞</Label>\n04851|                       </div>\n04852|                     </div>\n04853|                   )}\n04854|                 </div>\n04855|                 \n04856|                 <div className=\"space-y-2\">\n04857|                   <Button \n04858|                     onClick={handleCalculate} \n04859|                     className=\"w-full bg-blue-600 hover:bg-blue-700 h-7 text-xs\" \n04860|                     disabled={calculating}\n04861|                   >\n04862|                     {calculating ? '–†–∞—Å—á–µ—Ç...' : '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å'}\n04863|                   </Button>\n04864|                   \n04865|                   <Button \n04866|                     onClick={handleReset} \n04867|                     variant=\"outline\" \n04868|                     className=\"w-full h-7 text-xs text-black border-gray-600 hover:bg-gray-700 hover:text-white\" \n04869|                     disabled={calculating}\n04870|                   >\n04871|                     –°–±—Ä–æ—Å–∏—Ç—å —Ä–∞—Å—á–µ—Ç\n04872|                   </Button>\n04873|                 </div>\n04874|               </CardContent>\n04875|             </Card>\n04876|           </div>\n04877| \n04878|           {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã */}\n04879|           <div className=\"space-y-2 overflow-y-auto\">\n04880|             {calculations.length > 0 && (\n04881|                  <div className=\"space-y-2\">\n04882|                 <div className=\"flex justify-between items-center\">\n04883|                   <h2 className=\"text-lg font-bold text-blue-400\">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>\n04884|                   <Button \n04885|                     onClick={exportToPDF} \n04886|                     variant=\"outline\" \n04887|                     size=\"sm\" \n04888|                     className=\"h-7 text-xs border-blue-500 text-blue-400 hover:bg-blue-900/20 print:hidden\"\n04889|                   >\n04890|                     –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF\n04891|                   </Button>\n04892|                 </div>\n04893|                 \n04894|                 {calculations.map((calc, index) => (\n04895|                    <Card key={index} className=\"bg-gray-800 border-gray-700 text-xs\">\n04896|                      <CardHeader className=\"pb-1\">\n04897|                       <div className=\"flex justify-between items-center\">\n04898|                          <CardTitle className=\"text-white flex items-center gap-2 text-xs\">\n04899|                            <Building2 className=\"h-3 w-3\" />\n04900|                           {calc.company}\n04901|                         </CardTitle>\n04902|                         {calc.error ? (\n04903|                           <Badge variant=\"destructive\" className=\"text-xs\">–û—à–∏–±–∫–∞</Badge>\n04904|                         ) : (\n04905|                           <Badge variant=\"default\" className=\"bg-green-600 text-xs\">\n04906|                             {calc.price.toLocaleString()} ‚ÇΩ\n04907|                           </Badge>\n04908|                         )}\n04909|                       </div>\n04910|                     </CardHeader>\n04911|                     <CardContent className=\"pt-0\">\n04912|                       <div className=\"space-y-2\">\n04913|                         {calc.error ? (\n04914|                           <div className=\"space-y-2\">\n04915|                             <Alert className=\"border-red-600\">\n04916|                               <AlertDescription className=\"text-white text-xs\">{calc.error}</AlertDescription>\n04917|                             </Alert>\n04918|                             {calc.price > 0 && (\n04919|                               <>\n04920|                                 <p className=\"text-white text-xs\"><strong>–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {calc.price.toLocaleString()} ‚ÇΩ</p>\n04921|                                 <p className=\"text-white text-xs\"><strong>–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Å—Ä–æ–∫:</strong> {calc.days} –¥–Ω–µ–π</p>\n04922|                               </>\n04923|                             )}\n04924|                           </div>\n04925|                         ) : (\n04926|                           <>\n04927|                             <p className=\"text-white text-xs\"><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {calc.price.toLocaleString()} ‚ÇΩ</p>\n04928|                             <p className=\"text-white text-xs\"><strong>–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:</strong> {calc.days} –¥–Ω–µ–π</p>\n04929|                           </>\n04930|                         )}\n04931|                         \n04932|                         <div className=\"flex gap-2 mt-2\">\n04933|                           {!calc.error && (\n04934|                             <Button\n04935|                               variant=\"outline\"\n04936|                               size=\"sm\"\n04937|                               onClick={() => toggleDetails(calc.company)}\n04938|                               className=\"h-6 text-xs\"\n04939|                             >\n04940|                               {expandedDetails[calc.company] ? '–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ'}\n04941|                             </Button>\n04942|                           )}\n04943|                           <Button\n04944|                             variant=\"outline\"\n04945|                             size=\"sm\"\n04946|                             onClick={() => toggleDebugInfo(calc.company)}\n04947|                             className=\"h-6 text-xs\"\n04948|                           >\n04949|                             {expandedDebugInfo[calc.company] ? '–°–∫—Ä—ã—Ç—å –æ—Ç–ª–∞–¥–∫—É' : '–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'}\n04950|                           </Button>\n04951|                         </div>\n04952|                         \n04953|                         {/* –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ */}\n04954|                         {!calc.error && (\n04955|                           <Collapsible open={expandedDetails[calc.company]}>\n04956|                             <CollapsibleContent className=\"mt-2\">\n04957|                               <div className=\"bg-gray-900 p-3 rounded text-xs\">\n04958|                                 <h4 className=\"font-bold mb-2 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞:</h4>\n04959|                                 {(() => {\n04960|                                   const details = parseCalculationDetails(calc);\n04961|                                   const totalPrice = details.reduce((sum, detail) => sum + detail.price, 0);\n04962|                                   \n04963|                                   return (\n04964|                                     <div className=\"space-y-1\">\n04965|                                       {details.map((detail, idx) => (\n04966|                                         <div key={idx} className=\"flex justify-between text-white\">\n04967|                                           <div>\n04968|                                             <div className=\"font-medium\">{detail.service}</div>\n04969|                                             {detail.description && (\n04970|                                               <div className=\"text-gray-400 text-xs\">{detail.description}</div>\n04971|                                             )}\n04972|                                           </div>\n04973|                                           <div className=\"font-medium\">{detail.price.toLocaleString()} ‚ÇΩ</div>\n04974|                                         </div>\n04975|                                       ))}\n04976|                                     </div>\n04977|                                   );\n04978|                                 })()}\n04979|                               </div>\n04980|                             </CollapsibleContent>\n04981|                           </Collapsible>\n04982|                         )}\n04983|                         \n04984|                         {/* –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ */}\n04985|                         <Collapsible open={expandedDebugInfo[calc.company]}>\n04986|                           <CollapsibleContent className=\"mt-2\">\n04987|                             <div className=\"bg-gray-900 p-3 rounded text-xs\">\n04988|                               <h4 className=\"font-bold mb-2 text-white\">–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>\n04989|                               \n04990|                               {calc.apiUrl && (\n04991|                                 <div className=\"mb-3\">\n04992|                                   <h5 className=\"font-bold mb-1 text-white\">–ó–∞–ø—Ä–æ—Å –∫ API:</h5>\n04993|                                   <p className=\"text-gray-300 break-all text-xs\">URL: {calc.apiUrl}</p>\n04994|                                 </div>\n04995|                               )}\n04996|                               \n04997|                               {calc.sessionId && (\n04998|                                 <div className=\"mb-3\">\n04999|                                   <h5 className=\"font-bold mb-1 text-white\">Session ID:</h5>\n05000|                                   <p className=\"text-gray-300 text-xs\">{calc.sessionId}</p>\n05001|                                 </div>\n05002|                               )}\n05003|                               \n05004|                               {calc.requestData && (\n05005|                                 <div className=\"mb-3\">\n05006|                                   <h5 className=\"font-bold mb-1 text-white\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:</h5>\n05007|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05008|                                     {JSON.stringify(calc.requestData, null, 2)}\n05009|                                   </pre>\n05010|                                 </div>\n05011|                               )}\n05012|                               \n05013|                               {calc.responseData && (\n05014|                                 <div className=\"mb-3\">\n05015|                                   <h5 className=\"font-bold mb-1 text-white\">–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:</h5>\n05016|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05017|                                     {JSON.stringify(calc.responseData, null, 2)}\n05018|                                   </pre>\n05019|                                 </div>\n05020|                               )}\n05021|                               \n05022|                               {calc.details && (\n05023|                                 <div className=\"mb-3\">\n05024|                                   <h5 className=\"font-bold mb-1 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ (JSON):</h5>\n05025|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05026|                                     {JSON.stringify(calc.details, null, 2)}\n05027|                                   </pre>\n05028|                                 </div>\n05029|                               )}\n05030|                               \n05031|                               {calc.error && (\n05032|                                 <div className=\"mb-3\">\n05033|                                   <h5 className=\"font-bold mb-1 text-red-400\">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ:</h5>\n05034|                                   <p className=\"text-red-300 text-xs\">{calc.error}</p>\n05035|                                 </div>\n05036|                               )}\n05037|                             </div>\n05038|                           </CollapsibleContent>\n05039|                         </Collapsible>\n05040|                       </div>\n05041|                     </CardContent>\n05042|                   </Card>\n05043|                 ))}\n05044|               </div>\n05045|             )}\n05046| \n05047|             {/* –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¢–ö - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º—ã–π */}\n05048|             <Card className=\"bg-gray-800 border-gray-700\">\n05049|               <CardHeader className=\"pb-2\">\n05050|                 <CardTitle className=\"text-white text-sm\">\n05051|                   –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ ({COMPANIES_BASE.length})\n05052|                 </CardTitle>\n05053|               </CardHeader>\n05054|               <CardContent>\n05055|                 <div className=\"grid grid-cols-2 gap-2\">\n05056|                   {COMPANIES_BASE.map((company, index) => {\n05057|                     const isConnected = apiStatus[company.apiKey as keyof typeof apiStatus] === '–ø–æ–¥–∫–ª—é—á–µ–Ω–æ';\n05058|                     const statusText = apiStatus[company.apiKey as keyof typeof apiStatus];\n05059|                     const isEnabled = enabledCompanies[company.apiKey];\n05060|                     \n05061|                     // –û—Ç–ª–∞–¥–∫–∞ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 3 –∫–æ–º–ø–∞–Ω–∏–π\n05062|                     if (index < 3) {\n05063|                       console.log(`üîç –ö–æ–º–ø–∞–Ω–∏—è ${index}: ${company.name}, apiKey: ${company.apiKey}, isEnabled: ${isEnabled}, statusText: ${statusText}`);\n05064|                     }\n05065|                     \n05066|                     return (\n05067|                       <div key={index} className=\"flex items-center justify-between p-1.5 bg-gray-700 rounded\">\n05068|                         <div className=\"flex items-center gap-2\">\n05069|                           <span className=\"text-lg\">{company.logo}</span>\n05070|                           <div>\n05071|                             <p className=\"font-medium text-white text-[10px] leading-tight\">{company.name}</p>\n05072|                             <Badge \n05073|                               variant={isConnected ? \"default\" : \"destructive\"} \n05074|                               className=\"text-[9px] py-0 px-1\"\n05075|                             >\n05076|                               {isConnected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–∞' : statusText === '–ø—Ä–æ–≤–µ—Ä–∫–∞...' ? '–ü—Ä–æ–≤–µ—Ä–∫–∞...' : '–û—à–∏–±–∫–∞'}\n05077|                             </Badge>\n05078|                           </div>\n05079|                         </div>\n05080|                         <div className=\"flex items-center gap-2\">\n05081|                           <span className=\"text-[9px] text-gray-300\">\n05082|                             {isEnabled ? '–í–∫–ª' : '–í—ã–∫–ª'}\n05083|                           </span>\n05084|                           <Switch\n05085|                             checked={isEnabled}\n05086|                             onCheckedChange={(checked) => {\n05087|                               setEnabledCompanies(prev => ({\n05088|                                 ...prev,\n05089|                                 [company.apiKey]: checked\n05090|                               }));\n05091|                             }}\n05092|                             disabled={!isConnected}\n05093|                           />\n05094|                         </div>\n05095|                       </div>\n05096|                     );\n05097|                   })}\n05098|                 </div>\n05099|               </CardContent>\n05100|             </Card>\n05101| \n05102|             {/* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n05103|             {calculations.length > 0 && (\n05104|               <TruckVisualization \n05105|                 cargos={form.cargos.map(cargo => ({\n05106|                   id: cargo.id,\n05107|                   length: cargo.length * 10, // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05108|                   width: cargo.width * 10,   // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05109|                   height: cargo.height * 10, // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05110|                   weight: cargo.weight,\n05111|                   productName: form.selectedProducts?.find(p => \n05112|                     p.cargoIndexes.includes(form.cargos.indexOf(cargo))\n05113|                   )?.product.name\n05114|                 }))}\n05115|                 isVisible={true}\n05116|               />\n05117|             )}\n05118|           </div>\n05119|         </div>\n05120|       </div>\n05121| \n05122|       {/* –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ */}\n05123|       {showSuggestions && suggestions.length > 0 && (\n05124|         <div \n05125|           className=\"fixed z-50 bg-gray-800 border border-gray-700 rounded-md shadow-lg max-w-sm w-full max-h-60 overflow-y-auto\"\n05126|           style={{\n05127|             top: suggestionPosition.top,\n05128|             left: suggestionPosition.left\n05129|           }}\n05130|         >\n05131|           <div className=\"p-1\">\n05132|             {suggestions.map((suggestion, index) => (\n05133|               <div\n05134|                 key={index}\n05135|                 className=\"p-2 hover:bg-gray-700 cursor-pointer text-xs text-white rounded transition-colors\"\n05136|                 onClick={() => selectSuggestion(suggestion)}\n05137|               >\n05138|                 {suggestion.value}\n05139|               </div>\n05140|             ))}\n05141|           </div>\n05142|         </div>\n05143|       )}\n05144|     </div>\n05145|   );\n05146| }\n</file>",
    "title": "app/page.tsx",
    "metadata": {
      "preview": "      }\n      \n      const results = await Promise.all(calculationFunctions);\n      \n      // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ\n      const sortedResults = results\n        .filter(result => !result.error)\n        .sort((a, b) => a.price - b.price)\n        .concat(results.filter(result => result.error));\n      \n      setCalculations(sortedResults);\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ:', error);\n    } finally {\n      setCalculating(false);\n    }\n  };\n\n  const exportToPDF = () => {\n    if (typeof window !== 'undefined') {"
    },
    "time": {
      "start": 1763945664235,
      "end": 1763945664240
    }
  }
}