{
  "id": "prt_b2306ad9d001bE6UZGQbP35QEN",
  "sessionID": "ses_4dcfe2ec6ffeGyMv3tDAZ25rFC",
  "messageID": "msg_b23069e60001tYp2OjsezZ65Ma",
  "type": "tool",
  "callID": "toolu_01PV2fXxJ7SMgyjwdGJcRmm1",
  "tool": "edit",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/lib/dellin-packaging-utils.ts",
      "newString": "/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n */\nexport async function getDellinFreightUid(): Promise<string | null> {\n  try {\n    console.log('üì¶ –ó–∞–ø—Ä–æ—Å UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" —á–µ—Ä–µ–∑ API...');\n    \n    const response = await fetch('/api/dellin-freight', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', response.status, response.statusText);\n      return null;\n    }\n\n    const result = await response.json();\n    \n    if (!result.success || !result.data || !Array.isArray(result.data)) {\n      console.error('‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', result);\n      return null;\n    }\n\n    console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${result.data.length}`);\n    console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'API'}`);\n    \n    // –ò—â–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ \"–ú–µ–±–µ–ª—å\" (–Ω–µ \"–ú–µ–±–µ–ª—å–Ω—ã–µ —Ñ–∞—Å–∞–¥—ã\" –∏–ª–∏ \"–ú–µ–±–µ–ª—å–Ω–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞\")\n    const exactMatch = result.data.find((freight: DellinFreight) => \n      freight.name && freight.name.trim().toLowerCase() === '–º–µ–±–µ–ª—å'\n    );\n    \n    if (exactMatch && exactMatch.uid) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${exactMatch.uid}`);\n      return exactMatch.uid;\n    }\n    \n    // –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ fallback\n    const freight = result.data[0] as DellinFreight;\n    \n    if (freight && freight.uid) {\n      console.log(`‚ö†Ô∏è –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º: \"${freight.name}\" ‚Üí ${freight.uid}`);\n      return freight.uid;\n    } else {\n      console.log('‚ùå UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω');\n      return null;\n    }\n\n  } catch (error) {\n    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', error);\n    return null;\n  }\n}",
      "oldString": "/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n */\nexport async function getDellinFreightUid(): Promise<string | null> {\n  try {\n    console.log('üì¶ –ó–∞–ø—Ä–æ—Å UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" —á–µ—Ä–µ–∑ API...');\n    \n    const response = await fetch('/api/dellin-freight', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', response.status, response.statusText);\n      return null;\n    }\n\n    const result = await response.json();\n    \n    if (!result.success || !result.data || !Array.isArray(result.data)) {\n      console.error('‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', result);\n      return null;\n    }\n\n    console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${result.data.length}`);\n    console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'API'}`);\n    \n    // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\"\n    const freight = result.data[0] as DellinFreight;\n    \n    if (freight && freight.uid) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${freight.uid}`);\n      return freight.uid;\n    } else {\n      console.log('‚ùå UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω');\n      return null;\n    }\n\n  } catch (error) {\n    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', error);\n    return null;\n  }\n}"
    },
    "output": "",
    "title": "lib/dellin-packaging-utils.ts",
    "metadata": {
      "diagnostics": {},
      "diff": "Index: /home/user/project/lib/dellin-packaging-utils.ts\n===================================================================\n--- /home/user/project/lib/dellin-packaging-utils.ts\n+++ /home/user/project/lib/dellin-packaging-utils.ts\n@@ -205,13 +205,23 @@\n \n console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${result.data.length}`);\n console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'API'}`);\n \n-// –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\"\n+// –ò—â–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ \"–ú–µ–±–µ–ª—å\" (–Ω–µ \"–ú–µ–±–µ–ª—å–Ω—ã–µ —Ñ–∞—Å–∞–¥—ã\" –∏–ª–∏ \"–ú–µ–±–µ–ª—å–Ω–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞\")\n+const exactMatch = result.data.find((freight: DellinFreight) => \n+  freight.name && freight.name.trim().toLowerCase() === '–º–µ–±–µ–ª—å'\n+);\n+\n+if (exactMatch && exactMatch.uid) {\n+  console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${exactMatch.uid}`);\n+  return exactMatch.uid;\n+}\n+\n+// –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ fallback\n const freight = result.data[0] as DellinFreight;\n \n if (freight && freight.uid) {\n-  console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${freight.uid}`);\n+  console.log(`‚ö†Ô∏è –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º: \"${freight.name}\" ‚Üí ${freight.uid}`);\n   return freight.uid;\n } else {\n   console.log('‚ùå UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω');\n   return null;\n",
      "filediff": {
        "file": "/home/user/project/lib/dellin-packaging-utils.ts",
        "before": "/**\n * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º —É–ø–∞–∫–æ–≤–æ–∫ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n */\n\nexport interface DellinPackage {\n  id: string;\n  uid: string;\n  name: string;\n}\n\nexport interface DellinFreight {\n  uid: string;\n  name: string;\n}\n\n/**\n * –ù–∞—Ö–æ–¥–∏—Ç UID —É–ø–∞–∫–æ–≤–∫–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ CSV\n */\nexport function findPackageUid(packages: DellinPackage[], packageName: string): string | null {\n  console.log(`üîç –ü–æ–∏—Å–∫ —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –∏–∑ ${packages.length} –∑–∞–ø–∏—Å–µ–π`);\n  \n  // –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ name\n  const exactMatch = packages.find(pkg => \n    pkg.name && pkg.name.toLowerCase().includes(packageName.toLowerCase())\n  );\n  \n  if (exactMatch) {\n    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: ${exactMatch.name} ‚Üí ${exactMatch.uid}`);\n    return exactMatch.uid;\n  }\n\n  // –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–ø–∞–∫–æ–≤–∫–∏\n  const searchTerms = getPackageSearchTerms(packageName);\n  \n  for (const term of searchTerms) {\n    const match = packages.find(pkg => \n      pkg.name && pkg.name.toLowerCase().includes(term.toLowerCase())\n    );\n    \n    if (match) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Ç–µ—Ä–º–∏–Ω—É \"${term}\": ${match.name} ‚Üí ${match.uid}`);\n      return match.uid;\n    }\n  }\n\n  console.log(`‚ùå –£–ø–∞–∫–æ–≤–∫–∞ \"${packageName}\" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ`);\n  return null;\n}\n\n/**\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –¥–ª—è —Ç–∏–ø–∞ —É–ø–∞–∫–æ–≤–∫–∏\n */\nfunction getPackageSearchTerms(packageName: string): string[] {\n  const termMap: Record<string, string[]> = {\n    'crate_with_bubble': [\n      '–æ–±—Ä–µ—à–µ—Ç–∫–∞',\n      '–æ–±—Ä–µ—à—ë—Ç–∫–∞', \n      '–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è',\n      'bubble',\n      '–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è',\n      '–∑–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞'\n    ],\n    'bubble_wrap': [\n      '–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è',\n      'bubble',\n      '–≤–æ–∑–¥—É—à–Ω–æ-–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è'\n    ],\n    'cardboard_box': [\n      '–∫–∞—Ä—Ç–æ–Ω–Ω–∞—è',\n      '–∫–æ—Ä–æ–±–∫–∞',\n      'cardboard'\n    ],\n    'wooden_crate': [\n      '–¥–µ—Ä–µ–≤—è–Ω–Ω–∞—è',\n      '–æ–±—Ä–µ—à–µ—Ç–∫–∞',\n      '–æ–±—Ä–µ—à—ë—Ç–∫–∞',\n      'wooden'\n    ]\n  };\n\n  return termMap[packageName] || [packageName];\n}\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —É–ø–∞–∫–æ–≤–∫–∏ —á–µ—Ä–µ–∑ API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º workflow\n */\nexport async function getDellinPackageUid(packageName: string): Promise<string | null> {\n  try {\n    console.log(`üì¶ –ó–∞–ø—Ä–æ—Å UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π workflow...`);\n    \n    const response = await fetch('/api/dellin-packages', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —É–ø–∞–∫–æ–≤–æ–∫:', response.status, response.statusText);\n      return null;\n    }\n\n    const result = await response.json();\n    \n    if (!result.success || !result.data) {\n      console.error('‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —É–ø–∞–∫–æ–≤–æ–∫:', result);\n      return null;\n    }\n\n    console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É–ø–∞–∫–æ–≤–æ–∫: ${result.data.length} –∑–∞–ø–∏—Å–µ–π`);\n    console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'CSV —Ñ–∞–π–ª'}`);\n    \n    if (result.csvUrl) {\n      console.log(`üì¶ CSV URL: ${result.csvUrl}`);\n    }\n\n    // –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π UID\n    const uid = findPackageUid(result.data, packageName);\n    \n    if (uid) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\": ${uid}`);\n      return uid;\n    } else {\n      console.log(`‚ùå UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" –Ω–µ –Ω–∞–π–¥–µ–Ω`);\n      \n      // –í—ã–≤–æ–¥–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø–∞–∫–æ–≤–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n      console.log('üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø–∞–∫–æ–≤–∫–∏ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ:');\n      result.data.slice(0, 10).forEach((pkg: DellinPackage, index: number) => {\n        console.log(`  ${index + 1}. ${pkg.name} (${pkg.uid})`);\n      });\n      \n      if (result.data.length > 10) {\n        console.log(`  ... –∏ –µ—â–µ ${result.data.length - 10} –∑–∞–ø–∏—Å–µ–π`);\n      }\n      \n      return null;\n    }\n\n  } catch (error) {\n    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è UID —É–ø–∞–∫–æ–≤–∫–∏:', error);\n    return null;\n  }\n}\n\n/**\n * Fallback UID –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n * –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –î–õ\n */\nexport const FALLBACK_PACKAGE_UIDS = {\n  'crate_with_bubble': '0x9dd8901b0ecef10c11e8ed001199bf6e', // –ò–∑ URL —Å–∞–π—Ç–∞ –î–õ\n  'bubble_wrap': '0xa6a7bd2bf950e67f4b2cf7cc3a97c111',      // –°—Ç–∞—Ä—ã–π fallback\n  'cardboard_box': '0x123456789abcdef',\n  'wooden_crate': '0x987654321fedcba'\n};\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —É–ø–∞–∫–æ–≤–∫–∏ —Å fallback –ª–æ–≥–∏–∫–æ–π\n */\nexport async function getPackageUidWithFallback(packageName: string): Promise<string> {\n  // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞\n  const uid = await getDellinPackageUid(packageName);\n  \n  if (uid) {\n    return uid;\n  }\n\n  // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback\n  const fallbackUid = FALLBACK_PACKAGE_UIDS[packageName as keyof typeof FALLBACK_PACKAGE_UIDS];\n  \n  if (fallbackUid) {\n    console.log(`üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback UID –¥–ª—è \"${packageName}\": ${fallbackUid}`);\n    return fallbackUid;\n  }\n\n  // –ï—Å–ª–∏ —Å–æ–≤—Å–µ–º –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º UID —Å —Å–∞–π—Ç–∞ –î–õ –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π fallback\n  console.log(`üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π fallback UID (—Å —Å–∞–π—Ç–∞ –î–õ): ${FALLBACK_PACKAGE_UIDS.crate_with_bubble}`);\n  return FALLBACK_PACKAGE_UIDS.crate_with_bubble;\n}\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n */\nexport async function getDellinFreightUid(): Promise<string | null> {\n  try {\n    console.log('üì¶ –ó–∞–ø—Ä–æ—Å UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" —á–µ—Ä–µ–∑ API...');\n    \n    const response = await fetch('/api/dellin-freight', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', response.status, response.statusText);\n      return null;\n    }\n\n    const result = await response.json();\n    \n    if (!result.success || !result.data || !Array.isArray(result.data)) {\n      console.error('‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', result);\n      return null;\n    }\n\n    console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${result.data.length}`);\n    console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'API'}`);\n    \n    // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π –Ω–∞–π–¥–µ–Ω–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\"\n    const freight = result.data[0] as DellinFreight;\n    \n    if (freight && freight.uid) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${freight.uid}`);\n      return freight.uid;\n    } else {\n      console.log('‚ùå UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω');\n      return null;\n    }\n\n  } catch (error) {\n    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', error);\n    return null;\n  }\n}\n\n/**\n * Fallback UID –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\"\n * –ù–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n */\nexport const FALLBACK_FREIGHT_UID = '0x9a7c3b2d4e5f6a8b9c0d1e2f3a4b5c6d';\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ —Å fallback –ª–æ–≥–∏–∫–æ–π\n */\nexport async function getFreightUidWithFallback(): Promise<string> {\n  // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ API\n  const uid = await getDellinFreightUid();\n  \n  if (uid) {\n    return uid;\n  }\n\n  // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback\n  console.log(`üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback UID –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${FALLBACK_FREIGHT_UID}`);\n  return FALLBACK_FREIGHT_UID;\n}",
        "after": "/**\n * –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º —É–ø–∞–∫–æ–≤–æ–∫ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n */\n\nexport interface DellinPackage {\n  id: string;\n  uid: string;\n  name: string;\n}\n\nexport interface DellinFreight {\n  uid: string;\n  name: string;\n}\n\n/**\n * –ù–∞—Ö–æ–¥–∏—Ç UID —É–ø–∞–∫–æ–≤–∫–∏ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ CSV\n */\nexport function findPackageUid(packages: DellinPackage[], packageName: string): string | null {\n  console.log(`üîç –ü–æ–∏—Å–∫ —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ –∏–∑ ${packages.length} –∑–∞–ø–∏—Å–µ–π`);\n  \n  // –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ name\n  const exactMatch = packages.find(pkg => \n    pkg.name && pkg.name.toLowerCase().includes(packageName.toLowerCase())\n  );\n  \n  if (exactMatch) {\n    console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: ${exactMatch.name} ‚Üí ${exactMatch.uid}`);\n    return exactMatch.uid;\n  }\n\n  // –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–ø–∞–∫–æ–≤–∫–∏\n  const searchTerms = getPackageSearchTerms(packageName);\n  \n  for (const term of searchTerms) {\n    const match = packages.find(pkg => \n      pkg.name && pkg.name.toLowerCase().includes(term.toLowerCase())\n    );\n    \n    if (match) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Ç–µ—Ä–º–∏–Ω—É \"${term}\": ${match.name} ‚Üí ${match.uid}`);\n      return match.uid;\n    }\n  }\n\n  console.log(`‚ùå –£–ø–∞–∫–æ–≤–∫–∞ \"${packageName}\" –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ`);\n  return null;\n}\n\n/**\n * –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –¥–ª—è —Ç–∏–ø–∞ —É–ø–∞–∫–æ–≤–∫–∏\n */\nfunction getPackageSearchTerms(packageName: string): string[] {\n  const termMap: Record<string, string[]> = {\n    'crate_with_bubble': [\n      '–æ–±—Ä–µ—à–µ—Ç–∫–∞',\n      '–æ–±—Ä–µ—à—ë—Ç–∫–∞', \n      '–∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è',\n      'bubble',\n      '–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è',\n      '–∑–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞'\n    ],\n    'bubble_wrap': [\n      '–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è',\n      'bubble',\n      '–≤–æ–∑–¥—É—à–Ω–æ-–ø—É–∑—ã—Ä—å–∫–æ–≤–∞—è'\n    ],\n    'cardboard_box': [\n      '–∫–∞—Ä—Ç–æ–Ω–Ω–∞—è',\n      '–∫–æ—Ä–æ–±–∫–∞',\n      'cardboard'\n    ],\n    'wooden_crate': [\n      '–¥–µ—Ä–µ–≤—è–Ω–Ω–∞—è',\n      '–æ–±—Ä–µ—à–µ—Ç–∫–∞',\n      '–æ–±—Ä–µ—à—ë—Ç–∫–∞',\n      'wooden'\n    ]\n  };\n\n  return termMap[packageName] || [packageName];\n}\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —É–ø–∞–∫–æ–≤–∫–∏ —á–µ—Ä–µ–∑ API —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º workflow\n */\nexport async function getDellinPackageUid(packageName: string): Promise<string | null> {\n  try {\n    console.log(`üì¶ –ó–∞–ø—Ä–æ—Å UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π workflow...`);\n    \n    const response = await fetch('/api/dellin-packages', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —É–ø–∞–∫–æ–≤–æ–∫:', response.status, response.statusText);\n      return null;\n    }\n\n    const result = await response.json();\n    \n    if (!result.success || !result.data) {\n      console.error('‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —É–ø–∞–∫–æ–≤–æ–∫:', result);\n      return null;\n    }\n\n    console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É–ø–∞–∫–æ–≤–æ–∫: ${result.data.length} –∑–∞–ø–∏—Å–µ–π`);\n    console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'CSV —Ñ–∞–π–ª'}`);\n    \n    if (result.csvUrl) {\n      console.log(`üì¶ CSV URL: ${result.csvUrl}`);\n    }\n\n    // –ò—â–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–π UID\n    const uid = findPackageUid(result.data, packageName);\n    \n    if (uid) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\": ${uid}`);\n      return uid;\n    } else {\n      console.log(`‚ùå UID —É–ø–∞–∫–æ–≤–∫–∏ \"${packageName}\" –Ω–µ –Ω–∞–π–¥–µ–Ω`);\n      \n      // –í—ã–≤–æ–¥–∏–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø–∞–∫–æ–≤–∫–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏\n      console.log('üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø–∞–∫–æ–≤–∫–∏ –≤ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–µ:');\n      result.data.slice(0, 10).forEach((pkg: DellinPackage, index: number) => {\n        console.log(`  ${index + 1}. ${pkg.name} (${pkg.uid})`);\n      });\n      \n      if (result.data.length > 10) {\n        console.log(`  ... –∏ –µ—â–µ ${result.data.length - 10} –∑–∞–ø–∏—Å–µ–π`);\n      }\n      \n      return null;\n    }\n\n  } catch (error) {\n    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è UID —É–ø–∞–∫–æ–≤–∫–∏:', error);\n    return null;\n  }\n}\n\n/**\n * Fallback UID –¥–ª—è —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n * –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ –î–õ\n */\nexport const FALLBACK_PACKAGE_UIDS = {\n  'crate_with_bubble': '0x9dd8901b0ecef10c11e8ed001199bf6e', // –ò–∑ URL —Å–∞–π—Ç–∞ –î–õ\n  'bubble_wrap': '0xa6a7bd2bf950e67f4b2cf7cc3a97c111',      // –°—Ç–∞—Ä—ã–π fallback\n  'cardboard_box': '0x123456789abcdef',\n  'wooden_crate': '0x987654321fedcba'\n};\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —É–ø–∞–∫–æ–≤–∫–∏ —Å fallback –ª–æ–≥–∏–∫–æ–π\n */\nexport async function getPackageUidWithFallback(packageName: string): Promise<string> {\n  // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞\n  const uid = await getDellinPackageUid(packageName);\n  \n  if (uid) {\n    return uid;\n  }\n\n  // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback\n  const fallbackUid = FALLBACK_PACKAGE_UIDS[packageName as keyof typeof FALLBACK_PACKAGE_UIDS];\n  \n  if (fallbackUid) {\n    console.log(`üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback UID –¥–ª—è \"${packageName}\": ${fallbackUid}`);\n    return fallbackUid;\n  }\n\n  // –ï—Å–ª–∏ —Å–æ–≤—Å–µ–º –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º UID —Å —Å–∞–π—Ç–∞ –î–õ –∫–∞–∫ –ø–æ—Å–ª–µ–¥–Ω–∏–π fallback\n  console.log(`üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π fallback UID (—Å —Å–∞–π—Ç–∞ –î–õ): ${FALLBACK_PACKAGE_UIDS.crate_with_bubble}`);\n  return FALLBACK_PACKAGE_UIDS.crate_with_bubble;\n}\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n */\nexport async function getDellinFreightUid(): Promise<string | null> {\n  try {\n    console.log('üì¶ –ó–∞–ø—Ä–æ—Å UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" —á–µ—Ä–µ–∑ API...');\n    \n    const response = await fetch('/api/dellin-freight', {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      console.error('‚ùå –û—à–∏–±–∫–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', response.status, response.statusText);\n      return null;\n    }\n\n    const result = await response.json();\n    \n    if (!result.success || !result.data || !Array.isArray(result.data)) {\n      console.error('‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', result);\n      return null;\n    }\n\n    console.log(`üì¶ –ü–æ–ª—É—á–µ–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–≤ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${result.data.length}`);\n    console.log(`üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫: ${result.cached ? '–∫—ç—à' : 'API'}`);\n    \n    // –ò—â–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ \"–ú–µ–±–µ–ª—å\" (–Ω–µ \"–ú–µ–±–µ–ª—å–Ω—ã–µ —Ñ–∞—Å–∞–¥—ã\" –∏–ª–∏ \"–ú–µ–±–µ–ª—å–Ω–∞—è —Ñ—É—Ä–Ω–∏—Ç—É—Ä–∞\")\n    const exactMatch = result.data.find((freight: DellinFreight) => \n      freight.name && freight.name.trim().toLowerCase() === '–º–µ–±–µ–ª—å'\n    );\n    \n    if (exactMatch && exactMatch.uid) {\n      console.log(`‚úÖ –ù–∞–π–¥–µ–Ω UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${exactMatch.uid}`);\n      return exactMatch.uid;\n    }\n    \n    // –ï—Å–ª–∏ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –∫–∞–∫ fallback\n    const freight = result.data[0] as DellinFreight;\n    \n    if (freight && freight.uid) {\n      console.log(`‚ö†Ô∏è –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º: \"${freight.name}\" ‚Üí ${freight.uid}`);\n      return freight.uid;\n    } else {\n      console.log('‚ùå UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\" –Ω–µ –Ω–∞–π–¥–µ–Ω');\n      return null;\n    }\n\n  } catch (error) {\n    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞:', error);\n    return null;\n  }\n}\n\n/**\n * Fallback UID –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\"\n * –ù–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω\n */\nexport const FALLBACK_FREIGHT_UID = '0x9a7c3b2d4e5f6a8b9c0d1e2f3a4b5c6d';\n\n/**\n * –ü–æ–ª—É—á–∞–µ—Ç UID —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ —Å fallback –ª–æ–≥–∏–∫–æ–π\n */\nexport async function getFreightUidWithFallback(): Promise<string> {\n  // –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ–º—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ API\n  const uid = await getDellinFreightUid();\n  \n  if (uid) {\n    return uid;\n  }\n\n  // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback\n  console.log(`üîß –ò—Å–ø–æ–ª—å–∑—É–µ–º fallback UID –¥–ª—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –≥—Ä—É–∑–∞ \"–ú–µ–±–µ–ª—å\": ${FALLBACK_FREIGHT_UID}`);\n  return FALLBACK_FREIGHT_UID;\n}",
        "additions": 12,
        "deletions": 2
      }
    },
    "time": {
      "start": 1765819210962,
      "end": 1765819210981
    }
  }
}