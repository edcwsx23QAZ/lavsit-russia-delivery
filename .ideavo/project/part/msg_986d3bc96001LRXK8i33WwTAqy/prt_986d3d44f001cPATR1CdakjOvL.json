{
  "id": "prt_986d3d44f001cPATR1CdakjOvL",
  "messageID": "msg_986d3bc96001LRXK8i33WwTAqy",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01FXGFESJRpscUcne16igE1k",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 850,
      "limit": 100
    },
    "output": "<file>\n00851| \n00852|       if (!response.ok) {\n00853|         console.error(`‚ùå –ü–≠–ö API –æ—à–∏–±–∫–∞: ${response.status} ${response.statusText}`);\n00854|         return null;\n00855|       }\n00856| \n00857|       const data = await response.json();\n00858|       console.log(`‚úÖ –ü–≠–ö –∑–æ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞:`, data);\n00859|       \n00860|       if (data.zoneId && data.mainWarehouseId) {\n00861|         return {\n00862|           zoneId: data.zoneId,\n00863|           zoneName: data.zoneName,\n00864|           branchUID: data.branchUID,\n00865|           branchCode: data.branchCode,\n00866|           branchTitle: data.branchTitle,\n00867|           mainWarehouseId: data.mainWarehouseId,\n00868|           warehousePoint: data.warehousePoint,\n00869|           geoData: data.GeoData,\n00870|           precision: data.GeoData?.precision\n00871|         };\n00872|       }\n00873|       \n00874|       console.warn(`‚ùå –ü–≠–ö: –∑–æ–Ω–∞ –Ω–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∞–¥—Ä–µ—Å–∞ \"${address}\"`);\n00875|       return null;\n00876|     } catch (error) {\n00877|       console.error('‚ùå –ü–≠–ö: –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –∑–æ–Ω—ã:', error);\n00878|       return null;\n00879|     }\n00880|   };\n00881| \n00882|   // –ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –ü–≠–ö\n00883|   const getPekNearestDepartments = async (address: string, coordinates?: { latitude: string, longitude: string }) => {\n00884|     try {\n00885|       console.log(`üè¢ –ü–≠–ö: –ø–æ–∏—Å–∫ –±–ª–∏–∂–∞–π—à–∏—Ö –æ—Ç–¥–µ–ª–µ–Ω–∏–π –¥–ª—è \"${address}\"`);\n00886|       \n00887|       const requestBody: any = {\n00888|         departmentOperation: 3, // –≤—ã–¥–∞—á–∞ –≥—Ä—É–∑–æ–≤\n00889|         type: 3, // –∞–≤—Ç–æ-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç\n00890|         searchRadius: 50, // –∫–º\n00891|         limit: 5\n00892|       };\n00893|       \n00894|       if (coordinates) {\n00895|         requestBody.coordinates = coordinates;\n00896|       } else {\n00897|         requestBody.address = address;\n00898|       }\n00899|       \n00900|       const response = await fetch('https://api.pecom.ru/v1/branches/nearestdepartments/', {\n00901|         method: 'POST',\n00902|         headers: {\n00903|           'Content-Type': 'application/json',\n00904|           'Authorization': `Bearer 624FC93CA677B23673BB476D4982294DC27E246F`\n00905|         },\n00906|         body: JSON.stringify(requestBody)\n00907|       });\n00908| \n00909|       if (!response.ok) {\n00910|         console.error(`‚ùå –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è API –æ—à–∏–±–∫–∞: ${response.status} ${response.statusText}`);\n00911|         return null;\n00912|       }\n00913| \n00914|       const data = await response.json();\n00915|       console.log(`‚úÖ –ü–≠–ö –æ—Ç–¥–µ–ª–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω—ã:`, data);\n00916|       \n00917|       // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–≤–æ–µ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º\n00918|       if (data.freeDepartments && data.freeDepartments.length > 0) {\n00919|         const bestDepartment = data.freeDepartments.sort((a: any, b: any) => b.priority - a.priority)[0];\n00920|         return {\n00921|           warehouseId: bestDepartment.warehouseId,\n00922|           branchId: bestDepartment.branchId,\n00923|           branchName: bestDepartment.branchName,\n00924|           divisionName: bestDepartment.divisionName,\n00925|           address: bestDepartment.address,\n00926|           coordinates: bestDepartment.coordinates,\n00927|           phone: bestDepartment.phone,\n00928|           email: bestDepartment.email\n00929|         };\n00930|       }\n00931|       \n00932|       console.warn(`‚ùå –ü–≠–ö: –æ—Ç–¥–µ–ª–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –¥–ª—è \"${address}\"`);\n00933|       return null;\n00934|     } catch (error) {\n00935|       console.error('‚ùå –ü–≠–ö: –æ—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ –æ—Ç–¥–µ–ª–µ–Ω–∏–π:', error);\n00936|       return null;\n00937|     }\n00938|   };\n00939| \n00940|   // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã (—Ä–µ–∑–µ—Ä–≤–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –ü–≠–ö)\n00941|   const getYandexCoordinates = async (address: string): Promise<{ latitude: string, longitude: string } | null> => {\n00942|     try {\n00943|       const encodedAddress = encodeURIComponent(address);\n00944|       const response = await fetch(`https://geocode-maps.yandex.ru/1.x/?apikey=YOUR_API_KEY&geocode=${encodedAddress}&format=json`);\n00945|       \n00946|       if (!response.ok) return null;\n00947|       \n00948|       const data = await response.json();\n00949|       const coords = data?.response?.GeoObjectCollection?.featureMember?.[0]?.GeoObject?.Point?.pos?.split(' ');\n00950|       \n\n(File has more lines. Use 'offset' parameter to read beyond line 950)\n</file>",
    "metadata": {
      "preview": "\n      if (!response.ok) {\n        console.error(`‚ùå –ü–≠–ö API –æ—à–∏–±–∫–∞: ${response.status} ${response.statusText}`);\n        return null;\n      }\n\n      const data = await response.json();\n      console.log(`‚úÖ –ü–≠–ö –∑–æ–Ω–∞ –Ω–∞–π–¥–µ–Ω–∞:`, data);\n      \n      if (data.zoneId && data.mainWarehouseId) {\n        return {\n          zoneId: data.zoneId,\n          zoneName: data.zoneName,\n          branchUID: data.branchUID,\n          branchCode: data.branchCode,\n          branchTitle: data.branchTitle,\n          mainWarehouseId: data.mainWarehouseId,\n          warehousePoint: data.warehousePoint,\n          geoData: data.GeoData,\n          precision: data.GeoData?.precision"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1758903654320,
      "end": 1758903654328
    }
  }
}