{
  "id": "prt_9b97f8b0a001x022PQTFWe3XwJ",
  "messageID": "msg_9b97f30eb001ENVqcwYxlvYUkX",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "grep",
  "callID": "toolu_017b7MQ6KUzw7GaC1m3TtSTA",
  "state": {
    "status": "completed",
    "input": {
      "pattern": "selectedProduct|fromCity|toCity|declaredValue|additionalServices|formData",
      "path": "/home/user/project",
      "include": "*.tsx"
    },
    "output": "Found 100 matches\n/home/user/project/app/page.tsx:\n  Line 41:   fromCity: string;\n  Line 42:   toCity: string;\n  Line 45:   declaredValue: number;\n  Line 57:   selectedProducts: ProductInForm[];\n  Line 112:     fromCity: '',\n  Line 113:     toCity: '',\n  Line 116:     declaredValue: 0,\n  Line 127:     selectedProducts: []\n  Line 272:     if (form.declaredValue > 0) {\n  Line 275:   }, [form.declaredValue]);\n  Line 331:       fromCity: '–ú–æ—Å–∫–≤–∞',\n  Line 332:       toCity: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥', \n  Line 334:       declaredValue: 50000,\n  Line 347:       fromCity: testData.fromCity,\n  Line 348:       toCity: testData.toCity,\n  Line 350:       declaredValue: testData.declaredValue,\n  Line 408:               city_sender: testData.fromCity,\n  Line 409:               city_receiver: testData.toCity,\n  Line 415:               declared_cost: testData.declaredValue,\n  Line 448:                       location: testData.fromCity,\n  Line 454:                       location: testData.toCity,\n  Line 538:           ...(field === 'fromCity' || field === 'toCity' ? {\n  Line 590:       const cleanResult = cleanEmptyCargos(updatedCargos, prev.selectedProducts || []);\n  Line 595:         selectedProducts: cleanResult.products\n  Line 615:   const cleanEmptyCargos = (cargos: Cargo[], selectedProducts: ProductInForm[]) => {\n  Line 623:         products: selectedProducts\n  Line 642:     const updatedProducts = selectedProducts.map(productItem => ({\n  Line 789:       const prevSelectedProducts = prev.selectedProducts || [];\n  Line 799:         selectedProducts: cleanResult.products,\n  Line 800:         declaredValue: newDeclaredValue\n  Line 810:       console.log(`üî¢ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–∞ ${productId} —Å ${prev.selectedProducts?.find(p => p.product.id === productId && p.addedAt === addedAt)?.quantity || 0} –Ω–∞ ${newQuantity}`);\n  Line 813:       const selectedProducts = prev.selectedProducts || [];\n  Line 814:       const productIndex = selectedProducts.findIndex(p => \n  Line 823:       const product = selectedProducts[productIndex];\n  Line 849:       const updatedProducts = selectedProducts.map((p, index) => \n  Line 862:         selectedProducts: cleanResult.products,\n  Line 863:         declaredValue: newDeclaredValue\n  Line 875:       const selectedProducts = prev.selectedProducts || [];\n  Line 876:       const product = selectedProducts.find(p => \n  Line 904:       const updatedProducts = selectedProducts.filter(p => \n  Line 920:         selectedProducts: cleanResult.products,\n  Line 921:         declaredValue: newDeclaredValue\n  Line 1114:       const fromTerminalId = !form.fromAddressDelivery ? await getDellinTerminal(form.fromCity) : null;\n  Line 1115:       const toTerminalId = !form.toAddressDelivery ? await getDellinTerminal(form.toCity) : null;\n  Line 1125:         console.error('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–æ–¥–∞:', form.fromCity);\n  Line 1130:           error: `–ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π –≤ –≥–æ—Ä–æ–¥–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è: ${form.fromCity}`,\n  Line 1138:         console.error('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –≥–æ—Ä–æ–¥–∞:', form.toCity);\n  Line 1143:           error: `–ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ—Ä–º–∏–Ω–∞–ª –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π –≤ –≥–æ—Ä–æ–¥–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è: ${form.toCity}`,\n  Line 1215:                 search: form.fromAddress || form.fromCity\n  Line 1221:                 search: form.fromCity\n  Line 1237:                 search: form.toAddress || form.toCity\n  Line 1243:                 search: form.toCity\n  Line 1280:           ...(form.needInsurance && form.declaredValue > 0 ? {\n  Line 1282:               statedValue: form.declaredValue,\n  Line 1290:             search: form.fromCity  // –ì–æ—Ä–æ–¥ –æ–ø–ª–∞—Ç—ã\n  Line 1437:       console.log('üí≥ data.data.additionalServices:', data.data?.additionalServices);\n  Line 1938:       console.log(`üìç –û—Ç: ${form.fromAddress || form.fromCity}`);\n  Line 1939:       console.log(`üìç –î–æ: ${form.toAddress || form.toCity}`);\n  Line 1941:       const senderZone = await getPekZoneByAddress(form.fromAddress || `–≥ ${form.fromCity}`);\n  Line 1942:       const receiverZone = await getPekZoneByAddress(form.toAddress || `–≥ ${form.toCity}`);\n  Line 1951:           senderAddress: form.fromAddress || form.fromCity,\n  Line 1952:           receiverAddress: form.toAddress || form.toCity,\n  Line 1964:           error: `–ó–æ–Ω–∞ –ü–≠–ö –Ω–µ –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç—Å—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥—Ä–µ—Å–∞: ${!senderZone ? (form.fromAddress || form.fromCity) : ''} ${!receiverZone ? (form.toAddress || form.toCity) : ''}`.trim(),\n  Line 1980:               form.fromAddress || form.fromCity,\n  Line 2003:               form.toAddress || form.toCity,\n  Line 2063:           isInsurance: form.needInsurance && form.declaredValue > 0,\n  Line 2064:           isInsurancePrice: form.needInsurance ? form.declaredValue : 0,\n  Line 2096:             address: form.fromAddress || `–†–æ—Å—Å–∏—è, ${form.fromCity}`\n  Line 2104:             address: form.toAddress || `–†–æ—Å—Å–∏—è, ${form.toCity}`\n  Line 2341:         description: `${form.fromCity} - ${form.toCity} (${totalWeight} –∫–≥, ${totalVolume.toFixed(3)} –º¬≥)`,\n  Line 2365:       if (form.needInsurance && form.declaredValue > 0) {\n  Line 2366:         const insuranceCost = form.declaredValue * 0.012;\n  Line 2370:           description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n  Line 2511:         city_sender: form.fromCity || '–ú–æ—Å–∫–≤–∞',\n  Line 2512:         city_receiver: form.toCity || '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n  Line 2519:         declared_cost: form.declaredValue,\n  Line 2555:             declaredValue: form.declaredValue\n  Line 2561:           console.log('   - –ó–∞—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', form.declaredValue);\n  Line 2589:             const insuranceCost = Math.round(form.declaredValue * parseFloat(autoTariff.priceInsurance) / 100);\n  Line 2590:             console.log('üöÇ –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞:', insuranceCost, '(', form.declaredValue, '*', autoTariff.priceInsurance, '%)');\n  Line 2593:               description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n  Line 2603:           const additionalServices: { name: string; description: string; price: number }[] = [];\n  Line 2607:             additionalServices.push({\n  Line 2616:             additionalServices.push({\n  Line 2624:             additionalServices.push({\n  Line 2640:               route: `${form.fromCity} - ${form.toCity}`,\n  Line 2642:               additionalServices,\n  Line 2696:       console.log('   - –û—Ç–∫—É–¥–∞:', form.fromCity);\n  Line 2697:       console.log('   - –ö—É–¥–∞:', form.toCity);\n  Line 2710:             ...(form.needInsurance && form.declaredValue > 0 ? {\n  Line 2711:               insurance: form.declaredValue\n  Line 2722:                 location: form.fromCity || '–ú–æ—Å–∫–≤–∞',\n  Line 2732:                 location: form.toCity || '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n  Line 2770:             description: `${form.fromCity} - ${form.toCity}`,\n  Line 2819:             description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n  Line 2828:             description: `${form.fromCity} - ${form.toCity}`,\n  Line 2841:             note: `–î–æ—Å—Ç–∞–≤–∫–∞ ${form.fromCity} - ${form.toCity}`,\n  Line 2927:         sum: form.declaredValue.toString(),\n  Line 2956:             additionalServices: (data.data.total || 0) - (data.data.door || 0)\n  Line 3112:           description: `${form.fromCity} - ${form.toCity}`,\n\n(Results are truncated. Consider using a more specific path or pattern.)",
    "metadata": {
      "matches": 100,
      "truncated": true
    },
    "title": "selectedProduct|fromCity|toCity|declaredValue|additionalServices|formData",
    "time": {
      "start": 1759753769004,
      "end": 1759753769029
    }
  }
}