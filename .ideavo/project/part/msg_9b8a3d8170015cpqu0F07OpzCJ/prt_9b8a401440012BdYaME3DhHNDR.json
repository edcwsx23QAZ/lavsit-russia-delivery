{
  "id": "prt_9b8a401440012BdYaME3DhHNDR",
  "messageID": "msg_9b8a3d8170015cpqu0F07OpzCJ",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01KPQcBpS4rX3s4bGBRNsYmY",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 2800,
      "limit": 500
    },
    "output": "<file>\n02801|       // üîß –î–û–ë–ê–í–õ–ï–ù–û: –†–∞—Å—á–µ—Ç –≥–∞–±–∞—Ä–∏—Ç–æ–≤ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n02802|       const maxLength = Math.max(...form.cargos.map(c => c.length));\n02803|       const maxWidth = Math.max(...form.cargos.map(c => c.width));\n02804|       const maxHeight = Math.max(...form.cargos.map(c => c.height));\n02805|       \n02806|       // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç (>2–º –ø–æ –ª—é–±–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é)\n02807|       const isOversized = maxLength > 200 || maxWidth > 200 || maxHeight > 200 || totalWeight > 1000;\n02808|       \n02809|       // üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n02810|       console.log('üåê Nord Wheel: –ê–Ω–∞–ª–∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç:');\n02811|       console.log(`   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç: ${form.cargos.length}`);\n02812|       console.log(`   - –û–±—â–∏–π –≤–µ—Å: ${totalWeight} –∫–≥`);\n02813|       console.log(`   - –û–±—â–∏–π –æ–±—ä–µ–º: ${totalVolume.toFixed(3)} –º¬≥`);\n02814|       \n02815|       form.cargos.forEach((cargo, index) => {\n02816|         console.log(`   üì¶ –ú–µ—Å—Ç–æ ${index + 1}:`);\n02817|         console.log(`     - –ì–∞–±–∞—Ä–∏—Ç—ã: ${cargo.length}√ó${cargo.width}√ó${cargo.height} —Å–º`);\n02818|         console.log(`     - –í–µ—Å: ${cargo.weight} –∫–≥`);\n02819|         console.log(`     - –û–±—ä–µ–º: ${((cargo.length * cargo.width * cargo.height) / 1000000).toFixed(3)} –º¬≥`);\n02820|       });\n02821|       \n02822|       if (form.cargos.length > 1) {\n02823|         console.log(`   üìê –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –≥–∞–±–∞—Ä–∏—Ç—ã: ${maxLength}√ó${maxWidth}√ó${maxHeight} —Å–º`);\n02824|         console.log(`   üöõ –ù–µ–≥–∞–±–∞—Ä–∏—Ç: ${isOversized ? '–î–ê' : '–ù–ï–¢'}`);\n02825|       }\n02826| \n02827|       // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n02828|       const params = new URLSearchParams({\n02829|         from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n02830|         to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n02831|         pickup: form.fromAddressDelivery ? '1' : '0',\n02832|         deliver: form.toAddressDelivery ? '1' : '0',\n02833|         weight: totalWeight.toString(),\n02834|         volume: totalVolume.toString(),\n02835|         oversized: isOversized ? '1' : '0', // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n02836|         package: form.needPackaging ? '1' : '0',\n02837|         packageCount: form.cargos.length.toString(),\n02838|         insurance: form.needInsurance ? '1' : '0',\n02839|         sum: form.declaredValue.toString(),\n02840|         documentsReturn: '0',\n02841|         fragile: '1',\n02842|         // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ì–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã\n02843|         length: (maxLength / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n02844|         width: (maxWidth / 100).toString(),        // –≤ –º–µ—Ç—Ä–∞—Ö\n02845|         height: (maxHeight / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n02846|         // üîß –î–û–ë–ê–í–õ–ï–ù–û: –§–ª–∞–≥ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n02847|         multiplePackages: form.cargos.length > 1 ? '1' : '0'\n02848|       });\n02849| \n02850|       const requestData = Object.fromEntries(params);\n02851|       const fullUrl = `${apiUrl}?${params.toString()}`;\n02852| \n02853|       const response = await fetch(fullUrl);\n02854|       const data = await response.json();\n02855| \n02856|       if (response.ok && data.status === 'success' && data.data) {\n02857|         return {\n02858|           company: 'Nord Wheel',\n02859|           price: data.data.total || 0,\n02860|           days: data.data.days || 0,\n02861|           details: {\n02862|             ...data.data,\n02863|             totalCost: data.data.total,\n02864|             deliveryCost: data.data.door,\n02865|             terminalCost: data.data.terminal,\n02866|             pickupCost: data.data.pick,\n02867|             deliveryToDoorCost: data.data.deliver,\n02868|             additionalServices: (data.data.total || 0) - (data.data.door || 0)\n02869|           },\n02870|           requestData,\n02871|           responseData: data,\n02872|           apiUrl: fullUrl\n02873|         };\n02874|       } else {\n02875|         return {\n02876|           company: 'Nord Wheel',\n02877|           price: 0,\n02878|           days: 0,\n02879|           error: '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n02880|           requestData,\n02881|           responseData: data,\n02882|           apiUrl: fullUrl\n02883|         };\n02884|       }\n02885|     } catch (error: any) {\n02886|       return {\n02887|         company: 'Nord Wheel',\n02888|         price: 0,\n02889|         days: 0,\n02890|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n02891|         apiUrl\n02892|       };\n02893|     }\n02894|   };\n02895| \n02896|   const handleCalculate = async () => {\n02897|     setCalculating(true);\n02898|     setCalculations([]);\n02899|     \n02900|     // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞\n02901|     localStorage.setItem('deliveryForm', JSON.stringify(form));\n02902|     \n02903|     try {\n02904|       const results = await Promise.all([\n02905|         calculateDellin(),\n02906|         calculatePEK(),\n02907|         calculateNordWheel(),\n02908|         calculateRailContinent(),\n02909|         calculateVozovoz()\n02910|       ]);\n02911|       \n02912|       // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ\n02913|       const sortedResults = results\n02914|         .filter(result => !result.error)\n02915|         .sort((a, b) => a.price - b.price)\n02916|         .concat(results.filter(result => result.error));\n02917|       \n02918|       setCalculations(sortedResults);\n02919|     } catch (error) {\n02920|       console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ:', error);\n02921|     } finally {\n02922|       setCalculating(false);\n02923|     }\n02924|   };\n02925| \n02926|   const exportToPDF = () => {\n02927|     if (typeof window !== 'undefined') {\n02928|       // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥ –ø–µ—á–∞—Ç—å—é\n02929|       const allExpanded = calculations.reduce((acc, calc) => {\n02930|         acc[calc.company] = true;\n02931|         return acc;\n02932|       }, {} as { [key: string]: boolean });\n02933|       \n02934|       setExpandedDetails(allExpanded);\n02935|       \n02936|       // –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM\n02937|       setTimeout(() => {\n02938|         window.print();\n02939|       }, 100);\n02940|     }\n02941|   };\n02942| \n02943|   const toggleDetails = (company: string) => {\n02944|     setExpandedDetails(prev => ({\n02945|       ...prev,\n02946|       [company]: !prev[company]\n02947|     }));\n02948|   };\n02949| \n02950|   const toggleDebugInfo = (company: string) => {\n02951|     setExpandedDebugInfo(prev => ({\n02952|       ...prev,\n02953|       [company]: !prev[company]\n02954|     }));\n02955|   };\n02956| \n02957|   // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—á–µ—Ç–∞\n02958|   const handleReset = () => {\n02959|     if (typeof window !== 'undefined') {\n02960|       // –û—á–∏—â–∞–µ–º localStorage\n02961|       localStorage.removeItem('deliveryForm');\n02962|       \n02963|       // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É\n02964|       setForm(initialFormState);\n02965|       \n02966|       // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n02967|       setCalculations([]);\n02968|       setExpandedDetails({});\n02969|       setExpandedDebugInfo({});\n02970|       setSuggestions([]);\n02971|       setShowSuggestions(false);\n02972|       setActiveField('');\n02973|       \n02974|       console.log('–§–æ—Ä–º–∞ —Å–±—Ä–æ—à–µ–Ω–∞ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é');\n02975|     }\n02976|   };\n02977| \n02978|   // –ü–∞—Ä—Å–µ—Ä –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞\n02979|   const parseCalculationDetails = (calc: CalculationResult) => {\n02980|     console.log('üîç parseCalculationDetails –ø–æ–ª—É—á–∏–ª calc:', calc?.company || 'undefined');\n02981|     console.log('üîç calc.details:', calc?.details ? '—Å—É—â–µ—Å—Ç–≤—É–µ—Ç' : 'undefined/null');\n02982|     console.log('üîç typeof calc.details:', typeof calc?.details);\n02983|     \n02984|     const details: { service: string; description: string; price: number }[] = [];\n02985|     \n02986|     try {\n02987|       if (calc.company === '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏' && calc.details) {\n02988|         console.log('üîç –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–µ—Ç–∞–ª–µ–π –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π...');\n02989|       // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ (—É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –∏ —É–ø–∞–∫–æ–≤–∫—É)\n02990|       let basePrice = calc.details?.price || calc.price || 0;\n02991|       \n02992|       // –†–∞–∑–±–∏–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ\n02993|       let intercityPrice = 0;\n02994|       let derivalPrice = 0;\n02995|       let arrivalPrice = 0;\n02996|       let packagingPrice = 0;\n02997|       // packagingPremiums –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - –Ω–∞–¥–±–∞–≤–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ pkg.price\n02998|       let insurancePrice = 0;\n02999|       \n03000|       // –ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n03001|       if (calc.details?.intercity?.price) {\n03002|         intercityPrice = calc.details.intercity.price;\n03003|         details.push({\n03004|           service: '–ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞',\n03005|           description: `${form.fromCity} - ${form.toCity}`,\n03006|           price: intercityPrice\n03007|         });\n03008|       }\n03009|       \n03010|       // –ó–∞–±–æ—Ä –≥—Ä—É–∑–∞\n03011|       if (calc.details?.derival?.price) {\n03012|         derivalPrice = calc.details.derival.price;\n03013|         details.push({\n03014|           service: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n03015|           description: '–û—Ç –∞–¥—Ä–µ—Å–∞',\n03016|           price: derivalPrice\n03017|         });\n03018|       }\n03019|       \n03020|       // –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞\n03021|       if (calc.details?.arrival?.price) {\n03022|         arrivalPrice = calc.details.arrival.price;\n03023|         details.push({\n03024|           service: '–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞',\n03025|           description: '–î–æ –∞–¥—Ä–µ—Å–∞',\n03026|           price: arrivalPrice\n03027|         });\n03028|       }\n03029|       \n03030|       // –£–ø–∞–∫–æ–≤–∫–∞ (–Ω–∞–¥–±–∞–≤–∫–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ pkg.price, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏)\n03031|       if (form.needPackaging && calc.details?.packages) {\n03032|         Object.entries(calc.details?.packages || {}).forEach(([key, pkg]: [string, any]) => {\n03033|           if (pkg.price && pkg.price > 0) {\n03034|             // –í—ã—á–∏—Å–ª—è–µ–º –±–∞–∑–æ–≤—É—é —Ü–µ–Ω—É —É–ø–∞–∫–æ–≤–∫–∏ (–±–µ–∑ –Ω–∞–¥–±–∞–≤–æ–∫) –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è\n03035|             let basePkgPrice = pkg.price;\n03036|             let totalPremiums = 0;\n03037|             \n03038|             if (pkg.premiumDetails && Array.isArray(pkg.premiumDetails)) {\n03039|               totalPremiums = pkg.premiumDetails.reduce((sum: number, premium: any) => \n03040|                 sum + (premium.value || 0), 0);\n03041|               basePkgPrice = pkg.price - totalPremiums;\n03042|             }\n03043|             \n03044|             packagingPrice += pkg.price; // –í –æ–±—â—É—é —Å—É–º–º—É –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª–Ω—É—é —Ü–µ–Ω—É\n03045|             \n03046|             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–∑–æ–≤—É—é —É–ø–∞–∫–æ–≤–∫—É\n03047|             details.push({\n03048|               service: '–£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞',\n03049|               description: '–£–ø–∞–∫–æ–≤–∞—Ç—å –≤ –∫–æ–º–ø–ª–µ–∫—Å ¬´–æ–±—Ä–µ—à—ë—Ç–∫–∞ + –∞–º–æ—Ä—Ç–∏–∑–∞—Ü–∏—è¬ª',\n03050|               price: basePkgPrice\n03051|             });\n03052|             \n03053|             // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–¥–±–∞–≤–∫–∏ –æ—Ç–¥–µ–ª—å–Ω–æ (–¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏, –Ω–æ –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –∫ –æ–±—â–µ–π —Å—É–º–º–µ)\n03054|             if (pkg.premiumDetails && Array.isArray(pkg.premiumDetails)) {\n03055|               pkg.premiumDetails.forEach((premium: any) => {\n03056|                 if (premium.value && premium.value > 0) {\n03057|                   details.push({\n03058|                     service: '–ù–∞–¥–±–∞–≤–∫–∞ –∫ —É–ø–∞–∫–æ–≤–∫–µ',\n03059|                     description: premium.name || '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–¥–±–∞–≤–∫–∞',\n03060|                     price: premium.value\n03061|                   });\n03062|                 }\n03063|               });\n03064|             }\n03065|           }\n03066|         });\n03067|       }\n03068|       \n03069|       // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ\n03070|       if (form.needInsurance && calc.details?.insurance) {\n03071|         insurancePrice = calc.details.insurance;\n03072|         details.push({\n03073|           service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n03074|           description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n03075|           price: insurancePrice\n03076|         });\n03077|       }\n03078|       \n03079|       // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\n03080|       details.push({\n03081|         service: '–î–æ–ø.—É—Å–ª—É–≥–∏',\n03082|         description: '–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ —Å—Ç–∞—Ç—É—Å–µ –≥—Ä—É–∑–∞',\n03083|         price: 15\n03084|       });\n03085|       \n03086|       // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É —Å—É–º–º–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é, –¥–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞—Ç–æ–∫\n03087|       const calculatedSum = intercityPrice + derivalPrice + arrivalPrice + packagingPrice + insurancePrice + 15;\n03088|       const remainder = basePrice - calculatedSum;\n03089|       \n03090|       if (Math.abs(remainder) > 1) { // –ï—Å–ª–∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –±–æ–ª—å—à–µ 1 —Ä—É–±–ª—è\n03091|         details.push({\n03092|           service: remainder > 0 ? '–ü—Ä–æ—á–∏–µ —É—Å–ª—É–≥–∏' : '–°–∫–∏–¥–∫–∞',\n03093|           description: '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–±–æ—Ä—ã –∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏',\n03094|           price: remainder\n03095|         });\n03096|       }\n03097|     } else if (calc.company === 'Nord Wheel' && calc.details) {\n03098|       // –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–ª—è Nord Wheel —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º\n03099|       if (calc.details.totalCost) {\n03100|         details.push({\n03101|           service: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏',\n03102|           description: '',\n03103|           price: calc.details.totalCost\n03104|         });\n03105|       }\n03106|       if (calc.details.deliveryCost) {\n03107|         details.push({\n03108|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–∑–∫–∏',\n03109|           description: '',\n03110|           price: calc.details.deliveryCost\n03111|         });\n03112|       }\n03113|       if (calc.details.terminalCost) {\n03114|         details.push({\n03115|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –º–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–≤–æ–∑–∫–∏',\n03116|           description: '',\n03117|           price: calc.details.terminalCost\n03118|         });\n03119|       }\n03120|       if (calc.details.pickupCost) {\n03121|         details.push({\n03122|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–±–æ—Ä–∞',\n03123|           description: '',\n03124|           price: calc.details.pickupCost\n03125|         });\n03126|       }\n03127|       if (calc.details.deliveryToDoorCost) {\n03128|         details.push({\n03129|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –¥–≤–µ—Ä–∏',\n03130|           description: '',\n03131|           price: calc.details.deliveryToDoorCost\n03132|         });\n03133|       }\n03134|       if (calc.details.additionalServices && calc.details.additionalServices > 0) {\n03135|         details.push({\n03136|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø.—É—Å–ª—É–≥',\n03137|           description: '',\n03138|           price: calc.details.additionalServices\n03139|         });\n03140|       }\n03141| \n03142|     } else if (calc.company === '–ü–≠–ö' && calc.details?.services) {\n03143|       // –î–ª—è –ü–≠–ö –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API\n03144|       calc.details.services.forEach((service: any) => {\n03145|         if (service.price > 0) {\n03146|           details.push({\n03147|             service: service.name || '–£—Å–ª—É–≥–∞ –ü–≠–ö',\n03148|             description: service.description || '',\n03149|             price: service.price\n03150|           });\n03151|         }\n03152|       });\n03153|     } else {\n03154|       // –î–ª—è –¥—Ä—É–≥–∏—Ö –¢–ö - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\n03155|       details.push({\n03156|         service: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n03157|         description: `${form.fromCity} - ${form.toCity}`,\n03158|         price: calc.price\n03159|       });\n03160|       \n03161|       if (form.needInsurance && form.declaredValue > 0) {\n03162|         details.push({\n03163|           service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ',\n03164|           description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n03165|           price: Math.round(form.declaredValue * 0.02)\n03166|         });\n03167|       }\n03168|       \n03169|       if (form.needPackaging) {\n03170|         const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n03171|         details.push({\n03172|           service: '–£–ø–∞–∫–æ–≤–∫–∞',\n03173|           description: '',\n03174|           price: Math.round(totalWeight * 30)\n03175|         });\n03176|       }\n03177|     }\n03178|     \n03179|     return details;\n03180|   } catch (globalError) {\n03181|     console.error('‚ùå –ì–õ–û–ë–ê–õ–¨–ù–ê–Ø –û–®–ò–ë–ö–ê –≤ parseCalculationDetails:', globalError);\n03182|     console.error('‚ùå –°—Ç–µ–∫ –æ—à–∏–±–∫–∏:', globalError instanceof Error ? globalError.stack : '–ù–µ—Ç —Å—Ç–µ–∫–∞');\n03183|     console.log('‚ùå calc object:', calc);\n03184|     // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ\n03185|     return [{\n03186|       service: '–î–æ—Å—Ç–∞–≤–∫–∞',\n03187|       description: '–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å—á–µ—Ç–∞',\n03188|       price: calc?.price || 0\n03189|     }];\n03190|   }\n03191| };\n03192| \n03193|   return (\n03194|     <div className=\"min-h-screen bg-gray-900 text-white p-4 relative\">\n03195|       <div className=\"max-w-7xl mx-auto\">\n03196|         <h1 className=\"text-2xl font-bold text-center mb-6 text-blue-400\">\n03197|           –ú–µ–∂–¥—É–≥–æ—Ä–æ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞ –õ–∞–≤—Å–∏—Ç\n03198|         </h1>\n03199|         \n03200|         {/* –ö–Ω–æ–ø–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ */}\n03201|         <div className=\"flex justify-end mb-4\">\n03202|           <Button \n03203|             onClick={() => window.open('/diagnostic', '_blank')}\n03204|             variant=\"outline\" \n03205|             className=\"border-blue-500 text-blue-400 hover:bg-blue-900/20\"\n03206|           >\n03207|             <Settings className=\"h-4 w-4 mr-2\" />\n03208|             –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞\n03209|           </Button>\n03210|         </div>\n03211|         \n03212|         <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 h-[90vh]\">\n03213|           {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - —Ñ–æ—Ä–º–∞ */}\n03214|           <div className=\"space-y-3 overflow-y-auto pr-2\">\n03215|             {/* –ö–∞—Ç–∞–ª–æ–≥ –º–µ–±–µ–ª–∏ */}\n03216|             <Card className=\"bg-gray-800 border-gray-700\">\n03217|               <CardHeader className=\"pb-3\">\n03218|                 <CardTitle className=\"text-white flex items-center gap-2 text-lg\">\n03219|                   <Package2 className=\"h-4 w-4\" />\n03220|                   –ö–∞—Ç–∞–ª–æ–≥ –º–µ–±–µ–ª–∏\n03221|                 </CardTitle>\n03222|               </CardHeader>\n03223|               <CardContent className=\"space-y-3\">\n03224|                 {/* –ü–æ–∏—Å–∫ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ */}\n03225|                 <ProductSearch \n03226|                   onProductAdd={handleProductAdd}\n03227|                   disabled={calculating}\n03228|                 />\n03229|                 \n03230|                 {/* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º–∏ —Ç–æ–≤–∞—Ä–∞–º–∏ */}\n03231|                 <ProductManager\n03232|                   products={form.selectedProducts}\n03233|                   onQuantityChange={handleProductQuantityChange}\n03234|                   onProductRemove={handleProductRemove}\n03235|                   disabled={calculating}\n03236|                 />\n03237|               </CardContent>\n03238|             </Card>\n03239| \n03240|             {/* –ì—Ä—É–∑—ã */}\n03241|             <Card className=\"bg-gray-800 border-gray-700\">\n03242|               <CardHeader className=\"pb-3\">\n03243|                 <CardTitle className=\"text-white flex items-center gap-2 text-lg\">\n03244|                   <Truck className=\"h-4 w-4\" />\n03245|                   –ì—Ä—É–∑—ã\n03246|                 </CardTitle>\n03247|               </CardHeader>\n03248|               <CardContent className=\"space-y-3\">\n03249|                 {groupCargosForDisplay(form.cargos).map((group, groupIndex) => (\n03250|                   <div key={`group_${groupIndex}`} className=\"border border-gray-600 rounded p-3\">\n03251|                     <div className=\"flex justify-between items-center mb-2\">\n03252|                       <h4 className=\"text-sm font-medium text-white\">\n03253|                         {group.isEmpty ? (\n03254|                           `–ì—Ä—É–∑ ‚Ññ${group.indices[0] + 1}`\n03255|                         ) : group.quantity === 1 ? (\n03256|                           `–ì—Ä—É–∑ ‚Ññ${group.indices[0] + 1}`\n03257|                         ) : (\n03258|                           `–ì—Ä—É–∑ ‚Ññ${group.indices[0] + 1} - ${group.quantity} –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –º–µ—Å—Ç–∞`\n03259|                         )}\n03260|                       </h4>\n03261|                       {form.cargos.length > 1 && group.quantity === 1 && (\n03262|                         <Button\n03263|                           variant=\"destructive\"\n03264|                           size=\"sm\"\n03265|                           onClick={() => removeCargo(form.cargos[group.indices[0]].id)}\n03266|                           className=\"h-6 text-xs\"\n03267|                         >\n03268|                           –£–¥–∞–ª–∏—Ç—å\n03269|                         </Button>\n03270|                       )}\n03271|                       {group.quantity > 1 && (\n03272|                         <Badge variant=\"secondary\" className=\"text-xs\">\n03273|                           {group.quantity} —à—Ç.\n03274|                         </Badge>\n03275|                       )}\n03276|                     </div>\n03277|                     \n03278|                     {group.isEmpty || group.quantity === 1 ? (\n03279|                       // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞ –¥–ª—è –ø—É—Å—Ç—ã—Ö –≥—Ä—É–∑–æ–≤ –∏–ª–∏ –µ–¥–∏–Ω–∏—á–Ω—ã—Ö\n03280|                       <div className=\"grid grid-cols-2 gap-2\">\n03281|                         <div>\n03282|                           <Label className=\"text-white text-xs\">–î–ª–∏–Ω–∞ (—Å–º)</Label>\n03283|                           <Input\n03284|                             type=\"number\"\n03285|                             value={form.cargos[group.indices[0]].length || ''}\n03286|                             onChange={(e) => updateCargo(form.cargos[group.indices[0]].id, 'length', Number(e.target.value))}\n03287|                             className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n03288|                           />\n03289|                         </div>\n03290|                         <div>\n03291|                           <Label className=\"text-white text-xs\">–®–∏—Ä–∏–Ω–∞ (—Å–º)</Label>\n03292|                           <Input\n03293|                             type=\"number\"\n03294|                             value={form.cargos[group.indices[0]].width || ''}\n03295|                             onChange={(e) => updateCargo(form.cargos[group.indices[0]].id, 'width', Number(e.target.value))}\n03296|                             className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n03297|                           />\n03298|                         </div>\n03299|                         <div>\n03300|                           <Label className=\"text-white text-xs\">–í—ã—Å–æ—Ç–∞ (—Å–º)</Label>\n\n(File has more lines. Use 'offset' parameter to read beyond line 3300)\n</file>",
    "metadata": {
      "preview": "      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –†–∞—Å—á–µ—Ç –≥–∞–±–∞—Ä–∏—Ç–æ–≤ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      const maxLength = Math.max(...form.cargos.map(c => c.length));\n      const maxWidth = Math.max(...form.cargos.map(c => c.width));\n      const maxHeight = Math.max(...form.cargos.map(c => c.height));\n      \n      // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç (>2–º –ø–æ –ª—é–±–æ–º—É –∏–∑–º–µ—Ä–µ–Ω–∏—é)\n      const isOversized = maxLength > 200 || maxWidth > 200 || maxHeight > 200 || totalWeight > 1000;\n      \n      // üîß –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n      console.log('üåê Nord Wheel: –ê–Ω–∞–ª–∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç:');\n      console.log(`   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç: ${form.cargos.length}`);\n      console.log(`   - –û–±—â–∏–π –≤–µ—Å: ${totalWeight} –∫–≥`);\n      console.log(`   - –û–±—â–∏–π –æ–±—ä–µ–º: ${totalVolume.toFixed(3)} –º¬≥`);\n      \n      form.cargos.forEach((cargo, index) => {\n        console.log(`   üì¶ –ú–µ—Å—Ç–æ ${index + 1}:`);\n        console.log(`     - –ì–∞–±–∞—Ä–∏—Ç—ã: ${cargo.length}√ó${cargo.width}√ó${cargo.height} —Å–º`);\n        console.log(`     - –í–µ—Å: ${cargo.weight} –∫–≥`);\n        console.log(`     - –û–±—ä–µ–º: ${((cargo.length * cargo.width * cargo.height) / 1000000).toFixed(3)} –º¬≥`);\n      });"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1759739381549,
      "end": 1759739381571
    }
  }
}