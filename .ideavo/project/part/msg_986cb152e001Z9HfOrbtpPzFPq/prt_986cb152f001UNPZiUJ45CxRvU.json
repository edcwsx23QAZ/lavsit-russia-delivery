{
  "id": "prt_986cb152f001UNPZiUJ45CxRvU",
  "type": "text",
  "text": "Метод /branches/findzonebyaddress/ — поиск тарифных зон и филиалов по строке адреса\nДоступ\nЗарегистрированные пользователи\nКомментарии\nМетод по строке адреса выводит филиал, к которому относится указанный адрес, наименование тарифной зоны, ID склада основного отделения филиала. Составляющие части адреса возвращаются в виде массива: страна, регион, населенный пункт, улица, дом.\nЕсли возвращается пустой ответ - значит зона адреса не обслуживается ПЭК.\nФормат запроса\n{\n    \"address\": \"Ростовская обл, Азовский р-н, поселок Койсуг\" // Адрес [string]\n}\nФормат ответа\n{\n    \"zoneId\": \"52ce7ec0-ab5f-11e8-80ca-00155d444127\", // Идентификатор зоны [String]\n    \"zoneName\": \"Батайск город\", // Наименование зоны [String]\n    \"branchUID\": \"614cdae3-7070-11e8-80c9-00155d668927\", // Идентификатор филиала [String]\n    \"bitrixId\": \"2729346\", // Код филиала [String]. В актуальной версии протокола не используется\n    \"branchCode\": \"БТ\", // Код филиала [String]\n    \"branchTitle\": \"Батайск\", // Название филиала [String]\n    \"mainWarehouseId\": \"a5ab5545-7076-11e8-80c9-00155d668927\", // ID склада основного отделения филиала [String]\n    \"warehousePoint\": { // Координаты «Основного отделения филиала компании», к которому относится адрес\n        \"latitude\": 47.12786575851295, // Координата широты [double]\n        \"longitude\": 39.85232042817180 // Координата долготы [double]\n    },\n    \"GeoData\": {\n        \"precision\": \"exact\", // критерий точности распознавания координат адреса [String]. Возможные значения: \n                              // \"exact\" - точно; \"bad\" - заявка по такому адресу не будет принята, \n                              // \"near\" - поняли адрес приблизительно (до улицы, соседнего дома и т.п.), \n                              // заявка будет принята, но потребуется уточнение адреса при оформлении груза.\n        \"kind\": \"locality\", // название компоненты адреса, до которой определен адрес в ответе. Пример значений: \"house\", \"street\", \"locality\" (город, село и т.п.), \"province\" (часть региона), \"country\"\n        \"Address\": {\n            \"country_code\": \"RU\", // код страны, к которой относится адрес (выводится только если определен точный адрес)\n            \"formatted\": \"Россия, Ростовская область, Азовский район, посёлок Койсуг\", // полное представление найденного адреса\n            \"Components\": [ // массив составляющих частей адреса: страна, регион, населенный пункт, улица, дом\n                {\n                    \"kind\": \"country\",\n                    \"name\": \"Россия\"\n                },\n                {\n                    \"kind\": \"province\",\n                    \"name\": \"Южный федеральный округ\"\n                },\n                {\n                    \"kind\": \"province\",\n                    \"name\": \"Ростовская область\"\n                },\n                {\n                    \"kind\": \"area\",\n                    \"name\": \"Азовский район\"\n                },\n                {\n                    \"kind\": \"locality\",\n                    \"name\": \"посёлок Койсуг\"\n                }\n            ]\n        }\n    }\n}\n}\n\n\nВыбор адреса отправления и адреса получения осуществляется по следующей логике: если заказана услуга забора/доставки, то расчет стоимости ведется по координатам напрямую переданным в запрос (параметр \"coordinates\" блоков pickup / delivery), или координатам, полученным по переданной строке адреса (параметр \"address\" блоков pickup / delivery). Все прочие параметры определяющие адреса будут проигнорированы.\nID склада населенного пункта (с отбором по разрешенным габаритам можно получить методом /branches/nearestdepartments, возвращающим ближайшие отделения к переданному в запрос адресу. \n\nФормат запроса\n\n{\n    \"address\": \"Россия, Самара\", // Если переданы координаты в реквизите «coordinates», то указанный здесь адрес игнорируется [string]\n    \"coordinates\": // Координаты. Необязательно, если передан параметр «address»\n    {\n        \"latitude\": \"55.717426\", // Координата широты [string]\n        \"longitude\": \"37.757728\" // Координата долготы [string]\n    },\n    \"weight\": null, // Вес груза, для которого необходимо подобрать подходящее отделение [double]. Необязательно\n    \"volume\": null, // Общий объем груза, для которого нужно подобрать отделение [double]. Необязательно\n    \"maxDimension\": null, // Максимальный габарит груза, для которого нужно подобрать отделение [double]. Необязательно\n    \"maxWeightPerPlace\": null, // Самое тяжелое место из всех грузомест груза [double]. Необязательно\n    \"departmentOperation\": 3, // 2 – есть приемка грузов, 3 – есть выдача грузов [int]. Обязательно.\n    \"type\":  3,  // Идентификатор продукта/тарифа ПЭК, с которым должно работать отделение [Number]. Обязательно.\n                 // Полный список доступных в API продуктов/тарифов можно получить методом /typesOfDelivery/all/\n    \"searchRadius\": 50, // Километры [int]. На каком расстоянии по прямой от точки переданных\n                        // координат или адреса до предлагаемых Отделений/Складов. Обязательно.\n    \"limit\": 5 // Сколько подходящих отделений возвращать в каждом массиве [int]. Обязательно.\n}\nФормат ответа\n{\n    \"freeDepartments\": // Массив с собственными отделениями ПЭК, подходящие в выборку [Array]\n    [ \n        {\n            \"warehouseId\": \"85974fc8-d0b8-11e5-9833-00155d668909\", // ID склада, используется в методах расчета стоимости и подачи заявок [string]\n            \"departmentType\": \"Отделение компании\", // Тип отделения. На текущий момент может быть 3 варианта: «Отделение компании», \n                                                    // \"Основное отделение филиала компании\", «ПВЗ» \n                                                    // (этот тип только в массиве paidDepartments) [string]\n            \"departmentTypeId\": 0, // ID типа отделения [Number]. Обозначения: //0 - Отделение компании, 1 - ПВЗ, 4 - Основное отделение компании в филиале\n            \"branchId\": \"64adbe2b-a185-11dc-a911-000a5e19ccb4\", // ID филиала, к которому относится отделение (организационная привязка).      \n            \"branchName\": \"Самара\", // Наименование филиала, к которому относится отделение (используется для передачи значения City в методах API) [string]\n            \"divisionName\": \"Самара Запад\", // Наименование отделения [string]\n            \"isActive\": true, // не используется. В ответе метода всегда только Активные отделения. [Boolean]\n            \"address\": \"Самарская область, г. Самара, ул. Верхне-Карьерная, д. 3В\", // Адрес отделения [string]\n            \"coordinates\": { // Координаты отделения                     \n                \"latitude\": 53.181565, [double]\n                \"longitude\": 50.174304 [double]\n            },\n            \"timeZone\": \"04:00:00\", // Временная зона, к которой относится отделение [string]\n            \"townBitrixId\": 481, // Идентификатор города, к которому относится отделение. Используется в методе CalculatePrice [int]\n            \"email\": \"samara@pecom.ru\", // Электронный адрес отделения [string]\n            \"phone\": \"8(846) 201-60-33\", // Телефон отделения [string]\n            \"priority\": 70, // Внутренний приоритет отделения (в рамках данного метода не важен). Отделения с наивысшим приоритетом ПЭК предлагает по умолчанию клиентам. [int]\n            \"maxWeight\": 0.0, // Ограничение на общий вес груза, который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxVolume\": 0.0, // Ограничение на общий объем груза, который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxDimension\": 0.0, // Ограничение на максимальный габарит груза \n                                 // (наибольший размер из длины, ширины и высоты из всех мест), \n                                 // который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxWeightOnePlace\": 0.0, // Ограничение на максимальный вес одного места груза, который может обрабатывать отделение. 0 – ограничений нет. [double]\n            \"maxCount\": 0, // Ограничение на количество мест груза, которое может обрабатывать отделение. 0 – ограничений нет. [int]\n            \"scheduleShortWorkDays\": [ // Сокращенный режим работы [Array]\n                 {\n                     \"date\": \"2023-11-03T00:00:00\", //Дата сокращённого дня\n                     \"workTime\":{ //Время работы сокращённого дня\n                          \"periodTimeFrom\": \"09:00:00\", // Начало рабочего дня [String]\n                          \"periodTimeTo\": \"17:00:00\", // Конец рабочего дня [String]\n                          },\n                     \"breakTime\": null // Обеденный перерыв [String]\n                 },       \n            ],\n            \"scheduleHolidayDays\": // Праздничные и выходные дни отделения вне графика его работы [Array]\n            [ \n                \"2022-06-12T00:00:00\",\n                \"2022-06-13T00:00:00\",\n                \"2022-11-04T00:00:00\"\n            ]\n        },\n        ...\n    ],\n    \"paidDepartments\": // Массив с ПВЗ (структура элемента массива такая же как для собственных отделений) [Array]\n    [ \n        { \n            ...\n        },\n        ...\n    ]\n}\n\nИли самостоятельно выбирать удобное отделение/склад из ответа метода /branches/all (поле branches[].divisions[].warehouses[].id), при этом необходимо учитывать доступность складов по габаритам и разрешенных для них операций.\nБыстро получить ID склада основного отделения любого филиала можно используя метод /branches/findzonebyaddress. в ответе метода реквизит mainWarehouseId. Основное отделение является центральным складом конкретного филиала, из которого можно дозаказать доставку до адреса или ПВЗ, который относится к зоне обслуживаемого филиала.\nНапример, по адресу «Самарская область, город Отрадный», основным является отделение филиала «Самара» по адресу: ул. Земеца, д. 32 литера 354, так как город Отрадный обслуживает филиал «Самара».",
  "messageID": "msg_986cb152e001Z9HfOrbtpPzFPq",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14"
}