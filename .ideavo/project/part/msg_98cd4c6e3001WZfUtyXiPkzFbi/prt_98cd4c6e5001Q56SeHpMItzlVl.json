{
  "id": "prt_98cd4c6e5001Q56SeHpMItzlVl",
  "type": "text",
  "text": "ПО Rail Continent\nСтраховка добавляется к сумме если поставлен чекбокс \"требуется страховка\"\nУпаковка добавляется к сумме если поставлен чекбокс \"требуется упаковка\"\n\nСкорректируй расчет суммы Rail Continent\n\nЗатем Создай одну кнопку \"Диагностика\" и убери туда диагностическую информацию про ПЭК и другие ТК ( Калькулятор ПЭК готов! Для получения реальных тарифов настройте API ПЭК.\nПроверить настройки ПЭК API → | Диагностика API →)\n\nЗатем добавь к расчетам еще одну ТК \"Возовоз\"\n\nДобавь еще одну ТК \"Возовоз\"\n\nИспользуй ключ efijwYxNUE8ahEqlnRT8oZ00R3rDDBjcLgGsTLLp\n\nVozovoz API 2.5\nГлавная страница > Быстрый старт\n\nБыстрый старт\nВсе запросы и ответы Vozovoz API передаются в формате JSON, передаваемого в POST-параметрах. Для использования Vozovoz API Вам необходимо в каждом запросе в GET-параметрах указывать свой идентификационный токен.\n\nПример кода на JavaScript, который Вы можете в любой момент ввести в консоли разработчика:\n\nvar xhttp = new XMLHttpRequest();\n// запрос на тестовый сервер\nxhttp.open(\"POST\", \"https://vozovoz.org/api/?token=yourToken\"/*вместо yourToken должен быть указан Ваш идентификационный токен-ключ*/, false);\n// xhttp.open(\"POST\", \"https://vozovoz.ru/api/?token=yourToken\", false); // для рабочего сервера\nxhttp.setRequestHeader(\"Content-type\", \"application/json\");\nxhttp.send(JSON.stringify({\n// Тело запроса, например:\n    \"object\": \"version\",\n    \"action\": \"get\"\n}));\n// вывести текст тут же, в консоли\nxhttp.responseText;\n// или разместить его прямо на странице\n//document.body.innerHTML = xhttp.responseText;\nБез комментариев:\n\nvar xhttp = new XMLHttpRequest();\nxhttp.open(\"POST\", \"https://vozovoz.org/api/?token=\", false);\nxhttp.setRequestHeader(\"Content-type\", \"application/json\");\nxhttp.send(JSON.stringify({\n    \"object\": \"version\",\n    \"action\": \"get\"\n}));\ndocument.body.innerHTML = xhttp.responseText;\n\nVozovoz API 2.5\nГлавная страница > Объекты > Стоимость\n\nКод объекта: price\n\nСодержание\nПримеры\nОписание\nПримеры\nПример запроса на JavaScript\n\n// полное оформление кода на javascript для использования в консоли см. в разделе \"Быстрый старт\"\nxhttp.send(JSON.stringify(\n{\n  \"object\": \"price\",\n  \"action\": \"get\",\n  \"params\": {\n    \"cargo\" : {\n      \"dimension\": { // габариты\n        \"quantity\": 1, // количество мест\n        \"volume\": 0.1, // общий объем\n        \"weight\": 0.9 // общий вес\n      }\n    },\n    \"gateway\": {\n      \"dispatch\": { // откуда\n        \"point\": {\n          \"location\": \"Санкт-Петербург\",\n          \"terminal\": \"default\" // терминал по умолчанию\n        }\n      },\n      \"destination\": { // куда\n        \"point\": {\n          \"location\": \"Москва\",\n          \"terminal\": \"default\" // терминал по умолчанию\n        }\n      }\n    }\n  }\n}));\nПример ответа\n\n{\n  \"response\": {\n    \"basePrice\": 1250,\n    \"price\": 1200,\n    \"service\": [\n      {\n        \"name\": \"Перевозка между городами\",\n        \"price\": 370\n      },\n      {\n        \"name\": \"Страхование груза без объявленной стоимости\",\n        \"price\": 35\n      },\n      {\n        \"name\": \"Забор груза от клиента\",\n        \"price\": 363\n      },\n      {\n        \"name\": \"Отвоз груза клиенту\",\n        \"price\": 432\n      }\n    ],\n    \"deliveryTime\": {\n      \"from\": 1,\n      \"to\": 1\n    }\n  }\n}\nОписание\nПредставляет собой массив услуг с указанной стоимостью, а также общую стоимость без скидки и с учётом скидок.\n\nДанные запроса\nСтруктура\tТип\tОписание\nОбязательные\t\t\ncargo\tobject\tСтруктура данных \"Груз\"\ngateway\tobject\tСтруктура данных \"Пункт доступа\"\nНеобязательные\t\t\npromoCode\tstring\tСтрока промокода\nДанные ответа\nНазвание\tТип\tОписание\nbasePrice\tinteger\tБазовая стоимость в рублях (без учёта скидок)\nprice\tinteger\tИтоговая стоимость в рублях (с учётом скидок)\nservice\n- name\n- price\tarray\n- string\n- integer\tМассив услуг, с указанием наименования и стоимости (со скидкой)\n- Наименование услуги\n- Стоимость услуги со скидкой\ndeliveryTime\n- from\n- to\tobject\n- integer\n- integer\tДиапазон срока доставки в днях\n- Минимальный срок доставки в днях\n- Максимальный срок доставки в днях\n\nОтправка данных. Действие set\nДанные запроса\nОбщий пример структуры\nКорневая структура\nОбщий пример структуры\n// полное оформление кода на javascript для использования в консоли см. в разделе \"Быстрый старт\"\nxhttp.send(JSON.stringify(\n{\n  \"object\": \"order\",\n  \"action\": \"set\",\n  \"params\": {\n    \"cargo\": {\n      \"category\": \"12345678-1234-1234-1234-1234567890ab\", // уникальный внутренний ID категории груза, необязателен\n      \"correspondence\": true, // перевозится ли корренспонденция\n      \"dimension\": { // габариты груза\n        \"max\": { // максимальные габариты одного места\n          \"height\": 0.5, // макс. высота одного места\n          \"length\": 0.5, // макс. длина одного места\n          \"weight\": 5.3, // макс. вес одного места\n          \"width\": 0.5 // макс. ширина одного места\n        },\n        \"quantity\": 2, // количество мест\n        \"volume\": 0.9, // общий объём груза (всех мест)\n        \"weight\": 5.3 // общий вес груза (всех мест)\n      },\n      \"insurance\": 1000, // заявленная стоимость для страховки (если требуется)\n      \"insuranceNdv\": false, // если нужно отключить страхование БОС для плательщика физ.лица (также отключается автоматически при использовании \"insurance\")\n      \"wrapping\": { // упаковка\n        \"bag1\": 1, // 1 шт. упаковки с кодом `bag1`\n        \"box1\": 2, // 2 шт. упаковки с кодом `box1`\n        \"palletCollar\": 0.5 // 0.5м3 упаковки с кодом `palletCollar`\n      }\n    },\n    \"customId\": \"MW0123456/ZX15\", // пользовательский внешний ID. Может быть любимым. Необязателен\n    \"gateway\": { // пункт доступа\n      \"dispatch\": { // пункт отправки\n        \"point\": { // точка доступа\n          \"location\": \"Санкт-Петербург\", // локация отправки\n          \"address\": \"Луначарского ул., 7\", // адрес отправки\n          \"date\": \"2017-05-01\", // дата отправки\n          \"time\": { // диапазон времени для забора груза\n            \"start\": \"14:00\",\n            \"end\": \"18:00\"\n          }\n        },\n        \"service\": { // услуги\n          \"needLoading\": { // погрузочные работы\n            \"floor\": 21, // 21 этаж\n            \"hasLift\": true // имеется грузовой лифт\n          },\n          \"specificLoading\": [ // особый вид транспорта\n            \"openMachine\" // открытая машина\n          ],\n          \"retrieveAD\": { // возврат сопроводительных документов, также этот узел является точкой доступа\n            \"location\": \"Выборг\", // локации доставки СД\n            \"address\": \"Просвещения пр-т\" // адрес доставки СД\n          }\n        },\n        \"customer\": { // контрагент (отпавитель)\n          \"email\": \"customer@ya.ru\", // email\n          \"id\": \"ivan\", // временный ID для текущего запроса. Необязательный. По умолчанию `dispatch`\n          \"type\": \"individual\", // физ. лицо\n          \"name\": \"Иванов Иван Иванович\", // ФИО\n          \"phone\": \"79999999999\" // телефон\n        }\n      },\n      \"destination\": { // пункт получения\n        \"point\": { // точка доступа\n          \"location\": \"Москва\", // локация получения\n          \"terminal\": \"1c9871-e09d-df43423-1234-123456\", // уникальный внутренний ID терминала\n          \"date\": \"2017-05-08\" // дата получения\n        },\n        \"service\": { // услуги\n          \"needLoading\": { // разгрузочные работы\n            \"used\": false // не требуются\n          },\n          \"specificLoading\": [ // особый вид транспорта\n            \"tailLift\"\n          ]\n        },\n        \"customer\": { // контрагент (получатель)\n          \"type\": \"corporation\", // юр. лицо\n          \"companyName\": \"АЛЬЯНС\", // название юр. лица\n          \"name\": \"Ivanov Ilya\", // ФИО контактного лица\n          \"phone\": [ // список телефонов\n            \"79999999999\",\n            \"79998888888\"\n          ],\n          \"kpp\": \"111111111\", // КПП\n          \"inn\": \"222222222222\" // ИНН\n        }\n      }\n    },\n    \"payer\": \"ivan\", // указывает плательщиком отправителя (по временному ID). Можно не указывать, плательщик по умолчанию - получатель\n    \"promoCode\": \"promo\" // промокод, если имеется\n  }\n}));\nКорневая структура. Передаётся напрямую в узел params\nСтруктура\tТип\tОписание\nОбязательные\t\t\ncargo\tobject\tСтруктура \"Груз\" (на другой странице)\ngateway\tobject\tСтруктура \"Пункт доступа\" (на другой странице)\npayer\tstring|object\tСтрока с временным ID, указанным (или не указанным) у контрагентов в структуре \"Пункт доступа\". По умолчанию имеет значение destination, т.е. получатель - плательщик (если Вы хотите назначить плательщиком получателя, без ввода своего ID, укажите destination). Также может быть третьим лицом, тогда его содержимое должно соответствовать структуре \"Контрагент\" (на другой странице)\nНеобязательные\t\t\ncod\tobject\tСтруктура \"Наложенный платёж\" (на другой странице)\ncustomId\tstring\tСтрока с Вашим ID для заказа. По ней впоследствии можно будет получить данные заказа. Необязательный параметр, каждый заказ в любом случае имеет уникальный внутренний номер и уникальный внутренний ID\npromoCode\tstring\tПромокод, если имеется. Необязательный параметр\nДанные ответа\nПример ответа\nОписание данных ответа\nПример ответа:\n\n{\n  \"response\": {\n    \"id\": \"3afda4a6-46cf-11e7-80f9-00155d189b14\", // уникальный внутрениий ID заказа\n    \"number\": \"700247223\", // уникальный внутренний номер заказа\n    \"basePrice\": 2440, // базовая стоимость заказа (без скидок)\n    \"price\": 2440, // итоговая стоимость заказа (со скидками)\n    \"service\": [ // услуги\n      {\n        \"name\": \"Перевозка между городами\", // наименование услуги\n        \"price\": 495 // стоимость услуги со скидкой\n      },\n      {\n        \"name\": \"Жесткий короб\",\n        \"price\": 800\n      },\n      {\n        \"name\": \"Упаковка в коробку (20х20х40)\",\n        \"price\": 140\n      },\n      {\n        \"name\": \"Страхование груза без объявленной стоимости\",\n        \"price\": 35\n      },\n      {\n        \"name\": \"Забор груза от клиента\",\n        \"price\": 380\n      },\n      {\n        \"name\": \"Отвоз груза клиенту\",\n        \"price\": 590\n      }\n    ]\n  }\n}\nОписание данных ответа:\n\nНазвание\tТип\tОписание\nid\tstring\tУникальный внутренний ID заказа\nnumber\tstring\tУникальный внутренний номер заказа\nbasePrice\tinteger\tБазовая стоимость в рублях (без учёта скидок)\nprice\tinteger\tИтоговая стоимость в рублях (с учётом скидок)\nservice\n- name\n- price\tarray\n- string\n- integer\tМассив услуг, с указанием наименования и стоимости (со скидкой)\n- Наименование услуги\n- Стоимость услуги со скидкой\nПримеры\nЗапрос\n\n// полный вызов в консоли на JavaScript см. в разделе Быстрый старт\nxhttp.send(JSON.stringify(\n{\n  \"object\": \"order\",\n  \"action\": \"set\",\n  \"params\": {\n    \"cargo\": {\n      \"dimension\": {\n        \"volume\": 0.1,\n        \"weight\": 0.9,\n      },\n      \"wrapping\": {\n        \"box1\": 2,\n        \"hardBoxVolume\": 0.5\n      }\n    },\n    \"gateway\": {\n      \"dispatch\": {\n        \"point\": {\n          \"location\": \"Санкт-Петербург\",\n          \"address\": \"Пивоварная ул. 11\",\n          \"date\": \"2017-06-03\",\n          \"time\": {\n            \"start\": \"10:00\",\n            \"end\": \"16:00\"\n          }\n        },\n        \"customer\": {\n          \"name\": \"Name 1\",\n          \"phone\": \"79092407718\"\n        }\n      },\n      \"destination\": {\n        \"point\": {\n          \"location\": \"Москва\",\n          \"address\": \"Ячменный пер., 69\",\n          \"date\": \"2017-06-07\",\n          \"time\": {\n            \"start\": \"10:00\",\n            \"end\": \"16:00\"\n          }\n        },\n        \"customer\": {\n          \"id\": \"name2\",\n          \"name\": \"Name 2\",\n          \"phone\": \"79092407700\"\n        }\n      }\n    },\n    \"payer\": \"name2\"\n  }\n}));\nОтвет\n\n{\n  \"response\": {\n    \"id\": \"3afda4a6-46cf-11e7-80f9-00155d189b14\", // уникальный внутрениий ID заказа\n    \"number\": \"700247223\", // уникальный внутренний номер заказа\n    \"basePrice\": 2440, // базовая стоимость заказа (без скидок)\n    \"price\": 2440, // итоговая стоимость заказа (со скидками)\n    \"service\": [ // услуги\n      {\n        \"name\": \"Перевозка между городами\", // наименование услуги\n        \"price\": 495 // стоимость услуги со скидкой\n      },\n      {\n        \"name\": \"Жесткий короб\",\n        \"price\": 800\n      },\n      {\n        \"name\": \"Упаковка в коробку (20х20х40)\",\n        \"price\": 140\n      },\n      {\n        \"name\": \"Страхование груза без объявленной стоимости\",\n        \"price\": 35\n      },\n      {\n        \"name\": \"Забор груза от клиента\",\n        \"price\": 380\n      },\n      {\n        \"name\": \"Отвоз груза клиенту\",\n        \"price\": 590\n      }\n    ]\n  }\n}\nОтмена заказа\nПредставляет собой объект, использующийся для отмены оформленного заказа.\n\nЗапрос\n\n// полное оформление кода на javascript для использования в консоли см. в разделе \"Быстрый старт\"\nxhttp.send(JSON.stringify(\n{\n  \"object\": \"order\",\n  \"action\": \"cancel\",\n  \"params\": {\n    \"id\": \"3afda4a6-46cf-11e7-80f9-00155d189b14\", // уникальный внутрениий ID заказа\n    \"reason\": \"Тестовый заказ. Проверяли работоспособность\" // текстовое описание причины отмены заказа\n  }\n}));\nОтвет\n\n{\n  \"response\": {\n    \"message\": \"Заказ успешно отменён\" // Если ошибка, здесь будет объект ошибки\n  }\n}\n\nАвторизация\nПо сути вся авторизация сводится к тому, чтобы передать в GET-параметре token Ваш идентификационный ключ.\n\nодержание\nGET-параметры\nСписок доступных GET-параметров\nПримеры\nGET-параметры\nВ рамках GET-запроса некоторые данные могут быть переданы в строке запроса URI, указывающие, например, условия поиска, авторизационные данные, или другую информацию, определяющую запрос. Вы можете передавать параметры выполнения запроса в URI целевого ресурса после символа «?». Дополнительные параметры соединяются символом «&». Пробелы не используются.\n\nОбратите внимание!\n\nЕсли Вам требуется тестовый, используйте vozovoz.org, вместо vozovoz.ru.\n\nНапример:\n\n//vozovoz.ru/api/?param1=value1&param2=value2&param3=value3\nСписок доступных GET-параметров\nПараметр\tТип\tЗначения\tОписание\nОбязательные\t\t\t\ntoken\tstring\tyourToken, orOtherStuff\tОднозначно идентифицирует пользователя API\nНеобязательные\t\t\t\ndebugMode\tboolean\ttrue, false\tУказывает нужно ли возвращать в ответе отладочные данные\nreportAll\tboolean\ttrue, false\tУказывает нужно ли возвращать в ответе списки ошибок и предупреждений, если таковые имеются\nversion\tstring\t2, 2.0, 2.V\tУказывает версию API, которую необходимо использовать. На данный момент активна версия 2.V или просто 2. Версия 1.0 вызывается по тому же алгоритму, что и раньше\nУчтите, что в отличие от POST-параметров, в GET-параметрах кавычки не используются!\n\nПримеры\nДля полноценной работы достаточно этого запроса c правильно оформленным телом POST-запроса:\n\n//vozovoz.ru/api/?token=yourToken\nВариации\n\n//vozovoz.ru/api/?token=orOtherStuff&version=2&reportAll=false\n//vozovoz.ru/api/?token=randomStringOfCharsJustForAnExample&debugMode=true\n\n\nСодержание\nPOST-параметры\nСписок доступных POST-параметров\nПримеры\nPOST-параметры\nМетод запроса POST предназначен для запроса, при котором веб-сервер принимает данные, заключённые в тело сообщения, для хранения. Он часто используется для загрузки файла или представления заполненной веб-формы.\n\nВ зависимости от среды разработки POST-параметры передаются по-разному. Вот пара примеров.\n\nPHP:\n\n$context = stream_context_create([\n  'http' => [\n    'method' => 'POST',\n    'header' => 'Content-type: application/json',\n    'content' => json_encode([\n      'object' => 'version',\n      'action' => 'get',\n    ]),\n  ]\n]);\n\n/* запрос на тестовый сервер */\necho file_get_contents('https://vozovoz.org/api/?token=yourToken'/* не забудьте указать Ваш токен */, false, $context);\n/* запрос на рабочий сервер */\n// echo file_get_contents('https://vozovoz.ru/api/?token=yourToken'/* не забудьте указать Ваш токен */, false, $context);\nJavaScript:\n\nvar xhttp = new XMLHttpRequest();\n// запрос на тестовый сервер\nxhttp.open(\"POST\", \"//vozovoz.org/api/?token=yourToken\"/*вместо yourToken должен быть указан Ваш идентификационный токен-ключ*/, false);\n// xhttp.open(\"POST\", \"//vozovoz.ru/api/?token=yourToken\", false); // для рабочего сервера\nxhttp.setRequestHeader(\"Content-type\", \"application/json\");\nxhttp.send(JSON.stringify({\n// Тело запроса, например:\n  \"object\": \"version\",\n  \"action\": \"get\"\n}));\n// вывести текст тут же, в консоли\nxhttp.responseText;\n// или разместить его прямо на странице\n//document.body.innerHTML = xhttp.responseText;\nСписок доступных POST-параметров\nПараметр\tТип\tЗначения\tОписание\nОбязательные\t\t\t\nobject\tstring\tversion, location и т.п.\tУказывает на объект, с которым будет производится действие. Полный список объектов тут\nНеобязательные\t\t\t\naction\tstring\tget, put\tУказывает на действие, производимое с объектом. По умолчанию get\nparams\tobject\t{\"param1\": \"value1\", \"param2\": \"value2\"}\tПередает необходимые параметры уточнения запроса. Представляет собой объект (ассоциативный массив). Может отсутствовать. Подробнее о структурах данных здесь\nПримеры\nxhttp.send(JSON.stringify({\n  \"object\": \"location\",\n  \"params\": {\n    \"search\": \"санкт\",\n    \"limit\": 25\n  }\n}));\n$context = stream_context_create([\n  'http' => [\n    'method' => 'POST',\n    'header' => 'Content-type: application/json',\n    'content' => json_encode([\n      'object' => 'terminal',\n      'action' => 'get',\n      'params' => [\n\t    'guid' => '99999894-3673-11e5-80cd-00155d903d03',\n      ],\n    ]),\n  ]\n]);\n\nVozovoz API 2.5\nГлавная страница > Список объектов\n\nСодержание\nОписание\nСписок объектов\nСписок методов\nОбъекты\nПредставляют собой параметр, который возврашает определённые данные в ответе на Ваш запрос в зависимости от указанного метода и POST-параметров.\n\nСписок объектов\nОбъект\tКод объекта\tДоступные методы\tОписание\nЛокация\tlocation\tget\tПредставляет собой как отдельные объекты локации, так и список. Формируется в зависимости от параметров запроса\nЗаказ\torder\tget, set\tОбъект заказа. Действие get вернет информацию по оформленным заказам, действие set служит для оформления нового заказа\nПрямой запрос\tdirectQuery\tget\tДля поддержки старых методов существует объект прямого запроса, который позволяет отправить запрос напрямую к базе данных\nРасписание дат доставки\tschedule\tget\tОбъект, возвращающий доступные даты отправления и доставки\nСтоимость\tprice\tget\tПредставляет собой объект, содержащий как общую стоимость, так и стоимость по конкретной услуге\nТерминал\tterminal\tget\tПредставляет собой как отдельные объекты терминалов, так и список. Формируется в зависимости от параметров запроса\nУпаковка\twrapping\tget\tПредставляет собой как отдельные объекты упаковок, так и список. Формируется в зависимости от параметров запроса\nВерсия\tversion\tget\tВерсия API. Возвращает строковое представление текущей версии Vozovoz API. Примеры запроса Вы можете найти на странице \"Быстрый старт\"\nСписок методов\nМетод\tОписание\nget\tПолучить данные (метод по умолчанию, т.е. указывать в запросе необязательно)\nset\tОтправить данные (для добавления или обновления в зависимости от параметров)\n\nЕсли документации по Возовоз недостаточно, попробуй взять ее отсюда:\n\nhttps://github.com/vozovoz/apiv2\n\nЗатем для каждой ТК сделай полную диагностическую программу каждой функции с полным логированием и обратной связью, и вынести все диагностические инструменты на страницу \"Диагностика\"",
  "messageID": "msg_98cd4c6e3001WZfUtyXiPkzFbi",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14"
}