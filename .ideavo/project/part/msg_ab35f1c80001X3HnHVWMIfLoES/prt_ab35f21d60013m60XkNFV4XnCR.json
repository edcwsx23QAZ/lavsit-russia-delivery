{
  "id": "prt_ab35f21d60013m60XkNFV4XnCR",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_ab35f1c80001X3HnHVWMIfLoES",
  "type": "tool",
  "callID": "call_85238391",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "app/page.tsx",
      "offset": 4930
    },
    "output": "<file>\n04931|                         \n04932|                         <div className=\"flex gap-2 mt-2\">\n04933|                           {!calc.error && (\n04934|                             <Button\n04935|                               variant=\"outline\"\n04936|                               size=\"sm\"\n04937|                               onClick={() => toggleDetails(calc.company)}\n04938|                               className=\"h-6 text-xs\"\n04939|                             >\n04940|                               {expandedDetails[calc.company] ? '–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ'}\n04941|                             </Button>\n04942|                           )}\n04943|                           <Button\n04944|                             variant=\"outline\"\n04945|                             size=\"sm\"\n04946|                             onClick={() => toggleDebugInfo(calc.company)}\n04947|                             className=\"h-6 text-xs\"\n04948|                           >\n04949|                             {expandedDebugInfo[calc.company] ? '–°–∫—Ä—ã—Ç—å –æ—Ç–ª–∞–¥–∫—É' : '–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'}\n04950|                           </Button>\n04951|                         </div>\n04952|                         \n04953|                         {/* –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ */}\n04954|                         {!calc.error && (\n04955|                           <Collapsible open={expandedDetails[calc.company]}>\n04956|                             <CollapsibleContent className=\"mt-2\">\n04957|                               <div className=\"bg-gray-900 p-3 rounded text-xs\">\n04958|                                 <h4 className=\"font-bold mb-2 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞:</h4>\n04959|                                 {(() => {\n04960|                                   const details = parseCalculationDetails(calc);\n04961|                                   const totalPrice = details.reduce((sum, detail) => sum + detail.price, 0);\n04962|                                   \n04963|                                   return (\n04964|                                     <div className=\"space-y-1\">\n04965|                                       {details.map((detail, idx) => (\n04966|                                         <div key={idx} className=\"flex justify-between text-white\">\n04967|                                           <div>\n04968|                                             <div className=\"font-medium\">{detail.service}</div>\n04969|                                             {detail.description && (\n04970|                                               <div className=\"text-gray-400 text-xs\">{detail.description}</div>\n04971|                                             )}\n04972|                                           </div>\n04973|                                           <div className=\"font-medium\">{detail.price.toLocaleString()} ‚ÇΩ</div>\n04974|                                         </div>\n04975|                                       ))}\n04976|                                     </div>\n04977|                                   );\n04978|                                 })()}\n04979|                               </div>\n04980|                             </CollapsibleContent>\n04981|                           </Collapsible>\n04982|                         )}\n04983|                         \n04984|                         {/* –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ */}\n04985|                         <Collapsible open={expandedDebugInfo[calc.company]}>\n04986|                           <CollapsibleContent className=\"mt-2\">\n04987|                             <div className=\"bg-gray-900 p-3 rounded text-xs\">\n04988|                               <h4 className=\"font-bold mb-2 text-white\">–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>\n04989|                               \n04990|                               {calc.apiUrl && (\n04991|                                 <div className=\"mb-3\">\n04992|                                   <h5 className=\"font-bold mb-1 text-white\">–ó–∞–ø—Ä–æ—Å –∫ API:</h5>\n04993|                                   <p className=\"text-gray-300 break-all text-xs\">URL: {calc.apiUrl}</p>\n04994|                                 </div>\n04995|                               )}\n04996|                               \n04997|                               {calc.sessionId && (\n04998|                                 <div className=\"mb-3\">\n04999|                                   <h5 className=\"font-bold mb-1 text-white\">Session ID:</h5>\n05000|                                   <p className=\"text-gray-300 text-xs\">{calc.sessionId}</p>\n05001|                                 </div>\n05002|                               )}\n05003|                               \n05004|                               {calc.requestData && (\n05005|                                 <div className=\"mb-3\">\n05006|                                   <h5 className=\"font-bold mb-1 text-white\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:</h5>\n05007|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05008|                                     {JSON.stringify(calc.requestData, null, 2)}\n05009|                                   </pre>\n05010|                                 </div>\n05011|                               )}\n05012|                               \n05013|                               {calc.responseData && (\n05014|                                 <div className=\"mb-3\">\n05015|                                   <h5 className=\"font-bold mb-1 text-white\">–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:</h5>\n05016|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05017|                                     {JSON.stringify(calc.responseData, null, 2)}\n05018|                                   </pre>\n05019|                                 </div>\n05020|                               )}\n05021|                               \n05022|                               {calc.details && (\n05023|                                 <div className=\"mb-3\">\n05024|                                   <h5 className=\"font-bold mb-1 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ (JSON):</h5>\n05025|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05026|                                     {JSON.stringify(calc.details, null, 2)}\n05027|                                   </pre>\n05028|                                 </div>\n05029|                               )}\n05030|                               \n05031|                               {calc.error && (\n05032|                                 <div className=\"mb-3\">\n05033|                                   <h5 className=\"font-bold mb-1 text-red-400\">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ:</h5>\n05034|                                   <p className=\"text-red-300 text-xs\">{calc.error}</p>\n05035|                                 </div>\n05036|                               )}\n05037|                             </div>\n05038|                           </CollapsibleContent>\n05039|                         </Collapsible>\n05040|                       </div>\n05041|                     </CardContent>\n05042|                   </Card>\n05043|                 ))}\n05044|               </div>\n05045|             )}\n05046| \n05047|             {/* –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¢–ö - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º—ã–π */}\n05048|             <Card className=\"bg-gray-800 border-gray-700\">\n05049|               <CardHeader className=\"pb-2\">\n05050|                 <CardTitle className=\"text-white text-sm\">\n05051|                   –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ ({COMPANIES_BASE.length})\n05052|                 </CardTitle>\n05053|               </CardHeader>\n05054|               <CardContent>\n05055|                 <div className=\"grid grid-cols-2 gap-2\">\n05056|                   {COMPANIES_BASE.map((company, index) => {\n05057|                     const isConnected = apiStatus[company.apiKey as keyof typeof apiStatus] === '–ø–æ–¥–∫–ª—é—á–µ–Ω–æ';\n05058|                     const statusText = apiStatus[company.apiKey as keyof typeof apiStatus];\n05059|                     const isEnabled = enabledCompanies[company.apiKey];\n05060|                     \n05061|                     // –û—Ç–ª–∞–¥–∫–∞ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 3 –∫–æ–º–ø–∞–Ω–∏–π\n05062|                     if (index < 3) {\n05063|                       console.log(`üîç –ö–æ–º–ø–∞–Ω–∏—è ${index}: ${company.name}, apiKey: ${company.apiKey}, isEnabled: ${isEnabled}, statusText: ${statusText}`);\n05064|                     }\n05065|                     \n05066|                     return (\n05067|                       <div key={index} className=\"flex items-center justify-between p-1.5 bg-gray-700 rounded\">\n05068|                         <div className=\"flex items-center gap-2\">\n05069|                           <span className=\"text-lg\">{company.logo}</span>\n05070|                           <div>\n05071|                             <p className=\"font-medium text-white text-[10px] leading-tight\">{company.name}</p>\n05072|                             <Badge \n05073|                               variant={isConnected ? \"default\" : \"destructive\"} \n05074|                               className=\"text-[9px] py-0 px-1\"\n05075|                             >\n05076|                               {isConnected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–∞' : statusText === '–ø—Ä–æ–≤–µ—Ä–∫–∞...' ? '–ü—Ä–æ–≤–µ—Ä–∫–∞...' : '–û—à–∏–±–∫–∞'}\n05077|                             </Badge>\n05078|                           </div>\n05079|                         </div>\n05080|                         <div className=\"flex items-center gap-2\">\n05081|                           <span className=\"text-[9px] text-gray-300\">\n05082|                             {isEnabled ? '–í–∫–ª' : '–í—ã–∫–ª'}\n05083|                           </span>\n05084|                           <Switch\n05085|                             checked={isEnabled}\n05086|                             onCheckedChange={(checked) => {\n05087|                               setEnabledCompanies(prev => ({\n05088|                                 ...prev,\n05089|                                 [company.apiKey]: checked\n05090|                               }));\n05091|                             }}\n05092|                             disabled={!isConnected}\n05093|                           />\n05094|                         </div>\n05095|                       </div>\n05096|                     );\n05097|                   })}\n05098|                 </div>\n05099|               </CardContent>\n05100|             </Card>\n05101| \n05102|             {/* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n05103|             {calculations.length > 0 && (\n05104|               <TruckVisualization \n05105|                 cargos={form.cargos.map(cargo => ({\n05106|                   id: cargo.id,\n05107|                   length: cargo.length * 10, // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05108|                   width: cargo.width * 10,   // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05109|                   height: cargo.height * 10, // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05110|                   weight: cargo.weight,\n05111|                   productName: form.selectedProducts?.find(p => \n05112|                     p.cargoIndexes.includes(form.cargos.indexOf(cargo))\n05113|                   )?.product.name\n05114|                 }))}\n05115|                 isVisible={true}\n05116|               />\n05117|             )}\n05118|           </div>\n05119|         </div>\n05120|       </div>\n05121| \n05122|       {/* –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ */}\n05123|       {showSuggestions && suggestions.length > 0 && (\n05124|         <div \n05125|           className=\"fixed z-50 bg-gray-800 border border-gray-700 rounded-md shadow-lg max-w-sm w-full max-h-60 overflow-y-auto\"\n05126|           style={{\n05127|             top: suggestionPosition.top,\n05128|             left: suggestionPosition.left\n05129|           }}\n05130|         >\n05131|           <div className=\"p-1\">\n05132|             {suggestions.map((suggestion, index) => (\n05133|               <div\n05134|                 key={index}\n05135|                 className=\"p-2 hover:bg-gray-700 cursor-pointer text-xs text-white rounded transition-colors\"\n05136|                 onClick={() => selectSuggestion(suggestion)}\n05137|               >\n05138|                 {suggestion.value}\n05139|               </div>\n05140|             ))}\n05141|           </div>\n05142|         </div>\n05143|       )}\n05144|     </div>\n05145|   );\n05146| }\n</file>",
    "title": "app/page.tsx",
    "metadata": {
      "preview": "                        \n                        <div className=\"flex gap-2 mt-2\">\n                          {!calc.error && (\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => toggleDetails(calc.company)}\n                              className=\"h-6 text-xs\"\n                            >\n                              {expandedDetails[calc.company] ? '–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ'}\n                            </Button>\n                          )}\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => toggleDebugInfo(calc.company)}\n                            className=\"h-6 text-xs\"\n                          >\n                            {expandedDebugInfo[calc.company] ? '–°–∫—Ä—ã—Ç—å –æ—Ç–ª–∞–¥–∫—É' : '–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'}\n                          </Button>"
    },
    "time": {
      "start": 1763945947610,
      "end": 1763945947618
    }
  }
}