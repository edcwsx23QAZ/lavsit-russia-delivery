{
  "id": "prt_ab36227e40019OTr2g75b4ovDm",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_ab3621f87001lH26C6RBldOSoH",
  "type": "tool",
  "callID": "call_18583212",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "app/page.tsx",
      "offset": 4878
    },
    "output": "<file>\n04879|           <div className=\"space-y-2 overflow-y-auto\">\n04880|             {calculations.length > 0 && (\n04881|                  <div className=\"space-y-2\">\n04882|                 <div className=\"flex justify-between items-center\">\n04883|                   <h2 className=\"text-lg font-bold text-blue-400\">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>\n04884|                   <Button \n04885|                     onClick={exportToPDF} \n04886|                     variant=\"outline\" \n04887|                     size=\"sm\" \n04888|                     className=\"h-7 text-xs border-blue-500 text-blue-400 hover:bg-blue-900/20 print:hidden\"\n04889|                   >\n04890|                     –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF\n04891|                   </Button>\n04892|                 </div>\n04893|                 \n04894|                 {calculations\n04895|                   .filter(calc => !hiddenCompanies[calc.company])\n04896|                   .map((calc, index) => (\n04897|                    <Card key={index} className=\"bg-gray-800 border-gray-700 text-xs\">\n04898|                      <CardHeader className=\"pb-1\">\n04899|                       <div className=\"flex justify-between items-center\">\n04900|                          <CardTitle className=\"text-white flex items-center gap-2 text-xs\">\n04901|                            <Building2 className=\"h-3 w-3\" />\n04902|                           {calc.company}\n04903|                         </CardTitle>\n04904|                         {calc.error ? (\n04905|                           <Badge variant=\"destructive\" className=\"text-xs\">–û—à–∏–±–∫–∞</Badge>\n04906|                         ) : (\n04907|                           <Badge variant=\"default\" className=\"bg-green-600 text-xs\">\n04908|                             {calc.price.toLocaleString()} ‚ÇΩ\n04909|                           </Badge>\n04910|                         )}\n04911|                       </div>\n04912|                     </CardHeader>\n04913|                     <CardContent className=\"pt-0\">\n04914|                       <div className=\"space-y-2\">\n04915|                         {calc.error ? (\n04916|                           <div className=\"space-y-2\">\n04917|                             <Alert className=\"border-red-600\">\n04918|                               <AlertDescription className=\"text-white text-xs\">{calc.error}</AlertDescription>\n04919|                             </Alert>\n04920|                             {calc.price > 0 && (\n04921|                               <>\n04922|                                 <p className=\"text-white text-xs\"><strong>–ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {calc.price.toLocaleString()} ‚ÇΩ</p>\n04923|                                 <p className=\"text-white text-xs\"><strong>–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Å—Ä–æ–∫:</strong> {calc.days} –¥–Ω–µ–π</p>\n04924|                               </>\n04925|                             )}\n04926|                           </div>\n04927|                         ) : (\n04928|                           <>\n04929|                             <p className=\"text-white text-xs\"><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {calc.price.toLocaleString()} ‚ÇΩ</p>\n04930|                             <p className=\"text-white text-xs\"><strong>–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:</strong> {calc.days} –¥–Ω–µ–π</p>\n04931|                           </>\n04932|                         )}\n04933|                         \n04934|                         <div className=\"flex gap-2 mt-2 flex-wrap\">\n04935|                           {!calc.error && (\n04936|                             <Button\n04937|                               variant=\"outline\"\n04938|                               size=\"sm\"\n04939|                               onClick={() => toggleDetails(calc.company)}\n04940|                               className=\"h-6 text-xs\"\n04941|                             >\n04942|                               {expandedDetails[calc.company] ? '–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ'}\n04943|                             </Button>\n04944|                           )}\n04945|                           <Button\n04946|                             variant=\"outline\"\n04947|                             size=\"sm\"\n04948|                             onClick={() => toggleDebugInfo(calc.company)}\n04949|                             className=\"h-6 text-xs\"\n04950|                           >\n04951|                             {expandedDebugInfo[calc.company] ? '–°–∫—Ä—ã—Ç—å –æ—Ç–ª–∞–¥–∫—É' : '–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'}\n04952|                           </Button>\n04953|                           <Button\n04954|                             variant=\"outline\"\n04955|                             size=\"sm\"\n04956|                             onClick={() => {\n04957|                               setHiddenCompanies(prev => ({\n04958|                                 ...prev,\n04959|                                 [calc.company]: true\n04960|                               }));\n04961|                             }}\n04962|                             className=\"h-6 text-xs border-red-500 text-red-400 hover:bg-red-900/20\"\n04963|                           >\n04964|                             –°–∫—Ä—ã—Ç—å\n04965|                           </Button>\n04966|                         </div>\n04967|                         \n04968|                         {/* –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ */}\n04969|                         {!calc.error && (\n04970|                           <Collapsible open={expandedDetails[calc.company]}>\n04971|                             <CollapsibleContent className=\"mt-2\">\n04972|                               <div className=\"bg-gray-900 p-3 rounded text-xs\">\n04973|                                 <h4 className=\"font-bold mb-2 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞:</h4>\n04974|                                 {(() => {\n04975|                                   const details = parseCalculationDetails(calc);\n04976|                                   const totalPrice = details.reduce((sum, detail) => sum + detail.price, 0);\n04977|                                   \n04978|                                   return (\n04979|                                     <div className=\"space-y-1\">\n04980|                                       {details.map((detail, idx) => (\n04981|                                         <div key={idx} className=\"flex justify-between text-white\">\n04982|                                           <div>\n04983|                                             <div className=\"font-medium\">{detail.service}</div>\n04984|                                             {detail.description && (\n04985|                                               <div className=\"text-gray-400 text-xs\">{detail.description}</div>\n04986|                                             )}\n04987|                                           </div>\n04988|                                           <div className=\"font-medium\">{detail.price.toLocaleString()} ‚ÇΩ</div>\n04989|                                         </div>\n04990|                                       ))}\n04991|                                     </div>\n04992|                                   );\n04993|                                 })()}\n04994|                               </div>\n04995|                             </CollapsibleContent>\n04996|                           </Collapsible>\n04997|                         )}\n04998|                         \n04999|                         {/* –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è - –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ */}\n05000|                         <Collapsible open={expandedDebugInfo[calc.company]}>\n05001|                           <CollapsibleContent className=\"mt-2\">\n05002|                             <div className=\"bg-gray-900 p-3 rounded text-xs\">\n05003|                               <h4 className=\"font-bold mb-2 text-white\">–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>\n05004|                               \n05005|                               {calc.apiUrl && (\n05006|                                 <div className=\"mb-3\">\n05007|                                   <h5 className=\"font-bold mb-1 text-white\">–ó–∞–ø—Ä–æ—Å –∫ API:</h5>\n05008|                                   <p className=\"text-gray-300 break-all text-xs\">URL: {calc.apiUrl}</p>\n05009|                                 </div>\n05010|                               )}\n05011|                               \n05012|                               {calc.sessionId && (\n05013|                                 <div className=\"mb-3\">\n05014|                                   <h5 className=\"font-bold mb-1 text-white\">Session ID:</h5>\n05015|                                   <p className=\"text-gray-300 text-xs\">{calc.sessionId}</p>\n05016|                                 </div>\n05017|                               )}\n05018|                               \n05019|                               {calc.requestData && (\n05020|                                 <div className=\"mb-3\">\n05021|                                   <h5 className=\"font-bold mb-1 text-white\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:</h5>\n05022|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05023|                                     {JSON.stringify(calc.requestData, null, 2)}\n05024|                                   </pre>\n05025|                                 </div>\n05026|                               )}\n05027|                               \n05028|                               {calc.responseData && (\n05029|                                 <div className=\"mb-3\">\n05030|                                   <h5 className=\"font-bold mb-1 text-white\">–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:</h5>\n05031|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05032|                                     {JSON.stringify(calc.responseData, null, 2)}\n05033|                                   </pre>\n05034|                                 </div>\n05035|                               )}\n05036|                               \n05037|                               {calc.details && (\n05038|                                 <div className=\"mb-3\">\n05039|                                   <h5 className=\"font-bold mb-1 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ (JSON):</h5>\n05040|                                   <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n05041|                                     {JSON.stringify(calc.details, null, 2)}\n05042|                                   </pre>\n05043|                                 </div>\n05044|                               )}\n05045|                               \n05046|                               {calc.error && (\n05047|                                 <div className=\"mb-3\">\n05048|                                   <h5 className=\"font-bold mb-1 text-red-400\">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ:</h5>\n05049|                                   <p className=\"text-red-300 text-xs\">{calc.error}</p>\n05050|                                 </div>\n05051|                               )}\n05052|                             </div>\n05053|                           </CollapsibleContent>\n05054|                         </Collapsible>\n05055|                       </div>\n05056|                     </CardContent>\n05057|                   </Card>\n05058|                  ))}\n05059|                </div>\n05060|                \n05061|                {/* –ë–ª–æ–∫ –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–∫—Ä—ã—Ç—ã—Ö –¢–ö */}\n05062|                {Object.values(hiddenCompanies).some(hidden => hidden) && (\n05063|                  <div className=\"mt-4 p-3 bg-gray-700 rounded border border-gray-600\">\n05064|                    <div className=\"flex items-center justify-between\">\n05065|                      <div className=\"text-sm text-gray-300\">\n05066|                        –°–∫—Ä—ã—Ç–æ –¢–ö: {Object.values(hiddenCompanies).filter(hidden => hidden).length}\n05067|                      </div>\n05068|                      <Button\n05069|                        variant=\"outline\"\n05070|                        size=\"sm\"\n05071|                        onClick={() => setHiddenCompanies({})}\n05072|                        className=\"h-6 text-xs border-green-500 text-green-400 hover:bg-green-900/20\"\n05073|                      >\n05074|                        –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Å–∫—Ä—ã—Ç—ã–µ\n05075|                      </Button>\n05076|                    </div>\n05077|                  </div>\n05078|                )}\n05079|              )}\n05080| \n05081|             {/* –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¢–ö - –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏–º—ã–π */}\n05082|             <Card className=\"bg-gray-800 border-gray-700\">\n05083|               <CardHeader className=\"pb-2\">\n05084|                 <div className=\"flex justify-between items-center\">\n05085|                   <CardTitle className=\"text-white text-sm\">\n05086|                     –ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ ({COMPANIES_BASE.filter(company => showHiddenCompanies || enabledCompanies[company.apiKey]).length}{showHiddenCompanies ? ` –∏–∑ ${COMPANIES_BASE.length}` : ''})\n05087|                   </CardTitle>\n05088|                   <Button\n05089|                     variant=\"outline\"\n05090|                     size=\"sm\"\n05091|                     onClick={() => setShowHiddenCompanies(prev => !prev)}\n05092|                     className=\"h-6 text-xs border-blue-500 text-blue-400 hover:bg-blue-900/20\"\n05093|                   >\n05094|                     {showHiddenCompanies ? '–°–∫—Ä—ã—Ç—å –≤—Å–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ'}\n05095|                   </Button>\n05096|                 </div>\n05097|               </CardHeader>\n05098|               <CardContent>\n05099|                 <div className=\"grid grid-cols-2 gap-2\">\n05100|                   {COMPANIES_BASE\n05101|                     .filter(company => showHiddenCompanies || enabledCompanies[company.apiKey])\n05102|                     .map((company, index) => {\n05103|                     const isConnected = apiStatus[company.apiKey as keyof typeof apiStatus] === '–ø–æ–¥–∫–ª—é—á–µ–Ω–æ';\n05104|                     const statusText = apiStatus[company.apiKey as keyof typeof apiStatus];\n05105|                     const isEnabled = enabledCompanies[company.apiKey];\n05106|                     \n05107|                     // –û—Ç–ª–∞–¥–∫–∞ –¥–ª—è –ø–µ—Ä–≤—ã—Ö 3 –∫–æ–º–ø–∞–Ω–∏–π\n05108|                     if (index < 3) {\n05109|                       console.log(`üîç –ö–æ–º–ø–∞–Ω–∏—è ${index}: ${company.name}, apiKey: ${company.apiKey}, isEnabled: ${isEnabled}, statusText: ${statusText}`);\n05110|                     }\n05111|                     \n05112|                     return (\n05113|                       <div key={index} className=\"flex items-center justify-between p-1.5 bg-gray-700 rounded\">\n05114|                         <div className=\"flex items-center gap-2\">\n05115|                           <span className=\"text-lg\">{company.logo}</span>\n05116|                           <div>\n05117|                             <p className=\"font-medium text-white text-[10px] leading-tight\">{company.name}</p>\n05118|                             <Badge \n05119|                               variant={isConnected ? \"default\" : \"destructive\"} \n05120|                               className=\"text-[9px] py-0 px-1\"\n05121|                             >\n05122|                               {isConnected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–∞' : statusText === '–ø—Ä–æ–≤–µ—Ä–∫–∞...' ? '–ü—Ä–æ–≤–µ—Ä–∫–∞...' : '–û—à–∏–±–∫–∞'}\n05123|                             </Badge>\n05124|                           </div>\n05125|                         </div>\n05126|                         <div className=\"flex items-center gap-2\">\n05127|                           <span className=\"text-[9px] text-gray-300\">\n05128|                             {isEnabled ? '–í–∫–ª' : '–í—ã–∫–ª'}\n05129|                           </span>\n05130|                           <Switch\n05131|                             checked={isEnabled}\n05132|                             onCheckedChange={(checked) => {\n05133|                               setEnabledCompanies(prev => ({\n05134|                                 ...prev,\n05135|                                 [company.apiKey]: checked\n05136|                               }));\n05137|                             }}\n05138|                             disabled={!isConnected}\n05139|                           />\n05140|                         </div>\n05141|                       </div>\n05142|                     );\n05143|                   })}\n05144|                 </div>\n05145|               </CardContent>\n05146|             </Card>\n05147| \n05148|             {/* –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n05149|             {calculations.length > 0 && (\n05150|               <TruckVisualization \n05151|                 cargos={form.cargos.map(cargo => ({\n05152|                   id: cargo.id,\n05153|                   length: cargo.length * 10, // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05154|                   width: cargo.width * 10,   // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05155|                   height: cargo.height * 10, // –ü–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–º\n05156|                   weight: cargo.weight,\n05157|                   productName: form.selectedProducts?.find(p => \n05158|                     p.cargoIndexes.includes(form.cargos.indexOf(cargo))\n05159|                   )?.product.name\n05160|                 }))}\n05161|                 isVisible={true}\n05162|               />\n05163|             )}\n05164|           </div>\n05165|         </div>\n05166|       </div>\n05167| \n05168|       {/* –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ */}\n05169|       {showSuggestions && suggestions.length > 0 && (\n05170|         <div \n05171|           className=\"fixed z-50 bg-gray-800 border border-gray-700 rounded-md shadow-lg max-w-sm w-full max-h-60 overflow-y-auto\"\n05172|           style={{\n05173|             top: suggestionPosition.top,\n05174|             left: suggestionPosition.left\n05175|           }}\n05176|         >\n05177|           <div className=\"p-1\">\n05178|             {suggestions.map((suggestion, index) => (\n05179|               <div\n05180|                 key={index}\n05181|                 className=\"p-2 hover:bg-gray-700 cursor-pointer text-xs text-white rounded transition-colors\"\n05182|                 onClick={() => selectSuggestion(suggestion)}\n05183|               >\n05184|                 {suggestion.value}\n05185|               </div>\n05186|             ))}\n05187|           </div>\n05188|         </div>\n05189|       )}\n05190|     </div>\n05191|   );\n05192| }\n</file>",
    "title": "app/page.tsx",
    "metadata": {
      "preview": "          <div className=\"space-y-2 overflow-y-auto\">\n            {calculations.length > 0 && (\n                 <div className=\"space-y-2\">\n                <div className=\"flex justify-between items-center\">\n                  <h2 className=\"text-lg font-bold text-blue-400\">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>\n                  <Button \n                    onClick={exportToPDF} \n                    variant=\"outline\" \n                    size=\"sm\" \n                    className=\"h-7 text-xs border-blue-500 text-blue-400 hover:bg-blue-900/20 print:hidden\"\n                  >\n                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF\n                  </Button>\n                </div>\n                \n                {calculations\n                  .filter(calc => !hiddenCompanies[calc.company])\n                  .map((calc, index) => (\n                   <Card key={index} className=\"bg-gray-800 border-gray-700 text-xs\">\n                     <CardHeader className=\"pb-1\">"
    },
    "time": {
      "start": 1763946145766,
      "end": 1763946145770
    }
  }
}