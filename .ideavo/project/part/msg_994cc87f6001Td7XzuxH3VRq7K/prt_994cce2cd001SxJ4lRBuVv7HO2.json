{
  "id": "prt_994cce2cd001SxJ4lRBuVv7HO2",
  "messageID": "msg_994cc87f6001Td7XzuxH3VRq7K",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "edit",
  "callID": "toolu_01QSSB7pL6eVKonkRsFPN81Q",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/TruckVisualization.tsx",
      "oldString": "      <CardContent>\n        {/* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 3D –º–æ–¥–µ–ª—å—é */}\n        <div className=\"bg-gray-800 p-4 rounded-lg mb-4 space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <h4 className=\"text-white font-medium flex items-center gap-2\">\n              <Rotate3d className=\"h-4 w-4\" />\n              –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3D –º–æ–¥–µ–ª—å—é\n            </h4>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => {\n                setRotationX(0);\n                setRotationY(-45);\n                setRotationZ(0);\n                setPositionX(50);\n                setPositionY(50);\n                setScale(70);\n              }}\n              className=\"text-white border-gray-600 hover:bg-gray-700\"\n            >\n              –°–±—Ä–æ—Å\n            </Button>\n          </div>\n          \n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* –î–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ */}\n            <div className=\"space-y-2\">\n              <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n                <Rotate3d className=\"h-3 w-3\" />\n                –ü–æ–≤–æ—Ä–æ—Ç (X: {rotationX.toFixed(0)}¬∞, Y: {rotationY.toFixed(0)}¬∞)\n              </label>\n              <div className=\"flex justify-center\">\n                <svg\n                  ref={joystickRef}\n                  width=\"80\"\n                  height=\"80\"\n                  className=\"border border-gray-600 rounded-full bg-gray-900 cursor-move\"\n                  onMouseDown={handleJoystickStart}\n                  onMouseMove={handleJoystickMove}\n                  onMouseUp={handleJoystickEnd}\n                >\n                  {/* –í–Ω–µ—à–Ω–∏–π –∫—Ä—É–≥ */}\n                  <circle cx=\"40\" cy=\"40\" r=\"35\" fill=\"none\" stroke=\"#4B5563\" strokeWidth=\"2\" />\n                  \n                  {/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –æ—Å–∏ */}\n                  <line x1=\"40\" y1=\"10\" x2=\"40\" y2=\"70\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n                  <line x1=\"10\" y1=\"40\" x2=\"70\" y2=\"40\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n                  \n                  {/* –î–∂–æ–π—Å—Ç–∏–∫ */}\n                  <circle \n                    cx={40 + (rotationY / 90) * 25} \n                    cy={40 + (rotationX / 90) * 25} \n                    r=\"8\" \n                    fill={isDragging ? '#3B82F6' : '#6B7280'} \n                    stroke=\"white\" \n                    strokeWidth=\"2\"\n                    className=\"transition-colors\"\n                  />\n                  \n                  {/* –£–∫–∞–∑–∞—Ç–µ–ª–∏ –æ—Å–µ–π */}\n                  <text x=\"40\" y=\"8\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-X</text>\n                  <text x=\"40\" y=\"76\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+X</text>\n                  <text x=\"8\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-Y</text>\n                  <text x=\"72\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+Y</text>\n                </svg>\n              </div>\n            </div>\n            \n            {/* –°–ª–∞–π–¥–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–∏ */}\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n                  <Move className=\"h-3 w-3\" />\n                  –ü–æ–∑–∏—Ü–∏—è X: {positionX.toFixed(0)}%\n                </label>\n                <Slider\n                  value={[positionX]}\n                  onValueChange={(value) => setPositionX(value[0])}\n                  max={100}\n                  min={0}\n                  step={1}\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <label className=\"text-sm text-gray-300\">\n                  –ü–æ–∑–∏—Ü–∏—è Y: {positionY.toFixed(0)}%\n                </label>\n                <Slider\n                  value={[positionY]}\n                  onValueChange={(value) => setPositionY(value[0])}\n                  max={100}\n                  min={0}\n                  step={1}\n                  className=\"w-full\"\n                />\n              </div>\n            </div>\n            \n            {/* –°–ª–∞–π–¥–µ—Ä—ã –º–∞—Å—à—Ç–∞–±–∞ –∏ Z-–ø–æ–≤–æ—Ä–æ—Ç–∞ */}\n            <div className=\"space-y-4\">\n              <div className=\"space-y-2\">\n                <label className=\"text-sm text-gray-300\">\n                  –ú–∞—Å—à—Ç–∞–±: {scale.toFixed(0)}%\n                </label>\n                <Slider\n                  value={[scale]}\n                  onValueChange={(value) => setScale(value[0])}\n                  max={100}\n                  min={10}\n                  step={1}\n                  className=\"w-full\"\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <label className=\"text-sm text-gray-300\">\n                  –ü–æ–≤–æ—Ä–æ—Ç Z: {rotationZ.toFixed(0)}¬∞\n                </label>\n                <Slider\n                  value={[rotationZ]}\n                  onValueChange={(value) => setRotationZ(value[0])}\n                  max={180}\n                  min={-180}\n                  step={5}\n                  className=\"w-full\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* 3D SVG –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n        <div className=\"bg-gray-900 p-4 rounded-lg mb-4\">\n          <svg \n            viewBox=\"0 0 600 400\" \n            className=\"w-full h-96 border border-gray-600 bg-gray-950\"\n            style={{ maxHeight: '480px' }}\n          >\n            {/* –†–∞–∑–º–µ—Ä—ã –∫—É–∑–æ–≤–∞ */}\n            <text x=\"300\" y=\"20\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"12\" fontWeight=\"bold\">\n              –ì—Ä—É–∑–æ–≤–∏–∫ —Å –∫—É–∑–æ–≤–æ–º 4200√ó2025√ó2025 –º–º\n            </text>\n            \n            {/* –ö–∞–±–∏–Ω–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∞ */}\n            <g stroke=\"#10B981\" strokeWidth=\"2\" fill=\"#065F46\" fillOpacity=\"0.3\">\n              {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n              <polygon \n                points={`${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y}`}\n              />\n              \n              {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n              <polygon \n                points={`${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[2].x},${truckComponents.cabin[2].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y}`}\n                fillOpacity=\"0.4\"\n              />\n              \n              {/* –í–µ—Ä—Ö –∫–∞–±–∏–Ω—ã */}\n              <polygon \n                points={`${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n                fillOpacity=\"0.5\"\n              />\n              \n              {/* –õ–µ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n              <polygon \n                points={`${truckComponents.cabin[3].x},${truckComponents.cabin[3].y} ${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n                fillOpacity=\"0.2\"\n              />\n            </g>\n            \n            {/* –®–∞—Å—Å–∏ */}\n            <g stroke=\"#374151\" strokeWidth=\"3\" fill=\"#1F2937\">\n              {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫–∞–±–∏–Ω–æ–π */}\n              <polygon \n                points={`${truckComponents.chassis[0].x},${truckComponents.chassis[0].y} ${truckComponents.chassis[1].x},${truckComponents.chassis[1].y} ${truckComponents.chassis[2].x},${truckComponents.chassis[2].y} ${truckComponents.chassis[3].x},${truckComponents.chassis[3].y}`}\n              />\n              \n              {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫—É–∑–æ–≤–æ–º */}\n              <polygon \n                points={`${truckComponents.chassis[4].x},${truckComponents.chassis[4].y} ${truckComponents.chassis[5].x},${truckComponents.chassis[5].y} ${truckComponents.chassis[6].x},${truckComponents.chassis[6].y} ${truckComponents.chassis[7].x},${truckComponents.chassis[7].y}`}\n              />\n            </g>\n            \n            {/* –ö–æ–ª–µ—Å–∞ */}\n            <g fill=\"#1F2937\" stroke=\"#374151\" strokeWidth=\"2\">\n              {truckComponents.wheels.map((wheel, index) => (\n                <circle \n                  key={`wheel-${index}`}\n                  cx={wheel.x} \n                  cy={wheel.y} \n                  r={Math.max(truckComponents.wheelRadius, 3)}\n                />\n              ))}\n            </g>\n            \n            {/* –ö–æ–Ω—Ç—É—Ä –∫—É–∑–æ–≤–∞ –≤ –∏–∑–æ–º–µ—Ç—Ä–∏–∏ */}\n            <g stroke=\"#EF4444\" strokeWidth=\"2\" fill=\"none\">\n              {/* –ü–æ–ª –∫—É–∑–æ–≤–∞ */}\n              <polygon \n                points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y}`}\n                fill=\"#7F1D1D\" \n                fillOpacity=\"0.3\" \n              />\n              \n              {/* –ó–∞–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n              <polygon \n                points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[4].x},${truckVertices[4].y}`}\n                strokeDasharray=\"3,3\" \n              />\n              \n              {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n              <polygon \n                points={`${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[5].x},${truckVertices[5].y}`}\n                strokeDasharray=\"3,3\" \n              />\n              \n              {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n              <polygon \n                points={`${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[7].x},${truckVertices[7].y} ${truckVertices[6].x},${truckVertices[6].y}`}\n                strokeDasharray=\"3,3\" \n              />\n              \n              {/* –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n              <polygon \n                points={`${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n                strokeDasharray=\"3,3\" \n              />\n              \n              {/* –í–µ—Ä—Ö –∫—É–∑–æ–≤–∞ */}\n              <polygon \n                points={`${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n                strokeDasharray=\"3,3\" \n              />\n            </g>\n            \n            {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤ */}\n            {placements.map((placement, index) => {\n              const vertices = placement.projectedVertices;\n              if (vertices.length < 8) return null;\n\n              return (\n                <g key={`cargo-3d-${index}`}>\n                  {/* –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω—å */}\n                  <polygon\n                    points={`${vertices[0].x},${vertices[0].y} ${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y}`}\n                    fill={placement.color}\n                    fillOpacity=\"0.6\"\n                    stroke={placement.color}\n                    strokeWidth=\"1\"\n                  />\n                  \n                  {/* –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω—å */}\n                  <polygon\n                    points={`${vertices[4].x},${vertices[4].y} ${vertices[5].x},${vertices[5].y} ${vertices[6].x},${vertices[6].y} ${vertices[7].x},${vertices[7].y}`}\n                    fill={placement.color}\n                    fillOpacity=\"0.8\"\n                    stroke={placement.color}\n                    strokeWidth=\"1\"\n                  />\n                  \n                  {/* –ë–æ–∫–æ–≤—ã–µ –≥—Ä–∞–Ω–∏ */}\n                  <polygon\n                    points={`${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[6].x},${vertices[6].y} ${vertices[5].x},${vertices[5].y}`}\n                    fill={placement.color}\n                    fillOpacity=\"0.7\"\n                    stroke={placement.color}\n                    strokeWidth=\"1\"\n                  />\n                  \n                  <polygon\n                    points={`${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y} ${vertices[7].x},${vertices[7].y} ${vertices[6].x},${vertices[6].y}`}\n                    fill={placement.color}\n                    fillOpacity=\"0.5\"\n                    stroke={placement.color}\n                    strokeWidth=\"1\"\n                  />\n\n                  {/* –ù–æ–º–µ—Ä –≥—Ä—É–∑–∞ */}\n                  <text\n                    x={(vertices[4].x + vertices[6].x) / 2}\n                    y={(vertices[4].y + vertices[6].y) / 2}\n                    textAnchor=\"middle\"\n                    dominantBaseline=\"middle\"\n                    fill=\"white\"\n                    fontSize=\"8\"\n                    fontWeight=\"bold\"\n                  >\n                    {index + 1}\n                  </text>\n                </g>\n              );\n            })}\n          </svg>\n        </div>\n\n        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è */}\n        {stats && (\n          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-white\">–ó–∞–Ω—è—Ç—ã–µ —Ä–∞–∑–º–µ—Ä—ã:</h4>\n              <div className=\"text-gray-300 space-y-1\">\n                <div>–î–ª–∏–Ω–∞: {stats.dimensions.length} –º</div>\n                <div>–®–∏—Ä–∏–Ω–∞: {stats.dimensions.width} –º</div>\n                <div>–í—ã—Å–æ—Ç–∞: {stats.dimensions.height} –º</div>\n              </div>\n            </div>\n            <div className=\"space-y-2\">\n              <h4 className=\"font-medium text-white\">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4>\n              <div className=\"text-gray-300 space-y-1\">\n                <div>–ü–ª–æ—â–∞–¥—å –ø–æ–ª–∞: {stats.occupiedFloorArea} –º¬≤</div>\n                <div>–û–±—ä–µ–º: {stats.occupiedVolume} –º¬≥</div>\n                <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–∞: {stats.floorUtilization}%</div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* –õ–µ–≥–µ–Ω–¥–∞ –≥—Ä—É–∑–æ–≤ */}\n        {placements.length > 0 && (\n          <div className=\"mt-4\">\n            <h4 className=\"font-medium text-white mb-2\">–†–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –≥—Ä—É–∑—ã:</h4>\n            <div className=\"grid grid-cols-1 gap-2 text-xs max-h-32 overflow-y-auto\">\n              {placements.map((placement, index) => (\n                <div key={`legend-${index}`} className=\"flex items-center gap-2\">\n                  <div \n                    className=\"w-3 h-3 rounded\"\n                    style={{ backgroundColor: placement.color }}\n                  />\n                  <span className=\"text-gray-300\">\n                    –ì—Ä—É–∑ {index + 1}{getProductShortName(placement.cargo.productName) && (\n                      <span className=\"text-blue-300\"> \"{getProductShortName(placement.cargo.productName)}\"</span>\n                    )}: {Math.round(placement.orientation.length)}√ó{Math.round(placement.orientation.width)}√ó{Math.round(placement.orientation.height)} –º–º\n                    {placement.orientation.rotationAngle !== 0 && (\n                      <span className=\"text-blue-300\"> (–ø–æ–≤–µ—Ä–Ω—É—Ç {placement.orientation.rotationAngle}¬∞)</span>\n                    )}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </CardContent>",
      "newString": "      <CardContent>\n        {/* –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞: —Å–ª–µ–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —Å–ø—Ä–∞–≤–∞ 3D */}\n        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n          {/* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞ */}\n          <div className=\"space-y-4\">\n            {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è */}\n            {stats && (\n              <div className=\"bg-gray-800 p-4 rounded-lg\">\n                <h4 className=\"font-medium text-white mb-4\">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                  <div className=\"space-y-2\">\n                    <h5 className=\"font-medium text-gray-300\">–ó–∞–Ω—è—Ç—ã–µ —Ä–∞–∑–º–µ—Ä—ã:</h5>\n                    <div className=\"text-gray-400 space-y-1\">\n                      <div>–î–ª–∏–Ω–∞: {stats.dimensions.length} –º</div>\n                      <div>–®–∏—Ä–∏–Ω–∞: {stats.dimensions.width} –º</div>\n                      <div>–í—ã—Å–æ—Ç–∞: {stats.dimensions.height} –º</div>\n                    </div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <h5 className=\"font-medium text-gray-300\">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h5>\n                    <div className=\"text-gray-400 space-y-1\">\n                      <div>–ü–ª–æ—â–∞–¥—å –ø–æ–ª–∞: {stats.occupiedFloorArea} –º¬≤</div>\n                      <div>–û–±—ä–µ–º: {stats.occupiedVolume} –º¬≥</div>\n                      <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–∞: {stats.floorUtilization}%</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* –õ–µ–≥–µ–Ω–¥–∞ –≥—Ä—É–∑–æ–≤ */}\n            {placements.length > 0 && (\n              <div className=\"bg-gray-800 p-4 rounded-lg\">\n                <h4 className=\"font-medium text-white mb-3\">üì¶ –†–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –≥—Ä—É–∑—ã</h4>\n                <div className=\"grid grid-cols-1 gap-2 text-xs max-h-80 overflow-y-auto\">\n                  {placements.map((placement, index) => (\n                    <div key={`legend-${index}`} className=\"flex items-center gap-2 p-2 bg-gray-700 rounded\">\n                      <div \n                        className=\"w-4 h-4 rounded flex-shrink-0\"\n                        style={{ backgroundColor: placement.color }}\n                      />\n                      <span className=\"text-gray-300 flex-1\">\n                        <span className=\"font-medium\">–ì—Ä—É–∑ {index + 1}</span>\n                        {getProductShortName(placement.cargo.productName) && (\n                          <span className=\"text-blue-300\"> \"{getProductShortName(placement.cargo.productName)}\"</span>\n                        )}\n                        <br />\n                        <span className=\"text-xs text-gray-400\">\n                          {Math.round(placement.orientation.length)}√ó{Math.round(placement.orientation.width)}√ó{Math.round(placement.orientation.height)} –º–º\n                          {placement.orientation.rotationAngle !== 0 && (\n                            <span className=\"text-blue-300\"> (–ø–æ–≤–µ—Ä–Ω—É—Ç {placement.orientation.rotationAngle}¬∞)</span>\n                          )}\n                        </span>\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: 3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è */}\n          <div className=\"space-y-4\">\n            {/* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 3D –º–æ–¥–µ–ª—å—é */}\n            <div className=\"bg-gray-800 p-4 rounded-lg space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <h4 className=\"text-white font-medium flex items-center gap-2\">\n                  <Rotate3d className=\"h-4 w-4\" />\n                  üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3D –º–æ–¥–µ–ª—å—é\n                </h4>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => {\n                    setRotationX(0);\n                    setRotationY(-45);\n                    setRotationZ(0);\n                    setPositionX(50);\n                    setPositionY(50);\n                    setScale(70);\n                  }}\n                  className=\"text-white border-gray-600 hover:bg-gray-700\"\n                >\n                  –°–±—Ä–æ—Å\n                </Button>\n              </div>\n              \n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                {/* –î–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ */}\n                <div className=\"space-y-2\">\n                  <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n                    <Rotate3d className=\"h-3 w-3\" />\n                    –ü–æ–≤–æ—Ä–æ—Ç (X: {rotationX.toFixed(0)}¬∞, Y: {rotationY.toFixed(0)}¬∞)\n                  </label>\n                  <div className=\"flex justify-center\">\n                    <svg\n                      ref={joystickRef}\n                      width=\"80\"\n                      height=\"80\"\n                      className=\"border border-gray-600 rounded-full bg-gray-900 cursor-move\"\n                      onMouseDown={handleJoystickStart}\n                      onMouseMove={handleJoystickMove}\n                      onMouseUp={handleJoystickEnd}\n                    >\n                      {/* –í–Ω–µ—à–Ω–∏–π –∫—Ä—É–≥ */}\n                      <circle cx=\"40\" cy=\"40\" r=\"35\" fill=\"none\" stroke=\"#4B5563\" strokeWidth=\"2\" />\n                      \n                      {/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –æ—Å–∏ */}\n                      <line x1=\"40\" y1=\"10\" x2=\"40\" y2=\"70\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n                      <line x1=\"10\" y1=\"40\" x2=\"70\" y2=\"40\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n                      \n                      {/* –î–∂–æ–π—Å—Ç–∏–∫ */}\n                      <circle \n                        cx={40 + (rotationY / 90) * 25} \n                        cy={40 + (rotationX / 90) * 25} \n                        r=\"8\" \n                        fill={isDragging ? '#3B82F6' : '#6B7280'} \n                        stroke=\"white\" \n                        strokeWidth=\"2\"\n                        className=\"transition-colors\"\n                      />\n                      \n                      {/* –£–∫–∞–∑–∞—Ç–µ–ª–∏ –æ—Å–µ–π */}\n                      <text x=\"40\" y=\"8\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-X</text>\n                      <text x=\"40\" y=\"76\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+X</text>\n                      <text x=\"8\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-Y</text>\n                      <text x=\"72\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+Y</text>\n                    </svg>\n                  </div>\n                </div>\n                \n                {/* –°–ª–∞–π–¥–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–∏ */}\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n                      <Move className=\"h-3 w-3\" />\n                      –ü–æ–∑–∏—Ü–∏—è X: {positionX.toFixed(0)}%\n                    </label>\n                    <Slider\n                      value={[positionX]}\n                      onValueChange={(value) => setPositionX(value[0])}\n                      max={100}\n                      min={0}\n                      step={1}\n                      className=\"w-full\"\n                    />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm text-gray-300\">\n                      –ü–æ–∑–∏—Ü–∏—è Y: {positionY.toFixed(0)}%\n                    </label>\n                    <Slider\n                      value={[positionY]}\n                      onValueChange={(value) => setPositionY(value[0])}\n                      max={100}\n                      min={0}\n                      step={1}\n                      className=\"w-full\"\n                    />\n                  </div>\n                </div>\n                \n                {/* –°–ª–∞–π–¥–µ—Ä—ã –º–∞—Å—à—Ç–∞–±–∞ –∏ Z-–ø–æ–≤–æ—Ä–æ—Ç–∞ */}\n                <div className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm text-gray-300\">\n                      –ú–∞—Å—à—Ç–∞–±: {scale.toFixed(0)}%\n                    </label>\n                    <Slider\n                      value={[scale]}\n                      onValueChange={(value) => setScale(value[0])}\n                      max={100}\n                      min={10}\n                      step={1}\n                      className=\"w-full\"\n                    />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <label className=\"text-sm text-gray-300\">\n                      –ü–æ–≤–æ—Ä–æ—Ç Z: {rotationZ.toFixed(0)}¬∞\n                    </label>\n                    <Slider\n                      value={[rotationZ]}\n                      onValueChange={(value) => setRotationZ(value[0])}\n                      max={180}\n                      min={-180}\n                      step={5}\n                      className=\"w-full\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* 3D SVG –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n            <div className=\"bg-gray-900 p-4 rounded-lg\">\n              <svg \n                viewBox=\"0 0 600 400\" \n                className=\"w-full h-96 border border-gray-600 bg-gray-950\"\n                style={{ maxHeight: '480px' }}\n              >\n                {/* –†–∞–∑–º–µ—Ä—ã –∫—É–∑–æ–≤–∞ */}\n                <text x=\"300\" y=\"20\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"12\" fontWeight=\"bold\">\n                  üöõ –ì—Ä—É–∑–æ–≤–∏–∫ —Å –∫—É–∑–æ–≤–æ–º 4200√ó2025√ó2025 –º–º\n                </text>\n                \n                {/* –ö–∞–±–∏–Ω–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∞ */}\n                <g stroke=\"#10B981\" strokeWidth=\"2\" fill=\"#065F46\" fillOpacity=\"0.3\">\n                  {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n                  <polygon \n                    points={`${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y}`}\n                  />\n                  \n                  {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n                  <polygon \n                    points={`${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[2].x},${truckComponents.cabin[2].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y}`}\n                    fillOpacity=\"0.4\"\n                  />\n                  \n                  {/* –í–µ—Ä—Ö –∫–∞–±–∏–Ω—ã */}\n                  <polygon \n                    points={`${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n                    fillOpacity=\"0.5\"\n                  />\n                  \n                  {/* –õ–µ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n                  <polygon \n                    points={`${truckComponents.cabin[3].x},${truckComponents.cabin[3].y} ${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n                    fillOpacity=\"0.2\"\n                  />\n                </g>\n                \n                {/* –®–∞—Å—Å–∏ */}\n                <g stroke=\"#374151\" strokeWidth=\"3\" fill=\"#1F2937\">\n                  {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫–∞–±–∏–Ω–æ–π */}\n                  <polygon \n                    points={`${truckComponents.chassis[0].x},${truckComponents.chassis[0].y} ${truckComponents.chassis[1].x},${truckComponents.chassis[1].y} ${truckComponents.chassis[2].x},${truckComponents.chassis[2].y} ${truckComponents.chassis[3].x},${truckComponents.chassis[3].y}`}\n                  />\n                  \n                  {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫—É–∑–æ–≤–æ–º */}\n                  <polygon \n                    points={`${truckComponents.chassis[4].x},${truckComponents.chassis[4].y} ${truckComponents.chassis[5].x},${truckComponents.chassis[5].y} ${truckComponents.chassis[6].x},${truckComponents.chassis[6].y} ${truckComponents.chassis[7].x},${truckComponents.chassis[7].y}`}\n                  />\n                </g>\n                \n                {/* –ö–æ–ª–µ—Å–∞ */}\n                <g fill=\"#1F2937\" stroke=\"#374151\" strokeWidth=\"2\">\n                  {truckComponents.wheels.map((wheel, index) => (\n                    <circle \n                      key={`wheel-${index}`}\n                      cx={wheel.x} \n                      cy={wheel.y} \n                      r={Math.max(truckComponents.wheelRadius, 3)}\n                    />\n                  ))}\n                </g>\n                \n                {/* –ö–æ–Ω—Ç—É—Ä –∫—É–∑–æ–≤–∞ –≤ –∏–∑–æ–º–µ—Ç—Ä–∏–∏ */}\n                <g stroke=\"#EF4444\" strokeWidth=\"2\" fill=\"none\">\n                  {/* –ü–æ–ª –∫—É–∑–æ–≤–∞ */}\n                  <polygon \n                    points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y}`}\n                    fill=\"#7F1D1D\" \n                    fillOpacity=\"0.3\" \n                  />\n                  \n                  {/* –ó–∞–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n                  <polygon \n                    points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[4].x},${truckVertices[4].y}`}\n                    strokeDasharray=\"3,3\" \n                  />\n                  \n                  {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n                  <polygon \n                    points={`${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[5].x},${truckVertices[5].y}`}\n                    strokeDasharray=\"3,3\" \n                  />\n                  \n                  {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n                  <polygon \n                    points={`${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[7].x},${truckVertices[7].y} ${truckVertices[6].x},${truckVertices[6].y}`}\n                    strokeDasharray=\"3,3\" \n                  />\n                  \n                  {/* –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n                  <polygon \n                    points={`${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n                    strokeDasharray=\"3,3\" \n                  />\n                  \n                  {/* –í–µ—Ä—Ö –∫—É–∑–æ–≤–∞ */}\n                  <polygon \n                    points={`${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n                    strokeDasharray=\"3,3\" \n                  />\n                </g>\n                \n                {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤ */}\n                {placements.map((placement, index) => {\n                  const vertices = placement.projectedVertices;\n                  if (vertices.length < 8) return null;\n\n                  return (\n                    <g key={`cargo-3d-${index}`}>\n                      {/* –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω—å */}\n                      <polygon\n                        points={`${vertices[0].x},${vertices[0].y} ${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y}`}\n                        fill={placement.color}\n                        fillOpacity=\"0.6\"\n                        stroke={placement.color}\n                        strokeWidth=\"1\"\n                      />\n                      \n                      {/* –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω—å */}\n                      <polygon\n                        points={`${vertices[4].x},${vertices[4].y} ${vertices[5].x},${vertices[5].y} ${vertices[6].x},${vertices[6].y} ${vertices[7].x},${vertices[7].y}`}\n                        fill={placement.color}\n                        fillOpacity=\"0.8\"\n                        stroke={placement.color}\n                        strokeWidth=\"1\"\n                      />\n                      \n                      {/* –ë–æ–∫–æ–≤—ã–µ –≥—Ä–∞–Ω–∏ */}\n                      <polygon\n                        points={`${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[6].x},${vertices[6].y} ${vertices[5].x},${vertices[5].y}`}\n                        fill={placement.color}\n                        fillOpacity=\"0.7\"\n                        stroke={placement.color}\n                        strokeWidth=\"1\"\n                      />\n                      \n                      <polygon\n                        points={`${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y} ${vertices[7].x},${vertices[7].y} ${vertices[6].x},${vertices[6].y}`}\n                        fill={placement.color}\n                        fillOpacity=\"0.5\"\n                        stroke={placement.color}\n                        strokeWidth=\"1\"\n                      />\n\n                      {/* –ù–æ–º–µ—Ä –≥—Ä—É–∑–∞ */}\n                      <text\n                        x={(vertices[4].x + vertices[6].x) / 2}\n                        y={(vertices[4].y + vertices[6].y) / 2}\n                        textAnchor=\"middle\"\n                        dominantBaseline=\"middle\"\n                        fill=\"white\"\n                        fontSize=\"8\"\n                        fontWeight=\"bold\"\n                      >\n                        {index + 1}\n                      </text>\n                    </g>\n                  );\n                })}\n              </svg>\n            </div>\n          </div>\n        </div>\n      </CardContent>"
    },
    "output": "",
    "metadata": {
      "diagnostics": {},
      "diff": "Index: /home/user/project/components/TruckVisualization.tsx\n===================================================================\n--- /home/user/project/components/TruckVisualization.tsx\n+++ /home/user/project/components/TruckVisualization.tsx\n@@ -648,350 +648,367 @@\n           –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è 3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä—É–∑–æ–≤–∏–∫–∞ —Å —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º –≥—Ä—É–∑–∞\n         </CardTitle>\n       </CardHeader>\n       <CardContent>\n-        {/* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 3D –º–æ–¥–µ–ª—å—é */}\n-        <div className=\"bg-gray-800 p-4 rounded-lg mb-4 space-y-4\">\n-          <div className=\"flex items-center justify-between\">\n-            <h4 className=\"text-white font-medium flex items-center gap-2\">\n-              <Rotate3d className=\"h-4 w-4\" />\n-              –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3D –º–æ–¥–µ–ª—å—é\n-            </h4>\n-            <Button\n-              variant=\"outline\"\n-              size=\"sm\"\n-              onClick={() => {\n-                setRotationX(0);\n-                setRotationY(-45);\n-                setRotationZ(0);\n-                setPositionX(50);\n-                setPositionY(50);\n-                setScale(70);\n-              }}\n-              className=\"text-white border-gray-600 hover:bg-gray-700\"\n-            >\n-              –°–±—Ä–æ—Å\n-            </Button>\n+        {/* –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞: —Å–ª–µ–≤–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, —Å–ø—Ä–∞–≤–∞ 3D */}\n+        <div className=\"grid grid-cols-1 xl:grid-cols-2 gap-6\">\n+          {/* –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞ */}\n+          <div className=\"space-y-4\">\n+            {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è */}\n+            {stats && (\n+              <div className=\"bg-gray-800 p-4 rounded-lg\">\n+                <h4 className=\"font-medium text-white mb-4\">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è</h4>\n+                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n+                  <div className=\"space-y-2\">\n+                    <h5 className=\"font-medium text-gray-300\">–ó–∞–Ω—è—Ç—ã–µ —Ä–∞–∑–º–µ—Ä—ã:</h5>\n+                    <div className=\"text-gray-400 space-y-1\">\n+                      <div>–î–ª–∏–Ω–∞: {stats.dimensions.length} –º</div>\n+                      <div>–®–∏—Ä–∏–Ω–∞: {stats.dimensions.width} –º</div>\n+                      <div>–í—ã—Å–æ—Ç–∞: {stats.dimensions.height} –º</div>\n+                    </div>\n+                  </div>\n+                  <div className=\"space-y-2\">\n+                    <h5 className=\"font-medium text-gray-300\">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h5>\n+                    <div className=\"text-gray-400 space-y-1\">\n+                      <div>–ü–ª–æ—â–∞–¥—å –ø–æ–ª–∞: {stats.occupiedFloorArea} –º¬≤</div>\n+                      <div>–û–±—ä–µ–º: {stats.occupiedVolume} –º¬≥</div>\n+                      <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–∞: {stats.floorUtilization}%</div>\n+                    </div>\n+                  </div>\n+                </div>\n+              </div>\n+            )}\n+\n+            {/* –õ–µ–≥–µ–Ω–¥–∞ –≥—Ä—É–∑–æ–≤ */}\n+            {placements.length > 0 && (\n+              <div className=\"bg-gray-800 p-4 rounded-lg\">\n+                <h4 className=\"font-medium text-white mb-3\">üì¶ –†–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –≥—Ä—É–∑—ã</h4>\n+                <div className=\"grid grid-cols-1 gap-2 text-xs max-h-80 overflow-y-auto\">\n+                  {placements.map((placement, index) => (\n+                    <div key={`legend-${index}`} className=\"flex items-center gap-2 p-2 bg-gray-700 rounded\">\n+                      <div \n+                        className=\"w-4 h-4 rounded flex-shrink-0\"\n+                        style={{ backgroundColor: placement.color }}\n+                      />\n+                      <span className=\"text-gray-300 flex-1\">\n+                        <span className=\"font-medium\">–ì—Ä—É–∑ {index + 1}</span>\n+                        {getProductShortName(placement.cargo.productName) && (\n+                          <span className=\"text-blue-300\"> \"{getProductShortName(placement.cargo.productName)}\"</span>\n+                        )}\n+                        <br />\n+                        <span className=\"text-xs text-gray-400\">\n+                          {Math.round(placement.orientation.length)}√ó{Math.round(placement.orientation.width)}√ó{Math.round(placement.orientation.height)} –º–º\n+                          {placement.orientation.rotationAngle !== 0 && (\n+                            <span className=\"text-blue-300\"> (–ø–æ–≤–µ—Ä–Ω—É—Ç {placement.orientation.rotationAngle}¬∞)</span>\n+                          )}\n+                        </span>\n+                      </span>\n+                    </div>\n+                  ))}\n+                </div>\n+              </div>\n+            )}\n           </div>\n-          \n-          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n-            {/* –î–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ */}\n-            <div className=\"space-y-2\">\n-              <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n-                <Rotate3d className=\"h-3 w-3\" />\n-                –ü–æ–≤–æ—Ä–æ—Ç (X: {rotationX.toFixed(0)}¬∞, Y: {rotationY.toFixed(0)}¬∞)\n-              </label>\n-              <div className=\"flex justify-center\">\n-                <svg\n-                  ref={joystickRef}\n-                  width=\"80\"\n-                  height=\"80\"\n-                  className=\"border border-gray-600 rounded-full bg-gray-900 cursor-move\"\n-                  onMouseDown={handleJoystickStart}\n-                  onMouseMove={handleJoystickMove}\n-                  onMouseUp={handleJoystickEnd}\n+\n+          {/* –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: 3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è */}\n+          <div className=\"space-y-4\">\n+            {/* –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 3D –º–æ–¥–µ–ª—å—é */}\n+            <div className=\"bg-gray-800 p-4 rounded-lg space-y-4\">\n+              <div className=\"flex items-center justify-between\">\n+                <h4 className=\"text-white font-medium flex items-center gap-2\">\n+                  <Rotate3d className=\"h-4 w-4\" />\n+                  üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ 3D –º–æ–¥–µ–ª—å—é\n+                </h4>\n+                <Button\n+                  variant=\"outline\"\n+                  size=\"sm\"\n+                  onClick={() => {\n+                    setRotationX(0);\n+                    setRotationY(-45);\n+                    setRotationZ(0);\n+                    setPositionX(50);\n+                    setPositionY(50);\n+                    setScale(70);\n+                  }}\n+                  className=\"text-white border-gray-600 hover:bg-gray-700\"\n                 >\n-                  {/* –í–Ω–µ—à–Ω–∏–π –∫—Ä—É–≥ */}\n-                  <circle cx=\"40\" cy=\"40\" r=\"35\" fill=\"none\" stroke=\"#4B5563\" strokeWidth=\"2\" />\n+                  –°–±—Ä–æ—Å\n+                </Button>\n+              </div>\n+              \n+              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n+                {/* –î–∂–æ–π—Å—Ç–∏–∫ –¥–ª—è –ø–æ–≤–æ—Ä–æ—Ç–æ–≤ */}\n+                <div className=\"space-y-2\">\n+                  <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n+                    <Rotate3d className=\"h-3 w-3\" />\n+                    –ü–æ–≤–æ—Ä–æ—Ç (X: {rotationX.toFixed(0)}¬∞, Y: {rotationY.toFixed(0)}¬∞)\n+                  </label>\n+                  <div className=\"flex justify-center\">\n+                    <svg\n+                      ref={joystickRef}\n+                      width=\"80\"\n+                      height=\"80\"\n+                      className=\"border border-gray-600 rounded-full bg-gray-900 cursor-move\"\n+                      onMouseDown={handleJoystickStart}\n+                      onMouseMove={handleJoystickMove}\n+                      onMouseUp={handleJoystickEnd}\n+                    >\n+                      {/* –í–Ω–µ—à–Ω–∏–π –∫—Ä—É–≥ */}\n+                      <circle cx=\"40\" cy=\"40\" r=\"35\" fill=\"none\" stroke=\"#4B5563\" strokeWidth=\"2\" />\n+                      \n+                      {/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –æ—Å–∏ */}\n+                      <line x1=\"40\" y1=\"10\" x2=\"40\" y2=\"70\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n+                      <line x1=\"10\" y1=\"40\" x2=\"70\" y2=\"40\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n+                      \n+                      {/* –î–∂–æ–π—Å—Ç–∏–∫ */}\n+                      <circle \n+                        cx={40 + (rotationY / 90) * 25} \n+                        cy={40 + (rotationX / 90) * 25} \n+                        r=\"8\" \n+                        fill={isDragging ? '#3B82F6' : '#6B7280'} \n+                        stroke=\"white\" \n+                        strokeWidth=\"2\"\n+                        className=\"transition-colors\"\n+                      />\n+                      \n+                      {/* –£–∫–∞–∑–∞—Ç–µ–ª–∏ –æ—Å–µ–π */}\n+                      <text x=\"40\" y=\"8\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-X</text>\n+                      <text x=\"40\" y=\"76\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+X</text>\n+                      <text x=\"8\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-Y</text>\n+                      <text x=\"72\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+Y</text>\n+                    </svg>\n+                  </div>\n+                </div>\n+                \n+                {/* –°–ª–∞–π–¥–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–∏ */}\n+                <div className=\"space-y-4\">\n+                  <div className=\"space-y-2\">\n+                    <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n+                      <Move className=\"h-3 w-3\" />\n+                      –ü–æ–∑–∏—Ü–∏—è X: {positionX.toFixed(0)}%\n+                    </label>\n+                    <Slider\n+                      value={[positionX]}\n+                      onValueChange={(value) => setPositionX(value[0])}\n+                      max={100}\n+                      min={0}\n+                      step={1}\n+                      className=\"w-full\"\n+                    />\n+                  </div>\n                   \n-                  {/* –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–µ –æ—Å–∏ */}\n-                  <line x1=\"40\" y1=\"10\" x2=\"40\" y2=\"70\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n-                  <line x1=\"10\" y1=\"40\" x2=\"70\" y2=\"40\" stroke=\"#6B7280\" strokeWidth=\"1\" strokeDashArray=\"2,2\" />\n+                  <div className=\"space-y-2\">\n+                    <label className=\"text-sm text-gray-300\">\n+                      –ü–æ–∑–∏—Ü–∏—è Y: {positionY.toFixed(0)}%\n+                    </label>\n+                    <Slider\n+                      value={[positionY]}\n+                      onValueChange={(value) => setPositionY(value[0])}\n+                      max={100}\n+                      min={0}\n+                      step={1}\n+                      className=\"w-full\"\n+                    />\n+                  </div>\n+                </div>\n+                \n+                {/* –°–ª–∞–π–¥–µ—Ä—ã –º–∞—Å—à—Ç–∞–±–∞ –∏ Z-–ø–æ–≤–æ—Ä–æ—Ç–∞ */}\n+                <div className=\"space-y-4\">\n+                  <div className=\"space-y-2\">\n+                    <label className=\"text-sm text-gray-300\">\n+                      –ú–∞—Å—à—Ç–∞–±: {scale.toFixed(0)}%\n+                    </label>\n+                    <Slider\n+                      value={[scale]}\n+                      onValueChange={(value) => setScale(value[0])}\n+                      max={100}\n+                      min={10}\n+                      step={1}\n+                      className=\"w-full\"\n+                    />\n+                  </div>\n                   \n-                  {/* –î–∂–æ–π—Å—Ç–∏–∫ */}\n-                  <circle \n-                    cx={40 + (rotationY / 90) * 25} \n-                    cy={40 + (rotationX / 90) * 25} \n-                    r=\"8\" \n-                    fill={isDragging ? '#3B82F6' : '#6B7280'} \n-                    stroke=\"white\" \n-                    strokeWidth=\"2\"\n-                    className=\"transition-colors\"\n-                  />\n-                  \n-                  {/* –£–∫–∞–∑–∞—Ç–µ–ª–∏ –æ—Å–µ–π */}\n-                  <text x=\"40\" y=\"8\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-X</text>\n-                  <text x=\"40\" y=\"76\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+X</text>\n-                  <text x=\"8\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">-Y</text>\n-                  <text x=\"72\" y=\"44\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"8\">+Y</text>\n-                </svg>\n+                  <div className=\"space-y-2\">\n+                    <label className=\"text-sm text-gray-300\">\n+                      –ü–æ–≤–æ—Ä–æ—Ç Z: {rotationZ.toFixed(0)}¬∞\n+                    </label>\n+                    <Slider\n+                      value={[rotationZ]}\n+                      onValueChange={(value) => setRotationZ(value[0])}\n+                      max={180}\n+                      min={-180}\n+                      step={5}\n+                      className=\"w-full\"\n+                    />\n+                  </div>\n+                </div>\n               </div>\n             </div>\n-            \n-            {/* –°–ª–∞–π–¥–µ—Ä—ã –ø–æ–∑–∏—Ü–∏–∏ */}\n-            <div className=\"space-y-4\">\n-              <div className=\"space-y-2\">\n-                <label className=\"text-sm text-gray-300 flex items-center gap-2\">\n-                  <Move className=\"h-3 w-3\" />\n-                  –ü–æ–∑–∏—Ü–∏—è X: {positionX.toFixed(0)}%\n-                </label>\n-                <Slider\n-                  value={[positionX]}\n-                  onValueChange={(value) => setPositionX(value[0])}\n-                  max={100}\n-                  min={0}\n-                  step={1}\n-                  className=\"w-full\"\n-                />\n-              </div>\n-              \n-              <div className=\"space-y-2\">\n-                <label className=\"text-sm text-gray-300\">\n-                  –ü–æ–∑–∏—Ü–∏—è Y: {positionY.toFixed(0)}%\n-                </label>\n-                <Slider\n-                  value={[positionY]}\n-                  onValueChange={(value) => setPositionY(value[0])}\n-                  max={100}\n-                  min={0}\n-                  step={1}\n-                  className=\"w-full\"\n-                />\n-              </div>\n-            </div>\n-            \n-            {/* –°–ª–∞–π–¥–µ—Ä—ã –º–∞—Å—à—Ç–∞–±–∞ –∏ Z-–ø–æ–≤–æ—Ä–æ—Ç–∞ */}\n-            <div className=\"space-y-4\">\n-              <div className=\"space-y-2\">\n-                <label className=\"text-sm text-gray-300\">\n-                  –ú–∞—Å—à—Ç–∞–±: {scale.toFixed(0)}%\n-                </label>\n-                <Slider\n-                  value={[scale]}\n-                  onValueChange={(value) => setScale(value[0])}\n-                  max={100}\n-                  min={10}\n-                  step={1}\n-                  className=\"w-full\"\n-                />\n-              </div>\n-              \n-              <div className=\"space-y-2\">\n-                <label className=\"text-sm text-gray-300\">\n-                  –ü–æ–≤–æ—Ä–æ—Ç Z: {rotationZ.toFixed(0)}¬∞\n-                </label>\n-                <Slider\n-                  value={[rotationZ]}\n-                  onValueChange={(value) => setRotationZ(value[0])}\n-                  max={180}\n-                  min={-180}\n-                  step={5}\n-                  className=\"w-full\"\n-                />\n-              </div>\n-            </div>\n-          </div>\n-        </div>\n \n-        {/* 3D SVG –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n-        <div className=\"bg-gray-900 p-4 rounded-lg mb-4\">\n-          <svg \n-            viewBox=\"0 0 600 400\" \n-            className=\"w-full h-96 border border-gray-600 bg-gray-950\"\n-            style={{ maxHeight: '480px' }}\n-          >\n-            {/* –†–∞–∑–º–µ—Ä—ã –∫—É–∑–æ–≤–∞ */}\n-            <text x=\"300\" y=\"20\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"12\" fontWeight=\"bold\">\n-              –ì—Ä—É–∑–æ–≤–∏–∫ —Å –∫—É–∑–æ–≤–æ–º 4200√ó2025√ó2025 –º–º\n-            </text>\n-            \n-            {/* –ö–∞–±–∏–Ω–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∞ */}\n-            <g stroke=\"#10B981\" strokeWidth=\"2\" fill=\"#065F46\" fillOpacity=\"0.3\">\n-              {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n-              <polygon \n-                points={`${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y}`}\n-              />\n-              \n-              {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n-              <polygon \n-                points={`${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[2].x},${truckComponents.cabin[2].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y}`}\n-                fillOpacity=\"0.4\"\n-              />\n-              \n-              {/* –í–µ—Ä—Ö –∫–∞–±–∏–Ω—ã */}\n-              <polygon \n-                points={`${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n-                fillOpacity=\"0.5\"\n-              />\n-              \n-              {/* –õ–µ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n-              <polygon \n-                points={`${truckComponents.cabin[3].x},${truckComponents.cabin[3].y} ${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n-                fillOpacity=\"0.2\"\n-              />\n-            </g>\n-            \n-            {/* –®–∞—Å—Å–∏ */}\n-            <g stroke=\"#374151\" strokeWidth=\"3\" fill=\"#1F2937\">\n-              {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫–∞–±–∏–Ω–æ–π */}\n-              <polygon \n-                points={`${truckComponents.chassis[0].x},${truckComponents.chassis[0].y} ${truckComponents.chassis[1].x},${truckComponents.chassis[1].y} ${truckComponents.chassis[2].x},${truckComponents.chassis[2].y} ${truckComponents.chassis[3].x},${truckComponents.chassis[3].y}`}\n-              />\n-              \n-              {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫—É–∑–æ–≤–æ–º */}\n-              <polygon \n-                points={`${truckComponents.chassis[4].x},${truckComponents.chassis[4].y} ${truckComponents.chassis[5].x},${truckComponents.chassis[5].y} ${truckComponents.chassis[6].x},${truckComponents.chassis[6].y} ${truckComponents.chassis[7].x},${truckComponents.chassis[7].y}`}\n-              />\n-            </g>\n-            \n-            {/* –ö–æ–ª–µ—Å–∞ */}\n-            <g fill=\"#1F2937\" stroke=\"#374151\" strokeWidth=\"2\">\n-              {truckComponents.wheels.map((wheel, index) => (\n-                <circle \n-                  key={`wheel-${index}`}\n-                  cx={wheel.x} \n-                  cy={wheel.y} \n-                  r={Math.max(truckComponents.wheelRadius, 3)}\n-                />\n-              ))}\n-            </g>\n-            \n-            {/* –ö–æ–Ω—Ç—É—Ä –∫—É–∑–æ–≤–∞ –≤ –∏–∑–æ–º–µ—Ç—Ä–∏–∏ */}\n-            <g stroke=\"#EF4444\" strokeWidth=\"2\" fill=\"none\">\n-              {/* –ü–æ–ª –∫—É–∑–æ–≤–∞ */}\n-              <polygon \n-                points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y}`}\n-                fill=\"#7F1D1D\" \n-                fillOpacity=\"0.3\" \n-              />\n-              \n-              {/* –ó–∞–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n-              <polygon \n-                points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[4].x},${truckVertices[4].y}`}\n-                strokeDasharray=\"3,3\" \n-              />\n-              \n-              {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n-              <polygon \n-                points={`${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[5].x},${truckVertices[5].y}`}\n-                strokeDasharray=\"3,3\" \n-              />\n-              \n-              {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n-              <polygon \n-                points={`${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[7].x},${truckVertices[7].y} ${truckVertices[6].x},${truckVertices[6].y}`}\n-                strokeDasharray=\"3,3\" \n-              />\n-              \n-              {/* –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n-              <polygon \n-                points={`${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n-                strokeDasharray=\"3,3\" \n-              />\n-              \n-              {/* –í–µ—Ä—Ö –∫—É–∑–æ–≤–∞ */}\n-              <polygon \n-                points={`${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n-                strokeDasharray=\"3,3\" \n-              />\n-            </g>\n-            \n-            {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤ */}\n-            {placements.map((placement, index) => {\n-              const vertices = placement.projectedVertices;\n-              if (vertices.length < 8) return null;\n-\n-              return (\n-                <g key={`cargo-3d-${index}`}>\n-                  {/* –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω—å */}\n-                  <polygon\n-                    points={`${vertices[0].x},${vertices[0].y} ${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y}`}\n-                    fill={placement.color}\n-                    fillOpacity=\"0.6\"\n-                    stroke={placement.color}\n-                    strokeWidth=\"1\"\n+            {/* 3D SVG –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∫—É–∑–æ–≤–∞ */}\n+            <div className=\"bg-gray-900 p-4 rounded-lg\">\n+              <svg \n+                viewBox=\"0 0 600 400\" \n+                className=\"w-full h-96 border border-gray-600 bg-gray-950\"\n+                style={{ maxHeight: '480px' }}\n+              >\n+                {/* –†–∞–∑–º–µ—Ä—ã –∫—É–∑–æ–≤–∞ */}\n+                <text x=\"300\" y=\"20\" textAnchor=\"middle\" fill=\"#9CA3AF\" fontSize=\"12\" fontWeight=\"bold\">\n+                  üöõ –ì—Ä—É–∑–æ–≤–∏–∫ —Å –∫—É–∑–æ–≤–æ–º 4200√ó2025√ó2025 –º–º\n+                </text>\n+                \n+                {/* –ö–∞–±–∏–Ω–∞ –≥—Ä—É–∑–æ–≤–∏–∫–∞ */}\n+                <g stroke=\"#10B981\" strokeWidth=\"2\" fill=\"#065F46\" fillOpacity=\"0.3\">\n+                  {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n+                  <polygon \n+                    points={`${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y}`}\n                   />\n                   \n-                  {/* –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω—å */}\n-                  <polygon\n-                    points={`${vertices[4].x},${vertices[4].y} ${vertices[5].x},${vertices[5].y} ${vertices[6].x},${vertices[6].y} ${vertices[7].x},${vertices[7].y}`}\n-                    fill={placement.color}\n-                    fillOpacity=\"0.8\"\n-                    stroke={placement.color}\n-                    strokeWidth=\"1\"\n+                  {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n+                  <polygon \n+                    points={`${truckComponents.cabin[1].x},${truckComponents.cabin[1].y} ${truckComponents.cabin[2].x},${truckComponents.cabin[2].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y}`}\n+                    fillOpacity=\"0.4\"\n                   />\n                   \n-                  {/* –ë–æ–∫–æ–≤—ã–µ –≥—Ä–∞–Ω–∏ */}\n-                  <polygon\n-                    points={`${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[6].x},${vertices[6].y} ${vertices[5].x},${vertices[5].y}`}\n-                    fill={placement.color}\n-                    fillOpacity=\"0.7\"\n-                    stroke={placement.color}\n-                    strokeWidth=\"1\"\n+                  {/* –í–µ—Ä—Ö –∫–∞–±–∏–Ω—ã */}\n+                  <polygon \n+                    points={`${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[5].x},${truckComponents.cabin[5].y} ${truckComponents.cabin[6].x},${truckComponents.cabin[6].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n+                    fillOpacity=\"0.5\"\n                   />\n                   \n-                  <polygon\n-                    points={`${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y} ${vertices[7].x},${vertices[7].y} ${vertices[6].x},${vertices[6].y}`}\n-                    fill={placement.color}\n-                    fillOpacity=\"0.5\"\n-                    stroke={placement.color}\n-                    strokeWidth=\"1\"\n+                  {/* –õ–µ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ –∫–∞–±–∏–Ω—ã */}\n+                  <polygon \n+                    points={`${truckComponents.cabin[3].x},${truckComponents.cabin[3].y} ${truckComponents.cabin[0].x},${truckComponents.cabin[0].y} ${truckComponents.cabin[4].x},${truckComponents.cabin[4].y} ${truckComponents.cabin[7].x},${truckComponents.cabin[7].y}`}\n+                    fillOpacity=\"0.2\"\n                   />\n-\n-                  {/* –ù–æ–º–µ—Ä –≥—Ä—É–∑–∞ */}\n-                  <text\n-                    x={(vertices[4].x + vertices[6].x) / 2}\n-                    y={(vertices[4].y + vertices[6].y) / 2}\n-                    textAnchor=\"middle\"\n-                    dominantBaseline=\"middle\"\n-                    fill=\"white\"\n-                    fontSize=\"8\"\n-                    fontWeight=\"bold\"\n-                  >\n-                    {index + 1}\n-                  </text>\n                 </g>\n-              );\n-            })}\n-          </svg>\n-        </div>\n+                \n+                {/* –®–∞—Å—Å–∏ */}\n+                <g stroke=\"#374151\" strokeWidth=\"3\" fill=\"#1F2937\">\n+                  {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫–∞–±–∏–Ω–æ–π */}\n+                  <polygon \n+                    points={`${truckComponents.chassis[0].x},${truckComponents.chassis[0].y} ${truckComponents.chassis[1].x},${truckComponents.chassis[1].y} ${truckComponents.chassis[2].x},${truckComponents.chassis[2].y} ${truckComponents.chassis[3].x},${truckComponents.chassis[3].y}`}\n+                  />\n+                  \n+                  {/* –®–∞—Å—Å–∏ –ø–æ–¥ –∫—É–∑–æ–≤–æ–º */}\n+                  <polygon \n+                    points={`${truckComponents.chassis[4].x},${truckComponents.chassis[4].y} ${truckComponents.chassis[5].x},${truckComponents.chassis[5].y} ${truckComponents.chassis[6].x},${truckComponents.chassis[6].y} ${truckComponents.chassis[7].x},${truckComponents.chassis[7].y}`}\n+                  />\n+                </g>\n+                \n+                {/* –ö–æ–ª–µ—Å–∞ */}\n+                <g fill=\"#1F2937\" stroke=\"#374151\" strokeWidth=\"2\">\n+                  {truckComponents.wheels.map((wheel, index) => (\n+                    <circle \n+                      key={`wheel-${index}`}\n+                      cx={wheel.x} \n+                      cy={wheel.y} \n+                      r={Math.max(truckComponents.wheelRadius, 3)}\n+                    />\n+                  ))}\n+                </g>\n+                \n+                {/* –ö–æ–Ω—Ç—É—Ä –∫—É–∑–æ–≤–∞ –≤ –∏–∑–æ–º–µ—Ç—Ä–∏–∏ */}\n+                <g stroke=\"#EF4444\" strokeWidth=\"2\" fill=\"none\">\n+                  {/* –ü–æ–ª –∫—É–∑–æ–≤–∞ */}\n+                  <polygon \n+                    points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y}`}\n+                    fill=\"#7F1D1D\" \n+                    fillOpacity=\"0.3\" \n+                  />\n+                  \n+                  {/* –ó–∞–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n+                  <polygon \n+                    points={`${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[4].x},${truckVertices[4].y}`}\n+                    strokeDasharray=\"3,3\" \n+                  />\n+                  \n+                  {/* –ü—Ä–∞–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n+                  <polygon \n+                    points={`${truckVertices[1].x},${truckVertices[1].y} ${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[5].x},${truckVertices[5].y}`}\n+                    strokeDasharray=\"3,3\" \n+                  />\n+                  \n+                  {/* –ü–µ—Ä–µ–¥–Ω—è—è —Å—Ç–µ–Ω–∫–∞ */}\n+                  <polygon \n+                    points={`${truckVertices[2].x},${truckVertices[2].y} ${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[7].x},${truckVertices[7].y} ${truckVertices[6].x},${truckVertices[6].y}`}\n+                    strokeDasharray=\"3,3\" \n+                  />\n+                  \n+                  {/* –õ–µ–≤–∞—è –±–æ–∫–æ–≤–∞—è —Å—Ç–µ–Ω–∫–∞ */}\n+                  <polygon \n+                    points={`${truckVertices[3].x},${truckVertices[3].y} ${truckVertices[0].x},${truckVertices[0].y} ${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n+                    strokeDasharray=\"3,3\" \n+                  />\n+                  \n+                  {/* –í–µ—Ä—Ö –∫—É–∑–æ–≤–∞ */}\n+                  <polygon \n+                    points={`${truckVertices[4].x},${truckVertices[4].y} ${truckVertices[5].x},${truckVertices[5].y} ${truckVertices[6].x},${truckVertices[6].y} ${truckVertices[7].x},${truckVertices[7].y}`}\n+                    strokeDasharray=\"3,3\" \n+                  />\n+                </g>\n+                \n+                {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤ */}\n+                {placements.map((placement, index) => {\n+                  const vertices = placement.projectedVertices;\n+                  if (vertices.length < 8) return null;\n \n-        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è */}\n-        {stats && (\n-          <div className=\"grid grid-cols-2 gap-4 text-sm\">\n-            <div className=\"space-y-2\">\n-              <h4 className=\"font-medium text-white\">–ó–∞–Ω—è—Ç—ã–µ —Ä–∞–∑–º–µ—Ä—ã:</h4>\n-              <div className=\"text-gray-300 space-y-1\">\n-                <div>–î–ª–∏–Ω–∞: {stats.dimensions.length} –º</div>\n-                <div>–®–∏—Ä–∏–Ω–∞: {stats.dimensions.width} –º</div>\n-                <div>–í—ã—Å–æ—Ç–∞: {stats.dimensions.height} –º</div>\n-              </div>\n-            </div>\n-            <div className=\"space-y-2\">\n-              <h4 className=\"font-medium text-white\">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4>\n-              <div className=\"text-gray-300 space-y-1\">\n-                <div>–ü–ª–æ—â–∞–¥—å –ø–æ–ª–∞: {stats.occupiedFloorArea} –º¬≤</div>\n-                <div>–û–±—ä–µ–º: {stats.occupiedVolume} –º¬≥</div>\n-                <div>–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–∞: {stats.floorUtilization}%</div>\n-              </div>\n-            </div>\n-          </div>\n-        )}\n+                  return (\n+                    <g key={`cargo-3d-${index}`}>\n+                      {/* –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω—å */}\n+                      <polygon\n+                        points={`${vertices[0].x},${vertices[0].y} ${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y}`}\n+                        fill={placement.color}\n+                        fillOpacity=\"0.6\"\n+                        stroke={placement.color}\n+                        strokeWidth=\"1\"\n+                      />\n+                      \n+                      {/* –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω—å */}\n+                      <polygon\n+                        points={`${vertices[4].x},${vertices[4].y} ${vertices[5].x},${vertices[5].y} ${vertices[6].x},${vertices[6].y} ${vertices[7].x},${vertices[7].y}`}\n+                        fill={placement.color}\n+                        fillOpacity=\"0.8\"\n+                        stroke={placement.color}\n+                        strokeWidth=\"1\"\n+                      />\n+                      \n+                      {/* –ë–æ–∫–æ–≤—ã–µ –≥—Ä–∞–Ω–∏ */}\n+                      <polygon\n+                        points={`${vertices[1].x},${vertices[1].y} ${vertices[2].x},${vertices[2].y} ${vertices[6].x},${vertices[6].y} ${vertices[5].x},${vertices[5].y}`}\n+                        fill={placement.color}\n+                        fillOpacity=\"0.7\"\n+                        stroke={placement.color}\n+                        strokeWidth=\"1\"\n+                      />\n+                      \n+                      <polygon\n+                        points={`${vertices[2].x},${vertices[2].y} ${vertices[3].x},${vertices[3].y} ${vertices[7].x},${vertices[7].y} ${vertices[6].x},${vertices[6].y}`}\n+                        fill={placement.color}\n+                        fillOpacity=\"0.5\"\n+                        stroke={placement.color}\n+                        strokeWidth=\"1\"\n+                      />\n \n-        {/* –õ–µ–≥–µ–Ω–¥–∞ –≥—Ä—É–∑–æ–≤ */}\n-        {placements.length > 0 && (\n-          <div className=\"mt-4\">\n-            <h4 className=\"font-medium text-white mb-2\">–†–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –≥—Ä—É–∑—ã:</h4>\n-            <div className=\"grid grid-cols-1 gap-2 text-xs max-h-32 overflow-y-auto\">\n-              {placements.map((placement, index) => (\n-                <div key={`legend-${index}`} className=\"flex items-center gap-2\">\n-                  <div \n-                    className=\"w-3 h-3 rounded\"\n-                    style={{ backgroundColor: placement.color }}\n-                  />\n-                  <span className=\"text-gray-300\">\n-                    –ì—Ä—É–∑ {index + 1}{getProductShortName(placement.cargo.productName) && (\n-                      <span className=\"text-blue-300\"> \"{getProductShortName(placement.cargo.productName)}\"</span>\n-                    )}: {Math.round(placement.orientation.length)}√ó{Math.round(placement.orientation.width)}√ó{Math.round(placement.orientation.height)} –º–º\n-                    {placement.orientation.rotationAngle !== 0 && (\n-                      <span className=\"text-blue-300\"> (–ø–æ–≤–µ—Ä–Ω—É—Ç {placement.orientation.rotationAngle}¬∞)</span>\n-                    )}\n-                  </span>\n-                </div>\n-              ))}\n+                      {/* –ù–æ–º–µ—Ä –≥—Ä—É–∑–∞ */}\n+                      <text\n+                        x={(vertices[4].x + vertices[6].x) / 2}\n+                        y={(vertices[4].y + vertices[6].y) / 2}\n+                        textAnchor=\"middle\"\n+                        dominantBaseline=\"middle\"\n+                        fill=\"white\"\n+                        fontSize=\"8\"\n+                        fontWeight=\"bold\"\n+                      >\n+                        {index + 1}\n+                      </text>\n+                    </g>\n+                  );\n+                })}\n+              </svg>\n             </div>\n           </div>\n-        )}\n+        </div>\n       </CardContent>\n     </Card>\n   );\n }\n\\ No newline at end of file\n"
    },
    "title": "components/TruckVisualization.tsx",
    "time": {
      "start": 1759138182884,
      "end": 1759138183092
    }
  }
}