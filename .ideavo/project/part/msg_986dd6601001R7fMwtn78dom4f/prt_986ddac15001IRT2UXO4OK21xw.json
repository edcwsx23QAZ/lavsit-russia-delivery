{
  "id": "prt_986ddac15001IRT2UXO4OK21xw",
  "messageID": "msg_986dd6601001R7fMwtn78dom4f",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01T3BKFtLrwHBVe2bFpQaZ8P",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 700,
      "limit": 100
    },
    "output": "<file>\n00701|             if (!isNaN(pickupDate.getTime()) && !isNaN(arrivalDate.getTime())) {\n00702|               // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–æ—Å—Ç—å –≤ –¥–Ω—è—Ö\n00703|               const timeDiff = arrivalDate.getTime() - pickupDate.getTime();\n00704|               deliveryDays = Math.max(1, Math.ceil(timeDiff / (1000 * 3600 * 24))); // –ú–∏–Ω–∏–º—É–º 1 –¥–µ–Ω—å\n00705|               \n00706|               console.log('–†–∞–∑–Ω–æ—Å—Ç—å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö:', timeDiff);\n00707|               console.log('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –í–´–ß–ò–°–õ–ï–ù —Å—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:', deliveryDays, '–¥–Ω–µ–π');\n00708|             } else {\n00709|               console.error('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞—Ç—ã –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞');\n00710|               console.error('pickup Date object:', pickupDate);\n00711|               console.error('arrival Date object:', arrivalDate);\n00712|             }\n00713|           } else {\n00714|             console.warn('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –ù–µ –Ω–∞–π–¥–µ–Ω—ã –¥–∞—Ç—ã pickup –∏–ª–∏ arrivalToOspReceiver');\n00715|             console.log('pickup –Ω–∞–π–¥–µ–Ω:', !!pickup, pickup);\n00716|             console.log('arrivalToOspReceiver –Ω–∞–π–¥–µ–Ω:', !!arrivalToOspReceiver, arrivalToOspReceiver);\n00717|           }\n00718|         } catch (error) {\n00719|           console.error('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:', error);\n00720|         }\n00721| \n00722|         console.log('üí∞ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ò–¢–û–ì–û–í–ê–Ø –°–¢–û–ò–ú–û–°–¢–¨:', Math.round(totalPrice));\n00723|         \n00724|         return {\n00725|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00726|           price: Math.round(totalPrice),\n00727|           days: deliveryDays || 0,\n00728|           details: data.data,\n00729|           requestData,\n00730|           responseData: data,\n00731|           apiUrl,\n00732|           sessionId: sessionID\n00733|         };\n00734|       } else {\n00735|         const errorMessage = data.metadata?.detail || \n00736|                            data.metadata?.message || \n00737|                            data.errors?.[0]?.detail || \n00738|                            (data.metadata?.status !== 200 ? `HTTP ${data.metadata?.status}` : '') ||\n00739|                            '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏';\n00740|         return {\n00741|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00742|           price: 0,\n00743|           days: 0,\n00744|           error: errorMessage,\n00745|           requestData,\n00746|           responseData: data,\n00747|           apiUrl,\n00748|           sessionId: sessionID\n00749|         };\n00750|       }\n00751|     } catch (error: any) {\n00752|       return {\n00753|         company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00754|         price: 0,\n00755|         days: 0,\n00756|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n00757|         requestData: null,\n00758|         responseData: null,\n00759|         apiUrl\n00760|       };\n00761|     }\n00762|   };\n00763| \n00764|   // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n00765|   const calculateNordWheel = async (): Promise<CalculationResult> => {\n00766|     const apiUrl = 'https://nordw.ru/tools/api/calc/calculate/';\n00767|     \n00768|     try {\n00769|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n00770|       const totalVolume = form.cargos.reduce((sum, cargo) => \n00771|         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n00772|       );\n00773| \n00774|       const params = new URLSearchParams({\n00775|         from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n00776|         to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n00777|         pickup: form.fromAddressDelivery ? '1' : '0',\n00778|         deliver: form.toAddressDelivery ? '1' : '0',\n00779|         weight: totalWeight.toString(),\n00780|         volume: totalVolume.toString(),\n00781|         oversized: '0',\n00782|         package: form.needPackaging ? '1' : '0',\n00783|         packageCount: form.cargos.length.toString(),\n00784|         insurance: form.needInsurance ? '1' : '0',\n00785|         sum: form.declaredValue.toString(),\n00786|         documentsReturn: '0',\n00787|         fragile: '1'\n00788|       });\n00789| \n00790|       const requestData = Object.fromEntries(params);\n00791|       const fullUrl = `${apiUrl}?${params.toString()}`;\n00792| \n00793|       const response = await fetch(fullUrl);\n00794|       const data = await response.json();\n00795| \n00796|       if (response.ok && data.status === 'success' && data.data) {\n00797|         return {\n00798|           company: 'Nord Wheel',\n00799|           price: data.data.total || 0,\n00800|           days: data.data.days || 0,\n\n(File has more lines. Use 'offset' parameter to read beyond line 800)\n</file>",
    "metadata": {
      "preview": "            if (!isNaN(pickupDate.getTime()) && !isNaN(arrivalDate.getTime())) {\n              // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–Ω–æ—Å—Ç—å –≤ –¥–Ω—è—Ö\n              const timeDiff = arrivalDate.getTime() - pickupDate.getTime();\n              deliveryDays = Math.max(1, Math.ceil(timeDiff / (1000 * 3600 * 24))); // –ú–∏–Ω–∏–º—É–º 1 –¥–µ–Ω—å\n              \n              console.log('–†–∞–∑–Ω–æ—Å—Ç—å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö:', timeDiff);\n              console.log('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –í–´–ß–ò–°–õ–ï–ù —Å—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:', deliveryDays, '–¥–Ω–µ–π');\n            } else {\n              console.error('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞—Ç—ã –ø–æ—Å–ª–µ –ø–∞—Ä—Å–∏–Ω–≥–∞');\n              console.error('pickup Date object:', pickupDate);\n              console.error('arrival Date object:', arrivalDate);\n            }\n          } else {\n            console.warn('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –ù–µ –Ω–∞–π–¥–µ–Ω—ã –¥–∞—Ç—ã pickup –∏–ª–∏ arrivalToOspReceiver');\n            console.log('pickup –Ω–∞–π–¥–µ–Ω:', !!pickup, pickup);\n            console.log('arrivalToOspReceiver –Ω–∞–π–¥–µ–Ω:', !!arrivalToOspReceiver, arrivalToOspReceiver);\n          }\n        } catch (error) {\n          console.error('–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏ - –û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏:', error);\n        }"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1758904299229,
      "end": 1758904299232
    }
  }
}