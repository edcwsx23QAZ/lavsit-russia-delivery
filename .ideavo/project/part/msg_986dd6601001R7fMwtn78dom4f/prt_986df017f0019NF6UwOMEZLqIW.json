{
  "id": "prt_986df017f0019NF6UwOMEZLqIW",
  "messageID": "msg_986dd6601001R7fMwtn78dom4f",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "multiedit",
  "callID": "toolu_0184Gk8nZQ42mcUmTG1pD1ny",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/api/pek/route.ts",
      "edits": [
        {
          "oldString": "export async function POST(request: NextRequest) {\n  try {\n    const { method, address, coordinates } = await request.json();\n    \n    const PEK_TOKEN = '624FC93CA677B23673BB476D4982294DC27E246F';\n    const BASE_URL = 'https://api.pecom.ru/v1';\n    \n    let url = '';\n    let body = {};\n    \n    switch (method) {\n      case 'findzonebyaddress':\n        url = `${BASE_URL}/branches/findzonebyaddress/`;\n        body = {\n          address: address\n        };\n        break;\n        \n      case 'findzonebycoordinates':\n        url = `${BASE_URL}/branches/findzonebycoordinates/`;\n        body = {\n          longitude: coordinates.longitude,\n          latitude: coordinates.latitude\n        };\n        break;\n        \n      case 'calculateprice':\n        url = `${BASE_URL}/calculator/calculateprice/`;\n        const { method: methodName, ...calculationData } = await request.json();\n        body = calculationData;\n        break;\n        \n      default:\n        return NextResponse.json({ error: 'Неизвестный метод' }, { status: 400 });\n    }",
          "newString": "export async function POST(request: NextRequest) {\n  try {\n    const requestData = await request.json();\n    const { method, address, coordinates } = requestData;\n    \n    const PEK_TOKEN = '624FC93CA677B23673BB476D4982294DC27E246F';\n    const BASE_URL = 'https://api.pecom.ru/v1';\n    \n    let url = '';\n    let body = {};\n    \n    switch (method) {\n      case 'findzonebyaddress':\n        url = `${BASE_URL}/branches/findzonebyaddress/`;\n        body = {\n          address: address\n        };\n        break;\n        \n      case 'findzonebycoordinates':\n        url = `${BASE_URL}/branches/findzonebycoordinates/`;\n        body = {\n          longitude: coordinates.longitude,\n          latitude: coordinates.latitude\n        };\n        break;\n        \n      case 'calculateprice':\n        url = `${BASE_URL}/calculator/calculateprice/`;\n        const { method: methodName, ...calculationData } = requestData;\n        body = calculationData;\n        break;\n        \n      default:\n        return NextResponse.json({ error: 'Неизвестный метод' }, { status: 400 });\n    }"
        }
      ]
    },
    "output": "",
    "metadata": {
      "results": [
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/api/pek/route.ts\n===================================================================\n--- /home/user/project/app/api/pek/route.ts\n+++ /home/user/project/app/api/pek/route.ts\n@@ -1,9 +1,10 @@\n import { NextRequest, NextResponse } from 'next/server';\n \n export async function POST(request: NextRequest) {\n   try {\n-    const { method, address, coordinates } = await request.json();\n+    const requestData = await request.json();\n+    const { method, address, coordinates } = requestData;\n     \n     const PEK_TOKEN = '624FC93CA677B23673BB476D4982294DC27E246F';\n     const BASE_URL = 'https://api.pecom.ru/v1';\n     \n@@ -27,9 +28,9 @@\n         break;\n         \n       case 'calculateprice':\n         url = `${BASE_URL}/calculator/calculateprice/`;\n-        const { method: methodName, ...calculationData } = await request.json();\n+        const { method: methodName, ...calculationData } = requestData;\n         body = calculationData;\n         break;\n         \n       default:\n"
        }
      ]
    },
    "title": "app/api/pek/route.ts",
    "time": {
      "start": 1758904394093,
      "end": 1758904394095
    }
  }
}