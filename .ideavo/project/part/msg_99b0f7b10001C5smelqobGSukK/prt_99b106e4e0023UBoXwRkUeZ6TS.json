{
  "id": "prt_99b106e4e0023UBoXwRkUeZ6TS",
  "messageID": "msg_99b0f7b10001C5smelqobGSukK",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "write",
  "callID": "toolu_01RhKZdDP7ihXWw8Y2L44Rbb",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/diagnostic/VehicleManagement.tsx",
      "content": "'use client';\n\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Truck, AlertCircle, Plus, Trash2, Save } from 'lucide-react';\n\ninterface VehicleType {\n  id: string;\n  name: string;\n  length: number;\n  width: number;\n  height: number;\n}\n\ninterface VehicleManagementProps {\n  vehicleTypes: VehicleType[];\n  newVehicle: { name: string; length: string; width: string; height: string };\n  hasUnsavedChanges: boolean;\n  saveStatus: 'idle' | 'saving' | 'success' | 'error';\n  isSaving: boolean;\n  lastUpdateTime: string | null;\n  onAddVehicleType: () => void;\n  onRemoveVehicleType: (id: string) => void;\n  onUpdateVehicleType: (id: string, field: string, value: string | number) => void;\n  onSaveVehicleTypes: () => void;\n  onSetNewVehicle: (vehicle: { name: string; length: string; width: string; height: string }) => void;\n}\n\nexport default function VehicleManagement({\n  vehicleTypes,\n  newVehicle,\n  hasUnsavedChanges,\n  saveStatus,\n  isSaving,\n  lastUpdateTime,\n  onAddVehicleType,\n  onRemoveVehicleType,\n  onUpdateVehicleType,\n  onSaveVehicleTypes,\n  onSetNewVehicle\n}: VehicleManagementProps) {\n  return (\n    <Card className=\"border-blue-500 bg-blue-900/20 mt-6\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-2\">\n            <Truck className=\"h-5 w-5 text-blue-400\" />\n            <span className=\"text-white\">Типы автомобилей</span>\n            {hasUnsavedChanges && (\n              <Badge variant=\"outline\" className=\"text-orange-400 border-orange-400\">\n                Есть несохранённые изменения\n              </Badge>\n            )}\n          </CardTitle>\n          <Button \n            onClick={onSaveVehicleTypes}\n            disabled={!hasUnsavedChanges || isSaving}\n            className={\n              saveStatus === 'success' \n                ? \"bg-green-600 hover:bg-green-700 text-white\" \n                : saveStatus === 'error'\n                ? \"bg-red-600 hover:bg-red-700 text-white\"\n                : \"bg-green-600 hover:bg-green-700 disabled:bg-gray-600\"\n            }\n            size=\"sm\"\n          >\n            <Save className=\"h-4 w-4 mr-2\" />\n            {saveStatus === 'saving' && 'Сохранение...'}\n            {saveStatus === 'success' && 'Сохранено!'}\n            {saveStatus === 'error' && 'Ошибка'}\n            {saveStatus === 'idle' && 'Сохранить'}\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {/* Информационное сообщение */}\n        <Alert className=\"border-blue-500 bg-blue-900/20 mb-4\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            <span className=\"text-gray-300\">\n              Изменения в размерах и названиях типов автомобилей будут сохранены локально в браузере. Нажмите \"Сохранить\" для применения изменений.\n              <br /><br />\n              <strong>Обновление из Google Sheets:</strong> Данные также могут быть автоматически обновлены с помощью кнопки \"Обновить данные\" сверху. Это заменит все местные данные на актуальную информацию из таблицы.\n              {lastUpdateTime && (\n                <><br /><br /><strong>Последнее обновление:</strong> {lastUpdateTime}</>\n              )}\n            </span>\n          </AlertDescription>\n        </Alert>\n        \n        {/* Список существующих автомобилей */}\n        <div className=\"space-y-4 mb-6\">\n          <h3 className=\"text-lg font-medium text-white\">Существующие типы:</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {vehicleTypes.map((vehicle) => (\n              <div key={vehicle.id} className=\"bg-gray-800 p-4 rounded-lg border border-gray-600\">\n                <div className=\"space-y-3\">\n                  <div>\n                    <Label className=\"text-sm text-gray-300\">Название</Label>\n                    <Input\n                      value={vehicle.name}\n                      onChange={(e) => onUpdateVehicleType(vehicle.id, 'name', e.target.value)}\n                      className=\"bg-gray-700 border-gray-600 text-white\"\n                    />\n                  </div>\n                  \n                  <div className=\"grid grid-cols-3 gap-2\">\n                    <div>\n                      <Label className=\"text-xs text-gray-400\">Длина (мм)</Label>\n                      <Input\n                        type=\"number\"\n                        value={vehicle.length}\n                        onChange={(e) => onUpdateVehicleType(vehicle.id, 'length', parseInt(e.target.value) || 0)}\n                        className=\"bg-gray-700 border-gray-600 text-white text-xs\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-400\">Ширина (мм)</Label>\n                      <Input\n                        type=\"number\"\n                        value={vehicle.width}\n                        onChange={(e) => onUpdateVehicleType(vehicle.id, 'width', parseInt(e.target.value) || 0)}\n                        className=\"bg-gray-700 border-gray-600 text-white text-xs\"\n                      />\n                    </div>\n                    <div>\n                      <Label className=\"text-xs text-gray-400\">Высота (мм)</Label>\n                      <Input\n                        type=\"number\"\n                        value={vehicle.height}\n                        onChange={(e) => onUpdateVehicleType(vehicle.id, 'height', parseInt(e.target.value) || 0)}\n                        className=\"bg-gray-700 border-gray-600 text-white text-xs\"\n                      />\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex justify-between items-center pt-2\">\n                    <div className=\"text-xs text-gray-400\">\n                      Объём: {((vehicle.length * vehicle.width * vehicle.height) / 1000000000).toFixed(1)} м³\n                    </div>\n                    <Button\n                      onClick={() => onRemoveVehicleType(vehicle.id)}\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"text-red-400 border-red-400 hover:bg-red-400 hover:text-white\"\n                    >\n                      <Trash2 className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        \n        {/* Добавление нового автомобиля */}\n        <div className=\"bg-gray-800 p-4 rounded-lg border-2 border-dashed border-gray-600\">\n          <h3 className=\"text-lg font-medium text-white mb-4\">Добавить новый тип:</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4\">\n            <div>\n              <Label className=\"text-sm text-gray-300\">Название</Label>\n              <Input\n                placeholder=\"напр. Мерседес Спринтер\"\n                value={newVehicle.name}\n                onChange={(e) => onSetNewVehicle({ ...newVehicle, name: e.target.value })}\n                className=\"bg-gray-700 border-gray-600 text-white\"\n              />\n            </div>\n            <div>\n              <Label className=\"text-sm text-gray-300\">Длина кузова (внутри), мм</Label>\n              <Input\n                type=\"number\"\n                placeholder=\"4200\"\n                value={newVehicle.length}\n                onChange={(e) => onSetNewVehicle({ ...newVehicle, length: e.target.value })}\n                className=\"bg-gray-700 border-gray-600 text-white\"\n              />\n            </div>\n            <div>\n              <Label className=\"text-sm text-gray-300\">Ширина кузова (внутри), мм</Label>\n              <Input\n                type=\"number\"\n                placeholder=\"2025\"\n                value={newVehicle.width}\n                onChange={(e) => onSetNewVehicle({ ...newVehicle, width: e.target.value })}\n                className=\"bg-gray-700 border-gray-600 text-white\"\n              />\n            </div>\n            <div>\n              <Label className=\"text-sm text-gray-300\">Высота кузова (внутри), мм</Label>\n              <Input\n                type=\"number\"\n                placeholder=\"2025\"\n                value={newVehicle.height}\n                onChange={(e) => onSetNewVehicle({ ...newVehicle, height: e.target.value })}\n                className=\"bg-gray-700 border-gray-600 text-white\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"flex justify-between items-center\">\n            <div className=\"text-sm text-gray-400\">\n              {newVehicle.length && newVehicle.width && newVehicle.height && (\n                <span>\n                  Прогнозируемый объём: {((parseInt(newVehicle.length) * parseInt(newVehicle.width) * parseInt(newVehicle.height)) / 1000000000).toFixed(1)} м³\n                </span>\n              )}\n            </div>\n            <Button \n              onClick={onAddVehicleType}\n              className=\"bg-blue-600 hover:bg-blue-700\"\n            >\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Добавить\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}"
    },
    "output": "",
    "metadata": {
      "diagnostics": {},
      "filepath": "/home/user/project/components/diagnostic/VehicleManagement.tsx",
      "exists": false
    },
    "title": "components/diagnostic/VehicleManagement.tsx",
    "time": {
      "start": 1759243198202,
      "end": 1759243198204
    }
  }
}