{
  "id": "prt_99b100d12002OqqaDKVx9FtMHJ",
  "messageID": "msg_99b0f7b10001C5smelqobGSukK",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "write",
  "callID": "toolu_01K3wimfomP7xJbhpPvNYNwC",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/diagnostic/ApiTestingSection.tsx",
      "content": "'use client';\n\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Truck, CheckCircle, AlertCircle, XCircle, Activity } from 'lucide-react';\n\ninterface DiagnosticResult {\n  status: 'success' | 'warning' | 'error' | 'pending';\n  message: string;\n  details?: any;\n  response?: any;\n  requestData?: any;\n  timing?: number;\n}\n\ninterface ApiTestingSectionProps {\n  diagnosticResults: { [key: string]: DiagnosticResult };\n  testStates: {\n    isTestingPEK: boolean;\n    isTestingDellin: boolean;\n    isTestingRailContinent: boolean;\n    isTestingVozovoz: boolean;\n    isTestingNordWheel: boolean;\n  };\n  onTestPEK: () => void;\n  onTestDellin: () => void;\n  onTestRailContinent: () => void;\n  onTestVozovoz: () => void;\n  onTestNordWheel: () => void;\n}\n\nexport default function ApiTestingSection({\n  diagnosticResults,\n  testStates,\n  onTestPEK,\n  onTestDellin,\n  onTestRailContinent,\n  onTestVozovoz,\n  onTestNordWheel\n}: ApiTestingSectionProps) {\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'success': return <CheckCircle className=\"h-4 w-4 text-green-400\" />;\n      case 'warning': return <AlertCircle className=\"h-4 w-4 text-yellow-400\" />;\n      case 'error': return <XCircle className=\"h-4 w-4 text-red-400\" />;\n      default: return <Activity className=\"h-4 w-4 text-gray-400\" />;\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'success': return 'border-green-500 bg-green-900/20';\n      case 'warning': return 'border-yellow-500 bg-yellow-900/20';\n      case 'error': return 'border-red-500 bg-red-900/20';\n      default: return 'border-gray-500 bg-gray-900/20';\n    }\n  };\n\n  const renderApiCard = (\n    name: string,\n    title: string,\n    color: string,\n    isLoading: boolean,\n    onTest: () => void,\n    resultKey: string\n  ) => {\n    const result = diagnosticResults[resultKey];\n    \n    return (\n      <Card className=\"border-gray-700 bg-gray-900\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Truck className={`h-5 w-5 ${color}`} />\n              {title}\n            </div>\n            <Button \n              onClick={onTest} \n              disabled={isLoading}\n              size=\"sm\"\n              variant=\"outline\"\n            >\n              {isLoading ? 'Тестирование...' : 'Тест'}\n            </Button>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {result ? (\n            <Alert className={getStatusColor(result.status)}>\n              <div className=\"flex items-start gap-2\">\n                {getStatusIcon(result.status)}\n                <div className=\"flex-1\">\n                  <AlertDescription>\n                    <div className=\"font-medium mb-2 text-white\">{result.message}</div>\n                    {result.timing && (\n                      <Badge variant=\"outline\" className=\"mb-2\">\n                        Время ответа: {result.timing}мс\n                      </Badge>\n                    )}\n                    {result.details && (\n                      <details className=\"mt-2\">\n                        <summary className=\"cursor-pointer text-sm text-gray-300\">Подробности</summary>\n                        <pre className=\"text-xs mt-2 p-2 bg-gray-800 rounded overflow-auto\">\n                          {JSON.stringify(result.details, null, 2)}\n                        </pre>\n                      </details>\n                    )}\n                  </AlertDescription>\n                </div>\n              </div>\n            </Alert>\n          ) : (\n            <p className=\"text-gray-400\">Нажмите \"Тест\" для проверки API {title}</p>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6\">\n      {renderApiCard('pek', 'ПЭК', 'text-blue-400', testStates.isTestingPEK, onTestPEK, 'pek')}\n      {renderApiCard('dellin', 'Деловые Линии', 'text-green-400', testStates.isTestingDellin, onTestDellin, 'dellin')}\n      {renderApiCard('railcontinent', 'Rail Continent', 'text-purple-400', testStates.isTestingRailContinent, onTestRailContinent, 'railcontinent')}\n      {renderApiCard('vozovoz', 'Возовоз', 'text-orange-400', testStates.isTestingVozovoz, onTestVozovoz, 'vozovoz')}\n      {renderApiCard('nordwheel', 'Nord Wheel', 'text-cyan-400', testStates.isTestingNordWheel, onTestNordWheel, 'nordwheel')}\n    </div>\n  );\n}"
    },
    "output": "",
    "metadata": {
      "diagnostics": {},
      "filepath": "/home/user/project/components/diagnostic/ApiTestingSection.tsx",
      "exists": false
    },
    "title": "components/diagnostic/ApiTestingSection.tsx",
    "time": {
      "start": 1759243167231,
      "end": 1759243167232
    }
  }
}