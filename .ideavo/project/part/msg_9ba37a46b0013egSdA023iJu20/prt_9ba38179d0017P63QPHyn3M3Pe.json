{
  "id": "prt_9ba38179d0017P63QPHyn3M3Pe",
  "messageID": "msg_9ba37a46b0013egSdA023iJu20",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01V79qExKE2E5rnqevNsiE4Z",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 2900,
      "limit": 300
    },
    "output": "<file>\n02901|             price_with_out_sale: autoTariff.price_with_out_sale,\n02902|             pricePackage: autoTariff.pricePackage,\n02903|             priceInsurance: autoTariff.priceInsurance,\n02904|             needPackaging: form.needPackaging,\n02905|             needInsurance: form.needInsurance,\n02906|             declaredValue: form.declaredValue\n02907|           });\n02908|           \n02909|           console.log('üöÇ Rail Continent —á–µ–∫–±–æ–∫—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–µ:');\n02910|           console.log('   - –£–ø–∞–∫–æ–≤–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è:', form.needPackaging);\n02911|           console.log('   - –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è:', form.needInsurance);\n02912|           console.log('   - –ó–∞—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', form.declaredValue);\n02913|           \n02914|           // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –≥—Ä—É–∑–∞\n02915|           if (autoTariff.price_with_out_sale) {\n02916|             const deliveryPrice = parseFloat(autoTariff.price_with_out_sale);\n02917|             console.log('üöÇ –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞:', deliveryPrice);\n02918|             services.push({\n02919|               name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n02920|               description: `${autoTariff.type} (${autoTariff.rsType})`,\n02921|               price: deliveryPrice\n02922|             });\n02923|             totalPrice += deliveryPrice;\n02924|           }\n02925|           \n02926|           // –£–ø–∞–∫–æ–≤–∫–∞\n02927|           if (form.needPackaging && autoTariff.pricePackage) {\n02928|             const packagingPrice = parseFloat(autoTariff.pricePackage);\n02929|             console.log('üöÇ –£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞:', packagingPrice);\n02930|             services.push({\n02931|               name: '–£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞',\n02932|               description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞',\n02933|               price: packagingPrice\n02934|             });\n02935|             totalPrice += packagingPrice;\n02936|           }\n02937|           \n02938|           // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ\n02939|           if (form.needInsurance && autoTariff.priceInsurance) {\n02940|             const insuranceCost = Math.round(form.declaredValue * parseFloat(autoTariff.priceInsurance) / 100);\n02941|             console.log('üöÇ –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞:', insuranceCost, '(', form.declaredValue, '*', autoTariff.priceInsurance, '%)');\n02942|             services.push({\n02943|               name: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n02944|               description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n02945|               price: insuranceCost\n02946|             });\n02947|             totalPrice += insuranceCost;\n02948|           }\n02949| \n02950|           console.log('üöÇ Rail Continent –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', totalPrice);\n02951|           console.log('üöÇ Rail Continent —É—Å–ª—É–≥–∏:', services);\n02952| \n02953|           // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º, –Ω–æ –Ω–µ –≤–∫–ª—é—á–∞–µ–º –≤ –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å)\n02954|           const additionalServices: { name: string; description: string; price: number }[] = [];\n02955|           \n02956|           // –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —Å–±–æ—Ä—ã\n02957|           if (autoTariff.terminalEnter1) {\n02958|             additionalServices.push({\n02959|               name: '–¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–π —Å–±–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è',\n02960|               description: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä—É–∑–∞ –Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ',\n02961|               price: parseInt(autoTariff.terminalEnter1)\n02962|             });\n02963|           }\n02964|           \n02965|           // –ó–∞–±–æ—Ä/–¥–æ—Å—Ç–∞–≤–∫–∞\n02966|           if (form.fromAddressDelivery && autoTariff.pricePickup && parseInt(autoTariff.pricePickup) > 0) {\n02967|             additionalServices.push({\n02968|               name: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n02969|               description: '–û—Ç –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è',\n02970|               price: parseInt(autoTariff.pricePickup)\n02971|             });\n02972|           }\n02973|           \n02974|           if (form.toAddressDelivery && autoTariff.priceDelivery && parseInt(autoTariff.priceDelivery) > 0) {\n02975|             additionalServices.push({\n02976|               name: '–î–æ—Å—Ç–∞–≤–∫–∞ –ø–æ –∞–¥—Ä–µ—Å—É',\n02977|               description: '–î–æ –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è',\n02978|               price: parseInt(autoTariff.priceDelivery)\n02979|             });\n02980|           }\n02981| \n02982|           return {\n02983|             company: 'Rail Continent',\n02984|             price: Math.round(totalPrice),\n02985|             days: parseInt(autoTariff.duration) || 5,\n02986|             details: {\n02987|               tariff: `${autoTariff.type} - ${autoTariff.service}`,\n02988|               transportType: autoTariff.rsType,\n02989|               weight: totalWeight,\n02990|               volume: totalVolume,\n02991|               route: `${form.fromCity} - ${form.toCity}`,\n02992|               services,\n02993|               additionalServices,\n02994|               allTariffs: data.data\n02995|             },\n02996|             requestData,\n02997|             responseData: data,\n02998|             apiUrl\n02999|           };\n03000|         } else {\n03001|           return {\n03002|             company: 'Rail Continent',\n03003|             price: 0,\n03004|             days: 0,\n03005|             error: '–ê–≤—Ç–æ–º–æ–±–∏–ª—å–Ω—ã–π —Ç–∞—Ä–∏—Ñ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞',\n03006|             requestData,\n03007|             responseData: data,\n03008|             apiUrl\n03009|           };\n03010|         }\n03011|       } else {\n03012|         return {\n03013|           company: 'Rail Continent',\n03014|           price: 0,\n03015|           days: 0,\n03016|           error: data.error || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Rail Continent',\n03017|           requestData,\n03018|           responseData: data,\n03019|           apiUrl\n03020|         };\n03021|       }\n03022|     } catch (error: any) {\n03023|       console.error('üöÇ Rail Continent –æ—à–∏–±–∫–∞:', error);\n03024|       return {\n03025|         company: 'Rail Continent',\n03026|         price: 0,\n03027|         days: 0,\n03028|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n03029|         apiUrl\n03030|       };\n03031|     }\n03032|   };\n03033| \n03034|   const calculateVozovoz = async (): Promise<CalculationResult> => {\n03035|     const apiUrl = '/api/vozovoz';\n03036|     \n03037|     try {\n03038|       // –í—ã—á–∏—Å–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≥—Ä—É–∑–∞\n03039|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n03040|       const totalVolume = form.cargos.reduce((sum, cargo) => \n03041|         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n03042|       );\n03043|       \n03044|       console.log('üöö –í–æ–∑–æ–≤–æ–∑: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö...');\n03045|       console.log('   - –û–±—â–∏–π –≤–µ—Å:', totalWeight, '–∫–≥');\n03046|       console.log('   - –û–±—â–∏–π –æ–±—ä–µ–º:', totalVolume, '–º¬≥');\n03047|       console.log('   - –û—Ç–∫—É–¥–∞:', form.fromCity);\n03048|       console.log('   - –ö—É–¥–∞:', form.toCity);\n03049|       \n03050|       // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è API Vozovoz\n03051|       const requestData = {\n03052|         object: \"price\",\n03053|         action: \"get\",\n03054|         params: {\n03055|           cargo: {\n03056|             dimension: {\n03057|               quantity: form.cargos.length,\n03058|               volume: totalVolume,\n03059|               weight: totalWeight\n03060|             },\n03061|             ...(form.needInsurance && form.declaredValue > 0 ? {\n03062|               insurance: form.declaredValue\n03063|             } : {}),\n03064|             ...(form.needPackaging ? {\n03065|               wrapping: {\n03066|                 palletCollar: totalVolume // –û–±—Ä–µ—à–µ—Ç–∫–∞ –ø–æ –æ–±—ä–µ–º—É\n03067|               }\n03068|             } : {})\n03069|           },\n03070|           gateway: {\n03071|             dispatch: {\n03072|               point: {\n03073|                 location: form.fromCity || '–ú–æ—Å–∫–≤–∞',\n03074|                 ...(form.fromAddressDelivery ? {\n03075|                   address: form.fromAddress || \"–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è\"\n03076|                 } : {\n03077|                   terminal: \"default\"\n03078|                 })\n03079|               }\n03080|             },\n03081|             destination: {\n03082|               point: {\n03083|                 location: form.toCity || '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n03084|                 ...(form.toAddressDelivery ? {\n03085|                   address: form.toAddress || \"–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–µ–Ω–∏—è\"\n03086|                 } : {\n03087|                   terminal: \"default\"\n03088|                 })\n03089|               }\n03090|             }\n03091|           }\n03092|         }\n03093|       };\n03094| \n03095|       console.log('üöö –í–æ–∑–æ–≤–æ–∑ –∑–∞–ø—Ä–æ—Å:', JSON.stringify(requestData, null, 2));\n03096| \n03097|       const response = await fetch(apiUrl, {\n03098|         method: 'POST',\n03099|         headers: {\n03100|           'Content-Type': 'application/json',\n03101|         },\n03102|         body: JSON.stringify(requestData)\n03103|       });\n03104| \n03105|       const data = await response.json();\n03106|       console.log('üöö –í–æ–∑–æ–≤–æ–∑ –æ—Ç–≤–µ—Ç:', JSON.stringify(data, null, 2));\n03107| \n03108|       if (response.ok && data.response) {\n03109|         const responseData = data.response;\n03110|         \n03111|         // –°–æ–±–∏—Ä–∞–µ–º –¥–µ—Ç–∞–ª–∏ –ø–æ —É—Å–ª—É–≥–∞–º\n03112|         const services: { name: string; description: string; price: number }[] = [];\n03113|         let totalPrice = responseData.price || responseData.basePrice || 0;\n03114|         \n03115|         console.log('üöö –í–æ–∑–æ–≤–æ–∑ –∞–Ω–∞–ª–∏–∑ –æ—Ç–≤–µ—Ç–∞:', responseData);\n03116|         \n03117|         // –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏\n03118|         if (responseData.basePrice && responseData.basePrice > 0) {\n03119|           services.push({\n03120|             name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n03121|             description: `${form.fromCity} - ${form.toCity}`,\n03122|             price: responseData.basePrice\n03123|           });\n03124|         }\n03125|         \n03126|         // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ –∏–∑ –æ—Ç–≤–µ—Ç–∞ API\n03127|         if (responseData.service && Array.isArray(responseData.service)) {\n03128|           responseData.service.forEach((service: any) => {\n03129|             if (service.price > 0) {\n03130|               services.push({\n03131|                 name: service.name || '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —É—Å–ª—É–≥–∞',\n03132|                 description: service.description || '',\n03133|                 price: service.price\n03134|               });\n03135|             }\n03136|           });\n03137|         }\n03138|         \n03139|         // –ó–∞–±–æ—Ä –≥—Ä—É–∑–∞ —Å –∞–¥—Ä–µ—Å–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)\n03140|         if (form.fromAddressDelivery && responseData.pickupPrice) {\n03141|           services.push({\n03142|             name: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n03143|             description: `–ó–∞–±–æ—Ä —Å –∞–¥—Ä–µ—Å–∞: ${form.fromAddress || '–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è'}`,\n03144|             price: responseData.pickupPrice\n03145|           });\n03146|         }\n03147|         \n03148|         // –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞ –¥–æ –∞–¥—Ä–µ—Å–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)\n03149|         if (form.toAddressDelivery && responseData.deliveryPrice) {\n03150|           services.push({\n03151|             name: '–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –∞–¥—Ä–µ—Å–∞',\n03152|             description: `–î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ: ${form.toAddress || '–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–µ–Ω–∏—è'}`,\n03153|             price: responseData.deliveryPrice\n03154|           });\n03155|         }\n03156|         \n03157|         // –£–ø–∞–∫–æ–≤–∫–∞ (–æ–±—Ä–µ—à–µ—Ç–∫–∞)\n03158|         if (form.needPackaging && responseData.wrappingPrice) {\n03159|           services.push({\n03160|             name: '–£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞',\n03161|             description: '–û–±—Ä–µ—à–µ—Ç–∫–∞ –≥—Ä—É–∑–∞',\n03162|             price: responseData.wrappingPrice\n03163|           });\n03164|         }\n03165|         \n03166|         // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ\n03167|         if (form.needInsurance && responseData.insurancePrice) {\n03168|           services.push({\n03169|             name: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n03170|             description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n03171|             price: responseData.insurancePrice\n03172|           });\n03173|         }\n03174|         \n03175|         // –ï—Å–ª–∏ —É—Å–ª—É–≥ –Ω–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å\n03176|         if (services.length === 0) {\n03177|           services.push({\n03178|             name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n03179|             description: `${form.fromCity} - ${form.toCity}`,\n03180|             price: totalPrice\n03181|           });\n03182|         }\n03183| \n03184|         console.log('üöö –í–æ–∑–æ–≤–æ–∑ –∏—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', totalPrice);\n03185|         console.log('üöö –í–æ–∑–æ–≤–æ–∑ —É—Å–ª—É–≥–∏:', services);\n03186| \n03187|         return {\n03188|           company: '–í–æ–∑–æ–≤–æ–∑',\n03189|           price: Math.round(totalPrice),\n03190|           days: responseData.deliveryTime?.to || responseData.deliveryTime?.from || 3,\n03191|           details: {\n03192|             note: `–î–æ—Å—Ç–∞–≤–∫–∞ ${form.fromCity} - ${form.toCity}`,\n03193|             services,\n03194|             basePrice: responseData.basePrice,\n03195|             finalPrice: responseData.price,\n03196|             deliveryTime: responseData.deliveryTime,\n03197|             weight: totalWeight,\n03198|             volume: totalVolume\n03199|           },\n03200|           requestData,\n\n(File has more lines. Use 'offset' parameter to read beyond line 3200)\n</file>",
    "metadata": {
      "preview": "            price_with_out_sale: autoTariff.price_with_out_sale,\n            pricePackage: autoTariff.pricePackage,\n            priceInsurance: autoTariff.priceInsurance,\n            needPackaging: form.needPackaging,\n            needInsurance: form.needInsurance,\n            declaredValue: form.declaredValue\n          });\n          \n          console.log('üöÇ Rail Continent —á–µ–∫–±–æ–∫—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–µ:');\n          console.log('   - –£–ø–∞–∫–æ–≤–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è:', form.needPackaging);\n          console.log('   - –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è:', form.needInsurance);\n          console.log('   - –ó–∞—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:', form.declaredValue);\n          \n          // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –≥—Ä—É–∑–∞\n          if (autoTariff.price_with_out_sale) {\n            const deliveryPrice = parseFloat(autoTariff.price_with_out_sale);\n            console.log('üöÇ –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞:', deliveryPrice);\n            services.push({\n              name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n              description: `${autoTariff.type} (${autoTariff.rsType})`,"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1759765863103,
      "end": 1759765863106
    }
  }
}