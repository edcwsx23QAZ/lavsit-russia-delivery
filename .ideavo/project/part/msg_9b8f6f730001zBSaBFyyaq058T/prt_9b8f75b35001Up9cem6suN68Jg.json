{
  "id": "prt_9b8f75b35001Up9cem6suN68Jg",
  "messageID": "msg_9b8f6f730001zBSaBFyyaq058T",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_012GidqxXuMPJjkcpS3pqcm8",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/ServiceWorkerRegistration.tsx"
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import { useEffect } from 'react';\n00004| \n00005| export default function ServiceWorkerRegistration() {\n00006|   useEffect(() => {\n00007|     if ('serviceWorker' in navigator) {\n00008|       // В production регистрируем SW, в development отключаем\n00009|       if (process.env.NODE_ENV === 'production') {\n00010|         navigator.serviceWorker\n00011|           .register('/sw.js')\n00012|           .then((registration) => {\n00013|             console.log('[SW] Service Worker registered successfully:', registration);\n00014|             \n00015|             // Check for updates\n00016|             registration.addEventListener('updatefound', () => {\n00017|               const newWorker = registration.installing;\n00018|               if (newWorker) {\n00019|                 newWorker.addEventListener('statechange', () => {\n00020|                   if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n00021|                     console.log('[SW] New version available');\n00022|                     // Could show a notification to user about update\n00023|                   }\n00024|                 });\n00025|               }\n00026|             });\n00027|           })\n00028|           .catch((error) => {\n00029|             console.warn('[SW] Service Worker registration failed:', error);\n00030|           });\n00031| \n00032|         // Listen for messages from service worker\n00033|         navigator.serviceWorker.addEventListener('message', (event) => {\n00034|           console.log('[SW] Message from service worker:', event.data);\n00035|         });\n00036|       } else {\n00037|         // Отключаем SW в development\n00038|         console.log('[SW] DEV: Отключение Service Worker в режиме разработки');\n00039|         navigator.serviceWorker.getRegistrations().then(registrations => {\n00040|           registrations.forEach(registration => {\n00041|             registration.unregister().then(() => {\n00042|               console.log('[SW] DEV: Service Worker отключен:', registration);\n00043|             });\n00044|           });\n00045|         });\n00046|       }\n00047|     }\n00048|   }, []);\n00049| \n00050|   return null; // This component renders nothing\n00051| }\n</file>",
    "metadata": {
      "preview": "'use client';\n\nimport { useEffect } from 'react';\n\nexport default function ServiceWorkerRegistration() {\n  useEffect(() => {\n    if ('serviceWorker' in navigator) {\n      // В production регистрируем SW, в development отключаем\n      if (process.env.NODE_ENV === 'production') {\n        navigator.serviceWorker\n          .register('/sw.js')\n          .then((registration) => {\n            console.log('[SW] Service Worker registered successfully:', registration);\n            \n            // Check for updates\n            registration.addEventListener('updatefound', () => {\n              const newWorker = registration.installing;\n              if (newWorker) {\n                newWorker.addEventListener('statechange', () => {\n                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {"
    },
    "title": "components/ServiceWorkerRegistration.tsx",
    "time": {
      "start": 1759744843275,
      "end": 1759744843277
    }
  }
}