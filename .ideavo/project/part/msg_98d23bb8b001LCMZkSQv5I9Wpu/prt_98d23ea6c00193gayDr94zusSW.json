{
  "id": "prt_98d23ea6c00193gayDr94zusSW",
  "messageID": "msg_98d23bb8b001LCMZkSQv5I9Wpu",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01UVvAvVWbTE6vnYqFcwPXsJ",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 2300,
      "limit": 200
    },
    "output": "<file>\n02301| \n02302|       // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n02303|       const params = new URLSearchParams({\n02304|         from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n02305|         to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n02306|         pickup: form.fromAddressDelivery ? '1' : '0',\n02307|         deliver: form.toAddressDelivery ? '1' : '0',\n02308|         weight: totalWeight.toString(),\n02309|         volume: totalVolume.toString(),\n02310|         oversized: isOversized ? '1' : '0', // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n02311|         package: form.needPackaging ? '1' : '0',\n02312|         packageCount: form.cargos.length.toString(),\n02313|         insurance: form.needInsurance ? '1' : '0',\n02314|         sum: form.declaredValue.toString(),\n02315|         documentsReturn: '0',\n02316|         fragile: '1',\n02317|         // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ì–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã\n02318|         length: (maxLength / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n02319|         width: (maxWidth / 100).toString(),        // –≤ –º–µ—Ç—Ä–∞—Ö\n02320|         height: (maxHeight / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n02321|         // üîß –î–û–ë–ê–í–õ–ï–ù–û: –§–ª–∞–≥ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç\n02322|         multiplePackages: form.cargos.length > 1 ? '1' : '0'\n02323|       });\n02324| \n02325|       const requestData = Object.fromEntries(params);\n02326|       const fullUrl = `${apiUrl}?${params.toString()}`;\n02327| \n02328|       const response = await fetch(fullUrl);\n02329|       const data = await response.json();\n02330| \n02331|       if (response.ok && data.status === 'success' && data.data) {\n02332|         return {\n02333|           company: 'Nord Wheel',\n02334|           price: data.data.total || 0,\n02335|           days: data.data.days || 0,\n02336|           details: {\n02337|             ...data.data,\n02338|             totalCost: data.data.total,\n02339|             deliveryCost: data.data.door,\n02340|             terminalCost: data.data.terminal,\n02341|             pickupCost: data.data.pick,\n02342|             deliveryToDoorCost: data.data.deliver,\n02343|             additionalServices: (data.data.total || 0) - (data.data.door || 0)\n02344|           },\n02345|           requestData,\n02346|           responseData: data,\n02347|           apiUrl: fullUrl\n02348|         };\n02349|       } else {\n02350|         return {\n02351|           company: 'Nord Wheel',\n02352|           price: 0,\n02353|           days: 0,\n02354|           error: '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n02355|           requestData,\n02356|           responseData: data,\n02357|           apiUrl: fullUrl\n02358|         };\n02359|       }\n02360|     } catch (error: any) {\n02361|       return {\n02362|         company: 'Nord Wheel',\n02363|         price: 0,\n02364|         days: 0,\n02365|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n02366|         apiUrl\n02367|       };\n02368|     }\n02369|   };\n02370| \n02371|   const handleCalculate = async () => {\n02372|     setCalculating(true);\n02373|     setCalculations([]);\n02374|     \n02375|     // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞\n02376|     localStorage.setItem('deliveryForm', JSON.stringify(form));\n02377|     \n02378|     try {\n02379|       const results = await Promise.all([\n02380|         calculateDellin(),\n02381|         calculatePEK(),\n02382|         calculateNordWheel(),\n02383|         calculateRailContinent(),\n02384|         calculateVozovoz()\n02385|       ]);\n02386|       \n02387|       // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ\n02388|       const sortedResults = results\n02389|         .filter(result => !result.error)\n02390|         .sort((a, b) => a.price - b.price)\n02391|         .concat(results.filter(result => result.error));\n02392|       \n02393|       setCalculations(sortedResults);\n02394|     } catch (error) {\n02395|       console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ:', error);\n02396|     } finally {\n02397|       setCalculating(false);\n02398|     }\n02399|   };\n02400| \n02401|   const exportToPDF = () => {\n02402|     if (typeof window !== 'undefined') {\n02403|       // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –≤—Å–µ –¥–µ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥ –ø–µ—á–∞—Ç—å—é\n02404|       const allExpanded = calculations.reduce((acc, calc) => {\n02405|         acc[calc.company] = true;\n02406|         return acc;\n02407|       }, {} as { [key: string]: boolean });\n02408|       \n02409|       setExpandedDetails(allExpanded);\n02410|       \n02411|       // –î–∞–µ–º –≤—Ä–µ–º—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM\n02412|       setTimeout(() => {\n02413|         window.print();\n02414|       }, 100);\n02415|     }\n02416|   };\n02417| \n02418|   const toggleDetails = (company: string) => {\n02419|     setExpandedDetails(prev => ({\n02420|       ...prev,\n02421|       [company]: !prev[company]\n02422|     }));\n02423|   };\n02424| \n02425|   const toggleDebugInfo = (company: string) => {\n02426|     setExpandedDebugInfo(prev => ({\n02427|       ...prev,\n02428|       [company]: !prev[company]\n02429|     }));\n02430|   };\n02431| \n02432|   // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—á–µ—Ç–∞\n02433|   const handleReset = () => {\n02434|     if (typeof window !== 'undefined') {\n02435|       // –û—á–∏—â–∞–µ–º localStorage\n02436|       localStorage.removeItem('deliveryForm');\n02437|       \n02438|       // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–æ—Ä–º—ã –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É\n02439|       setForm(initialFormState);\n02440|       \n02441|       // –û—á–∏—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–æ–≤ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è\n02442|       setCalculations([]);\n02443|       setExpandedDetails({});\n02444|       setExpandedDebugInfo({});\n02445|       setSuggestions([]);\n02446|       setShowSuggestions(false);\n02447|       setActiveField('');\n02448|       \n02449|       console.log('–§–æ—Ä–º–∞ —Å–±—Ä–æ—à–µ–Ω–∞ –∫ –Ω–∞—á–∞–ª—å–Ω–æ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é');\n02450|     }\n02451|   };\n02452| \n02453|   // –ü–∞—Ä—Å–µ—Ä –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞\n02454|   const parseCalculationDetails = (calc: CalculationResult) => {\n02455|     const details: { service: string; description: string; price: number }[] = [];\n02456|     \n02457|     if (calc.company === '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏' && calc.details) {\n02458|       // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ (—É–∂–µ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –∏ —É–ø–∞–∫–æ–≤–∫—É)\n02459|       let basePrice = calc.details.price || calc.price || 0;\n02460|       \n02461|       // –†–∞–∑–±–∏–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ\n02462|       let intercityPrice = 0;\n02463|       let derivalPrice = 0;\n02464|       let arrivalPrice = 0;\n02465|       let packagingPrice = 0;\n02466|       // packagingPremiums –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - –Ω–∞–¥–±–∞–≤–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ pkg.price\n02467|       let insurancePrice = 0;\n02468|       \n02469|       // –ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n02470|       if (calc.details.intercity?.price) {\n02471|         intercityPrice = calc.details.intercity.price;\n02472|         details.push({\n02473|           service: '–ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞',\n02474|           description: `${form.fromCity} - ${form.toCity}`,\n02475|           price: intercityPrice\n02476|         });\n02477|       }\n02478|       \n02479|       // –ó–∞–±–æ—Ä –≥—Ä—É–∑–∞\n02480|       if (calc.details.derival?.price) {\n02481|         derivalPrice = calc.details.derival.price;\n02482|         details.push({\n02483|           service: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n02484|           description: '–û—Ç –∞–¥—Ä–µ—Å–∞',\n02485|           price: derivalPrice\n02486|         });\n02487|       }\n02488|       \n02489|       // –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞\n02490|       if (calc.details.arrival?.price) {\n02491|         arrivalPrice = calc.details.arrival.price;\n02492|         details.push({\n02493|           service: '–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞',\n02494|           description: '–î–æ –∞–¥—Ä–µ—Å–∞',\n02495|           price: arrivalPrice\n02496|         });\n02497|       }\n02498|       \n02499|       // –£–ø–∞–∫–æ–≤–∫–∞ (–Ω–∞–¥–±–∞–≤–∫–∏ —É–∂–µ –≤–∫–ª—é—á–µ–Ω—ã –≤ pkg.price, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ö –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏)\n02500|       if (form.needPackaging && calc.details.packages) {\n\n(File has more lines. Use 'offset' parameter to read beyond line 2500)\n</file>",
    "metadata": {
      "preview": "\n      // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–æ–±–∞–≤–ª–µ–Ω—ã –≥–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n      const params = new URLSearchParams({\n        from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n        to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n        pickup: form.fromAddressDelivery ? '1' : '0',\n        deliver: form.toAddressDelivery ? '1' : '0',\n        weight: totalWeight.toString(),\n        volume: totalVolume.toString(),\n        oversized: isOversized ? '1' : '0', // üîß –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–≥–∞–±–∞—Ä–∏—Ç–∞\n        package: form.needPackaging ? '1' : '0',\n        packageCount: form.cargos.length.toString(),\n        insurance: form.needInsurance ? '1' : '0',\n        sum: form.declaredValue.toString(),\n        documentsReturn: '0',\n        fragile: '1',\n        // üîß –î–û–ë–ê–í–õ–ï–ù–û: –ì–∞–±–∞—Ä–∏—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã\n        length: (maxLength / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö\n        width: (maxWidth / 100).toString(),        // –≤ –º–µ—Ç—Ä–∞—Ö\n        height: (maxHeight / 100).toString(),      // –≤ –º–µ—Ç—Ä–∞—Ö"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1759009566375,
      "end": 1759009566380
    }
  }
}