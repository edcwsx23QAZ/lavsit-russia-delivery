{
  "id": "prt_98d2446f0001lI7Awjj0dNMqT8",
  "messageID": "msg_98d23bb8b001LCMZkSQv5I9Wpu",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "multiedit",
  "callID": "toolu_01CmfYVuZZCCD7M9P6JyrHZW",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/diagnostic/page.tsx",
      "edits": [
        {
          "oldString": "  const [fullTestResults, setFullTestResults] = useState<{\n    summary: {\n      totalTests: number;\n      successful: number;\n      failed: number;\n      errors: string[];\n    };\n    details: any[];\n  } | null>(null);",
          "newString": "  const [fullTestResults, setFullTestResults] = useState<{\n    summary: {\n      totalTests: number;\n      successful: number;\n      failed: number;\n      skipped: number;\n      errors: string[];\n      averageResponseTime: number;\n      successRate: number;\n    };\n    details: any[];\n    progressInfo: {\n      currentTK: string;\n      completedTests: number;\n      totalPlannedTests: number;\n      stage: string;\n    } | null;\n  } | null>(null);\n\n  const [testProgress, setTestProgress] = useState<{\n    currentTK: string;\n    completedTests: number;\n    totalPlannedTests: number;\n    stage: string;\n  } | null>(null);"
        },
        {
          "oldString": "  // üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n  const generateTestCargos = (count: number) => {\n    const cargos = [];\n    for (let i = 0; i < count; i++) {\n      cargos.push({\n        length: 50 + Math.floor(Math.random() * 150), // 50-200 —Å–º\n        width: 30 + Math.floor(Math.random() * 120),  // 30-150 —Å–º  \n        height: 20 + Math.floor(Math.random() * 180), // 20-200 —Å–º\n        weight: 5 + Math.floor(Math.random() * 95)    // 5-100 –∫–≥\n      });\n    }\n    return cargos;\n  };",
          "newString": "  // üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n  const generateTestCargos = (count: number, variant: 'small' | 'medium' | 'large' | 'mixed' = 'mixed') => {\n    const cargos = [];\n    \n    for (let i = 0; i < count; i++) {\n      let cargo;\n      \n      switch (variant) {\n        case 'small':\n          cargo = {\n            length: 30 + Math.floor(Math.random() * 70),  // 30-100 —Å–º\n            width: 20 + Math.floor(Math.random() * 50),   // 20-70 —Å–º\n            height: 15 + Math.floor(Math.random() * 35),  // 15-50 —Å–º\n            weight: 1 + Math.floor(Math.random() * 19)    // 1-20 –∫–≥\n          };\n          break;\n        case 'medium':\n          cargo = {\n            length: 80 + Math.floor(Math.random() * 70),  // 80-150 —Å–º\n            width: 60 + Math.floor(Math.random() * 60),   // 60-120 —Å–º\n            height: 40 + Math.floor(Math.random() * 80),  // 40-120 —Å–º\n            weight: 15 + Math.floor(Math.random() * 35)   // 15-50 –∫–≥\n          };\n          break;\n        case 'large':\n          cargo = {\n            length: 150 + Math.floor(Math.random() * 100), // 150-250 —Å–º (–Ω–µ–≥–∞–±–∞—Ä–∏—Ç)\n            width: 120 + Math.floor(Math.random() * 80),   // 120-200 —Å–º\n            height: 100 + Math.floor(Math.random() * 100), // 100-200 —Å–º\n            weight: 40 + Math.floor(Math.random() * 460)   // 40-500 –∫–≥\n          };\n          break;\n        default: // mixed\n          const types = ['small', 'medium', 'large'];\n          const randomType = types[Math.floor(Math.random() * types.length)] as 'small' | 'medium' | 'large';\n          return generateTestCargos(1, randomType)[0];\n      }\n      \n      cargos.push(cargo);\n    }\n    \n    return cargos;\n  };"
        },
        {
          "oldString": "  // üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π\n  const generateOptionsCombinations = () => {\n    const combinations = [];\n    const options = [\n      { name: 'fromAddressDelivery', values: [true, false] },\n      { name: 'toAddressDelivery', values: [true, false] },\n      { name: 'needPackaging', values: [true, false] },\n      { name: 'needInsurance', values: [true, false] }\n    ];\n\n    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (2^4 = 16 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)\n    for (let i = 0; i < Math.pow(2, options.length); i++) {\n      const combination: any = {\n        fromCity: '–ú–æ—Å–∫–≤–∞',\n        toCity: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n        fromAddress: '—É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1',\n        toAddress: '–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1',\n        declaredValue: 50000\n      };\n      \n      options.forEach((option, index) => {\n        combination[option.name] = Boolean(i & (1 << index));\n      });\n      \n      combinations.push(combination);\n    }\n    \n    return combinations;\n  };",
          "newString": "  // üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏\n  const generateOptionsCombinations = () => {\n    const combinations = [];\n    const options = [\n      { name: 'fromAddressDelivery', values: [true, false] },\n      { name: 'toAddressDelivery', values: [true, false] },\n      { name: 'needPackaging', values: [true, false] },\n      { name: 'needInsurance', values: [true, false] }\n    ];\n\n    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ (2^4 = 16 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)\n    for (let i = 0; i < Math.pow(2, options.length); i++) {\n      const combination: any = {\n        fromCity: '–ú–æ—Å–∫–≤–∞',\n        toCity: '–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥',\n        fromAddress: '—É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1',\n        toAddress: '–ù–µ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç, 1',\n        declaredValue: 50000\n      };\n      \n      options.forEach((option, index) => {\n        combination[option.name] = Boolean(i & (1 << index));\n      });\n      \n      combinations.push(combination);\n    }\n    \n    // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—è–º–∏\n    const specialCombinations = [\n      { ...combinations[0], declaredValue: 10000, testCase: 'low_value' },\n      { ...combinations[0], declaredValue: 100000, testCase: 'medium_value' },\n      { ...combinations[0], declaredValue: 500000, testCase: 'high_value' },\n      { ...combinations[0], declaredValue: 1000000, testCase: 'very_high_value' },\n      // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤\n      { ...combinations[0], fromCity: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', toCity: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', testCase: 'long_distance' },\n      { ...combinations[0], fromCity: '–ú–æ—Å–∫–≤–∞', toCity: '–ú—ã—Ç–∏—â–∏', testCase: 'short_distance' }\n    ];\n    \n    return [...combinations, ...specialCombinations];\n  };"
        },
        {
          "oldString": "  // üîß –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï\n  const runFullTesting = async () => {\n    setIsFullTesting(true);\n    setFullTestResults(null);\n    \n    const allResults: any[] = [];\n    const errors: string[] = [];\n    let totalTests = 0;\n    let successful = 0;\n    \n    console.log('üß™ ===== –ù–ê–ß–ê–õ–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n    \n    try {\n      const transportCompanies = ['pek', 'railcontinent', 'vozovoz', 'nordwheel'];\n      const cargoCountTests = [1, 2, 3, 5, 10, 20, 50]; // –¢–µ—Å—Ç–∏—Ä—É–µ–º –¥–æ 50 –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n      const optionCombinations = generateOptionsCombinations();\n      \n      console.log(`üß™ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤: ${transportCompanies.length} –¢–ö √ó ${cargoCountTests.length} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–µ—Å—Ç √ó ${optionCombinations.length} –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π = ${transportCompanies.length * cargoCountTests.length * optionCombinations.length}`);\n      \n      // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n      const maxTestsPerTK = 20; // 20 —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –¢–ö (–≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)\n      \n      for (const tk of transportCompanies) {\n        console.log(`üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${tk.toUpperCase()}...`);\n        let testsForTK = 0;\n        \n        // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–ª–∏—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n        for (const cargoCount of cargoCountTests) {\n          if (testsForTK >= maxTestsPerTK) break;\n          \n          // –í—ã–±–∏—Ä–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π (–Ω–µ –≤—Å–µ, –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏)\n          const selectedCombinations = optionCombinations.slice(0, Math.min(3, Math.floor(maxTestsPerTK / cargoCountTests.length)));\n          \n          for (const options of selectedCombinations) {\n            if (testsForTK >= maxTestsPerTK) break;\n            \n            const testData = {\n              ...options,\n              cargos: generateTestCargos(cargoCount)\n            };\n            \n            console.log(`üß™ ${tk}: ${cargoCount} –º–µ—Å—Ç, –æ–ø—Ü–∏–∏: [${Object.entries(options).filter(([k, v]) => typeof v === 'boolean' && v).map(([k, v]) => k).join(', ') || '–±–∞–∑–æ–≤—ã–µ'}]`);\n            \n            const result = await testSingleTK(tk, testData);\n            allResults.push(result);\n            totalTests++;\n            testsForTK++;\n            \n            if (result.status === 'success') {\n              successful++;\n              console.log(`‚úÖ ${tk}: ${result.message} (${result.timing}ms)`);\n            } else if (result.status === 'skipped') {\n              console.log(`‚è≠Ô∏è ${tk}: ${result.message}`);\n            } else {\n              console.log(`‚ùå ${tk}: ${result.message} (${result.timing}ms)`);\n              errors.push(`${tk}: ${result.message}`);\n            }\n            \n            // –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏\n            await new Promise(resolve => setTimeout(resolve, 100));\n          }\n        }\n      }\n      \n      const summary = {\n        totalTests,\n        successful,\n        failed: totalTests - successful,\n        errors\n      };\n      \n      setFullTestResults({\n        summary,\n        details: allResults\n      });\n      \n      console.log('üß™ ===== –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n      console.log(`üìä –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${totalTests}`);\n      console.log(`‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö: ${successful}`);\n      console.log(`‚ùå –ù–µ—É–¥–∞—á–Ω—ã—Ö: ${totalTests - successful}`);\n      console.log(`üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${((successful / totalTests) * 100).toFixed(1)}%`);\n      \n      if (errors.length > 0) {\n        console.log('‚ùå –û—à–∏–±–∫–∏:');\n        errors.forEach(error => console.log(`   - ${error}`));\n      }\n      \n    } catch (error: any) {\n      console.error('üß™ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', error);\n      errors.push(`–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`);\n      \n      setFullTestResults({\n        summary: { totalTests, successful, failed: totalTests - successful, errors },\n        details: allResults\n      });\n    } finally {\n      setIsFullTesting(false);\n      console.log('üß™ ===== –ö–û–ù–ï–¶ –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n    }\n  };",
          "newString": "  // üîß –†–ê–°–®–ò–†–ï–ù–ù–û–ï –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï\n  const runFullTesting = async () => {\n    setIsFullTesting(true);\n    setFullTestResults(null);\n    setTestProgress(null);\n    \n    const allResults: any[] = [];\n    const errors: string[] = [];\n    let totalTests = 0;\n    let successful = 0;\n    let skipped = 0;\n    let totalResponseTime = 0;\n    \n    console.log('üß™ ===== –ù–ê–ß–ê–õ–û –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n    \n    try {\n      const transportCompanies = ['pek', 'railcontinent', 'vozovoz', 'nordwheel', 'dellin'];\n      // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n      const cargoCountTests = [1, 2, 3, 5, 7, 10, 15, 20, 25, 30, 40, 50];\n      const cargoVariants = ['small', 'medium', 'large', 'mixed'] as const;\n      const optionCombinations = generateOptionsCombinations();\n      \n      // –ü–ª–∞–Ω–∏—Ä—É–µ–º –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n      const totalPlannedTests = transportCompanies.length * cargoCountTests.length * cargoVariants.length * Math.min(optionCombinations.length, 8);\n      \n      console.log(`üß™ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤: ${totalPlannedTests} (${transportCompanies.length} –¢–ö √ó ${cargoCountTests.length} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–µ—Å—Ç √ó ${cargoVariants.length} —Ç–∏–ø–æ–≤ –≥—Ä—É–∑–∞ √ó –¥–æ 8 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π)`);\n      \n      for (const tk of transportCompanies) {\n        console.log(`üß™ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${tk.toUpperCase()}...`);\n        \n        setTestProgress({\n          currentTK: tk.toUpperCase(),\n          completedTests: totalTests,\n          totalPlannedTests,\n          stage: '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è'\n        });\n        \n        let testsForCurrentTK = 0;\n        const maxTestsPerTK = 150; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n        \n        // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–ª–∏—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n        for (const cargoCount of cargoCountTests) {\n          if (testsForCurrentTK >= maxTestsPerTK) {\n            console.log(`‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è ${tk} (${maxTestsPerTK})`);\n            break;\n          }\n          \n          setTestProgress({\n            currentTK: tk.toUpperCase(),\n            completedTests: totalTests,\n            totalPlannedTests,\n            stage: `–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${cargoCount} –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç`\n          });\n          \n          // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≥—Ä—É–∑–æ–≤\n          for (const cargoVariant of cargoVariants) {\n            if (testsForCurrentTK >= maxTestsPerTK) break;\n            \n            // –í—ã–±–∏—Ä–∞–µ–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –æ–ø—Ü–∏–π\n            const selectedCombinations = [\n              optionCombinations[0],  // –ë–∞–∑–æ–≤–∞—è (–≤—Å–µ false)\n              optionCombinations[15], // –í—Å–µ —É—Å–ª—É–≥–∏ (–≤—Å–µ true)\n              optionCombinations[5],  // –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è 1\n              optionCombinations[10], // –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è 2\n              ...optionCombinations.filter(c => c.testCase).slice(0, 4) // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏\n            ].slice(0, Math.min(8, Math.ceil(maxTestsPerTK / (cargoCountTests.length * cargoVariants.length))));\n            \n            for (const options of selectedCombinations) {\n              if (testsForCurrentTK >= maxTestsPerTK) break;\n              \n              const testData = {\n                ...options,\n                cargos: generateTestCargos(cargoCount, cargoVariant),\n                testMetadata: {\n                  cargoVariant,\n                  cargoCount,\n                  testCase: options.testCase || 'standard'\n                }\n              };\n              \n              const activeOptions = Object.entries(options)\n                .filter(([k, v]) => typeof v === 'boolean' && v && !['testCase'].includes(k))\n                .map(([k]) => k)\n                .join(', ') || '–±–∞–∑–æ–≤—ã–µ';\n              \n              console.log(`üß™ ${tk}: ${cargoCount} –º–µ—Å—Ç (${cargoVariant}), –æ–ø—Ü–∏–∏: [${activeOptions}]${options.testCase ? ` - ${options.testCase}` : ''}`);\n              \n              setTestProgress({\n                currentTK: tk.toUpperCase(),\n                completedTests: totalTests,\n                totalPlannedTests,\n                stage: `${cargoCount} –º–µ—Å—Ç (${cargoVariant}) - ${activeOptions}`\n              });\n              \n              const result = await testSingleTK(tk, testData);\n              allResults.push({\n                ...result,\n                testMetadata: testData.testMetadata\n              });\n              \n              totalTests++;\n              testsForCurrentTK++;\n              \n              if (result.timing) {\n                totalResponseTime += result.timing;\n              }\n              \n              if (result.status === 'success') {\n                successful++;\n                console.log(`‚úÖ ${tk}: ${result.message} (${result.timing}ms)`);\n              } else if (result.status === 'skipped') {\n                skipped++;\n                console.log(`‚è≠Ô∏è ${tk}: ${result.message}`);\n              } else {\n                console.log(`‚ùå ${tk}: ${result.message} (${result.timing || 0}ms)`);\n                errors.push(`${tk} (${cargoCount} –º–µ—Å—Ç, ${cargoVariant}): ${result.message}`);\n              }\n              \n              // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n              if (totalTests % 10 === 0) {\n                const currentSuccessRate = totalTests > 0 ? (successful / totalTests) * 100 : 0;\n                console.log(`üìä –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${totalTests} —Ç–µ—Å—Ç–æ–≤, ${successful} —É—Å–ø–µ—à–Ω—ã—Ö (${currentSuccessRate.toFixed(1)}%)`);\n              }\n              \n              // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏\n              const pauseTime = result.status === 'error' ? 500 : 200;\n              await new Promise(resolve => setTimeout(resolve, pauseTime));\n            }\n          }\n        }\n        \n        console.log(`üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${tk.toUpperCase()}: ${testsForCurrentTK} —Ç–µ—Å—Ç–æ–≤`);\n      }\n      \n      const averageResponseTime = totalTests > 0 ? Math.round(totalResponseTime / (totalTests - skipped)) : 0;\n      const successRate = totalTests > 0 ? (successful / totalTests) * 100 : 0;\n      \n      const summary = {\n        totalTests,\n        successful,\n        failed: totalTests - successful - skipped,\n        skipped,\n        errors,\n        averageResponseTime,\n        successRate\n      };\n      \n      setFullTestResults({\n        summary,\n        details: allResults,\n        progressInfo: null\n      });\n      \n      // –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n      console.log('üß™ ===== –†–ï–ó–£–õ–¨–¢–ê–¢–´ –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n      console.log(`üìä –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${totalTests}`);\n      console.log(`‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö: ${successful}`);\n      console.log(`‚ùå –ù–µ—É–¥–∞—á–Ω—ã—Ö: ${totalTests - successful - skipped}`);\n      console.log(`‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö: ${skipped}`);\n      console.log(`üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${successRate.toFixed(1)}%`);\n      console.log(`‚è±Ô∏è –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${averageResponseTime}ms`);\n      \n      // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–ö\n      const tkStats = transportCompanies.map(tk => {\n        const tkResults = allResults.filter(r => r.tk === tk);\n        const tkSuccessful = tkResults.filter(r => r.status === 'success').length;\n        const tkTotal = tkResults.length;\n        return {\n          tk: tk.toUpperCase(),\n          tests: tkTotal,\n          successful: tkSuccessful,\n          successRate: tkTotal > 0 ? (tkSuccessful / tkTotal) * 100 : 0\n        };\n      });\n      \n      console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–ö:');\n      tkStats.forEach(stat => {\n        console.log(`   ${stat.tk}: ${stat.successful}/${stat.tests} (${stat.successRate.toFixed(1)}%)`);\n      });\n      \n      if (errors.length > 0) {\n        console.log('‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏:');\n        // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø–æ —Ç–∏–ø–∞–º\n        const errorGroups = errors.reduce((acc, error) => {\n          const key = error.split(':')[0];\n          acc[key] = (acc[key] || 0) + 1;\n          return acc;\n        }, {} as {[key: string]: number});\n        \n        Object.entries(errorGroups).forEach(([errorType, count]) => {\n          console.log(`   - ${errorType}: ${count} —Ä–∞–∑`);\n        });\n      }\n      \n    } catch (error: any) {\n      console.error('üß™ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', error);\n      errors.push(`–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`);\n      \n      setFullTestResults({\n        summary: { \n          totalTests, \n          successful, \n          failed: totalTests - successful - skipped, \n          skipped,\n          errors,\n          averageResponseTime: 0,\n          successRate: 0\n        },\n        details: allResults,\n        progressInfo: null\n      });\n    } finally {\n      setIsFullTesting(false);\n      setTestProgress(null);\n      console.log('üß™ ===== –ö–û–ù–ï–¶ –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n    }\n  };"
        },
        {
          "oldString": "        {/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}\n        {fullTestResults && (\n          <Card className=\"border-gray-700 bg-gray-900 mb-6\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TestTube className=\"h-5 w-5 text-purple-400\" />\n                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-blue-400\">{fullTestResults.summary.totalTests}</div>\n                  <div className=\"text-sm text-gray-400\">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-green-400\">{fullTestResults.summary.successful}</div>\n                  <div className=\"text-sm text-gray-400\">–£—Å–ø–µ—à–Ω—ã—Ö</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-red-400\">{fullTestResults.summary.failed}</div>\n                  <div className=\"text-sm text-gray-400\">–ù–µ—É–¥–∞—á–Ω—ã—Ö</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-yellow-400\">\n                    {((fullTestResults.summary.successful / fullTestResults.summary.totalTests) * 100).toFixed(1)}%\n                  </div>\n                  <div className=\"text-sm text-gray-400\">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>\n                </div>\n              </div>\n              \n              {fullTestResults.summary.errors.length > 0 && (\n                <Alert className=\"border-red-500 bg-red-900/20 mb-4\">\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    <div className=\"font-medium mb-2\">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:</div>\n                    <ul className=\"list-disc list-inside text-sm space-y-1\">\n                      {fullTestResults.summary.errors.slice(0, 10).map((error, index) => (\n                        <li key={index}>{error}</li>\n                      ))}\n                      {fullTestResults.summary.errors.length > 10 && (\n                        <li>... –∏ –µ—â–µ {fullTestResults.summary.errors.length - 10} –æ—à–∏–±–æ–∫</li>\n                      )}\n                    </ul>\n                  </AlertDescription>\n                </Alert>\n              )}\n              \n              <details className=\"mt-4\">\n                <summary className=\"cursor-pointer text-sm font-medium\">–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</summary>\n                <div className=\"mt-2 max-h-96 overflow-y-auto\">\n                  <pre className=\"text-xs p-2 bg-gray-800 rounded\">\n                    {JSON.stringify(fullTestResults.details, null, 2)}\n                  </pre>\n                </div>\n              </details>\n            </CardContent>\n          </Card>\n        )}",
          "newString": "        {/* –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}\n        {testProgress && (\n          <Card className=\"border-blue-500 bg-blue-900/20 mb-6\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <PlayCircle className=\"h-5 w-5 text-blue-400 animate-pulse\" />\n                –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between text-sm\">\n                  <span>–¢–µ–∫—É—â–∞—è –¢–ö: <strong>{testProgress.currentTK}</strong></span>\n                  <span>{testProgress.completedTests}/{testProgress.totalPlannedTests} —Ç–µ—Å—Ç–æ–≤</span>\n                </div>\n                <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                  <div \n                    className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n                    style={{\n                      width: `${(testProgress.completedTests / testProgress.totalPlannedTests) * 100}%`\n                    }}\n                  ></div>\n                </div>\n                <div className=\"text-xs text-gray-400\">\n                  –≠—Ç–∞–ø: {testProgress.stage}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}\n        {fullTestResults && (\n          <Card className=\"border-gray-700 bg-gray-900 mb-6\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <TestTube className=\"h-5 w-5 text-purple-400\" />\n                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-blue-400\">{fullTestResults.summary.totalTests}</div>\n                  <div className=\"text-sm text-gray-400\">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-green-400\">{fullTestResults.summary.successful}</div>\n                  <div className=\"text-sm text-gray-400\">–£—Å–ø–µ—à–Ω—ã—Ö</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-red-400\">{fullTestResults.summary.failed}</div>\n                  <div className=\"text-sm text-gray-400\">–ù–µ—É–¥–∞—á–Ω—ã—Ö</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-gray-400\">{fullTestResults.summary.skipped}</div>\n                  <div className=\"text-sm text-gray-400\">–ü—Ä–æ–ø—É—â–µ–Ω–æ</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-yellow-400\">\n                    {fullTestResults.summary.successRate.toFixed(1)}%\n                  </div>\n                  <div className=\"text-sm text-gray-400\">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>\n                </div>\n                <div className=\"text-center\">\n                  <div className=\"text-2xl font-bold text-cyan-400\">{fullTestResults.summary.averageResponseTime}ms</div>\n                  <div className=\"text-sm text-gray-400\">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>\n                </div>\n              </div>\n              \n              {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–ö */}\n              <div className=\"mb-4\">\n                <h4 className=\"font-medium mb-2\">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º –∫–æ–º–ø–∞–Ω–∏—è–º:</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2\">\n                  {['PEK', 'RAILCONTINENT', 'VOZOVOZ', 'NORDWHEEL', 'DELLIN'].map(tk => {\n                    const tkResults = fullTestResults.details.filter((r: any) => r.tk === tk.toLowerCase());\n                    const tkSuccessful = tkResults.filter((r: any) => r.status === 'success').length;\n                    const tkTotal = tkResults.length;\n                    const tkSuccessRate = tkTotal > 0 ? (tkSuccessful / tkTotal) * 100 : 0;\n                    \n                    return (\n                      <div key={tk} className=\"bg-gray-800 p-2 rounded text-sm\">\n                        <div className=\"font-medium\">{tk}</div>\n                        <div className=\"text-xs text-gray-400\">\n                          {tkSuccessful}/{tkTotal} ({tkSuccessRate.toFixed(1)}%)\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n              \n              {fullTestResults.summary.errors.length > 0 && (\n                <Alert className=\"border-red-500 bg-red-900/20 mb-4\">\n                  <AlertCircle className=\"h-4 w-4\" />\n                  <AlertDescription>\n                    <div className=\"font-medium mb-2\">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ ({fullTestResults.summary.errors.length}):</div>\n                    <ul className=\"list-disc list-inside text-sm space-y-1\">\n                      {fullTestResults.summary.errors.slice(0, 15).map((error, index) => (\n                        <li key={index}>{error}</li>\n                      ))}\n                      {fullTestResults.summary.errors.length > 15 && (\n                        <li>... –∏ –µ—â–µ {fullTestResults.summary.errors.length - 15} –æ—à–∏–±–æ–∫</li>\n                      )}\n                    </ul>\n                  </AlertDescription>\n                </Alert>\n              )}\n              \n              <details className=\"mt-4\">\n                <summary className=\"cursor-pointer text-sm font-medium\">–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ({fullTestResults.details.length} –∑–∞–ø–∏—Å–µ–π)</summary>\n                <div className=\"mt-2 max-h-96 overflow-y-auto\">\n                  <pre className=\"text-xs p-2 bg-gray-800 rounded\">\n                    {JSON.stringify(fullTestResults.details.map(detail => ({\n                      tk: detail.tk,\n                      status: detail.status,\n                      cargoCount: detail.cargoCount,\n                      testMetadata: detail.testMetadata,\n                      timing: detail.timing,\n                      price: detail.price,\n                      message: detail.message\n                    })), null, 2)}\n                  </pre>\n                </div>\n              </details>\n            </CardContent>\n          </Card>\n        )}"
        }
      ]
    },
    "output": "",
    "metadata": {
      "results": [
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/diagnostic/page.tsx\n===================================================================\n--- /home/user/project/app/diagnostic/page.tsx\n+++ /home/user/project/app/diagnostic/page.tsx\n@@ -30,13 +30,29 @@\n   summary: {\n     totalTests: number;\n     successful: number;\n     failed: number;\n+    skipped: number;\n     errors: string[];\n+    averageResponseTime: number;\n+    successRate: number;\n   };\n   details: any[];\n+  progressInfo: {\n+    currentTK: string;\n+    completedTests: number;\n+    totalPlannedTests: number;\n+    stage: string;\n+  } | null;\n } | null>(null);\n \n+const [testProgress, setTestProgress] = useState<{\n+  currentTK: string;\n+  completedTests: number;\n+  totalPlannedTests: number;\n+  stage: string;\n+} | null>(null);\n+\n const updateResult = (service: string, result: any) => {\n   setDiagnosticResults(prev => ({\n     ...prev,\n     [service]: result\n"
        },
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/diagnostic/page.tsx\n===================================================================\n--- /home/user/project/app/diagnostic/page.tsx\n+++ /home/user/project/app/diagnostic/page.tsx\n@@ -413,18 +413,48 @@\n   ]);\n };\n \n // üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n-const generateTestCargos = (count: number) => {\n+const generateTestCargos = (count: number, variant: 'small' | 'medium' | 'large' | 'mixed' = 'mixed') => {\n   const cargos = [];\n+  \n   for (let i = 0; i < count; i++) {\n-    cargos.push({\n-      length: 50 + Math.floor(Math.random() * 150), // 50-200 —Å–º\n-      width: 30 + Math.floor(Math.random() * 120),  // 30-150 —Å–º  \n-      height: 20 + Math.floor(Math.random() * 180), // 20-200 —Å–º\n-      weight: 5 + Math.floor(Math.random() * 95)    // 5-100 –∫–≥\n-    });\n+    let cargo;\n+    \n+    switch (variant) {\n+      case 'small':\n+        cargo = {\n+          length: 30 + Math.floor(Math.random() * 70),  // 30-100 —Å–º\n+          width: 20 + Math.floor(Math.random() * 50),   // 20-70 —Å–º\n+          height: 15 + Math.floor(Math.random() * 35),  // 15-50 —Å–º\n+          weight: 1 + Math.floor(Math.random() * 19)    // 1-20 –∫–≥\n+        };\n+        break;\n+      case 'medium':\n+        cargo = {\n+          length: 80 + Math.floor(Math.random() * 70),  // 80-150 —Å–º\n+          width: 60 + Math.floor(Math.random() * 60),   // 60-120 —Å–º\n+          height: 40 + Math.floor(Math.random() * 80),  // 40-120 —Å–º\n+          weight: 15 + Math.floor(Math.random() * 35)   // 15-50 –∫–≥\n+        };\n+        break;\n+      case 'large':\n+        cargo = {\n+          length: 150 + Math.floor(Math.random() * 100), // 150-250 —Å–º (–Ω–µ–≥–∞–±–∞—Ä–∏—Ç)\n+          width: 120 + Math.floor(Math.random() * 80),   // 120-200 —Å–º\n+          height: 100 + Math.floor(Math.random() * 100), // 100-200 —Å–º\n+          weight: 40 + Math.floor(Math.random() * 460)   // 40-500 –∫–≥\n+        };\n+        break;\n+      default: // mixed\n+        const types = ['small', 'medium', 'large'];\n+        const randomType = types[Math.floor(Math.random() * types.length)] as 'small' | 'medium' | 'large';\n+        return generateTestCargos(1, randomType)[0];\n+    }\n+    \n+    cargos.push(cargo);\n   }\n+  \n   return cargos;\n };\n \n // üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π\n"
        },
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/diagnostic/page.tsx\n===================================================================\n--- /home/user/project/app/diagnostic/page.tsx\n+++ /home/user/project/app/diagnostic/page.tsx\n@@ -456,9 +456,9 @@\n   \n   return cargos;\n };\n \n-// üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π\n+// üîß –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏\n const generateOptionsCombinations = () => {\n   const combinations = [];\n   const options = [\n     { name: 'fromAddressDelivery', values: [true, false] },\n@@ -483,9 +483,20 @@\n     \n     combinations.push(combination);\n   }\n   \n-  return combinations;\n+  // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—è–º–∏\n+  const specialCombinations = [\n+    { ...combinations[0], declaredValue: 10000, testCase: 'low_value' },\n+    { ...combinations[0], declaredValue: 100000, testCase: 'medium_value' },\n+    { ...combinations[0], declaredValue: 500000, testCase: 'high_value' },\n+    { ...combinations[0], declaredValue: 1000000, testCase: 'very_high_value' },\n+    // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤\n+    { ...combinations[0], fromCity: '–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥', toCity: '–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫', testCase: 'long_distance' },\n+    { ...combinations[0], fromCity: '–ú–æ—Å–∫–≤–∞', toCity: '–ú—ã—Ç–∏—â–∏', testCase: 'short_distance' }\n+  ];\n+  \n+  return [...combinations, ...specialCombinations];\n };\n \n // üîß –§—É–Ω–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–π –¢–ö —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏\n const testSingleTK = async (tkName: string, testData: any) => {\n"
        },
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/diagnostic/page.tsx\n===================================================================\n--- /home/user/project/app/diagnostic/page.tsx\n+++ /home/user/project/app/diagnostic/page.tsx\n@@ -694,106 +694,223 @@\n     };\n   }\n };\n \n-// üîß –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï\n+// üîß –†–ê–°–®–ò–†–ï–ù–ù–û–ï –ü–û–õ–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï\n const runFullTesting = async () => {\n   setIsFullTesting(true);\n   setFullTestResults(null);\n+  setTestProgress(null);\n   \n   const allResults: any[] = [];\n   const errors: string[] = [];\n   let totalTests = 0;\n   let successful = 0;\n+  let skipped = 0;\n+  let totalResponseTime = 0;\n   \n-  console.log('üß™ ===== –ù–ê–ß–ê–õ–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n+  console.log('üß™ ===== –ù–ê–ß–ê–õ–û –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n   \n   try {\n-    const transportCompanies = ['pek', 'railcontinent', 'vozovoz', 'nordwheel'];\n-    const cargoCountTests = [1, 2, 3, 5, 10, 20, 50]; // –¢–µ—Å—Ç–∏—Ä—É–µ–º –¥–æ 50 –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n+    const transportCompanies = ['pek', 'railcontinent', 'vozovoz', 'nordwheel', 'dellin'];\n+    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n+    const cargoCountTests = [1, 2, 3, 5, 7, 10, 15, 20, 25, 30, 40, 50];\n+    const cargoVariants = ['small', 'medium', 'large', 'mixed'] as const;\n     const optionCombinations = generateOptionsCombinations();\n     \n-    console.log(`üß™ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤: ${transportCompanies.length} –¢–ö √ó ${cargoCountTests.length} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–µ—Å—Ç √ó ${optionCombinations.length} –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π = ${transportCompanies.length * cargoCountTests.length * optionCombinations.length}`);\n+    // –ü–ª–∞–Ω–∏—Ä—É–µ–º –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n+    const totalPlannedTests = transportCompanies.length * cargoCountTests.length * cargoVariants.length * Math.min(optionCombinations.length, 8);\n     \n-    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏\n-    const maxTestsPerTK = 20; // 20 —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –¢–ö (–≤–º–µ—Å—Ç–æ –≤—Å–µ—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)\n+    console.log(`üß™ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ç–µ—Å—Ç–æ–≤: ${totalPlannedTests} (${transportCompanies.length} –¢–ö √ó ${cargoCountTests.length} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –º–µ—Å—Ç √ó ${cargoVariants.length} —Ç–∏–ø–æ–≤ –≥—Ä—É–∑–∞ √ó –¥–æ 8 –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π)`);\n     \n     for (const tk of transportCompanies) {\n-      console.log(`üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${tk.toUpperCase()}...`);\n-      let testsForTK = 0;\n+      console.log(`üß™ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${tk.toUpperCase()}...`);\n       \n+      setTestProgress({\n+        currentTK: tk.toUpperCase(),\n+        completedTests: totalTests,\n+        totalPlannedTests,\n+        stage: '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è'\n+      });\n+      \n+      let testsForCurrentTK = 0;\n+      const maxTestsPerTK = 150; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n+      \n       // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–ª–∏—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç\n       for (const cargoCount of cargoCountTests) {\n-        if (testsForTK >= maxTestsPerTK) break;\n+        if (testsForCurrentTK >= maxTestsPerTK) {\n+          console.log(`‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Ç–µ—Å—Ç–æ–≤ –¥–ª—è ${tk} (${maxTestsPerTK})`);\n+          break;\n+        }\n         \n-        // –í—ã–±–∏—Ä–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π –æ–ø—Ü–∏–π (–Ω–µ –≤—Å–µ, –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –≤—Ä–µ–º–µ–Ω–∏)\n-        const selectedCombinations = optionCombinations.slice(0, Math.min(3, Math.floor(maxTestsPerTK / cargoCountTests.length)));\n+        setTestProgress({\n+          currentTK: tk.toUpperCase(),\n+          completedTests: totalTests,\n+          totalPlannedTests,\n+          stage: `–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${cargoCount} –≥—Ä—É–∑–æ–≤—ã—Ö –º–µ—Å—Ç`\n+        });\n         \n-        for (const options of selectedCombinations) {\n-          if (testsForTK >= maxTestsPerTK) break;\n+        // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –≥—Ä—É–∑–æ–≤\n+        for (const cargoVariant of cargoVariants) {\n+          if (testsForCurrentTK >= maxTestsPerTK) break;\n           \n-          const testData = {\n-            ...options,\n-            cargos: generateTestCargos(cargoCount)\n-          };\n+          // –í—ã–±–∏—Ä–∞–µ–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –æ–ø—Ü–∏–π\n+          const selectedCombinations = [\n+            optionCombinations[0],  // –ë–∞–∑–æ–≤–∞—è (–≤—Å–µ false)\n+            optionCombinations[15], // –í—Å–µ —É—Å–ª—É–≥–∏ (–≤—Å–µ true)\n+            optionCombinations[5],  // –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è 1\n+            optionCombinations[10], // –ß–∞—Å—Ç–∏—á–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è 2\n+            ...optionCombinations.filter(c => c.testCase).slice(0, 4) // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏\n+          ].slice(0, Math.min(8, Math.ceil(maxTestsPerTK / (cargoCountTests.length * cargoVariants.length))));\n           \n-          console.log(`üß™ ${tk}: ${cargoCount} –º–µ—Å—Ç, –æ–ø—Ü–∏–∏: [${Object.entries(options).filter(([k, v]) => typeof v === 'boolean' && v).map(([k, v]) => k).join(', ') || '–±–∞–∑–æ–≤—ã–µ'}]`);\n-          \n-          const result = await testSingleTK(tk, testData);\n-          allResults.push(result);\n-          totalTests++;\n-          testsForTK++;\n-          \n-          if (result.status === 'success') {\n-            successful++;\n-            console.log(`‚úÖ ${tk}: ${result.message} (${result.timing}ms)`);\n-          } else if (result.status === 'skipped') {\n-            console.log(`‚è≠Ô∏è ${tk}: ${result.message}`);\n-          } else {\n-            console.log(`‚ùå ${tk}: ${result.message} (${result.timing}ms)`);\n-            errors.push(`${tk}: ${result.message}`);\n+          for (const options of selectedCombinations) {\n+            if (testsForCurrentTK >= maxTestsPerTK) break;\n+            \n+            const testData = {\n+              ...options,\n+              cargos: generateTestCargos(cargoCount, cargoVariant),\n+              testMetadata: {\n+                cargoVariant,\n+                cargoCount,\n+                testCase: options.testCase || 'standard'\n+              }\n+            };\n+            \n+            const activeOptions = Object.entries(options)\n+              .filter(([k, v]) => typeof v === 'boolean' && v && !['testCase'].includes(k))\n+              .map(([k]) => k)\n+              .join(', ') || '–±–∞–∑–æ–≤—ã–µ';\n+            \n+            console.log(`üß™ ${tk}: ${cargoCount} –º–µ—Å—Ç (${cargoVariant}), –æ–ø—Ü–∏–∏: [${activeOptions}]${options.testCase ? ` - ${options.testCase}` : ''}`);\n+            \n+            setTestProgress({\n+              currentTK: tk.toUpperCase(),\n+              completedTests: totalTests,\n+              totalPlannedTests,\n+              stage: `${cargoCount} –º–µ—Å—Ç (${cargoVariant}) - ${activeOptions}`\n+            });\n+            \n+            const result = await testSingleTK(tk, testData);\n+            allResults.push({\n+              ...result,\n+              testMetadata: testData.testMetadata\n+            });\n+            \n+            totalTests++;\n+            testsForCurrentTK++;\n+            \n+            if (result.timing) {\n+              totalResponseTime += result.timing;\n+            }\n+            \n+            if (result.status === 'success') {\n+              successful++;\n+              console.log(`‚úÖ ${tk}: ${result.message} (${result.timing}ms)`);\n+            } else if (result.status === 'skipped') {\n+              skipped++;\n+              console.log(`‚è≠Ô∏è ${tk}: ${result.message}`);\n+            } else {\n+              console.log(`‚ùå ${tk}: ${result.message} (${result.timing || 0}ms)`);\n+              errors.push(`${tk} (${cargoCount} –º–µ—Å—Ç, ${cargoVariant}): ${result.message}`);\n+            }\n+            \n+            // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞\n+            if (totalTests % 10 === 0) {\n+              const currentSuccessRate = totalTests > 0 ? (successful / totalTests) * 100 : 0;\n+              console.log(`üìä –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${totalTests} —Ç–µ—Å—Ç–æ–≤, ${successful} —É—Å–ø–µ—à–Ω—ã—Ö (${currentSuccessRate.toFixed(1)}%)`);\n+            }\n+            \n+            // –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏\n+            const pauseTime = result.status === 'error' ? 500 : 200;\n+            await new Promise(resolve => setTimeout(resolve, pauseTime));\n           }\n-          \n-          // –ù–µ–±–æ–ª—å—à–∞—è –ø–∞—É–∑–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏\n-          await new Promise(resolve => setTimeout(resolve, 100));\n         }\n       }\n+      \n+      console.log(`üèÅ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ${tk.toUpperCase()}: ${testsForCurrentTK} —Ç–µ—Å—Ç–æ–≤`);\n     }\n     \n+    const averageResponseTime = totalTests > 0 ? Math.round(totalResponseTime / (totalTests - skipped)) : 0;\n+    const successRate = totalTests > 0 ? (successful / totalTests) * 100 : 0;\n+    \n     const summary = {\n       totalTests,\n       successful,\n-      failed: totalTests - successful,\n-      errors\n+      failed: totalTests - successful - skipped,\n+      skipped,\n+      errors,\n+      averageResponseTime,\n+      successRate\n     };\n     \n     setFullTestResults({\n       summary,\n-      details: allResults\n+      details: allResults,\n+      progressInfo: null\n     });\n     \n-    console.log('üß™ ===== –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n+    // –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞\n+    console.log('üß™ ===== –†–ï–ó–£–õ–¨–¢–ê–¢–´ –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n     console.log(`üìä –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${totalTests}`);\n     console.log(`‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö: ${successful}`);\n-    console.log(`‚ùå –ù–µ—É–¥–∞—á–Ω—ã—Ö: ${totalTests - successful}`);\n-    console.log(`üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${((successful / totalTests) * 100).toFixed(1)}%`);\n+    console.log(`‚ùå –ù–µ—É–¥–∞—á–Ω—ã—Ö: ${totalTests - successful - skipped}`);\n+    console.log(`‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö: ${skipped}`);\n+    console.log(`üìà –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${successRate.toFixed(1)}%`);\n+    console.log(`‚è±Ô∏è –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ${averageResponseTime}ms`);\n     \n+    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–ö\n+    const tkStats = transportCompanies.map(tk => {\n+      const tkResults = allResults.filter(r => r.tk === tk);\n+      const tkSuccessful = tkResults.filter(r => r.status === 'success').length;\n+      const tkTotal = tkResults.length;\n+      return {\n+        tk: tk.toUpperCase(),\n+        tests: tkTotal,\n+        successful: tkSuccessful,\n+        successRate: tkTotal > 0 ? (tkSuccessful / tkTotal) * 100 : 0\n+      };\n+    });\n+    \n+    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–ö:');\n+    tkStats.forEach(stat => {\n+      console.log(`   ${stat.tk}: ${stat.successful}/${stat.tests} (${stat.successRate.toFixed(1)}%)`);\n+    });\n+    \n     if (errors.length > 0) {\n-      console.log('‚ùå –û—à–∏–±–∫–∏:');\n-      errors.forEach(error => console.log(`   - ${error}`));\n+      console.log('‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏:');\n+      // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ –ø–æ —Ç–∏–ø–∞–º\n+      const errorGroups = errors.reduce((acc, error) => {\n+        const key = error.split(':')[0];\n+        acc[key] = (acc[key] || 0) + 1;\n+        return acc;\n+      }, {} as {[key: string]: number});\n+      \n+      Object.entries(errorGroups).forEach(([errorType, count]) => {\n+        console.log(`   - ${errorType}: ${count} —Ä–∞–∑`);\n+      });\n     }\n     \n   } catch (error: any) {\n     console.error('üß™ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:', error);\n     errors.push(`–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: ${error.message}`);\n     \n     setFullTestResults({\n-      summary: { totalTests, successful, failed: totalTests - successful, errors },\n-      details: allResults\n+      summary: { \n+        totalTests, \n+        successful, \n+        failed: totalTests - successful - skipped, \n+        skipped,\n+        errors,\n+        averageResponseTime: 0,\n+        successRate: 0\n+      },\n+      details: allResults,\n+      progressInfo: null\n     });\n   } finally {\n     setIsFullTesting(false);\n-    console.log('üß™ ===== –ö–û–ù–ï–¶ –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n+    setTestProgress(null);\n+    console.log('üß™ ===== –ö–û–ù–ï–¶ –†–ê–°–®–ò–†–ï–ù–ù–û–ì–û –ü–û–õ–ù–û–ì–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====');\n   }\n };\n \n const getStatusIcon = (status: string) => {\n"
        },
        {
          "diagnostics": {},
          "diff": "Index: /home/user/project/app/diagnostic/page.tsx\n===================================================================\n--- /home/user/project/app/diagnostic/page.tsx\n+++ /home/user/project/app/diagnostic/page.tsx\n@@ -960,19 +960,50 @@\n     –ó–∞–∫—Ä—ã—Ç—å\n   </Button>\n </div>\n \n+{/* –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}\n+{testProgress && (\n+  <Card className=\"border-blue-500 bg-blue-900/20 mb-6\">\n+    <CardHeader>\n+      <CardTitle className=\"flex items-center gap-2\">\n+        <PlayCircle className=\"h-5 w-5 text-blue-400 animate-pulse\" />\n+        –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ\n+      </CardTitle>\n+    </CardHeader>\n+    <CardContent>\n+      <div className=\"space-y-3\">\n+        <div className=\"flex justify-between text-sm\">\n+          <span>–¢–µ–∫—É—â–∞—è –¢–ö: <strong>{testProgress.currentTK}</strong></span>\n+          <span>{testProgress.completedTests}/{testProgress.totalPlannedTests} —Ç–µ—Å—Ç–æ–≤</span>\n+        </div>\n+        <div className=\"w-full bg-gray-700 rounded-full h-2\">\n+          <div \n+            className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\n+            style={{\n+              width: `${(testProgress.completedTests / testProgress.totalPlannedTests) * 100}%`\n+            }}\n+          ></div>\n+        </div>\n+        <div className=\"text-xs text-gray-400\">\n+          –≠—Ç–∞–ø: {testProgress.stage}\n+        </div>\n+      </div>\n+    </CardContent>\n+  </Card>\n+)}\n+\n {/* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}\n {fullTestResults && (\n   <Card className=\"border-gray-700 bg-gray-900 mb-6\">\n     <CardHeader>\n       <CardTitle className=\"flex items-center gap-2\">\n         <TestTube className=\"h-5 w-5 text-purple-400\" />\n-        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n+        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è\n       </CardTitle>\n     </CardHeader>\n     <CardContent>\n-      <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\n+      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4\">\n         <div className=\"text-center\">\n           <div className=\"text-2xl font-bold text-blue-400\">{fullTestResults.summary.totalTests}</div>\n           <div className=\"text-sm text-gray-400\">–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤</div>\n         </div>\n@@ -984,37 +1015,75 @@\n           <div className=\"text-2xl font-bold text-red-400\">{fullTestResults.summary.failed}</div>\n           <div className=\"text-sm text-gray-400\">–ù–µ—É–¥–∞—á–Ω—ã—Ö</div>\n         </div>\n         <div className=\"text-center\">\n+          <div className=\"text-2xl font-bold text-gray-400\">{fullTestResults.summary.skipped}</div>\n+          <div className=\"text-sm text-gray-400\">–ü—Ä–æ–ø—É—â–µ–Ω–æ</div>\n+        </div>\n+        <div className=\"text-center\">\n           <div className=\"text-2xl font-bold text-yellow-400\">\n-            {((fullTestResults.summary.successful / fullTestResults.summary.totalTests) * 100).toFixed(1)}%\n+            {fullTestResults.summary.successRate.toFixed(1)}%\n           </div>\n           <div className=\"text-sm text-gray-400\">–£—Å–ø–µ—à–Ω–æ—Å—Ç—å</div>\n         </div>\n+        <div className=\"text-center\">\n+          <div className=\"text-2xl font-bold text-cyan-400\">{fullTestResults.summary.averageResponseTime}ms</div>\n+          <div className=\"text-sm text-gray-400\">–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è</div>\n+        </div>\n       </div>\n       \n+      {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–ö */}\n+      <div className=\"mb-4\">\n+        <h4 className=\"font-medium mb-2\">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–º –∫–æ–º–ø–∞–Ω–∏—è–º:</h4>\n+        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2\">\n+          {['PEK', 'RAILCONTINENT', 'VOZOVOZ', 'NORDWHEEL', 'DELLIN'].map(tk => {\n+            const tkResults = fullTestResults.details.filter((r: any) => r.tk === tk.toLowerCase());\n+            const tkSuccessful = tkResults.filter((r: any) => r.status === 'success').length;\n+            const tkTotal = tkResults.length;\n+            const tkSuccessRate = tkTotal > 0 ? (tkSuccessful / tkTotal) * 100 : 0;\n+            \n+            return (\n+              <div key={tk} className=\"bg-gray-800 p-2 rounded text-sm\">\n+                <div className=\"font-medium\">{tk}</div>\n+                <div className=\"text-xs text-gray-400\">\n+                  {tkSuccessful}/{tkTotal} ({tkSuccessRate.toFixed(1)}%)\n+                </div>\n+              </div>\n+            );\n+          })}\n+        </div>\n+      </div>\n+      \n       {fullTestResults.summary.errors.length > 0 && (\n         <Alert className=\"border-red-500 bg-red-900/20 mb-4\">\n           <AlertCircle className=\"h-4 w-4\" />\n           <AlertDescription>\n-            <div className=\"font-medium mb-2\">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏:</div>\n+            <div className=\"font-medium mb-2\">–ù–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ ({fullTestResults.summary.errors.length}):</div>\n             <ul className=\"list-disc list-inside text-sm space-y-1\">\n-              {fullTestResults.summary.errors.slice(0, 10).map((error, index) => (\n+              {fullTestResults.summary.errors.slice(0, 15).map((error, index) => (\n                 <li key={index}>{error}</li>\n               ))}\n-              {fullTestResults.summary.errors.length > 10 && (\n-                <li>... –∏ –µ—â–µ {fullTestResults.summary.errors.length - 10} –æ—à–∏–±–æ–∫</li>\n+              {fullTestResults.summary.errors.length > 15 && (\n+                <li>... –∏ –µ—â–µ {fullTestResults.summary.errors.length - 15} –æ—à–∏–±–æ–∫</li>\n               )}\n             </ul>\n           </AlertDescription>\n         </Alert>\n       )}\n       \n       <details className=\"mt-4\">\n-        <summary className=\"cursor-pointer text-sm font-medium\">–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</summary>\n+        <summary className=\"cursor-pointer text-sm font-medium\">–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ({fullTestResults.details.length} –∑–∞–ø–∏—Å–µ–π)</summary>\n         <div className=\"mt-2 max-h-96 overflow-y-auto\">\n           <pre className=\"text-xs p-2 bg-gray-800 rounded\">\n-            {JSON.stringify(fullTestResults.details, null, 2)}\n+            {JSON.stringify(fullTestResults.details.map(detail => ({\n+              tk: detail.tk,\n+              status: detail.status,\n+              cargoCount: detail.cargoCount,\n+              testMetadata: detail.testMetadata,\n+              timing: detail.timing,\n+              price: detail.price,\n+              message: detail.message\n+            })), null, 2)}\n           </pre>\n         </div>\n       </details>\n     </CardContent>\n"
        }
      ]
    },
    "title": "app/diagnostic/page.tsx",
    "time": {
      "start": 1759009688299,
      "end": 1759009688354
    }
  }
}