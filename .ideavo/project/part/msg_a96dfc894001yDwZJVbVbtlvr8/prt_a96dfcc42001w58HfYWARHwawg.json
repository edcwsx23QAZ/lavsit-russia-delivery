{
  "id": "prt_a96dfcc42001w58HfYWARHwawg",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_a96dfc894001yDwZJVbVbtlvr8",
  "type": "tool",
  "callID": "call_67309337",
  "tool": "bash",
  "state": {
    "status": "completed",
    "input": {
      "command": "node test-nordwheel-api.js",
      "description": "Testing NordWheel API with terminal type including city_fias"
    },
    "output": "Получение списка терминалов NordWheel...\nСтатус ответа: 400\nОшибка API: 400 Bad Request\nТело ошибки: {\"meta\":{\"id\":\"d582c3df-787c-4ba2-be5e-d705de2a9081\",\"code\":400,\"success\":false,\"response_time\":\"2025-11-18 12:25:00.973\",\"errors\":{\"city_id\":[\"\\u041f\\u043e\\u043b\\u0435 city id \\u043e\\u0431\\u044f\\u0437\\u0430\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e \\u0434\\u043b\\u044f \\u0437\\u0430\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u044f.\"]}},\"data\":[]}\n\n--- Тестирование расчета ---\n\nОтправка запроса к NordWheel API...\nURL: https://api.nordw.orog.ru/api/v1/calculate\nRequest data: {\n  \"dispatch\": {\n    \"location\": {\n      \"type\": \"terminal\",\n      \"terminal_id\": 91,\n      \"city_fias\": \"0c5b2444-70a0-4932-980c-b4dc0d3f02b5\"\n    }\n  },\n  \"destination\": {\n    \"location\": {\n      \"type\": \"terminal\",\n      \"terminal_id\": 92,\n      \"city_fias\": \"c2deb16a-0330-4f05-821f-1d09c93331e6\"\n    }\n  },\n  \"cargo\": {\n    \"total_weight\": 10,\n    \"total_volume\": 1,\n    \"total_quantity\": 1\n  },\n  \"insurance\": 1000,\n  \"insurance_refuse\": false,\n  \"services\": {\n    \"is_package\": false,\n    \"is_documents_return\": false,\n    \"is_fragile\": false\n  },\n  \"promocode\": null\n}\nСтатус ответа: 400\nОшибка API: 400 Bad Request\nТело ошибки: {\"meta\":{\"id\":\"6e95a839-8112-472d-971d-4750da62f328\",\"code\":1000,\"success\":false,\"response_time\":\"2025-11-18 12:25:01.773\",\"errors\":[\"Attempt to read property \\\"city_type_id\\\" on null\"]},\"data\":[]}\n",
    "title": "node test-nordwheel-api.js",
    "metadata": {
      "output": "Получение списка терминалов NordWheel...\nСтатус ответа: 400\nОшибка API: 400 Bad Request\nТело ошибки: {\"meta\":{\"id\":\"d582c3df-787c-4ba2-be5e-d705de2a9081\",\"code\":400,\"success\":false,\"response_time\":\"2025-11-18 12:25:00.973\",\"errors\":{\"city_id\":[\"\\u041f\\u043e\\u043b\\u0435 city id \\u043e\\u0431\\u044f\\u0437\\u0430\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e \\u0434\\u043b\\u044f \\u0437\\u0430\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u044f.\"]}},\"data\":[]}\n\n--- Тестирование расчета ---\n\nОтправка запроса к NordWheel API...\nURL: https://api.nordw.orog.ru/api/v1/calculate\nRequest data: {\n  \"dispatch\": {\n    \"location\": {\n      \"type\": \"terminal\",\n      \"terminal_id\": 91,\n      \"city_fias\": \"0c5b2444-70a0-4932-980c-b4dc0d3f02b5\"\n    }\n  },\n  \"destination\": {\n    \"location\": {\n      \"type\": \"terminal\",\n      \"terminal_id\": 92,\n      \"city_fias\": \"c2deb16a-0330-4f05-821f-1d09c93331e6\"\n    }\n  },\n  \"cargo\": {\n    \"total_weight\": 10,\n    \"total_volume\": 1,\n    \"total_quantity\": 1\n  },\n  \"insurance\": 1000,\n  \"insurance_refuse\": false,\n  \"services\": {\n    \"is_package\": false,\n    \"is_documents_return\": false,\n    \"is_fragile\": false\n  },\n  \"promocode\": null\n}\nСтатус ответа: 400\nОшибка API: 400 Bad Request\nТело ошибки: {\"meta\":{\"id\":\"6e95a839-8112-472d-971d-4750da62f328\",\"code\":1000,\"success\":false,\"response_time\":\"2025-11-18 12:25:01.773\",\"errors\":[\"Attempt to read property \\\"city_type_id\\\" on null\"]},\"data\":[]}\n",
      "exit": 0,
      "description": "Testing NordWheel API with terminal type including city_fias"
    },
    "time": {
      "start": 1763467840581,
      "end": 1763467842267
    }
  }
}