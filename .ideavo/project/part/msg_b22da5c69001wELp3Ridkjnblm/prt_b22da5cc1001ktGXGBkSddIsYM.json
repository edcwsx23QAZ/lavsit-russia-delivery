{
  "id": "prt_b22da5cc1001ktGXGBkSddIsYM",
  "sessionID": "ses_4dd34592affehJqMoLA2ZOxuZo",
  "messageID": "msg_b22da5c69001wELp3Ridkjnblm",
  "type": "text",
  "text": "В запросе Nordwheel при проставленном чекбоксе \"Со склада Лавсит\" отправляется следующий запрос:\n\n{\n  \"dispatch\": {\n    \"location\": {\n      \"type\": \"address\",\n      \"address\": \"деревня Осеево, 202, городской округ Лосино-Петровский, Московская область\"\n    }\n  },\n\nЗапрос не полный. Корректный запрос должен включать в себя код Fias. Пример корректного запроса:\n\n  \"dispatch\": {\n    \"location\": {\n      \"type\": \"terminal\",\n      \"city_fias\": \"0c5b2444-70a0-4932-980c-b4dc0d3f02b5\"\n    }\n  },\n  \"destination\": {\n    \"location\": {\n      \"type\": \"address\",\n      \"city_fias\": \"93b3df57-4c89-44df-ac42-96f05e9cd3b9\"\n    }\n  },\n  \"cargo\": {\n    \"total_weight\": 12,\n    \"total_volume\": 1.3,\n    \"total_quantity\": 1\n  },\n  \"insurance\": 1000,\n  \"insurance_refuse\": false,\n  \"services\": {\n    \"is_package\": false,\n    \"is_documents_return\": false,\n    \"is_fragile\": false\n  },\n  \"promocode\": null\n}\n  \"destination\": {\n    \"location\": {\n      \"type\": \"address\",\n      \"address\": \"г Санкт-Петербург, Невский пр-кт, д 132\"\n    }\n  },\n  \"cargo\": {\n    \"total_weight\": 100,\n    \"total_volume\": 2,\n    \"total_quantity\": 1\n  },\n  \"insurance\": 200000,\n  \"insurance_refuse\": false,\n  \"services\": {\n    \"is_package\": true,\n    \"is_documents_return\": false,\n    \"is_fragile\": false\n  },\n  \"promocode\": null\n}\n\ncity_fias нужно брать с помощью API Dadata\n\nВСЕ ДЕЙСТВИЯ С API DADATA которые будут описаны ниже должны в такой логике применятся ТОЛЬКО для API Nordwheel\n\nЕсли Dadata применяется где-то еще в других ТК логику НЕ МЕНЯЕМ\n\nПример запроса:\nvar url = \"https://cleaner.dadata.ru/api/v1/clean/address\";\nvar token = \"${API_KEY}\";\nvar secret = \"${SECRET_KEY}\";\nvar query = \"мск сухонска 11/-89\";\n\nvar options = {\n    method: \"POST\",\n    mode: \"cors\",\n    headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Token \" + token,\n        \"X-Secret\": secret\n    },\n    body: JSON.stringify([query])\n}\n\nfetch(url, options)\n.then(response => response.text())\n.then(result => console.log(result))\n.catch(error => console.log(\"error\", error));\n\nПример ответа:\nУкажите при вызове:\n\nContent-Type: application/json.\nAccept: application/json.\n${API_KEY} — API-ключ.\n${SECRET_KEY} — секретный ключ.\nТело запроса передавайте в кодировке UTF-8.\n\nЧто в ответе\nСтандартизованный объект:\n\nПример ответа\nНазвание\tТип\tОписание\nsource\tstring(250)\tИсходный адрес одной строкой\nresult\tstring(500)\tСтандартизованный адрес одной строкой\npostal_code\tstring(10)\tИндекс\ncountry\tstring(150)\tСтрана\ncountry_iso_code\tstring(10)\tISO-код страны\nfederal_district\tstring(20)\tФедеральный округ\nregion_fias_id\tstring(50)\tФИАС-код региона\nregion_kladr_id\tstring(20)\tКЛАДР-код региона\nregion_iso_code\tstring(10)\tISO-код региона\nregion_with_type\tstring(150)\tРегион с типом\nregion_type\tstring(10)\tТип региона (сокращенный)\nregion_type_full\tstring(50)\tТип региона\nregion\tstring(150)\tРегион\narea_fias_id\tstring(50)\tФИАС-код района\narea_kladr_id\tstring(20)\tКЛАДР-код района\narea_with_type\tstring(150)\tРайон в регионе с типом\narea_type\tstring(10)\tТип района в регионе (сокращенный)\narea_type_full\tstring(50)\tТип района в регионе\narea\tstring(150)\tРайон в регионе\ncity_fias_id\tstring(50)\tФИАС-код города\ncity_kladr_id\tstring(20)\tКЛАДР-код города\ncity_with_type\tstring(150)\tГород с типом\ncity_type\tstring(10)\tТип города (сокращенный)\ncity_type_full\tstring(50)\tТип города\ncity\tstring(150)\tГород\ncity_area\tstring(150)\tАдминистративный округ (только для Москвы)\ncity_district_fias_id\tstring(50)\tФИАС-код района города (заполняется, только если район есть в ФИАС)\ncity_district_kladr_id\tstring(20)\tКЛАДР-код района города (не заполняется)\ncity_district_with_type\tstring(150)\tРайон города с типом\ncity_district_type\tstring(10)\tТип района города (сокращенный)\ncity_district_type_full\tstring(50)\tТип района города\ncity_district\tstring(150)\tРайон города\nsettlement_fias_id\tstring(50)\tФИАС-код населенного пункта\nsettlement_kladr_id\tstring(20)\tКЛАДР-код населенного пункта\nsettlement_with_type\tstring(150)\tНаселенный пункт с типом\nsettlement_type\tstring(10)\tТип населенного пункта (сокращенный)\nsettlement_type_full\tstring(50)\tТип населенного пункта\nsettlement\tstring(150)\tНаселенный пункт\nstreet_fias_id\tstring(50)\tФИАС-код улицы\nstreet_kladr_id\tstring(20)\tКЛАДР-код улицы\nstreet_with_type\tstring(150)\tУлица с типом\nstreet_type\tstring(10)\tТип улицы (сокращенный)\nstreet_type_full\tstring(50)\tТип улицы\nstreet\tstring(150)\tУлица\nstead_fias_id\tstring(50)\tФИАС-код земельного участка\nstead_kladr_id\tstring(20)\tКЛАДР-код земельного участка\nstead_cadnum\tstring(50)\tКадастровый номер земельного участка\nstead_type\tstring(10)\t= «уч»\nstead_type_full\tstring(50)\t= «участок»\nstead\tstring(50)\tНомер земельного участка\nhouse_fias_id\tstring(50)\tФИАС-код дома\nhouse_kladr_id\tstring(20)\tКЛАДР-код дома\nhouse_cadnum\tstring(50)\tКадастровый номер дома\nhouse_type\tstring(10)\tТип дома (сокращенный)\nhouse_type_full\tstring(50)\tТип дома\nhouse\tstring(50)\tДом\nhouse_flat_count\tstring(10)\tКоличество квартир в доме\nblock_type\tstring(10)\tТип корпуса/строения (сокращенный)\nblock_type_full\tstring(50)\tТип корпуса/строения\nblock\tstring(50)\tКорпус/строение\nentrance\tstring(10)\tПодъезд\nfloor\tstring(10)\tЭтаж\nflat_fias_id\tstring(50)\tФИАС-код квартиры\nflat_cadnum\tstring(50)\tКадастровый номер квартиры\nflat_type\tstring(10)\tТип квартиры (сокращенный)\nflat_type_full\tstring(50)\tТип квартиры\nflat\tstring(50)\tКвартира\nflat_area\tstring(50)\tПлощадь квартиры\nsquare_meter_price\tstring(50)\tРыночная стоимость м²\nflat_price\tstring(50)\tРыночная стоимость квартиры\npostal_box\tstring(50)\tАбонентский ящик\nroom_type\tstring(10)\tТип комнаты (сокращенный)\nroom_type_full\tstring(50)\tТип комнаты\nroom\tstring(50)\tКомната\nfias_id\tstring(50)\tФИАС-код адреса (идентификатор ФИАС)\n  ROOM.ROOMGUID — если квартира найдена в ФИАС\n  HOUSE.HOUSEGUID — если дом найден в ФИАС\n  ADDROBJ.AOGUID — в противном случае\nfias_code\t\tНе заполняется, используйте fias_id\nfias_level\tstring(10)\tУровень детализации, до которого адрес найден в ФИАС\n  0 — страна\n  1 — регион\n  3 — район\n  4 — город\n  5 — район города\n  6 — населенный пункт\n  7 — улица\n  8 — дом\n  9 — квартира\n  65 — планировочная структура\n  90 — доп. территория\n  91 — улица в доп. территории\n  -1 — иностранный или пустой\nfias_actuality_state\tstring(10)\tПризнак актуальности адреса в ФИАС\n  0 — актуальный\n  1-50 — переименован\n  51 — переподчинен\n  99 — удален\nkladr_id\tstring(20)\tКЛАДР-код адреса\ngeoname_id\tstring(20)\tИдентификатор объекта в международной базе GeoNames\ncapital_marker\tstring(10)\tПризнак центра района или региона\n  1 — центр района\n      (Московская обл, Одинцовский р-н, г Одинцово)\n  2 — центр региона\n      (Новосибирская обл, г Новосибирск)\n  3 — центр района и региона\n      (Томская обл, г Томск)\n  4 — центральный район региона\n      (Тюменская обл, Тюменский р-н)\n  0 — ничего из перечисленного\n      (Московская обл, г Балашиха)\nokato\tstring(20)\tКод ОКАТО\noktmo\tstring(20)\tКод ОКТМО\ntax_office\tstring(10)\tКод ИФНС для физических лиц\ntax_office_legal\tstring(10)\tКод ИФНС для организаций\ntimezone\tstring(50)\tЧасовой пояс города для России, часовой пояс страны — для иностранных адресов. Если у страны несколько поясов, вернёт минимальный и максимальный через слеш: UTC+5/UTC+6\ngeo_lat\tstring(20)\tКоординаты: широта\ngeo_lon\tstring(20)\tКоординаты: долгота\nbeltway_hit\tstring(10)\tВнутри кольцевой?\n  IN_MKAD — внутри МКАД (Москва)\n  OUT_MKAD — за МКАД (Москва и область)\n  IN_KAD — внутри КАД (Санкт-Петербург)\n  OUT_KAD — за КАД (Санкт-Петербург и область)\n  пусто — в остальных случаях\nbeltway_distance\tstring(10)\tРасстояние от кольцевой в км.\nЗаполнено, только если beltway_hit : OUT_MKAD или OUT_KAD, иначе пустое\nqc_geo\tnumber\tКод точности координат\nqc_complete\tnumber\tКод пригодности к рассылке\nqc_house\tnumber\tПризнак наличия дома в ФИАС\nqc\tnumber\tКод проверки адреса\nunparsed_parts\tstring(250)\tНераспознанная часть адреса.\nДля адреса «Москва, Митинская улица, 40, вход с торца» вернет «ВХОД, С, ТОРЦА»\nmetro\tarray\tСписок ближайших станций метро (до трёх штук)\ndivisions\tobject\tКомпоненты адреса в административном делении\n\n\nНАС ИНТЕРЕСУЕТ ПУНКТ:\ncity_fias_id\tstring(50)\tФИАС-код города"
}