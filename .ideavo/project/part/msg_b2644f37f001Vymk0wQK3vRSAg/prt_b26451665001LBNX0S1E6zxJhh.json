{
  "id": "prt_b26451665001LBNX0S1E6zxJhh",
  "sessionID": "ses_4dcf54091ffe1XHg1W7jdm1ovr",
  "messageID": "msg_b2644f37f001Vymk0wQK3vRSAg",
  "type": "tool",
  "callID": "toolu_015THVUwRdn6RmbYMfNHHNct",
  "tool": "write",
  "state": {
    "status": "completed",
    "input": {
      "content": "/**\n * –¢–µ—Å—Ç: –£–ø–∞–∫–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ cargo.wrapping vs wizard[].wrapping\n */\n\nconst VOZOVOZ_TOKEN = 'sBDUaEmzVBO6syQWHvHxmjxJQiON2BZplQaqrU3N';\n\nasync function testWrappingLevels() {\n  console.log('üß™ –¢–ï–°–¢: –£–ø–∞–∫–æ–≤–∫–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä—ã\\n');\n  console.log('='.repeat(100));\n\n  const apiUrl = `https://vozovoz.ru/api/?token=${VOZOVOZ_TOKEN}`;\n\n  // –¢–µ—Å—Ç 1: –£–ø–∞–∫–æ–≤–∫–∞ –≤–Ω—É—Ç—Ä–∏ wizard[].wrapping (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)\n  console.log('\\nüì¶ –¢–ï–°–¢ 1: wrapping –≤–Ω—É—Ç—Ä–∏ wizard[0].wrapping');\n  console.log('-'.repeat(100));\n\n  const test1 = {\n    object: \"price\",\n    action: \"get\",\n    params: {\n      cargo: {\n        wizard: [\n          {\n            length: 1.0,\n            width: 0.5,\n            height: 0.3,\n            quantity: 1,\n            weight: 20,\n            wrapping: {\n              hardPackageVolumeUOD_WP: 0.15\n            }\n          }\n        ],\n        insuranceNdv: true\n      },\n      gateway: {\n        dispatch: { point: { location: \"–ú–æ—Å–∫–≤–∞\", terminal: \"default\" } },\n        destination: { point: { location: \"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\", terminal: \"default\" } }\n      }\n    }\n  };\n\n  const result1 = await makeRequest(apiUrl, test1, 'wizard[].wrapping');\n\n  // –¢–µ—Å—Ç 2: –£–ø–∞–∫–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ cargo.wrapping (–∫–∞–∫ –≤ order.set)\n  console.log('\\n\\nüì¶ –¢–ï–°–¢ 2: wrapping –Ω–∞ —É—Ä–æ–≤–Ω–µ cargo.wrapping');\n  console.log('-'.repeat(100));\n\n  const test2 = {\n    object: \"price\",\n    action: \"get\",\n    params: {\n      cargo: {\n        wizard: [\n          {\n            length: 1.0,\n            width: 0.5,\n            height: 0.3,\n            quantity: 1,\n            weight: 20\n          }\n        ],\n        wrapping: {  // ‚Üê –ù–∞ —É—Ä–æ–≤–Ω–µ cargo!\n          hardPackageVolumeUOD_WP: 0.15\n        },\n        insuranceNdv: true\n      },\n      gateway: {\n        dispatch: { point: { location: \"–ú–æ—Å–∫–≤–∞\", terminal: \"default\" } },\n        destination: { point: { location: \"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\", terminal: \"default\" } }\n      }\n    }\n  };\n\n  const result2 = await makeRequest(apiUrl, test2, 'cargo.wrapping');\n\n  // –¢–µ—Å—Ç 3: –£–ø–∞–∫–æ–≤–∫–∞ –ë–ï–ó wizard (—Å dimension)\n  console.log('\\n\\nüì¶ –¢–ï–°–¢ 3: wrapping —Å dimension (–ë–ï–ó wizard)');\n  console.log('-'.repeat(100));\n\n  const test3 = {\n    object: \"price\",\n    action: \"get\",\n    params: {\n      cargo: {\n        dimension: {\n          max: {\n            length: 1.0,\n            width: 0.5,\n            height: 0.3,\n            weight: 20\n          },\n          quantity: 1,\n          volume: 0.15,\n          weight: 20\n        },\n        wrapping: {\n          hardPackageVolumeUOD_WP: 0.15\n        },\n        insuranceNdv: true\n      },\n      gateway: {\n        dispatch: { point: { location: \"–ú–æ—Å–∫–≤–∞\", terminal: \"default\" } },\n        destination: { point: { location: \"–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥\", terminal: \"default\" } }\n      }\n    }\n  };\n\n  const result3 = await makeRequest(apiUrl, test3, 'dimension + cargo.wrapping');\n\n  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ\n  console.log('\\n\\n' + '='.repeat(100));\n  console.log('üìä –°–†–ê–í–ù–ï–ù–ò–ï –†–ï–ó–£–õ–¨–¢–ê–¢–û–í');\n  console.log('='.repeat(100));\n\n  console.log('\\n1. wrapping –≤–Ω—É—Ç—Ä–∏ wizard[].wrapping:');\n  console.log(`   –¶–µ–Ω–∞: ${result1?.price || '–û–®–ò–ë–ö–ê'} —Ä—É–±.`);\n  showPackagingServices(result1);\n\n  console.log('\\n2. wrapping –Ω–∞ —É—Ä–æ–≤–Ω–µ cargo.wrapping:');\n  console.log(`   –¶–µ–Ω–∞: ${result2?.price || '–û–®–ò–ë–ö–ê'} —Ä—É–±.`);\n  console.log(`   –†–∞–∑–Ω–∏—Ü–∞: ${calcDiff(result2, result1)} —Ä—É–±.`);\n  showPackagingServices(result2);\n\n  console.log('\\n3. wrapping —Å dimension (–ë–ï–ó wizard):');\n  console.log(`   –¶–µ–Ω–∞: ${result3?.price || '–û–®–ò–ë–ö–ê'} —Ä—É–±.`);\n  console.log(`   –†–∞–∑–Ω–∏—Ü–∞: ${calcDiff(result3, result1)} —Ä—É–±.`);\n  showPackagingServices(result3);\n\n  console.log('\\n' + '='.repeat(100));\n  console.log('üí° –í–´–í–û–î:');\n  console.log('='.repeat(100));\n\n  if (result1 && result2 && result3) {\n    if (result2.price !== result1.price) {\n      console.log(`‚úÖ cargo.wrapping –†–ê–ë–û–¢–ê–ï–¢! –†–∞–∑–Ω–∏—Ü–∞: ${result2.price - result1.price} —Ä—É–±.`);\n    } else if (result3.price !== result1.price) {\n      console.log(`‚úÖ dimension + cargo.wrapping –†–ê–ë–û–¢–ê–ï–¢! –†–∞–∑–Ω–∏—Ü–∞: ${result3.price - result1.price} —Ä—É–±.`);\n    } else {\n      console.log('‚ùå –£–ø–∞–∫–æ–≤–∫–∞ –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞ —Ü–µ–Ω—É –Ω–∏ –≤ –æ–¥–Ω–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ!');\n      console.log('   –í–µ—Ä–æ—è—Ç–Ω–æ, —É–ø–∞–∫–æ–≤–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ order.set, –∞ –Ω–µ –ø—Ä–∏ price.get');\n    }\n  }\n}\n\nfunction showPackagingServices(result) {\n  if (result?.services) {\n    const packagingServices = result.services.filter(s => \n      s.name.toLowerCase().includes('—É–ø–∞–∫–æ–≤') || \n      s.name.toLowerCase().includes('–∂—ë—Å—Ç') ||\n      s.name.toLowerCase().includes('–∂–µ—Å—Ç') ||\n      s.name.toLowerCase().includes('–ø–ª—ë–Ω') ||\n      s.name.toLowerCase().includes('–ø–ª–µ–Ω')\n    );\n    if (packagingServices.length > 0) {\n      console.log(`   –£—Å–ª—É–≥ —É–ø–∞–∫–æ–≤–∫–∏: ${packagingServices.length}`);\n      packagingServices.forEach(s => console.log(`      - ${s.name}: ${s.price} —Ä—É–±.`));\n    } else {\n      console.log(`   –£—Å–ª—É–≥ —É–ø–∞–∫–æ–≤–∫–∏: 0 (–Ω–µ –Ω–∞–π–¥–µ–Ω–æ)`);\n    }\n  }\n}\n\nfunction calcDiff(result1, result2) {\n  return result1?.price && result2?.price ? (result1.price - result2.price) : 'N/A';\n}\n\nasync function makeRequest(apiUrl, requestData, label) {\n  try {\n    console.log(`\\nüì§ –ó–∞–ø—Ä–æ—Å (${label}):`);\n    console.log(JSON.stringify(requestData, null, 2));\n\n    const response = await fetch(apiUrl, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(requestData)\n    });\n\n    if (!response.ok) {\n      console.log(`\\n‚ùå HTTP –æ—à–∏–±–∫–∞: ${response.status}`);\n      return null;\n    }\n\n    const data = await response.json();\n\n    if (data.error) {\n      console.log('\\n‚ùå API –æ—à–∏–±–∫–∞:', data.error);\n      return null;\n    }\n\n    if (data.response) {\n      console.log('\\n‚úÖ –û—Ç–≤–µ—Ç:');\n      console.log(`   –¶–µ–Ω–∞: ${data.response.price} —Ä—É–±. (–±–∞–∑–æ–≤–∞—è: ${data.response.basePrice} —Ä—É–±.)`);\n      console.log(`   –£—Å–ª—É–≥–∏: ${data.response.service.length}`);\n      data.response.service.forEach(s => console.log(`      - ${s.name}: ${s.price} —Ä—É–±.`));\n\n      return {\n        price: data.response.price,\n        basePrice: data.response.basePrice,\n        services: data.response.service\n      };\n    }\n\n    return null;\n  } catch (error) {\n    console.log('\\n‚ùå –û—à–∏–±–∫–∞:', error.message);\n    return null;\n  }\n}\n\ntestWrappingLevels();\n",
      "filePath": "/home/user/project/test-vozovoz-wrapping-levels.js"
    },
    "output": "",
    "title": "test-vozovoz-wrapping-levels.js",
    "metadata": {
      "diagnostics": {},
      "filepath": "/home/user/project/test-vozovoz-wrapping-levels.js",
      "exists": false
    },
    "time": {
      "start": 1765873654742,
      "end": 1765873654757
    }
  }
}