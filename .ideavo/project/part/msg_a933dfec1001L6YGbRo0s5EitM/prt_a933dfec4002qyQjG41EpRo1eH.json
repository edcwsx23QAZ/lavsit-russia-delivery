{
  "id": "prt_a933dfec4002qyQjG41EpRo1eH",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "messageID": "msg_a933dfec1001L6YGbRo0s5EitM",
  "type": "text",
  "text": "У ТК КИТ вылетает ошибка:\nНе удалось определить коды городов\n\nПроверь корректность запрос и расшифровки ответа и исправь. Документация по API КИТ ниже:\n\nДля повышения удобства технического взаимодействия клиентов и партнёров транспортной компании КИТ был реализован простой и доступный программный интерфейс — KIT.API , работающий поверх протокола HTTP.\n\nДанное руководство описывает интерфейс доступа к KIT API, и предназначено для программистов, автоматизирующих взаимодействие с нашей транспортной компанией KIT.\n\nПредполагается, что читатель знаком с основами HTTP и имеет навыки программирования. Технические вопросы не отражённые в данном документе можно задать на странице по этой ссылке.\n\nВ KIT.API пользователь генерирует параметр token в личном кабинете самостоятельно. Для этого в разделе \"Разработчикам\" появился пункт \"Получение ключа API\". Запрашивать его отдельно и ожидать модерации больше не требуется.\nПрисутствует возможность удалять существующий token.\nВнимание: Ни одна функция с удаленным токеном работать не будет.\nЛимитирование количества запросов происходит на каждый отдельный token, а не на аккаунт token`a.\nЛимитирование разделяется по методам KIT.API . Например: если Ваше приложение истратило лимит используя метод /1.0/order/create то блокировка метода /1.0/geography/email/get-list по лимиту не происходит. У каждого метода свой лимит для token.\nВ случае превышения лимита будет возвращен статус страницы 429, а так же ответ формата {\"name\":\"Too Many Requests\",\"message\":\"Rate limit exceeded.\",\"code\":0,\"status\":429}.\nKIT.API выведено на отдельнный поддомен https ://capi.tk-kit.com\nКаждый метод имеет вид /1.0/geography/email/get-list\nТаким образом URL для данного метода будет выглядеть следующим образом:\nhttps://capi.tk-kit.com/1.0/geography/email/get-list\n\nОписание разделов\nЗаказы:\nДанный раздел KIT.API предназначен для работы с заказами.\n\nДоступные методы:\n\nРасчет стоимости\nОформление заказа\nПолучение списка валют\nИнформация по заказу\nПолучение списка заказов\nОформление заказа\nCтатус заказа\n\nТранспортные маршруты:\nДанный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nДоступные методы:\n\nПолучения списока городов\nПолучение списка стран\nCписок регионов\n\nПрофили:\nДанный раздел KIT.API описывает работу с профилями.\nКаждый токен привязан к личному кабинету в котором был создан. У личного кабинета может быть один и более профилей. Профиль это участник заказа (может быть как плательщиком, как отправителем, так и получателем). Создать заказ можно (при необходимости) указав конкретный профиль. Получить список профилей привязанного к используемому токену можно в данном разделе.\n\nДоступные методы:\n\nПолучение списка профилей\n\nГеография:\nДанный раздел KIT.API описывает все региональные представительства ТК KIT.\n\nДоступные методы:\n\nПолучение списка адресов\nПолучение списка городов\nПолучение списка электронных адресов\nПолучение списка телефонов\nПолучение списка видов графиков работы\n\n\nАвторизация\nВ данном KIT.API доступно 2 метода авторизации:\nhttpBearerAuth - реализация аутентификации по токену (HTTP Bearer token). Для авторизации с помощью токена нужно передать его в http заголовке Authorization: Bearer FFFF70it7tzNsHddEiq0BZ0i-OU8S3xV\nqueryParamAuth - Работает по тому-же принципу, что и HttpBearerAuth, т.е. идентифицирует пользователя по токену, только в данном случае токен передается в строке запроса, как GET параметр token.\n\nОбщий принцип взаимодействия\nПараметр token является обязательным для всех методов KIT.API . При отсутствии параметра token или в случае если он содержит невалидный token доступа будет возращен статус страницы 401, а так же ответ формата {\"name\":\"Unauthorized\", \"message\":\"Your request was made with invalid credentials.\", \"code\":0, \"status\":401}.\n\nТранспортным протоколом для вызова функций KIT.API является HTTPS. В KIT.API поддерживаются как JSON, так и POST запросы.\nВнимание: В данной версии API не поддерживаются GET параметры (кроме параметра token).\n\nФормат запроса\nURL для обращения к функции (например: 1.0/tdd/city/get-list) выглядит следующим образом:\n\nhttps://capi.tk-kit.com/1.0/tdd/city/get-list\n\n\nПередача входных параметров\nВсе входящие параметры, если они есть, можно передавать в виде JSON или стандартных HTTP-параметров POST.\n\nПередача входящие параметров к функции в формате JSON выглядит следующим образом:\n\n{\n    \"code\": \"660002900000\",\n    \"region_code\": \"66\",\n    \"country_code\": \"RU\"\n}\n\nФормат ответа\nДля ответа доступно два формата данных xml и json соответственно заголовки для получения нужного формата следующие:\nAccept: application/json (по умолчанию если не указан)\nAccept: application/xml\n\nПример ответа в формате JSON:\n[\n    {\n        \"code\":\"660002900000\",\n        \"name\":\"Ирбит\",\n        \"type\":\"гор.\",\n        \"region_code\":\"66\",\n        \"country_code\":\"RU\",\n        \"required_pickup\":1,\n        \"required_delivery\":1\n    }\n]\n\n\nПример ответа в формате XML:\n<xml version = \"1.0\" encoding = \"UTF-8\">\n    <response>\n        <item>\n            <name>Ирбит</name>\n            <type>гор.</type>\n            <code>660002900000</code>\n            <region_code>66</region_code>\n            <country_code>RU</country_code>\n            <required_pickup>1</required_pickup>\n            <required_delivery>1</required_delivery>\n        </item>\n    </response>\n</xml>\n\nСписок функций\nЗдесь приведен перечень доступных функций с кратким описанием. Полное, детальное описание каждой функции с примерами использования можно найти в левом меню.\n\nФункция\tКраткое описание\n/1.0/geography/address/get-list\tПолучение списка адресов\n/1.0/geography/city/get-list\tПолучение списка городов\n/1.0/geography/email/get-list\tПолучение списка электронных адресов\n/1.0/geography/phone/get-list\tПолучение списка телефонов\n/1.0/geography/schedule-group/get-list\tПолучение списка видов графиков работы\n/1.0/geography/schedule/get-list\tПолучение списка режимов работы\n/1.0/order/calculate-post\tРасчет стоимости доставки посылки.\n/1.0/order/cargo-type/get-list\tСписок характера груза\n/1.0/order/currency/get-list\tПолучение списка валют\n/1.0/order/document/get\tДокумент груза по заказу\n/1.0/order/get\tИнформация по заказу\n/1.0/order/get-list\tПолучение списка заказов\n/1.0/order/mass-create\tМассовое создание заказов из файла\n/1.0/order/photo/get\tФото груза по заказу\n/1.0/order/service/get-list\tПолучения списка услуг.\n/1.0/order/status/get\tCтатус заказа\n/1.0/order/time-delivery\tКалькуляция приблизительных(!) сроков перевозки между терминалами\n/1.0/profile/get-list\tПолучение списка профилей\n/1.0/tdd/city/get-list\tCписок городов\n/1.0/tdd/country/get-list\tПолучение списка стран\n/1.0/tdd/region/get-list\tCписок регионов\n/1.0/tdd/search/by-name\tПоиск городов по имени\n/1.0/tdd/search/code-city\tПоиск номера КЛАДР или поиск номера города\n/1.1/geography/address/get-list\tПолучение списка адресов\n/1.1/order/create-post\tОформление заказа на посылку.\n/1.1/order/time-delivery\tКалькуляция приблизительных(!) сроков перевозки между терминалами\n/1.1/tdd/city/get-list\tCписок городов\n/1.1/tdd/search/by-name\tПоиск городов по имени\n/1.4/order/create\tОформление заказа.\n/2.0/order/calculate\tРасчет стоимости.\n\nФункция /1.0/tdd/city/get-list\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Cписок городов\n\nПоля запроса:\nПараметр\tОписание\tТип\tОбязательный\tПример\ncode\tКод населенного пункта\tстрока или массив\tнет\t660002900000\nregion_code\tКод региона\tстрока или массив\tнет\t66\ncountry_code\tКод страны\tстрока или массив\tнет\tRU\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\ncountry_сode\tКод страны\tстрока\tRU\nregion_сode\tКод региона\tстрока\t66\ncode\tКод населенного пункта\tстрока\t660002900000\nname\tНазвание населенного пункта\tстрока\tИрбит\ntype\tТип населенного пункта\tстрока\tгор.\nrequired_pickup\tОбязательность забора (0 - нет, 1 -да)\tinteger\t1\nrequired_delivery\tОбязательность доставки (0 - нет, 1 -да)\tinteger\t1\n\nПример запроса:\n{\n    \"code\": \"660002900000\",\n    \"region_code\": \"66\",\n    \"country_code\": \"RU\"\n}\n\n\nПример ответа:\n[\n    {\n        \"code\": \"660002900000\",\n        \"name\": \"Ирбит\",\n        \"type\": \"гор.\",\n        \"region_code\": \"66\",\n        \"country_code\": \"RU\",\n        \"required_pickup\": 1,\n        \"required_delivery\": 1\n    }\n]\n\nФункция /1.0/tdd/country/get-list\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Получение списка стран\n\nПоля запроса:\nПараметр\tОписание\tТип\tПример\ncode\tКод страны\tстрока\tRU\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\ncode\tКод страны\tстрока\tAM\nname\tАбхазия\tстрока\t0.04\n\nПример запроса:\n{\n    \"code\": \"RU\"\n}\n\n\nПример ответа:\n[\n    {\n        \"code\": \"AB\",\n        \"name\": \"Абхазия\"\n    },\n    {\n        \"code\": \"AM\",\n        \"name\": \"Армения\"\n    },\n    {\n        \"code\": \"BY\",\n        \"name\": \"Беларусь\"\n    },\n    {\n        \"code\": \"CN\",\n        \"name\": \"Китай\"\n    },\n    {\n        \"code\": \"DE\",\n        \"name\": \"Германия\"\n    },\n    {\n        \"code\": \"KG\",\n        \"name\": \"Киргизия\"\n    },\n    {\n        \"code\": \"KZ\",\n        \"name\": \"Казахстан\"\n    },\n    {\n        \"code\": \"RU\",\n        \"name\": \"Россия\"\n    }\n]\n\nФункция /1.0/tdd/region/get-list\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Cписок регионов\n\nПоля запроса:\nПараметр\tОписание\tТип\tОбязательный\tПример\ncode\tКод населенного пункта\tстрока или массив\tнет\t66\ncountry_сode\tКод страны\tстрока или массив\tнет\tRU\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\ncountry_сode\tкод страны\tстрока\tRU\nсode\tкод региона\tстрока\t66\nname\tназвание региона\tстрока\tСвердловская область\n\nПример запроса:\n{\n    \"code\": \"66\",\n    \"country_code\": \"RU\"\n}\n\n\nПример ответа:\n[\n    {\n        \"code\": \"66\",\n        \"name\": \"Свердловская обл.\",\n        \"country_code\": \"RU\"\n    }\n]\n\nФункция /1.0/tdd/search/by-name\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Поиск городов по имени\n\nПоля запроса:\nПараметр\tОписание\tТип\tОбязательный\tПример\ntitle\tИмя города\tстрока\tда\tИрбит\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\nname\tНазвание населенного пункта\tстрока\tИрбит\ncode\tКод населенного пункта\tстрока\t660002900000\ntype\tТип населенного пункта\tстрока\tгор.\nregion_сode\tКод региона\tстрока\t66\ncountry_сode\tКод страны\tстрока\tRU\nrequired_pickup\tОбязательность забора (0 - нет, 1 -да)\tinteger\t1\nrequired_delivery\tОбязательность доставки (0 - нет, 1 -да)\tinteger\t1\n\nПример запроса:\n{\n    \"title\": \"Екатеринбург\"\n}\n\n\nПример ответа:\n[\n    {\n        \"code\": \"660000100000\",\n        \"name\": \"Екатеринбург\",\n        \"type\": \"гор.\",\n        \"region_code\": \"66\",\n        \"country_code\": \"RU\",\n        \"required_pickup\": 0,\n        \"required_delivery\": 0\n    }\n]\n\n\nФункция /1.0/tdd/search/code-city\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Поиск номера КЛАДР или поиск номера города\n\nПоля запроса:\nПараметр\tОписание\tТип\tОбязательный\tПример\ncode_city\tКод города\tстрока\tДа, если нет поля kladr(12 символов)\t660003100000\nkladr\tКЛАДР города \tстрока\tДа, если нет поля code_city (13 символов)\t6600003100000\n \n\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\ncode\tКод города\tстрока\t660003100000\nkladr\tКЛАДР города\tстрока\t6600003100000\ntype_kladr\tТип населенного пункта\tстрока\tг.\nname_kladr\tНаименование населенного пункта\tстрока\tКрасноуфимск\n \n\n\nПример запроса:\n{\n    \"kladr\": \"6600003100000\"\n}\n\n\nПример ответа:\n{\n    \"code\": \"660003100000\",\n    \"kladr\": \"6600003100000\",\n    \"name_kladr\": \"Красноуфимск\",\n    \"type_kladr\": \"г\"\n}\n\n\nФункция /1.1/tdd/city/get-list\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Cписок городов\n\nПоля запроса:\nПараметр\tОписание\tТип\tОбязательный\tПример\ncode\tКод населенного пункта\tстрока или массив\tнет\t660002900000\nregion_code\tКод региона\tстрока или массив\tнет\t66\ncountry_code\tКод страны\tстрока или массив\tнет\tRU\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\ncountry_сode\tКод страны\tстрока\tRU\nregion_сode\tКод региона\tстрока\t66\ncode\tКод населенного пункта\tстрока\t660002900000\nkladr\tКод КЛАДР населенного пункта\tстрока \t6600002900000\nname\tНазвание населенного пункта\tстрока\tИрбит\ntype\tТип населенного пункта\tстрока\tгор.\nrequired_pickup\tОбязательность забора (0 - нет, 1 -да)\tinteger\t1\nrequired_delivery\tОбязательность доставки (0 - нет, 1 -да)\tinteger\t1\n\nПример запроса:\n{\n    \"code\": \"660002900000\",\n    \"region_code\": \"66\",\n    \"country_code\": \"RU\"\n}\n\n\nПример ответа:\n[\n    {\n        \"code\": \"660002900000\",\n        \"name\": \"Ирбит\",\n        \"type\": \"гор.\",\n        \"kladr\": \"6600002900000\",\n        \"region_code\": \"66\",\n        \"country_code\": \"RU\",\n        \"required_pickup\": 1,\n        \"required_delivery\": 1\n    }\n]\n\nФункция /1.1/tdd/search/by-name\nОписание раздела: Данный раздел KIT.API описывает все населенные пункты куда осуществляется как адресная доставка, так и региональные представительства.\n\nНазначение метода: Поиск городов по имени\n\nПоля запроса:\nПараметр\tОписание\tТип\tОбязательный\tПример\ntitle\tИмя города\tстрока\tда\tИрбит\n\nПоля ответа:\nПараметр\tОписание\tТип\tПример\nname\tНазвание населенного пункта\tстрока\tИрбит\ncode\tКод населенного пункта\tстрока\t660002900000\nkladr\tКод КЛАДР населенного пункта\tстрока\t6600002900000\ntype\tТип населенного пункта\tстрока\tгор.\nregion_сode\tКод региона\tстрока\t66\ncountry_сode\tКод страны\tстрока\tRU\nrequired_pickup\tОбязательность забора (0 - нет, 1 -да)\tinteger\t1\nrequired_delivery\tОбязательность доставки (0 - нет, 1 -да)\tinteger\t1\n\nПример запроса:\n{\n    \"title\": \"Ирбит\"\n}\n\n\nПример ответа:\n[\n    {\n        \"code\": \"660002900000\",\n        \"name\": \"Ирбит\",\n        \"type\": \"гор.\",\n        \"kladr\": \"6600002900000\",\n        \"region_code\": \"66\",\n        \"country_code\": \"RU\",\n        \"required_pickup\": 1,\n        \"required_delivery\": 1\n    }\n]"
}