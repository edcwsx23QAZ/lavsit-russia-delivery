{
  "id": "prt_97fc510db001n4kO3Lssm0vKSt",
  "messageID": "msg_97fc50208001vfqf6xI671WOsW",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01FdPrvidNjnQTpzKhhokohv",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx"
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import React, { useState, useEffect, useCallback } from 'react';\n00004| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00005| import { Button } from '@/components/ui/button';\n00006| import { Input } from '@/components/ui/input';\n00007| import { Label } from '@/components/ui/label';\n00008| import { Checkbox } from '@/components/ui/checkbox';\n00009| import { Plus, Truck, Building2, Map } from 'lucide-react';\n00010| import { Alert, AlertDescription } from '@/components/ui/alert';\n00011| import { Badge } from '@/components/ui/badge';\n00012| import { Separator } from '@/components/ui/separator';\n00013| import { Collapsible, CollapsibleContent } from '@/components/ui/collapsible';\n00014| \n00015| interface Cargo {\n00016|   id: string;\n00017|   length: number;\n00018|   width: number;\n00019|   height: number;\n00020|   weight: number;\n00021| }\n00022| \n00023| interface DeliveryForm {\n00024|   cargos: Cargo[];\n00025|   fromCity: string;\n00026|   toCity: string;\n00027|   fromAddress: string;\n00028|   toAddress: string;\n00029|   declaredValue: number;\n00030|   needPackaging: boolean;\n00031|   needLoading: boolean;\n00032|   needCarry: boolean;\n00033|   floor: number;\n00034|   hasFreightLift: boolean;\n00035|   needInsurance: boolean;\n00036|   fromTerminal: boolean;\n00037|   toTerminal: boolean;\n00038|   fromAddressDelivery: boolean;\n00039|   toAddressDelivery: boolean;\n00040| }\n00041| \n00042| interface CalculationResult {\n00043|   company: string;\n00044|   price: number;\n00045|   days: number;\n00046|   details?: any;\n00047|   error?: string;\n00048|   requestData?: any;\n00049|   responseData?: any;\n00050|   apiUrl?: string;\n00051|   sessionId?: string;\n00052| }\n00053| \n00054| interface AddressSuggestion {\n00055|   value: string;\n00056|   unrestricted_value: string;\n00057|   data: {\n00058|     city?: string;\n00059|     street?: string;\n00060|     house?: string;\n00061|   };\n00062| }\n00063| \n00064| const COMPANIES = [\n00065|   { name: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏', logo: 'üì¶', connected: true },\n00066|   { name: '–ü–≠–ö', logo: 'üöõ', connected: true },\n00067|   { name: 'Nord Wheel', logo: 'üåê', connected: true },\n00068|   { name: 'Rail Continent', logo: 'üöÇ', connected: true }\n00069| ];\n00070| \n00071| export default function Home() {\n00072|   const [form, setForm] = useState<DeliveryForm>({\n00073|     cargos: [{ id: '1', length: 0, width: 0, height: 0, weight: 0 }],\n00074|     fromCity: '',\n00075|     toCity: '',\n00076|     fromAddress: '',\n00077|     toAddress: '',\n00078|     declaredValue: 0,\n00079|     needPackaging: false,\n00080|     needLoading: false,\n00081|     needCarry: false,\n00082|     floor: 1,\n00083|     hasFreightLift: false,\n00084|     needInsurance: false,\n00085|     fromTerminal: true,\n00086|     toTerminal: true,\n00087|     fromAddressDelivery: false,\n00088|     toAddressDelivery: false\n00089|   });\n00090| \n00091|   const [suggestions, setSuggestions] = useState<AddressSuggestion[]>([]);\n00092|   const [showSuggestions, setShowSuggestions] = useState(false);\n00093|   const [activeField, setActiveField] = useState('');\n00094|   const [calculations, setCalculations] = useState<CalculationResult[]>([]);\n00095|   const [calculating, setCalculating] = useState(false);\n00096|   const [expandedDetails, setExpandedDetails] = useState<{ [key: string]: boolean }>({});\n00097|   const [expandedDebugInfo, setExpandedDebugInfo] = useState<{ [key: string]: boolean }>({});\n00098|   const [suggestionPosition, setSuggestionPosition] = useState({ top: 0, left: 0 });\n00099| \n00100|   // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n00101|   useEffect(() => {\n00102|     const saved = localStorage.getItem('deliveryForm');\n00103|     if (saved) {\n00104|       setForm(JSON.parse(saved));\n00105|     }\n00106|   }, []);\n00107| \n00108|   // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏\n00109|   useEffect(() => {\n00110|     localStorage.setItem('deliveryForm', JSON.stringify(form));\n00111|   }, [form]);\n00112| \n00113|   // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏\n00114|   useEffect(() => {\n00115|     if (form.declaredValue > 0) {\n00116|       setForm(prev => ({ ...prev, needInsurance: true }));\n00117|     }\n00118|   }, [form.declaredValue]);\n00119| \n00120|   const searchAddresses = useCallback(async (query: string, field: string, element?: HTMLInputElement) => {\n00121|     if (query.length < 3) {\n00122|       setSuggestions([]);\n00123|       setShowSuggestions(false);\n00124|       return;\n00125|     }\n00126| \n00127|     setActiveField(field);\n00128|     \n00129|     // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –∞–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–æ–∫\n00130|     if (element) {\n00131|       const rect = element.getBoundingClientRect();\n00132|       setSuggestionPosition({\n00133|         top: rect.bottom + window.scrollY,\n00134|         left: rect.left + window.scrollX\n00135|       });\n00136|     }\n00137|     \n00138|     try {\n00139|       const response = await fetch('https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address', {\n00140|         method: 'POST',\n00141|         headers: {\n00142|           'Content-Type': 'application/json',\n00143|           'Accept': 'application/json',\n00144|           'Authorization': 'Token eb87bbb3789bb43ed465f796892ea951f9e91008'\n00145|         },\n00146|         body: JSON.stringify({\n00147|           query: query,\n00148|           count: 10\n00149|         })\n00150|       });\n00151| \n00152|       if (response.ok) {\n00153|         const data = await response.json();\n00154|         setSuggestions(data.suggestions || []);\n00155|         setShowSuggestions(true);\n00156|       }\n00157|     } catch (error) {\n00158|       console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥—Å–∫–∞–∑–æ–∫:', error);\n00159|     }\n00160|   }, []);\n00161| \n00162|   const debounceTimer = React.useRef<NodeJS.Timeout>();\n00163|   const handleAddressChange = (field: string, value: string, element?: HTMLInputElement) => {\n00164|     setForm(prev => ({ ...prev, [field]: value }));\n00165|     \n00166|     clearTimeout(debounceTimer.current);\n00167|     debounceTimer.current = setTimeout(() => {\n00168|       searchAddresses(value, field, element);\n00169|     }, 50);\n00170|   };\n00171| \n00172|   const selectSuggestion = (suggestion: AddressSuggestion) => {\n00173|     setForm(prev => ({ ...prev, [activeField]: suggestion.value }));\n00174|     setShowSuggestions(false);\n00175|     setSuggestions([]);\n00176|   };\n00177| \n00178|   const addCargo = () => {\n00179|     const newId = (form.cargos.length + 1).toString();\n00180|     setForm(prev => ({\n00181|       ...prev,\n00182|       cargos: [...prev.cargos, { id: newId, length: 0, width: 0, height: 0, weight: 0 }]\n00183|     }));\n00184|   };\n00185| \n00186|   const updateCargo = (id: string, field: string, value: number) => {\n00187|     setForm(prev => ({\n00188|       ...prev,\n00189|       cargos: prev.cargos.map(cargo => \n00190|         cargo.id === id ? { ...cargo, [field]: value } : cargo\n00191|       )\n00192|     }));\n00193|   };\n00194| \n00195|   const removeCargo = (id: string) => {\n00196|     if (form.cargos.length > 1) {\n00197|       setForm(prev => ({\n00198|         ...prev,\n00199|         cargos: prev.cargos.filter(cargo => cargo.id !== id)\n00200|       }));\n00201|     }\n00202|   };\n00203| \n00204|   // –ü–æ–ª—É—á–µ–Ω–∏–µ sessionID –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π\n00205|   const getDellinSessionId = async (): Promise<string | null> => {\n00206|     try {\n00207|       const authResponse = await fetch('https://api.dellin.ru/v3/auth/login.json', {\n00208|         method: 'POST',\n00209|         headers: {\n00210|           'Content-Type': 'application/json'\n00211|         },\n00212|         body: JSON.stringify({\n00213|           appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n00214|           login: 'service@lavsit.ru',\n00215|           password: 'edcwsx123QAZ'\n00216|         })\n00217|       });\n00218| \n00219|       if (authResponse.ok) {\n00220|         const authData = await authResponse.json();\n00221|         return authData.data?.sessionID || null;\n00222|       }\n00223|     } catch (error) {\n00224|       console.error('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏:', error);\n00225|     }\n00226|     return null;\n00227|   };\n00228| \n00229|   // –†–∞—Å—á–µ—Ç –¥–ª—è –î–µ–ª–æ–≤—ã—Ö –õ–∏–Ω–∏–π –ø–æ –Ω–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n00230|   const calculateDellin = async (): Promise<CalculationResult> => {\n00231|     const apiUrl = 'https://api.dellin.ru/v2/calculator';\n00232|     \n00233|     try {\n00234|       const sessionID = await getDellinSessionId();\n00235|       \n00236|       if (!sessionID) {\n00237|         return {\n00238|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00239|           price: 0,\n00240|           days: 0,\n00241|           error: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å sessionID',\n00242|           apiUrl\n00243|         };\n00244|       }\n00245| \n00246|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n00247|       const totalVolume = form.cargos.reduce((sum, cargo) => \n00248|         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n00249|       );\n00250| \n00251|       // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n00252|       const requestData = {\n00253|         appkey: 'E6C50E91-8E93-440F-9CC6-DEF9F0D68F1B',\n00254|         sessionID: sessionID,\n00255|         delivery: {\n00256|           deliveryType: {\n00257|             type: 'auto'\n00258|           },\n00259|           derival: {\n00260|             variant: form.fromAddressDelivery ? 'address' : 'terminal',\n00261|             address: {\n00262|               search: form.fromAddressDelivery ? (form.fromAddress || form.fromCity) : form.fromCity\n00263|             }\n00264|           },\n00265|           arrival: {\n00266|             variant: form.toAddressDelivery ? 'address' : 'terminal', \n00267|             address: {\n00268|               search: form.toAddressDelivery ? (form.toAddress || form.toCity) : form.toCity\n00269|             }\n00270|           }\n00271|         },\n00272|         cargo: {\n00273|           quantity: form.cargos.length,\n00274|           weight: totalWeight,\n00275|           totalVolume: totalVolume,\n00276|           totalWeight: totalWeight,\n00277|           oversizedWeight: 0,\n00278|           oversizedVolume: 0,\n00279|           ...(form.needInsurance && form.declaredValue > 0 ? {\n00280|             insurance: {\n00281|               statedValue: form.declaredValue,\n00282|               term: false\n00283|             }\n00284|           } : {})\n00285|         },\n00286|         ...(form.needPackaging ? {\n00287|           packages: [{\n00288|             uid: 'bag'\n00289|           }]\n00290|         } : {})\n00291|       };\n00292| \n00293|       const response = await fetch(apiUrl, {\n00294|         method: 'POST',\n00295|         headers: {\n00296|           'Content-Type': 'application/json',\n00297|           'Accept': 'application/json'\n00298|         },\n00299|         body: JSON.stringify(requestData)\n00300|       });\n00301| \n00302|       const data = await response.json();\n00303| \n00304|       if (response.ok && data.data && data.metadata?.status === 200) {\n00305|         let totalPrice = data.data.price || 0;\n00306|         \n00307|         // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç—Ä–∞—Ö–æ–≤–∫—É –µ—Å–ª–∏ –µ—Å—Ç—å\n00308|         if (data.data.insurance) {\n00309|           totalPrice += data.data.insurance;\n00310|         }\n00311|         \n00312|         // –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ —É–ø–∞–∫–æ–≤–∫–∏ –µ—Å–ª–∏ –µ—Å—Ç—å\n00313|         if (data.data.packages && form.needPackaging) {\n00314|           Object.values(data.data.packages).forEach((pkg: any) => {\n00315|             if (pkg.price) totalPrice += pkg.price;\n00316|           });\n00317|         }\n00318| \n00319|         return {\n00320|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00321|           price: Math.round(totalPrice),\n00322|           days: data.data.deliveryTerm || 0,\n00323|           details: data.data,\n00324|           requestData,\n00325|           responseData: data,\n00326|           apiUrl,\n00327|           sessionId: sessionID\n00328|         };\n00329|       } else {\n00330|         const errorMessage = data.metadata?.detail || \n00331|                            data.metadata?.message || \n00332|                            data.errors?.[0]?.detail || \n00333|                            (data.metadata?.status !== 200 ? `HTTP ${data.metadata?.status}` : '') ||\n00334|                            '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏';\n00335|         return {\n00336|           company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00337|           price: 0,\n00338|           days: 0,\n00339|           error: errorMessage,\n00340|           requestData,\n00341|           responseData: data,\n00342|           apiUrl,\n00343|           sessionId: sessionID\n00344|         };\n00345|       }\n00346|     } catch (error: any) {\n00347|       return {\n00348|         company: '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏',\n00349|         price: 0,\n00350|         days: 0,\n00351|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n00352|         requestData: null,\n00353|         responseData: null,\n00354|         apiUrl\n00355|       };\n00356|     }\n00357|   };\n00358| \n00359|   // –†–∞—Å—á–µ—Ç –¥–ª—è Nord Wheel\n00360|   const calculateNordWheel = async (): Promise<CalculationResult> => {\n00361|     const apiUrl = 'https://nordw.ru/tools/api/calc/calculate/';\n00362|     \n00363|     try {\n00364|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n00365|       const totalVolume = form.cargos.reduce((sum, cargo) => \n00366|         sum + (cargo.length * cargo.width * cargo.height) / 1000000, 0\n00367|       );\n00368| \n00369|       const params = new URLSearchParams({\n00370|         from: '91', // –ú–æ—Å–∫–≤–∞ (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n00371|         to: '92', // –°–ü–± (–Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å ID –≥–æ—Ä–æ–¥–∞)\n00372|         pickup: form.fromAddressDelivery ? '1' : '0',\n00373|         deliver: form.toAddressDelivery ? '1' : '0',\n00374|         weight: totalWeight.toString(),\n00375|         volume: totalVolume.toString(),\n00376|         oversized: '0',\n00377|         package: form.needPackaging ? '1' : '0',\n00378|         packageCount: form.cargos.length.toString(),\n00379|         insurance: form.needInsurance ? '1' : '0',\n00380|         sum: form.declaredValue.toString(),\n00381|         documentsReturn: '0',\n00382|         fragile: '1'\n00383|       });\n00384| \n00385|       const requestData = Object.fromEntries(params);\n00386|       const fullUrl = `${apiUrl}?${params.toString()}`;\n00387| \n00388|       const response = await fetch(fullUrl);\n00389|       const data = await response.json();\n00390| \n00391|       if (response.ok && data.status === 'success' && data.data) {\n00392|         return {\n00393|           company: 'Nord Wheel',\n00394|           price: data.data.total || 0,\n00395|           days: data.data.days || 0,\n00396|           details: {\n00397|             ...data.data,\n00398|             totalCost: data.data.total,\n00399|             deliveryCost: data.data.door,\n00400|             terminalCost: data.data.terminal,\n00401|             pickupCost: data.data.pick,\n00402|             deliveryToDoorCost: data.data.deliver,\n00403|             additionalServices: (data.data.total || 0) - (data.data.door || 0)\n00404|           },\n00405|           requestData,\n00406|           responseData: data,\n00407|           apiUrl: fullUrl\n00408|         };\n00409|       } else {\n00410|         return {\n00411|           company: 'Nord Wheel',\n00412|           price: 0,\n00413|           days: 0,\n00414|           error: '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ Nord Wheel',\n00415|           requestData,\n00416|           responseData: data,\n00417|           apiUrl: fullUrl\n00418|         };\n00419|       }\n00420|     } catch (error: any) {\n00421|       return {\n00422|         company: 'Nord Wheel',\n00423|         price: 0,\n00424|         days: 0,\n00425|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n00426|         apiUrl\n00427|       };\n00428|     }\n00429|   };\n00430| \n00431|   // –ü–æ–ª—É—á–µ–Ω–∏–µ ID —Å–∫–ª–∞–¥–∞ –ü–≠–ö –ø–æ –∞–¥—Ä–µ—Å—É —á–µ—Ä–µ–∑ API\n00432|   const findPekWarehouseId = async (address: string): Promise<string | null> => {\n00433|     try {\n00434|       // –ò—Å–ø–æ–ª—å–∑—É–µ–º API –ü–≠–ö –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–∫–ª–∞–¥–∞ –ø–æ –∞–¥—Ä–µ—Å—É\n00435|       const response = await fetch('https://api.pecom.ru/v1/branches/findzonebyaddress', {\n00436|         method: 'POST',\n00437|         headers: {\n00438|           'Content-Type': 'application/json',\n00439|           'Authorization': 'Basic ' + btoa('C04C5BF2AE367BDCBDC71E7DA520A69B167D1984:')\n00440|         },\n00441|         body: JSON.stringify({\n00442|           address: address\n00443|         })\n00444|       });\n00445| \n00446|       if (response.ok) {\n00447|         const data = await response.json();\n00448|         return data.mainWarehouseId || null;\n00449|       }\n00450|       \n00451|       // –§–æ–ª–ª–±—ç–∫ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤\n00452|       const fallbackWarehouses: { [key: string]: string } = {\n00453|         '–º–æ—Å–∫–≤–∞': 'dc6c746d-812d-11e4-bbfc-001999d8b3c5',\n00454|         '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥': 'b436c978-086d-11e6-b6ca-00155d668909',\n00455|         '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': '550e8400-e29b-41d4-a716-446655440000'\n00456|       };\n00457|       \n00458|       const normalizedCity = address.toLowerCase().trim()\n00459|         .replace(/—ë/g, '–µ')\n00460|         .replace(/[\\s\\-\\.]+/g, '');\n00461|       \n00462|       for (const [city, warehouseId] of Object.entries(fallbackWarehouses)) {\n00463|         const normalizedCityKey = city.replace(/[\\s\\-\\.]+/g, '');\n00464|         if (normalizedCity.includes(normalizedCityKey) || normalizedCityKey.includes(normalizedCity)) {\n00465|           return warehouseId;\n00466|         }\n00467|       }\n00468|       \n00469|       return null;\n00470|     } catch (error) {\n00471|       console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —Å–∫–ª–∞–¥–∞ –ü–≠–ö:', error);\n00472|       return null;\n00473|     }\n00474|   };\n00475| \n00476|   // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö - –∑–∞–≥–ª—É—à–∫–∞, —Ç–∞–∫ –∫–∞–∫ API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤\n00477|   // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø—É–±–ª–∏—á–Ω–æ–≥–æ API\n00478|   const calculatePEK = async (): Promise<CalculationResult> => {\n00479|     const apiUrl = 'http://calc.pecom.ru/bitrix/components/pecom/calc/ajax.php';\n00480|     \n00481|     try {\n00482|       // –ü–æ–ª—É—á–∞–µ–º ID –≥–æ—Ä–æ–¥–æ–≤\n00483|       const fromCityId = await findPekCityId(form.fromCity);\n00484|       const toCityId = await findPekCityId(form.toCity);\n00485|       \n00486|       if (!fromCityId || !toCityId) {\n00487|         return {\n00488|           company: '–ü–≠–ö',\n00489|           price: 0,\n00490|           days: 0,\n00491|           error: `–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –ü–≠–ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: ${!fromCityId ? form.fromCity : ''} ${!toCityId ? form.toCity : ''}`.trim(),\n00492|           apiUrl\n00493|         };\n00494|       }\n00495| \n00496|       // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n00497|       const params = new URLSearchParams();\n00498|       \n00499|       // –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä—É–∑—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–æ—Ä–º–∞—Ç—É: –®–∏—Ä–∏–Ω–∞ (–º), –î–ª–∏–Ω–∞ (–º), –í—ã—Å–æ—Ç–∞ (–º), –û–±—ä–µ–º (–º3), –í–µ—Å (–∫–≥), –ù–µ–≥–∞–±–∞—Ä–∏—Ç (0/1), –ó–¢–£ (0/1)\n00500|       form.cargos.forEach((cargo, index) => {\n00501|         const width = cargo.width / 100; // –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–µ—Ç—Ä—ã\n00502|         const length = cargo.length / 100;\n00503|         const height = cargo.height / 100;\n00504|         const volume = width * length * height;\n00505|         const weight = cargo.weight;\n00506|         const isOversized = (width > 2.4 || length > 12 || height > 2.7 || weight > 1500) ? 1 : 0;\n00507|         const needZTU = form.needPackaging ? 1 : 0;\n00508|         \n00509|         params.append(`places[${index}][]`, width.toString());\n00510|         params.append(`places[${index}][]`, length.toString());\n00511|         params.append(`places[${index}][]`, height.toString());\n00512|         params.append(`places[${index}][]`, volume.toString());\n00513|         params.append(`places[${index}][]`, weight.toString());\n00514|         params.append(`places[${index}][]`, isOversized.toString());\n00515|         params.append(`places[${index}][]`, needZTU.toString());\n00516|       });\n00517|       \n00518|       // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–±–æ—Ä–∞\n00519|       params.append('take[town]', fromCityId.toString());\n00520|       params.append('take[tent]', '0'); // —Ä–∞—Å—Ç–µ–Ω—Ç—Ä–æ–≤–∫–∞\n00521|       params.append('take[gidro]', form.needLoading ? '1' : '0'); // –≥–∏–¥—Ä–æ–ª–∏—Ñ—Ç\n00522|       params.append('take[manip]', '0'); // –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä\n00523|       params.append('take[speed]', '0'); // —Å—Ä–æ—á–Ω—ã–π –∑–∞–±–æ—Ä\n00524|       params.append('take[moscow]', '0'); // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ú–æ—Å–∫–≤–µ\n00525|       \n00526|       // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç–∞–≤–∫–∏\n00527|       params.append('deliver[town]', toCityId.toString());\n00528|       params.append('deliver[tent]', '0');\n00529|       params.append('deliver[gidro]', form.needLoading ? '1' : '0');\n00530|       params.append('deliver[manip]', '0');\n00531|       params.append('deliver[speed]', '0');\n00532|       params.append('deliver[moscow]', '0');\n00533|       \n00534|       // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\n00535|       params.append('plombir', '0'); // –ø–ª–æ–º–±—ã\n00536|       params.append('strah', form.needInsurance ? form.declaredValue.toString() : '0'); // —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞\n00537|       params.append('ashan', '0'); // –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ –ê—à–∞–Ω\n00538|       params.append('night', '0'); // –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è\n00539|       params.append('pal', '0'); // –∑–∞–ø–∞–ª–ª–µ—á–∏–≤–∞–Ω–∏–µ\n00540|       params.append('pallets', '0'); // –ø–∞–ª–ª–µ—Ç–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n00541| \n00542|       const fullUrl = `${apiUrl}?${params.toString()}`;\n00543|       const requestData = Object.fromEntries(params);\n00544| \n00545|       // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–∫—Å–∏ –¥–ª—è –æ–±—Ö–æ–¥–∞ CORS\n00546|       const proxyUrl = 'https://api.allorigins.win/get?url=' + encodeURIComponent(fullUrl);\n00547|       const response = await fetch(proxyUrl);\n00548|       const proxyData = await response.json();\n00549|       \n00550|       if (!response.ok || !proxyData.contents) {\n00551|         throw new Error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏');\n00552|       }\n00553|       \n00554|       const data = JSON.parse(proxyData.contents);\n00555| \n00556|       if (data && !data.error?.length) {\n00557|         let totalPrice = 0;\n00558|         let services: { name: string; description: string; price: number }[] = [];\n00559|         \n00560|         // –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n00561|         if (data.take?.[2]) {\n00562|           const price = parseFloat(data.take[2]);\n00563|           totalPrice += price;\n00564|           services.push({ \n00565|             name: data.take[0] || '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞', \n00566|             description: data.take[1] || '', \n00567|             price \n00568|           });\n00569|         }\n00570|         \n00571|         // –í—ã–±–∏—Ä–∞–µ–º —Ç–∏–ø –ø–µ—Ä–µ–≤–æ–∑–∫–∏\n00572|         let transportCost = 0;\n00573|         let transportName = '';\n00574|         if (data.autonegabarit?.[2] && parseFloat(data.autonegabarit[2]) > 0) {\n00575|           transportCost = parseFloat(data.autonegabarit[2]);\n00576|           transportName = data.autonegabarit[0] || '–ê–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∞ (–Ω–µ–≥–∞–±–∞—Ä–∏—Ç)';\n00577|         } else if (data.auto?.[2]) {\n00578|           transportCost = parseFloat(data.auto[2]);\n00579|           transportName = data.auto[0] || '–ê–≤—Ç–æ–ø–µ—Ä–µ–≤–æ–∑–∫–∞';\n00580|         } else if (data.avia?.[2]) {\n00581|           transportCost = parseFloat(data.avia[2]);\n00582|           transportName = data.avia[0] || '–ê–≤–∏–∞–ø–µ—Ä–µ–≤–æ–∑–∫–∞';\n00583|         }\n00584|         \n00585|         if (transportCost > 0) {\n00586|           totalPrice += transportCost;\n00587|           services.push({ \n00588|             name: transportName, \n00589|             description: data.auto?.[1] || data.autonegabarit?.[1] || data.avia?.[1] || '', \n00590|             price: transportCost \n00591|           });\n00592|         }\n00593|         \n00594|         if (data.deliver?.[2]) {\n00595|           const price = parseFloat(data.deliver[2]);\n00596|           totalPrice += price;\n00597|           services.push({ \n00598|             name: data.deliver[0] || '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞', \n00599|             description: data.deliver[1] || '', \n00600|             price \n00601|           });\n00602|         }\n00603|         \n00604|         // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\n00605|         ['ADD', 'ADD_1', 'ADD_2', 'ADD_3', 'ADD_4'].forEach(key => {\n00606|           if (data[key]?.[2] && parseFloat(data[key][2]) > 0) {\n00607|             const price = parseFloat(data[key][2]);\n00608|             totalPrice += price;\n00609|             services.push({ \n00610|               name: data[key][0] || `–î–æ–ø. —É—Å–ª—É–≥–∞ ${key}`, \n00611|               description: data[key][1] || '', \n00612|               price \n00613|             });\n00614|           }\n00615|         });\n00616|         \n00617|         // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏\n00618|         let deliveryDays = 3; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é\n00619|         if (data.periods) {\n00620|           const daysMatch = data.periods.match(/(\\d+)\\s*–¥–Ω/);\n00621|           if (daysMatch) {\n00622|             deliveryDays = parseInt(daysMatch[1]);\n00623|           }\n00624|         }\n00625| \n00626|         return {\n00627|           company: '–ü–≠–ö',\n00628|           price: Math.round(totalPrice),\n00629|           days: deliveryDays,\n00630|           details: {\n00631|             services,\n00632|             periods: data.periods,\n00633|             aperiods: data.aperiods,\n00634|             rawData: data,\n00635|             fromCityId,\n00636|             toCityId\n00637|           },\n00638|           requestData,\n00639|           responseData: data,\n00640|           apiUrl: fullUrl\n00641|         };\n00642|       } else {\n00643|         const errorMessages = data.error?.join(', ') || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ü–≠–ö';\n00644|         return {\n00645|           company: '–ü–≠–ö',\n00646|           price: 0,\n00647|           days: 0,\n00648|           error: errorMessages,\n00649|           requestData,\n00650|           responseData: data,\n00651|           apiUrl: fullUrl\n00652|         };\n00653|       }\n00654|     } catch (error: any) {\n00655|       return {\n00656|         company: '–ü–≠–ö',\n00657|         price: 0,\n00658|         days: 0,\n00659|         error: `–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è: ${error.message}`,\n00660|         requestData: null,\n00661|         responseData: null,\n00662|         apiUrl\n00663|       };\n00664|     }\n00665|   };\n00666| \n00667|   const calculateRailContinent = async (): Promise<CalculationResult> => {\n00668|     await new Promise(resolve => setTimeout(resolve, 1200));\n00669|     const basePrice = form.cargos.reduce((sum, cargo) => sum + cargo.weight * 12, 0);\n00670|     let totalPrice = basePrice;\n00671|     \n00672|     if (form.needInsurance) totalPrice += form.declaredValue * 0.025;\n00673|     if (form.needPackaging) totalPrice += basePrice * 0.08;\n00674|     \n00675|     return {\n00676|       company: 'Rail Continent',\n00677|       price: totalPrice,\n00678|       days: 5,\n00679|       apiUrl: 'https://www.railcontinent.ru/services/prochie-gruzoperevozki/forshop/api-manual/',\n00680|       details: { note: '–ó–∞–≥–ª—É—à–∫–∞ - API –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω' }\n00681|     };\n00682|   };\n00683| \n00684|   const handleCalculate = async () => {\n00685|     setCalculating(true);\n00686|     setCalculations([]);\n00687|     \n00688|     // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ —Ä–∞—Å—á–µ—Ç–∞\n00689|     localStorage.setItem('deliveryForm', JSON.stringify(form));\n00690|     \n00691|     try {\n00692|       const results = await Promise.all([\n00693|         calculateDellin(),\n00694|         calculatePEK(),\n00695|         calculateNordWheel(),\n00696|         calculateRailContinent()\n00697|       ]);\n00698|       \n00699|       // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ü–µ–Ω–µ\n00700|       const sortedResults = results\n00701|         .filter(result => !result.error)\n00702|         .sort((a, b) => a.price - b.price)\n00703|         .concat(results.filter(result => result.error));\n00704|       \n00705|       setCalculations(sortedResults);\n00706|     } catch (error) {\n00707|       console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ:', error);\n00708|     } finally {\n00709|       setCalculating(false);\n00710|     }\n00711|   };\n00712| \n00713|   const exportToPDF = () => {\n00714|     if (typeof window !== 'undefined') {\n00715|       window.print();\n00716|     }\n00717|   };\n00718| \n00719|   const toggleDetails = (company: string) => {\n00720|     setExpandedDetails(prev => ({\n00721|       ...prev,\n00722|       [company]: !prev[company]\n00723|     }));\n00724|   };\n00725| \n00726|   const toggleDebugInfo = (company: string) => {\n00727|     setExpandedDebugInfo(prev => ({\n00728|       ...prev,\n00729|       [company]: !prev[company]\n00730|     }));\n00731|   };\n00732| \n00733|   // –ü–∞—Ä—Å–µ—Ä –¥–µ—Ç–∞–ª–µ–π —Ä–∞—Å—á–µ—Ç–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞\n00734|   const parseCalculationDetails = (calc: CalculationResult) => {\n00735|     const details: { service: string; description: string; price: number }[] = [];\n00736|     \n00737|     if (calc.company === '–î–µ–ª–æ–≤—ã–µ –õ–∏–Ω–∏–∏' && calc.details) {\n00738|       // –û—Å–Ω–æ–≤–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n00739|       if (calc.details.availableDeliveryTypes?.auto) {\n00740|         details.push({\n00741|           service: '–ú–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞',\n00742|           description: `${form.fromCity} - ${form.toCity}`,\n00743|           price: calc.details.availableDeliveryTypes.auto\n00744|         });\n00745|       }\n00746|       \n00747|       // –ó–∞–±–æ—Ä –≥—Ä—É–∑–∞\n00748|       if (!form.fromTerminal && calc.details.derival?.price) {\n00749|         details.push({\n00750|           service: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n00751|           description: '–û—Ç –∞–¥—Ä–µ—Å–∞',\n00752|           price: calc.details.derival.price\n00753|         });\n00754|       }\n00755|       \n00756|       // –î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞\n00757|       if (!form.toTerminal && calc.details.arrival?.price) {\n00758|         details.push({\n00759|           service: '–û—Ç–≤–æ–∑ –≥—Ä—É–∑–∞',\n00760|           description: '–î–æ –∞–¥—Ä–µ—Å–∞',\n00761|           price: calc.details.arrival.price\n00762|         });\n00763|       }\n00764|       \n00765|       // –°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ\n00766|       if (form.needInsurance && calc.details.insurance) {\n00767|         details.push({\n00768|           service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞ –∏ —Å—Ä–æ–∫–∞',\n00769|           description: '',\n00770|           price: calc.details.insurance\n00771|         });\n00772|         \n00773|         if (form.declaredValue > 0) {\n00774|           details.push({\n00775|             service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –≥—Ä—É–∑–∞',\n00776|             description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n00777|             price: Math.round(form.declaredValue * 0.01)\n00778|           });\n00779|         }\n00780|       }\n00781|       \n00782|       // –£–ø–∞–∫–æ–≤–∫–∞\n00783|       if (form.needPackaging) {\n00784|         const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n00785|         details.push({\n00786|           service: '–£—Å–ª—É–≥–∏ –Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ',\n00787|           description: '–£–ø–∞–∫–æ–≤–∫–∞ –≥—Ä—É–∑–∞',\n00788|           price: Math.round(totalWeight * 50)\n00789|         });\n00790|       }\n00791|       \n00792|       // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\n00793|       details.push({\n00794|         service: '–î–æ–ø.—É—Å–ª—É–≥–∏',\n00795|         description: '–ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ —Å—Ç–∞—Ç—É—Å–µ –≥—Ä—É–∑–∞',\n00796|         price: 15\n00797|       });\n00798|     } else if (calc.company === 'Nord Wheel' && calc.details) {\n00799|       // –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –¥–ª—è Nord Wheel —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º\n00800|       if (calc.details.totalCost) {\n00801|         details.push({\n00802|           service: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏',\n00803|           description: '',\n00804|           price: calc.details.totalCost\n00805|         });\n00806|       }\n00807|       if (calc.details.deliveryCost) {\n00808|         details.push({\n00809|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–∑–∫–∏',\n00810|           description: '',\n00811|           price: calc.details.deliveryCost\n00812|         });\n00813|       }\n00814|       if (calc.details.terminalCost) {\n00815|         details.push({\n00816|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –º–µ–∂—Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–≤–æ–∑–∫–∏',\n00817|           description: '',\n00818|           price: calc.details.terminalCost\n00819|         });\n00820|       }\n00821|       if (calc.details.pickupCost) {\n00822|         details.push({\n00823|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–±–æ—Ä–∞',\n00824|           description: '',\n00825|           price: calc.details.pickupCost\n00826|         });\n00827|       }\n00828|       if (calc.details.deliveryToDoorCost) {\n00829|         details.push({\n00830|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ –¥–≤–µ—Ä–∏',\n00831|           description: '',\n00832|           price: calc.details.deliveryToDoorCost\n00833|         });\n00834|       }\n00835|       if (calc.details.additionalServices && calc.details.additionalServices > 0) {\n00836|         details.push({\n00837|           service: '–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–ø.—É—Å–ª—É–≥',\n00838|           description: '',\n00839|           price: calc.details.additionalServices\n00840|         });\n00841|       }\n00842| \n00843|     } else if (calc.company === '–ü–≠–ö' && calc.details?.services) {\n00844|       // –î–ª—è –ü–≠–ö –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API\n00845|       calc.details.services.forEach((service: any) => {\n00846|         if (service.price > 0) {\n00847|           details.push({\n00848|             service: service.name || '–£—Å–ª—É–≥–∞ –ü–≠–ö',\n00849|             description: service.description || '',\n00850|             price: service.price\n00851|           });\n00852|         }\n00853|       });\n00854|     } else {\n00855|       // –î–ª—è –¥—Ä—É–≥–∏—Ö –¢–ö - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\n00856|       details.push({\n00857|         service: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n00858|         description: `${form.fromCity} - ${form.toCity}`,\n00859|         price: calc.price\n00860|       });\n00861|       \n00862|       if (form.needInsurance && form.declaredValue > 0) {\n00863|         details.push({\n00864|           service: '–°—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ',\n00865|           description: `–ù–∞ —Å—É–º–º—É ${form.declaredValue.toLocaleString()} ‚ÇΩ`,\n00866|           price: Math.round(form.declaredValue * 0.02)\n00867|         });\n00868|       }\n00869|       \n00870|       if (form.needPackaging) {\n00871|         const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n00872|         details.push({\n00873|           service: '–£–ø–∞–∫–æ–≤–∫–∞',\n00874|           description: '',\n00875|           price: Math.round(totalWeight * 30)\n00876|         });\n00877|       }\n00878|     }\n00879|     \n00880|     return details;\n00881|   };\n00882| \n00883|   return (\n00884|     <div className=\"min-h-screen bg-gray-900 text-white p-4 relative\">\n00885|       <div className=\"max-w-7xl mx-auto\">\n00886|         <h1 className=\"text-2xl font-bold text-center mb-6 text-blue-400\">\n00887|           –ú–µ–∂–¥—É–≥–æ—Ä–æ–¥–Ω—è—è –¥–æ—Å—Ç–∞–≤–∫–∞ –õ–∞–≤—Å–∏—Ç\n00888|         </h1>\n00889|         \n00890|         <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-4 h-[90vh]\">\n00891|           {/* –õ–µ–≤–∞—è —á–∞—Å—Ç—å - —Ñ–æ—Ä–º–∞ */}\n00892|           <div className=\"space-y-3 overflow-y-auto pr-2\">\n00893|             {/* –ì—Ä—É–∑—ã */}\n00894|             <Card className=\"bg-gray-800 border-gray-700\">\n00895|               <CardHeader className=\"pb-3\">\n00896|                 <CardTitle className=\"text-white flex items-center gap-2 text-lg\">\n00897|                   <Truck className=\"h-4 w-4\" />\n00898|                   –ì—Ä—É–∑—ã\n00899|                 </CardTitle>\n00900|               </CardHeader>\n00901|               <CardContent className=\"space-y-3\">\n00902|                 {form.cargos.map((cargo, index) => (\n00903|                   <div key={cargo.id} className=\"border border-gray-600 rounded p-3\">\n00904|                     <div className=\"flex justify-between items-center mb-2\">\n00905|                       <h4 className=\"text-sm font-medium text-white\">–ì—Ä—É–∑ ‚Ññ{index + 1}</h4>\n00906|                       {form.cargos.length > 1 && (\n00907|                         <Button\n00908|                           variant=\"destructive\"\n00909|                           size=\"sm\"\n00910|                           onClick={() => removeCargo(cargo.id)}\n00911|                           className=\"h-6 text-xs\"\n00912|                         >\n00913|                           –£–¥–∞–ª–∏—Ç—å\n00914|                         </Button>\n00915|                       )}\n00916|                     </div>\n00917|                     <div className=\"grid grid-cols-2 gap-2\">\n00918|                       <div>\n00919|                         <Label className=\"text-white text-xs\">–î–ª–∏–Ω–∞ (—Å–º)</Label>\n00920|                         <Input\n00921|                           type=\"number\"\n00922|                           value={cargo.length || ''}\n00923|                           onChange={(e) => updateCargo(cargo.id, 'length', Number(e.target.value))}\n00924|                           className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n00925|                         />\n00926|                       </div>\n00927|                       <div>\n00928|                         <Label className=\"text-white text-xs\">–®–∏—Ä–∏–Ω–∞ (—Å–º)</Label>\n00929|                         <Input\n00930|                           type=\"number\"\n00931|                           value={cargo.width || ''}\n00932|                           onChange={(e) => updateCargo(cargo.id, 'width', Number(e.target.value))}\n00933|                           className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n00934|                         />\n00935|                       </div>\n00936|                       <div>\n00937|                         <Label className=\"text-white text-xs\">–í—ã—Å–æ—Ç–∞ (—Å–º)</Label>\n00938|                         <Input\n00939|                           type=\"number\"\n00940|                           value={cargo.height || ''}\n00941|                           onChange={(e) => updateCargo(cargo.id, 'height', Number(e.target.value))}\n00942|                           className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n00943|                         />\n00944|                       </div>\n00945|                       <div>\n00946|                         <Label className=\"text-white text-xs\">–í–µ—Å (–∫–≥)</Label>\n00947|                         <Input\n00948|                           type=\"number\"\n00949|                           value={cargo.weight || ''}\n00950|                           onChange={(e) => updateCargo(cargo.id, 'weight', Number(e.target.value))}\n00951|                           className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n00952|                         />\n00953|                       </div>\n00954|                     </div>\n00955|                   </div>\n00956|                 ))}\n00957|                 <Button onClick={addCargo} className=\"w-full h-8\" variant=\"outline\">\n00958|                   <Plus className=\"h-3 w-3 mr-1\" />\n00959|                   –î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–∑\n00960|                 </Button>\n00961|               </CardContent>\n00962|             </Card>\n00963| \n00964|             {/* –ú–∞—Ä—à—Ä—É—Ç */}\n00965|             <Card className=\"bg-gray-800 border-gray-700\">\n00966|               <CardHeader className=\"pb-3\">\n00967|                 <CardTitle className=\"text-white flex items-center gap-2 text-lg\">\n00968|                   <Map className=\"h-4 w-4\" />\n00969|                   –ú–∞—Ä—à—Ä—É—Ç\n00970|                 </CardTitle>\n00971|               </CardHeader>\n00972|               <CardContent className=\"space-y-3\">\n00973|                 {/* –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */}\n00974|                 <div className=\"space-y-2\">\n00975|                   <Label className=\"text-sm font-medium text-white\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</Label>\n00976|                   <div className=\"flex gap-3\">\n00977|                     <label className=\"flex items-center space-x-1\">\n00978|                       <input\n00979|                         type=\"radio\"\n00980|                         name=\"fromDelivery\"\n00981|                         checked={form.fromTerminal}\n00982|                         onChange={() => setForm(prev => ({ ...prev, fromTerminal: true, fromAddressDelivery: false }))}\n00983|                       />\n00984|                       <span className=\"text-white text-xs\">–û—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞</span>\n00985|                     </label>\n00986|                     <label className=\"flex items-center space-x-1\">\n00987|                       <input\n00988|                         type=\"radio\"\n00989|                         name=\"fromDelivery\"\n00990|                         checked={form.fromAddressDelivery}\n00991|                         onChange={() => setForm(prev => ({ ...prev, fromTerminal: false, fromAddressDelivery: true }))}\n00992|                       />\n00993|                       <span className=\"text-white text-xs\">–û—Ç –∞–¥—Ä–µ—Å–∞</span>\n00994|                     </label>\n00995|                   </div>\n00996|                   \n00997|                   <div>\n00998|                     <Label className=\"text-white text-xs\">–ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Label>\n00999|                     <Input\n01000|                       value={form.fromCity}\n01001|                       onChange={(e) => handleAddressChange('fromCity', e.target.value, e.target)}\n01002|                       placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥\"\n01003|                       className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n01004|                     />\n01005|                   </div>\n01006|                   \n01007|                   {form.fromAddressDelivery && (\n01008|                     <div>\n01009|                       <Label className=\"text-white text-xs\">–ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è</Label>\n01010|                       <Input\n01011|                         value={form.fromAddress}\n01012|                         onChange={(e) => handleAddressChange('fromAddress', e.target.value, e.target)}\n01013|                         placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å\"\n01014|                         className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n01015|                       />\n01016|                     </div>\n01017|                   )}\n01018|                 </div>\n01019| \n01020|                 <Separator className=\"bg-gray-600\" />\n01021| \n01022|                 {/* –î–æ—Å—Ç–∞–≤–∫–∞ */}\n01023|                 <div className=\"space-y-2\">\n01024|                   <Label className=\"text-sm font-medium text-white\">–î–æ—Å—Ç–∞–≤–∫–∞</Label>\n01025|                   <div className=\"flex gap-3\">\n01026|                     <label className=\"flex items-center space-x-1\">\n01027|                       <input\n01028|                         type=\"radio\"\n01029|                         name=\"toDelivery\"\n01030|                         checked={form.toTerminal}\n01031|                         onChange={() => setForm(prev => ({ ...prev, toTerminal: true, toAddressDelivery: false }))}\n01032|                       />\n01033|                       <span className=\"text-white text-xs\">–î–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞</span>\n01034|                     </label>\n01035|                     <label className=\"flex items-center space-x-1\">\n01036|                       <input\n01037|                         type=\"radio\"\n01038|                         name=\"toDelivery\"\n01039|                         checked={form.toAddressDelivery}\n01040|                         onChange={() => setForm(prev => ({ ...prev, toTerminal: false, toAddressDelivery: true }))}\n01041|                       />\n01042|                       <span className=\"text-white text-xs\">–î–æ –∞–¥—Ä–µ—Å–∞</span>\n01043|                     </label>\n01044|                   </div>\n01045|                   \n01046|                   <div>\n01047|                     <Label className=\"text-white text-xs\">–ì–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏</Label>\n01048|                     <Input\n01049|                       value={form.toCity}\n01050|                       onChange={(e) => handleAddressChange('toCity', e.target.value, e.target)}\n01051|                       placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –≥–æ—Ä–æ–¥\"\n01052|                       className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n01053|                     />\n01054|                   </div>\n01055|                   \n01056|                   {form.toAddressDelivery && (\n01057|                     <div>\n01058|                       <Label className=\"text-white text-xs\">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</Label>\n01059|                       <Input\n01060|                         value={form.toAddress}\n01061|                         onChange={(e) => handleAddressChange('toAddress', e.target.value, e.target)}\n01062|                         placeholder=\"–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –∞–¥—Ä–µ—Å\"\n01063|                         className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n01064|                       />\n01065|                     </div>\n01066|                   )}\n01067|                 </div>\n01068|               </CardContent>\n01069|             </Card>\n01070| \n01071|             {/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã */}\n01072|             <Card className=\"bg-gray-800 border-gray-700\">\n01073|               <CardHeader className=\"pb-3\">\n01074|                 <CardTitle className=\"text-white text-lg\">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</CardTitle>\n01075|               </CardHeader>\n01076|               <CardContent className=\"space-y-3\">\n01077|                 <div>\n01078|                   <Label className=\"text-white text-xs\">–û–±—ä—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (—Ä—É–±.)</Label>\n01079|                   <Input\n01080|                     type=\"number\"\n01081|                     value={form.declaredValue || ''}\n01082|                     onChange={(e) => setForm(prev => ({ ...prev, declaredValue: Number(e.target.value) }))}\n01083|                     className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n01084|                   />\n01085|                 </div>\n01086|                 \n01087|                 <div className=\"space-y-2\">\n01088|                   <div className=\"flex items-center space-x-2\">\n01089|                     <Checkbox\n01090|                       id=\"packaging\"\n01091|                       checked={form.needPackaging}\n01092|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needPackaging: checked as boolean }))}\n01093|                     />\n01094|                     <Label htmlFor=\"packaging\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è —É–ø–∞–∫–æ–≤–∫–∞</Label>\n01095|                   </div>\n01096|                   \n01097|                   <div className=\"flex items-center space-x-2\">\n01098|                     <Checkbox\n01099|                       id=\"insurance\"\n01100|                       checked={form.needInsurance}\n01101|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needInsurance: checked as boolean }))}\n01102|                     />\n01103|                     <Label htmlFor=\"insurance\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞</Label>\n01104|                   </div>\n01105|                   \n01106|                   <div className=\"flex items-center space-x-2\">\n01107|                     <Checkbox\n01108|                       id=\"loading\"\n01109|                       checked={form.needLoading}\n01110|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needLoading: checked as boolean }))}\n01111|                     />\n01112|                     <Label htmlFor=\"loading\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≥—Ä—É–∑–∫–∞/—Ä–∞–∑–≥—Ä—É–∑–∫–∞</Label>\n01113|                   </div>\n01114|                   \n01115|                   <div className=\"flex items-center space-x-2\">\n01116|                     <Checkbox\n01117|                       id=\"carry\"\n01118|                       checked={form.needCarry}\n01119|                       onCheckedChange={(checked) => setForm(prev => ({ ...prev, needCarry: checked as boolean }))}\n01120|                     />\n01121|                     <Label htmlFor=\"carry\" className=\"text-white text-xs\">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—ä–µ–º</Label>\n01122|                   </div>\n01123|                   \n01124|                   {form.needCarry && (\n01125|                     <div className=\"ml-6 space-y-2 border-l-2 border-gray-600 pl-3\">\n01126|                       <div>\n01127|                         <Label className=\"text-white text-xs\">–≠—Ç–∞–∂</Label>\n01128|                         <Input\n01129|                           type=\"number\"\n01130|                           value={form.floor}\n01131|                           onChange={(e) => setForm(prev => ({ ...prev, floor: Number(e.target.value) }))}\n01132|                           className=\"bg-gray-700 border-gray-600 h-8 text-white\"\n01133|                         />\n01134|                       </div>\n01135|                       <div className=\"flex items-center space-x-2\">\n01136|                         <Checkbox\n01137|                           id=\"freightLift\"\n01138|                           checked={form.hasFreightLift}\n01139|                           onCheckedChange={(checked) => setForm(prev => ({ ...prev, hasFreightLift: checked as boolean }))}\n01140|                         />\n01141|                         <Label htmlFor=\"freightLift\" className=\"text-white text-xs\">–ù–∞–ª–∏—á–∏–µ –≥—Ä—É–∑–æ–≤–æ–≥–æ –ª–∏—Ñ—Ç–∞</Label>\n01142|                       </div>\n01143|                     </div>\n01144|                   )}\n01145|                 </div>\n01146|                 \n01147|                 <Button \n01148|                   onClick={handleCalculate} \n01149|                   className=\"w-full bg-blue-600 hover:bg-blue-700 h-8\" \n01150|                   disabled={calculating}\n01151|                 >\n01152|                   {calculating ? '–†–∞—Å—á–µ—Ç...' : '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å'}\n01153|                 </Button>\n01154|               </CardContent>\n01155|             </Card>\n01156|           </div>\n01157| \n01158|           {/* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã */}\n01159|           <div className=\"space-y-3 overflow-y-auto\">\n01160|             {calculations.length > 0 && (\n01161|               <div className=\"space-y-3\">\n01162|                 <div className=\"flex justify-between items-center\">\n01163|                   <h2 className=\"text-xl font-bold text-blue-400\">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>\n01164|                   <Button onClick={exportToPDF} variant=\"outline\" size=\"sm\" className=\"h-7 text-xs\">\n01165|                     –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF\n01166|                   </Button>\n01167|                 </div>\n01168|                 \n01169|                 {calculations.map((calc, index) => (\n01170|                   <Card key={index} className=\"bg-gray-800 border-gray-700\">\n01171|                     <CardHeader className=\"pb-2\">\n01172|                       <div className=\"flex justify-between items-center\">\n01173|                         <CardTitle className=\"text-white flex items-center gap-2 text-sm\">\n01174|                           <Building2 className=\"h-4 w-4\" />\n01175|                           {calc.company}\n01176|                         </CardTitle>\n01177|                         {calc.error ? (\n01178|                           <Badge variant=\"destructive\" className=\"text-xs\">–û—à–∏–±–∫–∞</Badge>\n01179|                         ) : (\n01180|                           <Badge variant=\"default\" className=\"bg-green-600 text-xs\">\n01181|                             {calc.price.toLocaleString()} ‚ÇΩ\n01182|                           </Badge>\n01183|                         )}\n01184|                       </div>\n01185|                     </CardHeader>\n01186|                     <CardContent className=\"pt-0\">\n01187|                       {calc.error ? (\n01188|                         <Alert className=\"border-red-600\">\n01189|                           <AlertDescription className=\"text-white text-xs\">{calc.error}</AlertDescription>\n01190|                         </Alert>\n01191|                       ) : (\n01192|                         <div className=\"space-y-2\">\n01193|                           <p className=\"text-white text-xs\"><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å:</strong> {calc.price.toLocaleString()} ‚ÇΩ</p>\n01194|                           <p className=\"text-white text-xs\"><strong>–°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏:</strong> {calc.days} –¥–Ω–µ–π</p>\n01195|                           \n01196|                           <div className=\"flex gap-2 mt-2\">\n01197|                             <Button\n01198|                               variant=\"outline\"\n01199|                               size=\"sm\"\n01200|                               onClick={() => toggleDetails(calc.company)}\n01201|                               className=\"h-6 text-xs\"\n01202|                             >\n01203|                               {expandedDetails[calc.company] ? '–°–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ'}\n01204|                             </Button>\n01205|                             <Button\n01206|                               variant=\"outline\"\n01207|                               size=\"sm\"\n01208|                               onClick={() => toggleDebugInfo(calc.company)}\n01209|                               className=\"h-6 text-xs\"\n01210|                             >\n01211|                               {expandedDebugInfo[calc.company] ? '–°–∫—Ä—ã—Ç—å –æ—Ç–ª–∞–¥–∫—É' : '–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è'}\n01212|                             </Button>\n01213|                           </div>\n01214|                           \n01215|                           {/* –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ */}\n01216|                           <Collapsible open={expandedDetails[calc.company]}>\n01217|                             <CollapsibleContent className=\"mt-2\">\n01218|                               <div className=\"bg-gray-900 p-3 rounded text-xs\">\n01219|                                 <h4 className=\"font-bold mb-2 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞:</h4>\n01220|                                 {(() => {\n01221|                                   const details = parseCalculationDetails(calc);\n01222|                                   const totalPrice = details.reduce((sum, detail) => sum + detail.price, 0);\n01223|                                   \n01224|                                   return (\n01225|                                     <div className=\"space-y-1\">\n01226|                                       {details.map((detail, idx) => (\n01227|                                         <div key={idx} className=\"flex justify-between text-white\">\n01228|                                           <div>\n01229|                                             <div className=\"font-medium\">{detail.service}</div>\n01230|                                             {detail.description && (\n01231|                                               <div className=\"text-gray-400 text-xs\">{detail.description}</div>\n01232|                                             )}\n01233|                                           </div>\n01234|                                           <div className=\"font-medium\">{detail.price.toLocaleString()} ‚ÇΩ</div>\n01235|                                         </div>\n01236|                                       ))}\n01237| \n01238|                                     </div>\n01239|                                   );\n01240|                                 })()}\n01241|                               </div>\n01242|                             </CollapsibleContent>\n01243|                           </Collapsible>\n01244|                           \n01245|                           {/* –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è */}\n01246|                           <Collapsible open={expandedDebugInfo[calc.company]}>\n01247|                             <CollapsibleContent className=\"mt-2\">\n01248|                               <div className=\"bg-gray-900 p-3 rounded text-xs\">\n01249|                                 <h4 className=\"font-bold mb-2 text-white\">–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h4>\n01250|                                 \n01251|                                 {calc.apiUrl && (\n01252|                                   <div className=\"mb-3\">\n01253|                                     <h5 className=\"font-bold mb-1 text-white\">–ó–∞–ø—Ä–æ—Å –∫ API:</h5>\n01254|                                     <p className=\"text-gray-300 break-all\">URL: {calc.apiUrl}</p>\n01255|                                   </div>\n01256|                                 )}\n01257|                                 \n01258|                                 {calc.sessionId && (\n01259|                                   <div className=\"mb-3\">\n01260|                                     <h5 className=\"font-bold mb-1 text-white\">Session ID:</h5>\n01261|                                     <p className=\"text-gray-300\">{calc.sessionId}</p>\n01262|                                   </div>\n01263|                                 )}\n01264|                                 \n01265|                                 {calc.requestData && (\n01266|                                   <div className=\"mb-3\">\n01267|                                     <h5 className=\"font-bold mb-1 text-white\">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å:</h5>\n01268|                                     <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n01269|                                       {JSON.stringify(calc.requestData, null, 2)}\n01270|                                     </pre>\n01271|                                   </div>\n01272|                                 )}\n01273|                                 \n01274|                                 {calc.responseData && (\n01275|                                   <div className=\"mb-3\">\n01276|                                     <h5 className=\"font-bold mb-1 text-white\">–ü–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç:</h5>\n01277|                                     <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n01278|                                       {JSON.stringify(calc.responseData, null, 2)}\n01279|                                     </pre>\n01280|                                   </div>\n01281|                                 )}\n01282|                                 \n01283|                                 {calc.details && (\n01284|                                   <div className=\"mb-3\">\n01285|                                     <h5 className=\"font-bold mb-1 text-white\">–î–µ—Ç–∞–ª–∏ —Ä–∞—Å—á–µ—Ç–∞ (JSON):</h5>\n01286|                                     <pre className=\"whitespace-pre-wrap overflow-auto max-h-32 text-gray-300 bg-gray-950 p-2 rounded text-xs\">\n01287|                                       {JSON.stringify(calc.details, null, 2)}\n01288|                                     </pre>\n01289|                                   </div>\n01290|                                 )}\n01291|                               </div>\n01292|                             </CollapsibleContent>\n01293|                           </Collapsible>\n01294|                         </div>\n01295|                       )}\n01296|                     </CardContent>\n01297|                   </Card>\n01298|                 ))}\n01299|               </div>\n01300|             )}\n01301|             \n01302|             {/* –°–ø–∏—Å–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –¢–ö */}\n01303|             <Card className=\"bg-gray-800 border-gray-700\">\n01304|               <CardHeader className=\"pb-2\">\n01305|                 <CardTitle className=\"text-white text-sm\">–ü–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏</CardTitle>\n01306|               </CardHeader>\n01307|               <CardContent>\n01308|                 <div className=\"grid grid-cols-2 gap-2\">\n01309|                   {COMPANIES.map((company, index) => (\n01310|                     <div key={index} className=\"flex items-center gap-2 p-2 bg-gray-700 rounded\">\n01311|                       <span className=\"text-lg\">{company.logo}</span>\n01312|                       <div>\n01313|                         <p className=\"font-medium text-white text-xs\">{company.name}</p>\n01314|                         <Badge variant={company.connected ? \"default\" : \"destructive\"} className=\"text-xs\">\n01315|                           {company.connected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–∞' : '–û—Ç–∫–ª—é—á–µ–Ω–∞'}\n01316|                         </Badge>\n01317|                       </div>\n01318|                     </div>\n01319|                   ))}\n01320|                 </div>\n01321|               </CardContent>\n01322|             </Card>\n01323|           </div>\n01324|         </div>\n01325|       </div>\n01326| \n01327|       {/* –ê–≤—Ç–æ–ø–æ–¥—Å–∫–∞–∑–∫–∏ */}\n01328|       {showSuggestions && suggestions.length > 0 && (\n01329|         <div \n01330|           className=\"fixed z-50 bg-gray-800 border border-gray-700 rounded-md shadow-lg max-w-sm w-full max-h-60 overflow-y-auto\"\n01331|           style={{\n01332|             top: suggestionPosition.top,\n01333|             left: suggestionPosition.left\n01334|           }}\n01335|         >\n01336|           <div className=\"p-1\">\n01337|             {suggestions.map((suggestion, index) => (\n01338|               <div\n01339|                 key={index}\n01340|                 className=\"p-2 hover:bg-gray-700 cursor-pointer text-xs text-white rounded transition-colors\"\n01341|                 onClick={() => selectSuggestion(suggestion)}\n01342|               >\n01343|                 {suggestion.value}\n01344|               </div>\n01345|             ))}\n01346|           </div>\n01347|         </div>\n01348|       )}\n01349|     </div>\n01350|   );\n01351| }\n</file>",
    "metadata": {
      "preview": "'use client';\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Plus, Truck, Building2, Map } from 'lucide-react';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { Collapsible, CollapsibleContent } from '@/components/ui/collapsible';\n\ninterface Cargo {\n  id: string;\n  length: number;\n  width: number;\n  height: number;\n  weight: number;"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1758785245654,
      "end": 1758785245672
    }
  }
}