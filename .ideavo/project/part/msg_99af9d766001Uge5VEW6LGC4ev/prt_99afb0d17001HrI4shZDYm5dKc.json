{
  "id": "prt_99afb0d17001HrI4shZDYm5dKc",
  "messageID": "msg_99af9d766001Uge5VEW6LGC4ev",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01Psb2xtRzSxCRduEAzjKP1R",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/.ideavorules"
    },
    "output": "<file>\n00001| # Project Rules and Guidelines\n00002| \n00003| ## Next.js 14 App Router Best Practices\n00004| \n00005| ### App Directory Structure\n00006| \n00007| - Use the `app/` directory for App Router (not `pages/`)\n00008| - File-based routing with folders and special files (`page.tsx`, `layout.tsx`, `loading.tsx`, `error.tsx`)\n00009| - API routes are now Route Handlers in `app/api/*/route.ts`\n00010| \n00011| ### Server vs Client Components\n00012| \n00013| #### Server Components (Default)\n00014| \n00015| - Use by default for better performance and security\n00016| - Direct database access and API calls without exposing credentials\n00017| - Automatic request memoization with `fetch()`\n00018| - No need for `\"use client\"` directive\n00019| \n00020| #### Client Components (\"use client\")\n00021| \n00022| - Add `\"use client\"` directive ONLY when needed:\n00023|   - Interactive components (onClick, onChange, useEffect, useState, etc.)\n00024|   - Browser-only APIs (localStorage, document, window, navigator)\n00025|   - React hooks (useState, useEffect, useContext, etc.)\n00026|   - Event handlers and user interactions\n00027| - **CRITICAL**: Place directive at the very top of the file (first line)\n00028| - Use sparingly - prefer Server Components by default\n00029| - Once a component uses `\"use client\"`, all its children are also client components\n00030| \n00031| #### Server Actions (\"use server\")\n00032| \n00033| - Add `\"use server\"` for form actions and server-side mutations\n00034| - **CRITICAL**: Must be at the very top of the function or file\n00035| - Use for database mutations called from client components\n00036| - Enables progressive enhancement with forms\n00037| - Can be defined inline in Server Components or in separate files\n00038| \n00039| #### Directive Placement Rules\n00040| \n00041| - **ALWAYS** place directives as the first line of the file\n00042| - **NEVER** add directives at the end or middle of files\n00043| - **NEVER** add `\"use client\"` unless component needs browser APIs or interactivity\n00044| \n00045| ### API Route Handlers (App Router)\n00046| \n00047| - File naming: `app/api/*/route.ts` (not `pages/api/*`)\n00048| - HTTP methods: Export named functions (`GET`, `POST`, `PUT`, `DELETE`, etc.)\n00049| - Use Web APIs (`Request`, `Response`) instead of Node.js APIs\n00050| \n00051| ### Performance Optimization\n00052| \n00053| - Use parallel data fetching to avoid waterfalls\n00054| - Implement streaming with `<Suspense>` and `loading.tsx`\n00055| - Leverage automatic request memoization\n00056| - Prefer Server Components for initial data loading\n00057| \n00058| ### Error Handling\n00059| \n00060| - Avoid hydration mismatches: `\"Warning: Extra attributes from the server\"`\n00061| - Use `error.tsx` for route-level error boundaries\n00062| - Handle async errors in Server Components properly\n00063| \n00064| ## Technology Stack\n00065| \n00066| ### Core Dependencies\n00067| This template includes:\n00068| - **Next.js 14** - React framework with App Router\n00069| - **React 18** - UI library\n00070| - **TypeScript** - Type safety\n00071| - **Tailwind CSS** - Utility-first CSS framework\n00072| - **shadcn/ui** - Pre-built component library\n00073| - **Lucide React** - Icon library\n00074| - **Prisma ORM** - Database toolkit\n00075| - **Supabase** - Backend-as-a-Service (Database & Authentication)\n00076| \n00077| ### Database Guidelines\n00078| - **CRITICAL**: Only use database features when user explicitly requests them OR database is already actively used (existing models/migrations/database calls). Never assume database integration just because Supabase/Prisma exist in package.json.\n00079| - Use **Supabase** as the PostgreSQL database backend\n00080| - Use **Prisma** for all database operations and ORM\n00081| - **CRITICAL**: Before any database operations or prisma model creation, must check if Supabase credentials are properly configured\n00082| - **Required credentials for database operations**:\n00083|   - `DATABASE_URL` - Supabase database connection string\n00084|   - `NEXT_PUBLIC_SUPABASE_URL` - Supabase project URL  \n00085|   - `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Supabase anonymous key\n00086| - **If credentials missing/invalid**: Uncomment Supabase variables in `lib/env-config.ts`, add them to ENV_VARIABLES array, instruct user to set up required environment variables first, and DO NOT continue with database implementation until credentials are confirmed working\n00087| - **When implementing database features**: Define models in `prisma/schema.prisma` with `provider = \"postgresql\"`\n00088| - Use TypeScript types generated by Prisma Client\n00089| - Follow Prisma naming conventions (PascalCase for models, camelCase for fields)\n00090| - Use appropriate field types and constraints\n00091| - Always include `id`, `createdAt`, and `updatedAt` fields for tracking\n00092| - **CRITICAL**: Maintain data integrity - never lose data during database operations. Always use transactions for multi-table operations and implement proper rollback mechanisms\n00093| \n00094| #### Database Migration Best Practices (CRITICAL)\n00095| - **NEVER** use `bunx prisma db push` - this command is prohibited and should never be used, always use proper migrations: `bunx prisma migrate dev --name migration_name`\n00096| - **Only after credentials are confirmed**: Use `bunx prisma migrate dev --name migration_name`\n00097| - **If migration fails due to credential errors**: Immediately revert any created migration files and instruct user to set up credentials first\n00098| - Use descriptive names for migrations (e.g., `add_users_table`, `create_products_and_categories`)\n00099| - Prisma automatically generates timestamps - do NOT manually add timestamps to migration names\n00100| - **NEVER** create migration files without working database connection to avoid migration state inconsistencies\n00101| - **CRITICAL**: All database schema changes must go through proper migration workflow - no exceptions\n00102| - **CRITICAL**: When migrating from localStorage to database, completely remove all localStorage code and replace with database implementation throughout the entire codebase - ensure no mixed implementations or inconsistencies remain\n00103| \n00104| #### Security Requirements (NON-NEGOTIABLE):\n00105| - ALWAYS enable RLS: ALTER TABLE table_name ENABLE ROW LEVEL SECURITY;\n00106| - Add appropriate RLS policies for CRUD operations\n00107| - Use default values for columns where appropriate\n00108| - Use foreign key constraints\n00109| \n00110| #### Authentication Guidelines\n00111| - Use **Supabase Auth** for all authentication needs\n00112| - Implement proper session management with Server Components\n00113| - Handle authentication state with React context/providers\n00114| - ALWAYS use Supabase's built-in authentication (never custom auth tables)\n00115| - Protect routes with authentication middleware\n00116| - Use Supabase's built-in user management features\n00117| \n00118| #### TypeScript Type Handling with Prisma\n00119| - **CRITICAL**: Prisma returns `null` for nullable fields, but TypeScript interfaces often use `undefined`\n00120| - Always handle null/undefined conversion when mapping Prisma results to interface types\n00121| - Use `field || undefined` pattern to convert null to undefined when needed\n00122| - Create helper functions to handle type conversion consistently\n00123| - Example pattern:\n00124|   ```typescript\n00125|   return {\n00126|     id: user.id,\n00127|     email: user.email,\n00128|     displayName: user.displayName || undefined,\n00129|     avatar: user.avatar || undefined,\n00130|   }\n00131|   ```\n00132| \n00133| ## UI and Styling Guidelines\n00134| \n00135| ### Icons and Images\n00136| - Use **Lucide React** for all icons and logos\n00137| - Do NOT install additional icon packages unless absolutely necessary\n00138| - Use Unsplash stock photos with known valid URLs only\n00139| \n00140| ### Component Library\n00141| - Use **shadcn/ui** components as the primary UI library\n00142| - Do NOT install other UI theme packages unless explicitly requested\n00143| - Customize components through Tailwind CSS classes\n00144| \n00145| ## Project Type Detection\n00146| \n00147| ### New Project Development Rules\n00148| - Replace \"Start prompting.\" with actual app content and remove placeholder text to create the entry point UI.\n00149| - Prioritize instant user gratification with simple, working features\n00150| - **NEVER** implement authentication or database features in new projects unless explicitly requested\n00151| - Use static data, localStorage, or simple state management instead of databases\n00152| - Build features that provide immediate visual or functional value\n00153| - Implement basic UI interactions and visual feedback before adding backend complexity\n00154| \n00155| ### Existing Project Rules\n00156| - Authentication and database features are allowed when already established in the codebase or explicitly requested by user\n00157| - Complex implementations are acceptable when building on existing foundation\n00158| \n00159| ## File Management Rules\n00160| \n00161| ### Protected Files - NEVER MODIFY\n00162| ```\n00163| components/ui/*          # shadcn/ui components\n00164| hooks/use-toast.ts       # Toast hook implementation\n00165| .gitignore              # Git ignore configuration\n00166| env-check/*             # env variable validation\n00167| .ideavo/*               # IDE configuration\n00168| ```\n00169| \n00170| ### Environment Variables\n00171| - Use `.env` file for ALL environment variables\n00172| - NEVER create `.env.local`, `.env.example`, or other env files\n00173| - Environment variable checking page available at `/env-check`\n00174| - **CRITICAL**: When adding new environment variables, update `lib/env-config.ts`. Follow the ENV_VARIABLES array structure: `name`, `description`, `required` and `instructions`. Set `required: false` by default; only use `required: true` when missing the variable breaks core app functionality (e.g. auth, database).\n00175| - **CRITICAL**: When adding database/Supabase features, uncomment the Supabase variables in `lib/env-config.ts` and add them to the ENV_VARIABLES array\n00176| - **CRITICAL**: Only add environment variables to .env and `lib/env-config.ts` when they are actually required by existing codebase functionality. Do not create placeholder or mock variables.\n00177| \n00178| ## Code Quality Standards\n00179| \n00180| ### Error Handling\n00181| - Always handle database errors appropriately\n00182| - Use try-catch blocks for async operations\n00183| - Provide meaningful error messages\n00184| \n00185| ### Performance\n00186| - Use Server Components when possible\n00187| - Implement proper data fetching patterns\n00188| - Optimize database queries with Prisma\n00189| - Leverage Supabase's real-time features when needed\n00190| \n00191| ### Dependency Management\n00192| - Always verify dependencies exist in `package.json` before importing modules\n00193| - Always search on web for implementation details and documentations for third party libraries, never make assumptions\n00194| \n00195| ### Development Workflow\n00196| - Always verify changes ensure logic is robust, handles all edge cases, and doesn't break existing functionality\n00197| - Test builds after significant changes\n00198| - Keep running build until build succeeds without any errors\n</file>",
    "metadata": {
      "preview": "# Project Rules and Guidelines\n\n## Next.js 14 App Router Best Practices\n\n### App Directory Structure\n\n- Use the `app/` directory for App Router (not `pages/`)\n- File-based routing with folders and special files (`page.tsx`, `layout.tsx`, `loading.tsx`, `error.tsx`)\n- API routes are now Route Handlers in `app/api/*/route.ts`\n\n### Server vs Client Components\n\n#### Server Components (Default)\n\n- Use by default for better performance and security\n- Direct database access and API calls without exposing credentials\n- Automatic request memoization with `fetch()`\n- No need for `\"use client\"` directive\n\n#### Client Components (\"use client\")"
    },
    "title": ".ideavorules",
    "time": {
      "start": 1759241768826,
      "end": 1759241768828
    }
  }
}