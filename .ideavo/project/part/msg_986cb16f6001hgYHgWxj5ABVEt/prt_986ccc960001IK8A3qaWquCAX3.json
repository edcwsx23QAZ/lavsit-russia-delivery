{
  "id": "prt_986ccc960001IK8A3qaWquCAX3",
  "messageID": "msg_986cb16f6001hgYHgWxj5ABVEt",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "read",
  "callID": "toolu_01BADHxRhkKRKMR34PPCWHsb",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/app/page.tsx",
      "offset": 890,
      "limit": 400
    },
    "output": "<file>\n00891|       \n00892|       return null;\n00893|     } catch (error) {\n00894|       console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ø–Ω–¥–µ–∫—Å:', error);\n00895|       return null;\n00896|     }\n00897|   };\n00898| \n00899|   // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API\n00900|   const calculatePEK = async (): Promise<CalculationResult> => {\n00901|     const apiUrl = 'https://kabinet.pecom.ru/api/v1/calculateprice/';\n00902|     \n00903|     try {\n00904|       // –ü–æ–ª—É—á–∞–µ–º ID —Å–∫–ª–∞–¥–æ–≤ –ø–æ –≥–æ—Ä–æ–¥–∞–º\n00905|       const senderWarehouseId = getPekWarehouseId(form.fromCity);\n00906|       const receiverWarehouseId = getPekWarehouseId(form.toCity);\n00907|       \n00908|       if (!senderWarehouseId || !receiverWarehouseId) {\n00909|         return {\n00910|           company: '–ü–≠–ö',\n00911|           price: 0,\n00912|           days: 0,\n00913|           error: `–°–∫–ª–∞–¥ –ü–≠–ö –Ω–µ –Ω–∞–π–¥–µ–Ω. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≥–æ—Ä–æ–¥–∞: ${!senderWarehouseId ? form.fromCity : ''} ${!receiverWarehouseId ? form.toCity : ''}`.trim(),\n00914|           apiUrl,\n00915|           requestData: { fromCity: form.fromCity, toCity: form.toCity },\n00916|           responseData: null\n00917|         };\n00918|       }\n00919| \n00920|       // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞—Ç—É –∑–∞–≤—Ç—Ä–∞ –¥–ª—è –∑–∞–±–æ—Ä–∞\n00921|       const tomorrow = new Date();\n00922|       tomorrow.setDate(tomorrow.getDate() + 1);\n00923|       const plannedDateTime = tomorrow.toISOString().slice(0, 19); // 2023-02-28T14:00:00\n00924| \n00925|       // –§–æ—Ä–º–∏—Ä—É–µ–º –º–∞—Å—Å–∏–≤ –≥—Ä—É–∑–æ–≤\n00926|       const cargos = form.cargos.map(cargo => ({\n00927|         length: cargo.length / 100, // –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–µ—Ç—Ä—ã\n00928|         width: cargo.width / 100,\n00929|         height: cargo.height / 100,\n00930|         volume: (cargo.length * cargo.width * cargo.height) / 1000000, // –º3\n00931|         weight: cargo.weight,\n00932|         isHP: form.needPackaging, // –∑–∞—â–∏—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞\n00933|         sealingPositionsCount: 0\n00934|       }));\n00935| \n00936|       // –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å –∫ API –ü–≠–ö\n00937|       const requestData = {\n00938|         currencyCode: \"643\", // —Ä—É–±–ª–∏\n00939|         types: [3], // —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n00940|         senderWarehouseId,\n00941|         receiverWarehouseId,\n00942|         isOpenCarSender: false,\n00943|         isOpenCarReceiver: false,\n00944|         isHyperMarket: false,\n00945|         plannedDateTime,\n00946|         isInsurance: form.needInsurance && form.declaredValue > 0,\n00947|         isInsurancePrice: form.needInsurance ? form.declaredValue : 0,\n00948|         isPickUp: form.fromAddressDelivery,\n00949|         isDelivery: form.toAddressDelivery,\n00950|         needReturnDocuments: false,\n00951|         needArrangeTransportationDocuments: false,\n00952|         senderDistanceType: 0,\n00953|         receiverDistanceType: 0,\n00954|         cargos\n00955|       };\n00956| \n00957|       // –î–æ–±–∞–≤–ª—è–µ–º —É—Å–ª—É–≥–∏ –ü–†–† –µ—Å–ª–∏ –Ω—É–∂–Ω–æ\n00958|       if (form.needCarry) {\n00959|         requestData.pickupServices = {\n00960|           isLoading: true,\n00961|           floor: 0,\n00962|           carryingDistance: 0,\n00963|           isElevator: false\n00964|         };\n00965|         requestData.deliveryServices = {\n00966|           isLoading: true,\n00967|           floor: 0,\n00968|           carryingDistance: 0,\n00969|           isElevator: false\n00970|         };\n00971|       }\n00972| \n00973|       // –î–æ–±–∞–≤–ª—è–µ–º –∞–¥—Ä–µ—Å–∞ –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞\n00974|       if (form.fromAddressDelivery) {\n00975|         requestData.pickup = {\n00976|           address: form.fromAddress || `–†–æ—Å—Å–∏—è, ${form.fromCity}`\n00977|         };\n00978|       }\n00979|       \n00980|       if (form.toAddressDelivery) {\n00981|         requestData.delivery = {\n00982|           address: form.toAddress || `–†–æ—Å—Å–∏—è, ${form.toCity}`\n00983|         };\n00984|       }\n00985| \n00986|       console.log('üöÄ –ü–≠–ö API –∑–∞–ø—Ä–æ—Å:', requestData);\n00987| \n00988|       const response = await fetch(apiUrl, {\n00989|         method: 'POST',\n00990|         headers: {\n00991|           'Content-Type': 'application/json;charset=utf-8',\n00992|           'Accept': 'application/json',\n00993|           'Authorization': `Bearer 624FC93CA677B23673BB476D4982294DC27E246F`\n00994|         },\n00995|         body: JSON.stringify(requestData)\n00996|       });\n00997| \n00998|       const data = await response.json();\n00999|       console.log('üöÄ –ü–≠–ö API –æ—Ç–≤–µ—Ç:', data);\n01000| \n01001|       if (response.ok && !data.hasError && data.transfers && data.transfers.length > 0) {\n01002|         const transfer = data.transfers[0]; // –±–µ—Ä–µ–º –ø–µ—Ä–≤—ã–π —Ç–∞—Ä–∏—Ñ (–∞–≤—Ç–æ)\n01003|         \n01004|         if (!transfer.hasError) {\n01005|           // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Å–ª—É–≥\n01006|           const services = [];\n01007|           let totalCalculated = 0;\n01008| \n01009|           const processServices = (servicesList: any[], parentName = '') => {\n01010|             servicesList.forEach(service => {\n01011|               const serviceName = parentName ? `${parentName} - ${service.info}` : service.info;\n01012|               const serviceCost = parseFloat(service.cost) || 0;\n01013|               \n01014|               if (serviceCost > 0) {\n01015|                 services.push({\n01016|                   name: serviceName,\n01017|                   description: service.serviceType,\n01018|                   price: serviceCost\n01019|                 });\n01020|                 totalCalculated += serviceCost;\n01021|               }\n01022| \n01023|               // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏\n01024|               if (service.services && Array.isArray(service.services)) {\n01025|                 processServices(service.services, serviceName);\n01026|               }\n01027|             });\n01028|           };\n01029| \n01030|           if (transfer.services) {\n01031|             processServices(transfer.services);\n01032|           }\n01033| \n01034|           return {\n01035|             company: '–ü–≠–ö',\n01036|             price: Math.round(transfer.costTotal),\n01037|             days: transfer.estDeliveryTime || 3,\n01038|             details: {\n01039|               note: `–î–æ—Å—Ç–∞–≤–∫–∞ ${form.fromCity} - ${form.toCity} (—Ç–∞—Ä–∏—Ñ ${transfer.type})`,\n01040|               services: services.length > 0 ? services : [\n01041|                 {\n01042|                   name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n01043|                   description: `${form.fromCity} - ${form.toCity}`,\n01044|                   price: Math.round(transfer.costTotal)\n01045|                 }\n01046|               ]\n01047|             },\n01048|             requestData,\n01049|             responseData: data,\n01050|             apiUrl\n01051|           };\n01052|         } else {\n01053|           throw new Error(transfer.errorMessage || '–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞ –ü–≠–ö');\n01054|         }\n01055|       } else {\n01056|         throw new Error(data.errorMessage || '–û—à–∏–±–∫–∞ API –ü–≠–ö');\n01057|       }\n01058|       \n01059|     } catch (error: any) {\n01060|       console.error('üö® –û—à–∏–±–∫–∞ –ü–≠–ö API:', error);\n01061|       \n01062|       // –§–æ–ª–ª–±—ç–∫ —Ä–∞—Å—á–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ\n01063|       const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n01064|       let basePrice = totalWeight * 18; // 18 —Ä—É–± –∑–∞ –∫–≥ –¥–ª—è –ü–≠–ö\n01065|       \n01066|       if (form.fromAddressDelivery) basePrice += 600;\n01067|       if (form.toAddressDelivery) basePrice += 600;\n01068|       if (form.needInsurance && form.declaredValue > 0) basePrice += form.declaredValue * 0.012;\n01069|       if (form.needPackaging) basePrice += totalWeight * 25;\n01070|       if (form.needCarry) basePrice += 500;\n01071|       \n01072|       return {\n01073|         company: '–ü–≠–ö',\n01074|         price: Math.round(basePrice),\n01075|         days: 3,\n01076|         details: {\n01077|           note: '–ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á–µ—Ç –ø–æ –±–∞–∑–æ–≤—ã–º —Ç–∞—Ä–∏—Ñ–∞–º –ü–≠–ö (–æ—à–∏–±–∫–∞ API)',\n01078|           services: [\n01079|             {\n01080|               name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n01081|               description: `${form.fromCity} - ${form.toCity}`,\n01082|               price: Math.round(basePrice)\n01083|             }\n01084|           ]\n01085|         },\n01086|         requestData: null,\n01087|         responseData: null,\n01088|         apiUrl,\n01089|         error: `–û—à–∏–±–∫–∞ API –ü–≠–ö: ${error.message}. –ü–æ–∫–∞–∑–∞–Ω –ø—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á–µ—Ç.`\n01090|       };\n01091|     }\n01092|   };\n01093| \n01094|   // –ü–æ–ª—É—á–µ–Ω–∏–µ ID —Å–∫–ª–∞–¥–∞ –ü–≠–ö –ø–æ –∞–¥—Ä–µ—Å—É —á–µ—Ä–µ–∑ API\n01095|   const findPekWarehouseId = async (address: string): Promise<string | null> => {\n01096|     try {\n01097|       // –ò—Å–ø–æ–ª—å–∑—É–µ–º API –ü–≠–ö –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–∫–ª–∞–¥–∞ –ø–æ –∞–¥—Ä–µ—Å—É\n01098|       const response = await fetch('https://api.pecom.ru/v1/branches/findzonebyaddress', {\n01099|         method: 'POST',\n01100|         headers: {\n01101|           'Content-Type': 'application/json',\n01102|           'Authorization': 'Basic ' + btoa('C04C5BF2AE367BDCBDC71E7DA520A69B167D1984:')\n01103|         },\n01104|         body: JSON.stringify({\n01105|           address: address\n01106|         })\n01107|       });\n01108| \n01109|       if (response.ok) {\n01110|         const data = await response.json();\n01111|         return data.mainWarehouseId || null;\n01112|       }\n01113|       \n01114|       // –§–æ–ª–ª–±—ç–∫ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –≥–æ—Ä–æ–¥–æ–≤\n01115|       const fallbackWarehouses: { [key: string]: string } = {\n01116|         '–º–æ—Å–∫–≤–∞': 'dc6c746d-812d-11e4-bbfc-001999d8b3c5',\n01117|         '—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥': 'b436c978-086d-11e6-b6ca-00155d668909',\n01118|         '–µ–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥': '550e8400-e29b-41d4-a716-446655440000'\n01119|       };\n01120|       \n01121|       const normalizedCity = address.toLowerCase().trim()\n01122|         .replace(/—ë/g, '–µ')\n01123|         .replace(/[\\s\\-\\.]+/g, '');\n01124|       \n01125|       for (const [city, warehouseId] of Object.entries(fallbackWarehouses)) {\n01126|         const normalizedCityKey = city.replace(/[\\s\\-\\.]+/g, '');\n01127|         if (normalizedCity.includes(normalizedCityKey) || normalizedCityKey.includes(normalizedCity)) {\n01128|           return warehouseId;\n01129|         }\n01130|       }\n01131|       \n01132|       return null;\n01133|     } catch (error) {\n01134|       console.error('–û—à–∏–±–∫–∞ –ø–æ–∏—Å–∫–∞ —Å–∫–ª–∞–¥–∞ –ü–≠–ö:', error);\n01135|       return null;\n01136|     }\n01137|   };\n01138| \n01139|   // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö —á–µ—Ä–µ–∑ –ø—É–±–ª–∏—á–Ω—ã–π API\n01140|   const calculatePEK = async (): Promise<CalculationResult> => {\n01141|     const apiUrl = 'http://calc.pecom.ru/bitrix/components/pecom/calc/ajax.php';\n01142|     \n01143|     try {\n01144|       // –ü–æ–ª—É—á–∞–µ–º ID –≥–æ—Ä–æ–¥–æ–≤\n01145|       const fromCityId = await findPekCityId(form.fromCity);\n01146|       const toCityId = await findPekCityId(form.toCity);\n01147|       \n01148|       if (!fromCityId || !toCityId) {\n01149|         return {\n01150|           company: '–ü–≠–ö',\n01151|           price: 0,\n01152|           days: 0,\n01153|           error: `–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –±–∞–∑–µ –ü–≠–ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: ${!fromCityId ? form.fromCity : ''} ${!toCityId ? form.toCity : ''}`.trim(),\n01154|           apiUrl,\n01155|           requestData: { fromCity: form.fromCity, toCity: form.toCity, fromCityId, toCityId },\n01156|           responseData: null\n01157|         };\n01158|       }\n01159| \n01160|       // –§–æ—Ä–º–∏—Ä—É–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –ø—É–±–ª–∏—á–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏\n01161|       const params = new URLSearchParams();\n01162|       \n01163|       // –î–æ–±–∞–≤–ª—è–µ–º –≥—Ä—É–∑—ã —Å–æ–≥–ª–∞—Å–Ω–æ —Ñ–æ—Ä–º–∞—Ç—É: –®–∏—Ä–∏–Ω–∞ (–º), –î–ª–∏–Ω–∞ (–º), –í—ã—Å–æ—Ç–∞ (–º), –û–±—ä–µ–º (–º3), –í–µ—Å (–∫–≥), –ù–µ–≥–∞–±–∞—Ä–∏—Ç (0/1), –ó–¢–£ (0/1)\n01164|       form.cargos.forEach((cargo, index) => {\n01165|         const width = cargo.width / 100; // –ø–µ—Ä–µ–≤–æ–¥–∏–º —Å–º –≤ –º–µ—Ç—Ä—ã\n01166|         const length = cargo.length / 100;\n01167|         const height = cargo.height / 100;\n01168|         const volume = width * length * height;\n01169|         const weight = cargo.weight;\n01170|         const isOversized = (width > 2.4 || length > 12 || height > 2.7 || weight > 1500) ? 1 : 0;\n01171|         const needZTU = form.needPackaging ? 1 : 0;\n01172|         \n01173|         params.append(`places[${index}][]`, width.toString());\n01174|         params.append(`places[${index}][]`, length.toString());\n01175|         params.append(`places[${index}][]`, height.toString());\n01176|         params.append(`places[${index}][]`, volume.toString());\n01177|         params.append(`places[${index}][]`, weight.toString());\n01178|         params.append(`places[${index}][]`, isOversized.toString());\n01179|         params.append(`places[${index}][]`, needZTU.toString());\n01180|       });\n01181|       \n01182|       // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–±–æ—Ä–∞\n01183|       params.append('take[town]', fromCityId.toString());\n01184|       params.append('take[tent]', '0'); // —Ä–∞—Å—Ç–µ–Ω—Ç—Ä–æ–≤–∫–∞\n01185|       params.append('take[gidro]', form.needLoading ? '1' : '0'); // –≥–∏–¥—Ä–æ–ª–∏—Ñ—Ç\n01186|       params.append('take[manip]', '0'); // –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä\n01187|       params.append('take[speed]', '0'); // —Å—Ä–æ—á–Ω—ã–π –∑–∞–±–æ—Ä\n01188|       params.append('take[moscow]', '0'); // –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –ú–æ—Å–∫–≤–µ\n01189|       \n01190|       // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ—Å—Ç–∞–≤–∫–∏\n01191|       params.append('deliver[town]', toCityId.toString());\n01192|       params.append('deliver[tent]', '0');\n01193|       params.append('deliver[gidro]', form.needLoading ? '1' : '0');\n01194|       params.append('deliver[manip]', '0');\n01195|       params.append('deliver[speed]', '0');\n01196|       params.append('deliver[moscow]', '0');\n01197|       \n01198|       // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏\n01199|       params.append('plombir', '0'); // –ø–ª–æ–º–±—ã\n01200|       params.append('strah', form.needInsurance ? form.declaredValue.toString() : '0'); // —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞\n01201|       params.append('ashan', '0'); // –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ –ê—à–∞–Ω\n01202|       params.append('night', '0'); // –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è\n01203|       params.append('pal', '0'); // –∑–∞–ø–∞–ª–ª–µ—á–∏–≤–∞–Ω–∏–µ\n01204|       params.append('pallets', '0'); // –ø–∞–ª–ª–µ—Ç–Ω–∞—è –ø–µ—Ä–µ–≤–æ–∑–∫–∞\n01205| \n01206|       const fullUrl = `${apiUrl}?${params.toString()}`;\n01207|       const requestData = Object.fromEntries(params);\n01208| \n01209|       console.log('–ü–≠–ö –∑–∞–ø—Ä–æ—Å URL:', fullUrl);\n01210|       console.log('–ü–≠–ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:', requestData);\n01211| \n01212|       // –ü—Ä—è–º–æ–π –∑–∞–ø—Ä–æ—Å –∫ API (–±–µ–∑ –ø—Ä–æ–∫—Å–∏, —Ç–∞–∫ –∫–∞–∫ HTTPS —Å–∞–π—Ç –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã)\n01213|       const response = await fetch(fullUrl);\n01214|       const data = await response.json();\n01215|       \n01216|       console.log('–ü–≠–ö –æ—Ç–≤–µ—Ç:', data);\n01217| \n01218|       if (response.ok && data.success) {\n01219|         let totalPrice = 0;\n01220|         let services: { name: string; description: string; price: number }[] = [];\n01221|         \n01222|         // –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏\n01223|         if (data.data?.totalCost) {\n01224|           totalPrice = data.data.totalCost;\n01225|           \n01226|           // –†–∞–∑–±–∏–≤–∫–∞ –ø–æ —É—Å–ª—É–≥–∞–º –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞\n01227|           if (data.data.services) {\n01228|             data.data.services.forEach((service: any) => {\n01229|               services.push({\n01230|                 name: service.name || '–£—Å–ª—É–≥–∞ –ü–≠–ö',\n01231|                 description: service.description || '',\n01232|                 price: service.cost || 0\n01233|               });\n01234|             });\n01235|           } else {\n01236|             // –û—Å–Ω–æ–≤–Ω–∞—è —É—Å–ª—É–≥–∞\n01237|             services.push({\n01238|               name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n01239|               description: `${form.fromCity} - ${form.toCity}`,\n01240|               price: totalPrice\n01241|             });\n01242|           }\n01243|         }\n01244|         \n01245|         // –ó–∞–±–æ—Ä –≥—Ä—É–∑–∞\n01246|         if (data.data?.pickupCost && form.fromAddressDelivery) {\n01247|           services.push({\n01248|             name: '–ó–∞–±–æ—Ä –≥—Ä—É–∑–∞',\n01249|             description: '–û—Ç –∞–¥—Ä–µ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è',\n01250|             price: data.data.pickupCost\n01251|           });\n01252|         }\n01253|         \n01254|         // –î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ –∞–¥—Ä–µ—Å–∞\n01255|         if (data.data?.deliveryCost && form.toAddressDelivery) {\n01256|           services.push({\n01257|             name: '–î–æ—Å—Ç–∞–≤–∫–∞ –≥—Ä—É–∑–∞',\n01258|             description: '–î–æ –∞–¥—Ä–µ—Å–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è',\n01259|             price: data.data.deliveryCost\n01260|           });\n01261|         }\n01262| \n01263|         // –°—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏\n01264|         const deliveryDays = data.data?.deliveryDays || 3;\n01265| \n01266|         return {\n01267|           company: '–ü–≠–ö',\n01268|           price: Math.round(totalPrice),\n01269|           days: deliveryDays,\n01270|           details: {\n01271|             services,\n01272|             totalCost: data.data?.totalCost,\n01273|             pickupCost: data.data?.pickupCost,\n01274|             deliveryCost: data.data?.deliveryCost,\n01275|             deliveryDays: data.data?.deliveryDays,\n01276|             fromCityId,\n01277|             toCityId,\n01278|             rawData: data.data\n01279|           },\n01280|           requestData,\n01281|           responseData: data,\n01282|           apiUrl\n01283|         };\n01284|       } else {\n01285|         // –§–æ–ª–ª–±—ç–∫ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥–ª—É—à–∫—É –µ—Å–ª–∏ API –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç\n01286|         const totalWeight = form.cargos.reduce((sum, cargo) => sum + cargo.weight, 0);\n01287|         let basePrice = totalWeight * 15; // 15 —Ä—É–± –∑–∞ –∫–≥ –±–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞\n01288|         \n01289|         if (form.fromAddressDelivery) basePrice += 500; // –∑–∞–±–æ—Ä\n01290|         if (form.toAddressDelivery) basePrice += 500; // –¥–æ—Å—Ç–∞–≤–∫–∞\n\n(File has more lines. Use 'offset' parameter to read beyond line 1290)\n</file>",
    "metadata": {
      "preview": "      \n      return null;\n    } catch (error) {\n      console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ø–Ω–¥–µ–∫—Å:', error);\n      return null;\n    }\n  };\n\n  // –†–∞—Å—á–µ—Ç –¥–ª—è –ü–≠–ö —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API\n  const calculatePEK = async (): Promise<CalculationResult> => {\n    const apiUrl = 'https://kabinet.pecom.ru/api/v1/calculateprice/';\n    \n    try {\n      // –ü–æ–ª—É—á–∞–µ–º ID —Å–∫–ª–∞–¥–æ–≤ –ø–æ –≥–æ—Ä–æ–¥–∞–º\n      const senderWarehouseId = getPekWarehouseId(form.fromCity);\n      const receiverWarehouseId = getPekWarehouseId(form.toCity);\n      \n      if (!senderWarehouseId || !receiverWarehouseId) {\n        return {\n          company: '–ü–≠–ö',"
    },
    "title": "app/page.tsx",
    "time": {
      "start": 1758903192603,
      "end": 1758903192606
    }
  }
}