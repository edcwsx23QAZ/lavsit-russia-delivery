{
  "id": "prt_9e315f4cd001kLY4Bh1JNCov8q",
  "messageID": "msg_9e315d7c1001kttRmLAPdJnhuz",
  "sessionID": "ses_6852784ecffeuHwynj83p2lr14",
  "type": "tool",
  "tool": "edit",
  "callID": "call_90242734",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "components/diagnostic/ApiTestingSection.tsx",
      "oldString": "  const renderApiCard = (\n    name: string,\n    title: string,\n    color: string,\n    isLoading: boolean,\n    onTest: () => void,\n    resultKey: string\n  ) => {\n    const result = diagnosticResults[resultKey];\n    \n    return (\n      <Card className=\"border-gray-700 bg-gray-900\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Truck className={`h-5 w-5 ${color}`} />\n              {title}\n            </div>\n            <Button \n              onClick={onTest} \n              disabled={isLoading}\n              size=\"sm\"\n              variant=\"outline\"\n            >\n              {isLoading ? 'Тестирование...' : 'Тест'}\n            </Button>\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          {result ? (\n            <Alert className={getStatusColor(result.status)}>\n              <div className=\"flex items-start gap-2\">\n                {getStatusIcon(result.status)}\n                <div className=\"flex-1\">\n                  <AlertDescription>\n                    <div className=\"font-medium mb-2 text-white\">{result.message}</div>\n                    {result.timing && (\n                      <Badge variant=\"outline\" className=\"mb-2\">\n                        Время ответа: {result.timing}мс\n                      </Badge>\n                    )}\n                    {result.details && (\n                      <details className=\"mt-2\">\n                        <summary className=\"cursor-pointer text-sm text-gray-300\">Подробности</summary>\n                        <pre className=\"text-xs mt-2 p-2 bg-gray-800 rounded overflow-auto\">\n                          {JSON.stringify(result.details, null, 2)}\n                        </pre>\n                      </details>\n                    )}\n                  </AlertDescription>\n                </div>\n              </div>\n            </Alert>\n          ) : (\n            <p className=\"text-gray-400\">Нажмите \"Тест\" для проверки API {title}</p>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };",
      "newString": "  const renderApiCard = (\n    name: string,\n    title: string,\n    color: string,\n    isLoading: boolean,\n    onTest: () => void,\n    resultKey: string\n  ) => {\n    const result = diagnosticResults[resultKey];\n\n    return (\n      <Card className=\"border-gray-700 bg-gray-900/80 backdrop-blur-sm hover:bg-gray-800/80 transition-all duration-300 hover:shadow-lg hover:shadow-gray-900/50 transform hover:scale-[1.02]\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className={`p-2 rounded-lg bg-gray-800/50 ${isLoading ? 'animate-pulse' : ''}`}>\n                <Truck className={`h-5 w-5 ${color}`} />\n              </div>\n              <div>\n                <div className=\"font-semibold text-white\">{title}</div>\n                <div className=\"text-xs text-gray-400\">API Status</div>\n              </div>\n            </div>\n            <Button\n              onClick={onTest}\n              disabled={isLoading}\n              size=\"sm\"\n              className={`transition-all duration-300 ${\n                isLoading\n                  ? 'bg-gray-600 cursor-not-allowed'\n                  : 'bg-blue-600 hover:bg-blue-700 hover:shadow-md'\n              }`}\n            >\n              {isLoading ? (\n                <>\n                  <Activity className=\"h-3 w-3 mr-1 animate-spin\" />\n                  Testing...\n                </>\n              ) : (\n                'Test'\n              )}\n            </Button>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"pt-0\">\n          {result ? (\n            <Alert className={`${getStatusColor(result.status)} border-l-4 animate-in fade-in duration-300`}>\n              <div className=\"flex items-start gap-3\">\n                <div className=\"mt-0.5\">\n                  {getStatusIcon(result.status)}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <AlertDescription>\n                    <div className=\"font-medium mb-2 text-white text-sm leading-relaxed\">\n                      {result.message}\n                    </div>\n                    <div className=\"flex flex-wrap gap-2 mb-2\">\n                      {result.timing && (\n                        <Badge variant=\"outline\" className=\"text-xs bg-gray-800/50 border-gray-600\">\n                          {result.timing}ms\n                        </Badge>\n                      )}\n                      <Badge\n                        variant=\"outline\"\n                        className={`text-xs ${\n                          result.status === 'success'\n                            ? 'bg-green-900/50 border-green-600 text-green-300'\n                            : result.status === 'error'\n                            ? 'bg-red-900/50 border-red-600 text-red-300'\n                            : 'bg-yellow-900/50 border-yellow-600 text-yellow-300'\n                        }`}\n                      >\n                        {result.status === 'success' ? 'Success' : result.status === 'error' ? 'Error' : 'Warning'}\n                      </Badge>\n                    </div>\n                    {result.details && (\n                      <details className=\"mt-3 group\">\n                        <summary className=\"cursor-pointer text-xs text-gray-400 hover:text-gray-300 transition-colors flex items-center gap-1\">\n                          <span>View Details</span>\n                          <svg className=\"w-3 h-3 transition-transform group-open:rotate-180\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                          </svg>\n                        </summary>\n                        <pre className=\"text-xs mt-2 p-3 bg-gray-800/50 rounded-lg overflow-x-auto border border-gray-700 max-h-32 overflow-y-auto\">\n                          {JSON.stringify(result.details, null, 2)}\n                        </pre>\n                      </details>\n                    )}\n                  </AlertDescription>\n                </div>\n              </div>\n            </Alert>\n          ) : (\n            <div className=\"text-center py-6\">\n              <div className=\"w-12 h-12 mx-auto mb-3 bg-gray-800/50 rounded-full flex items-center justify-center\">\n                <Truck className={`h-6 w-6 ${color} opacity-50`} />\n              </div>\n              <p className=\"text-gray-400 text-sm\">Click \"Test\" to check {title} API</p>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };"
    },
    "output": "",
    "metadata": {
      "diagnostics": {},
      "diff": "Index: /home/user/project/components/diagnostic/ApiTestingSection.tsx\n===================================================================\n--- /home/user/project/components/diagnostic/ApiTestingSection.tsx\n+++ /home/user/project/components/diagnostic/ApiTestingSection.tsx\n@@ -67,44 +67,83 @@\n   onTest: () => void,\n   resultKey: string\n ) => {\n   const result = diagnosticResults[resultKey];\n-  \n+\n   return (\n-    <Card className=\"border-gray-700 bg-gray-900\">\n-      <CardHeader>\n+    <Card className=\"border-gray-700 bg-gray-900/80 backdrop-blur-sm hover:bg-gray-800/80 transition-all duration-300 hover:shadow-lg hover:shadow-gray-900/50 transform hover:scale-[1.02]\">\n+      <CardHeader className=\"pb-3\">\n         <CardTitle className=\"flex items-center justify-between\">\n-          <div className=\"flex items-center gap-2\">\n-            <Truck className={`h-5 w-5 ${color}`} />\n-            {title}\n+          <div className=\"flex items-center gap-3\">\n+            <div className={`p-2 rounded-lg bg-gray-800/50 ${isLoading ? 'animate-pulse' : ''}`}>\n+              <Truck className={`h-5 w-5 ${color}`} />\n+            </div>\n+            <div>\n+              <div className=\"font-semibold text-white\">{title}</div>\n+              <div className=\"text-xs text-gray-400\">API Status</div>\n+            </div>\n           </div>\n-          <Button \n-            onClick={onTest} \n+          <Button\n+            onClick={onTest}\n             disabled={isLoading}\n             size=\"sm\"\n-            variant=\"outline\"\n+            className={`transition-all duration-300 ${\n+              isLoading\n+                ? 'bg-gray-600 cursor-not-allowed'\n+                : 'bg-blue-600 hover:bg-blue-700 hover:shadow-md'\n+            }`}\n           >\n-            {isLoading ? 'Тестирование...' : 'Тест'}\n+            {isLoading ? (\n+              <>\n+                <Activity className=\"h-3 w-3 mr-1 animate-spin\" />\n+                Testing...\n+              </>\n+            ) : (\n+              'Test'\n+            )}\n           </Button>\n         </CardTitle>\n       </CardHeader>\n-      <CardContent>\n+      <CardContent className=\"pt-0\">\n         {result ? (\n-          <Alert className={getStatusColor(result.status)}>\n-            <div className=\"flex items-start gap-2\">\n-              {getStatusIcon(result.status)}\n-              <div className=\"flex-1\">\n+          <Alert className={`${getStatusColor(result.status)} border-l-4 animate-in fade-in duration-300`}>\n+            <div className=\"flex items-start gap-3\">\n+              <div className=\"mt-0.5\">\n+                {getStatusIcon(result.status)}\n+              </div>\n+              <div className=\"flex-1 min-w-0\">\n                 <AlertDescription>\n-                  <div className=\"font-medium mb-2 text-white\">{result.message}</div>\n-                  {result.timing && (\n-                    <Badge variant=\"outline\" className=\"mb-2\">\n-                      Время ответа: {result.timing}мс\n+                  <div className=\"font-medium mb-2 text-white text-sm leading-relaxed\">\n+                    {result.message}\n+                  </div>\n+                  <div className=\"flex flex-wrap gap-2 mb-2\">\n+                    {result.timing && (\n+                      <Badge variant=\"outline\" className=\"text-xs bg-gray-800/50 border-gray-600\">\n+                        {result.timing}ms\n+                      </Badge>\n+                    )}\n+                    <Badge\n+                      variant=\"outline\"\n+                      className={`text-xs ${\n+                        result.status === 'success'\n+                          ? 'bg-green-900/50 border-green-600 text-green-300'\n+                          : result.status === 'error'\n+                          ? 'bg-red-900/50 border-red-600 text-red-300'\n+                          : 'bg-yellow-900/50 border-yellow-600 text-yellow-300'\n+                      }`}\n+                    >\n+                      {result.status === 'success' ? 'Success' : result.status === 'error' ? 'Error' : 'Warning'}\n                     </Badge>\n-                  )}\n+                  </div>\n                   {result.details && (\n-                    <details className=\"mt-2\">\n-                      <summary className=\"cursor-pointer text-sm text-gray-300\">Подробности</summary>\n-                      <pre className=\"text-xs mt-2 p-2 bg-gray-800 rounded overflow-auto\">\n+                    <details className=\"mt-3 group\">\n+                      <summary className=\"cursor-pointer text-xs text-gray-400 hover:text-gray-300 transition-colors flex items-center gap-1\">\n+                        <span>View Details</span>\n+                        <svg className=\"w-3 h-3 transition-transform group-open:rotate-180\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n+                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n+                        </svg>\n+                      </summary>\n+                      <pre className=\"text-xs mt-2 p-3 bg-gray-800/50 rounded-lg overflow-x-auto border border-gray-700 max-h-32 overflow-y-auto\">\n                         {JSON.stringify(result.details, null, 2)}\n                       </pre>\n                     </details>\n                   )}\n@@ -112,9 +151,14 @@\n               </div>\n             </div>\n           </Alert>\n         ) : (\n-          <p className=\"text-gray-400\">Нажмите \"Тест\" для проверки API {title}</p>\n+          <div className=\"text-center py-6\">\n+            <div className=\"w-12 h-12 mx-auto mb-3 bg-gray-800/50 rounded-full flex items-center justify-center\">\n+              <Truck className={`h-6 w-6 ${color} opacity-50`} />\n+            </div>\n+            <p className=\"text-gray-400 text-sm\">Click \"Test\" to check {title} API</p>\n+          </div>\n         )}\n       </CardContent>\n     </Card>\n   );\n"
    },
    "title": "components/diagnostic/ApiTestingSection.tsx",
    "time": {
      "start": 1760451491022,
      "end": 1760451491031
    }
  }
}