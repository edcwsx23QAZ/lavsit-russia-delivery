{
  "id": "prt_ab46eb65a001Tfw0uJPjLGjsSe",
  "sessionID": "ses_54b97e247ffenCZZa4jZiIWD0l",
  "messageID": "msg_ab46e7125002KJ8KMputAx3vwW",
  "type": "tool",
  "callID": "call_24c822eb58b54d6aab260574",
  "tool": "read",
  "state": {
    "status": "completed",
    "input": {
      "filePath": "/home/user/project/components/TruckVisualization.tsx",
      "limit": 100
    },
    "output": "<file>\n00001| 'use client';\n00002| \n00003| import React, { useState } from 'react';\n00004| import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n00005| import { Button } from '@/components/ui/button';\n00006| import { Slider } from '@/components/ui/slider';\n00007| import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\n00008| import { Truck, Move, RotateCw as Rotate3d, ChevronDown } from 'lucide-react';\n00009| \n00010| interface Cargo {\n00011|   id: string;\n00012|   length: number; // в мм\n00013|   width: number;  // в мм\n00014|   height: number; // в мм\n00015|   weight: number;\n00016|   productName?: string;\n00017| }\n00018| \n00019| interface Orientation {\n00020|   length: number;\n00021|   width: number;\n00022|   height: number;\n00023|   rotationAngle: number; // в градусах\n00024|   flipped: boolean; // перевернут ли груз по высоте\n00025| }\n00026| \n00027| interface CargoPlacement {\n00028|   cargo: Cargo;\n00029|   x: number;\n00030|   y: number;\n00031|   z: number;\n00032|   orientation: Orientation;\n00033|   color: string;\n00034|   projectedVertices: Array<{x: number, y: number}>; // Для 3D отображения\n00035| }\n00036| \n00037| interface TruckVisualizationProps {\n00038|   cargos: Cargo[];\n00039|   isVisible?: boolean;\n00040| }\n00041| \n00042| // Типы автомобилей\n00043| const VEHICLE_TYPES = {\n00044|   'ford-transit': {\n00045|     name: 'Форд Транзит',\n00046|     dimensions: { length: 4200, width: 2025, height: 2025 }\n00047|   },\n00048|   'truck-18m3': {\n00049|     name: 'Фура 18м3',\n00050|     dimensions: { length: 4200, width: 2200, height: 2000 }\n00051|   }\n00052| };\n00053| \n00054| // Размеры кузова в мм (по умолчанию)\n00055| const TRUCK_DIMENSIONS = VEHICLE_TYPES['ford-transit'].dimensions;\n00056| \n00057| // Углы поворота для размещения грузов (в градусах)\n00058| const ROTATION_ANGLES = [0, 45, 90, 135, 180, 225, 270, 315];\n00059| \n00060| // Цвета для разных грузов\n00061| const CARGO_COLORS = [\n00062|   '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FECA57',\n00063|   '#FF9FF3', '#54A0FF', '#5F27CD', '#00D2D3', '#FF9F43',\n00064|   '#10AC84', '#EE5A24', '#0984E3', '#6C5CE7', '#FD79A8'\n00065| ];\n00066| \n00067| export default function TruckVisualization({ cargos, isVisible = false }: TruckVisualizationProps) {\n00068|   // Состояние для 3D трансформаций (вид сзади 3/4, стоящий на колесах)\n00069|   const [rotationX, setRotationX] = useState(-90);   // Поворот по оси X\n00070|   const [rotationY, setRotationY] = useState(55); // Поворот по оси Y\n00071|   const [rotationZ, setRotationZ] = useState(0);   // Поворот по си Z\n00072|   const [positionX, setPositionX] = useState(51);  // Позиция по X (0-100%)\n00073|   const [positionY, setPositionY] = useState(35);  // Позиция по Y\n00074|   const [scale, setScale] = useState(70); // Оптимальный масштаб для демонстрации\n00075|   const [showControls, setShowControls] = useState(false); // Показывать ли элементы управления\n00076|   const [selectedVehicleType, setSelectedVehicleType] = useState<keyof typeof VEHICLE_TYPES>('ford-transit'); // Выбранный тип автомобиля\n00077|   \n00078|   // Получение размеров выбранного автомобиля\n00079|   const getCurrentVehicleDimensions = () => VEHICLE_TYPES[selectedVehicleType].dimensions;\n00080|   \n00081|   // Функция проверки ключевых слов\n00082|   const isChairOrSeat = (productName?: string) => {\n00083|     if (!productName) return false;\n00084|     const lowerName = productName.toLowerCase();\n00085|     return lowerName.includes('стул') || lowerName.includes('кресло');\n00086|   };\n00087| \n00088|   // Генерация всех возможных ориентаций груза\n00089|   const generateOrientations = (cargo: Cargo): Orientation[] => {\n00090|     const orientations: Orientation[] = [];\n00091|     const baseDimensions = [\n00092|       [cargo.length, cargo.width, cargo.height],\n00093|       [cargo.width, cargo.length, cargo.height],\n00094|       [cargo.length, cargo.height, cargo.width],\n00095|       [cargo.height, cargo.length, cargo.width],\n00096|       [cargo.width, cargo.height, cargo.length],\n00097|       [cargo.height, cargo.width, cargo.length]\n00098|     ];\n00099| \n00100|     // Для стульев/кресел ограничиваем повороты (нельзя переворачивать)\n\n(File has more lines. Use 'offset' parameter to read beyond line 100)\n</file>",
    "title": "components/TruckVisualization.tsx",
    "metadata": {
      "preview": "'use client';\n\nimport React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Slider } from '@/components/ui/slider';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Truck, Move, RotateCw as Rotate3d, ChevronDown } from 'lucide-react';\n\ninterface Cargo {\n  id: string;\n  length: number; // в мм\n  width: number;  // в мм\n  height: number; // в мм\n  weight: number;\n  productName?: string;\n}\n\ninterface Orientation {\n  length: number;"
    },
    "time": {
      "start": 1763963745884,
      "end": 1763963745887
    }
  }
}